<<<<<<< HEAD
{"version":3,"file":"5796.js","mappings":"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","sources":["./src/app/dao/comparecimento-dao.service.ts","./src/app/models/plano-trabalho-consolidacao.model.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao/plano-trabalho-consolidacao.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao/plano-trabalho-consolidacao.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-routing.module.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho.module.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\r\nimport { Comparecimento } from '../models/comparecimento.model';\r\nimport { DaoBaseService } from './dao-base.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ComparecimentoDaoService extends DaoBaseService<Comparecimento> {\r\n\r\n  constructor(protected injector: Injector) {\r\n    super(\"Comparecimento\", injector);\r\n    this.inputSearchConfig.searchFields = [\"data_comparecimento\"];\r\n  }\r\n\r\n}\r\n\r\n","import { Avaliacao, HasAvaliacao } from './avaliacao.model';\r\nimport { Base } from './base.model';\r\nimport { PlanoTrabalho } from './plano-trabalho.model';\r\nimport { HasStatus, StatusJustificativa } from './status-justificativa.model';\r\n\r\nexport type PlanoTrabalhoConsolidacaoStatus = 'CONCLUIDO' | 'AVALIADO' | 'INCLUIDO';\r\n\r\nexport class PlanoTrabalhoConsolidacao extends Base implements HasAvaliacao, HasStatus {\r\n    public plano_trabalho?: PlanoTrabalho;\r\n    public avaliacao?: Avaliacao;\r\n\r\n    public data_inicio: Date = new Date();\r\n    public data_fim: Date = new Date();\r\n    public status: PlanoTrabalhoConsolidacaoStatus = \"INCLUIDO\"; // Status atual da consolidação\r\n    public avaliacoes: Avaliacao[] = [];\r\n    public status_historico: StatusJustificativa[] = [];\r\n\r\n    public plano_trabalho_id: string = \"\";\r\n    public avaliacao_id: string | null = null;\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","import { Component, Injector, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { GridComponent, GridGroupSeparator } from 'src/app/components/grid/grid.component';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\nimport { PlanoTrabalhoConsolidacao } from 'src/app/models/plano-trabalho-consolidacao.model';\nimport { PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Avaliacao } from 'src/app/models/avaliacao.model';\nimport { Base } from 'src/app/models/base.model';\nimport { TipoAvaliacao } from 'src/app/models/tipo-avaliacao.model';\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\nimport { AvaliacaoDaoService } from 'src/app/dao/avaliacao-dao.service';\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\nimport { Programa } from 'src/app/models/programa.model';\nimport { LookupItem } from 'src/app/services/lookup.service';\nimport { UnidadeService } from 'src/app/services/unidade.service';\n\n@Component({\n  selector: 'app-plano-trabalho-consolidacao-avaliacao',\n  templateUrl: './plano-trabalho-consolidacao-avaliacao.component.html',\n  styleUrls: ['./plano-trabalho-consolidacao-avaliacao.component.scss']\n})\n\nexport class PlanoTrabalhoConsolidacaoAvaliacaoComponent extends PageListBase<PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoDaoService> {\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\n  public usuarioDao: UsuarioDaoService;\n  public unidadeDao: UnidadeDaoService;\n  public avaliacaoDao: AvaliacaoDaoService;\n  public planoTrabalhoService: PlanoTrabalhoService;\n  public unidadeService: UnidadeService;\n  public extraJoin: string[];\n  public extra: any;\n\n  public avaliacoes: Avaliacao[] = [];\n  public avaliacao: Avaliacao = new Avaliacao();\n  public consolidacaoId?: string[] = [];//public consolidacaoId?: PlanoTrabalhoConsolidacao[] = [];\n  public joinAvaliacao: string[] = [\"avaliador\", \"entregas_checklist\", \"tipo_avaliacao.notas\"];\n\n  constructor(public injector: Injector) {\n    super(injector, PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoDaoService);\n    this.unidadeService = injector.get<UnidadeService>(UnidadeService);\n    /* Inicializações */\n    this.join = [\n      \"avaliacao\", // \"avaliacao.tipoAvaliacao.notas\"\n      \"plano_trabalho:id\", // \"planoTrabalho.unidade:id,sigla,nome\", \"planoTrabalho.unidade.gestor:id,unidade_id,usuario_id\", \"planoTrabalho.unidade.gestorSubstituto:id,unidade_id,usuario_id\", \"planoTrabalho.tipoModalidade:id,nome\", \"planoTrabalho.usuario:id,nome,apelido,url_foto\"\n    ];\n    this.extraJoin = [ // Utilizado pelo RefreshId\n      \"avaliacao.tipoAvaliacao.notas\",\n      \"planoTrabalho.unidade:id,sigla,nome\", \n      \"planoTrabalho.unidade.gestor:id,unidade_id,usuario_id\", \n      \"planoTrabalho.unidade.gestoresSubstitutos:id,unidade_id,usuario_id\", \n      \"planoTrabalho.tipoModalidade:id,nome\", \n      \"planoTrabalho.usuario:id,nome,apelido,foto_perfil,url_foto\"//id,nome,apelido,url_foto,foto_perfil\n    ];\n    this.groupBy = [\n      { field: \"plano_trabalho.unidade.sigla\", label: this.lex.translate(\"Unidade\") }, \n      { field: \"plano_trabalho.unidade.id\", label: \"Unidade Id\" }, \n      { field: \"plano_trabalho.usuario.nome\", label: this.lex.translate(\"Participante\") },\n      { field: \"plano_trabalho.usuario.id\", label: \"Usuário Id\" }\n    ];\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\n    this.avaliacaoDao = injector.get<AvaliacaoDaoService>(AvaliacaoDaoService);\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\n    this.title = \"Avaliações \" + this.lex.translate(\"das Consolidações\");\n    this.code = \"MOD_PTR_CSLD_AVAL\";\n    this.filter = this.fh.FormBuilder({\n      usuario_id: {default: \"\"},\n      unidade_id: {default: \"\"},\n      unidades_subordinadas: {default: false},\n      incluir_arquivados: {default: false}\n    });\n    this.addOption(this.OPTION_INFORMACOES);\n    this.addOption(this.OPTION_LOGS, \"MOD_AUDIT_LOG\");\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    this.filter!.controls.unidade_id.setValue(this.auth.unidadeGestor()?.id || this.auth.lotacao || null);\n  }\n\n  public filterWhere = (filter: FormGroup) => {\n    let result: any[] = [];\n    let form: any = filter.value;\n    result.push([\"status\", \"in\", [\"CONCLUIDO\", \"AVALIADO\"]]);\n//    if(form.usuario_id?.length) result.push([\"usuario_id\", \"==\", form.usuario_id]);\n    if(form.usuario_id?.length) result.push([\"plano_trabalho.usuario.id\", \"==\", form.usuario_id]);\n    if(form.unidade_id?.length) result.push([\"plano_trabalho.unidade.id\", \"==\", form.unidade_id]);\n    if(form.unidades_subordinadas) result.push([\"unidades_subordinadas\", \"==\", true]);\n    if(form.incluir_arquivados) result.push([\"incluir_arquivados\", \"==\", true]);\n    return result;\n  }\n\n  public get canFilterSubordinadas(): string | undefined {\n    return this.unidadeService.isGestorUnidade(this.filter!.controls.unidade_id.value) ? undefined : 'true';\n  }\n\n  public usuarioSeparator(separator: GridGroupSeparator) {\n    let usuarioId = separator.group[3].value;\n    separator.metadata = separator.metadata || {};\n    separator.metadata.usuario = separator.metadata.usuario || this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.usuario_id == usuarioId)?.usuario;\n    return separator.metadata.usuario;\n  }\n\n  public unidadeSeparator(separator: GridGroupSeparator) {\n    let unidadeId = separator.group[1].value;\n    separator.metadata = separator.metadata || {};\n    separator.metadata.unidade = separator.metadata.unidade || this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.unidade_id == unidadeId)?.unidade;\n    return separator.metadata.unidade;\n  }\n\n  public onUnidadeChange(event: Event) {\n    if(!this.unidadeService.isGestorUnidade(this.filter!.controls.unidade_id.value)) this.filter!.controls.unidades_subordinadas.setValue(false);\n  }\n\n  public onGridLoad(rows?: Base[]) {\n    this.extra = (this.grid?.query || this.query!).extra;\n    let planosTrabalhos = (this.extra?.planos_trabalhos || []) as PlanoTrabalho[];\n    planosTrabalhos.forEach(p => {\n      let plano = p as PlanoTrabalho;\n      plano.programa = this.extra?.programas?.find((x: Programa) => x.id == plano.programa_id);\n    });\n    rows?.forEach(v => {\n      let consolidacao = v as PlanoTrabalhoConsolidacao;\n      consolidacao.plano_trabalho = this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.id == consolidacao.plano_trabalho_id);\n      if(consolidacao.avaliacao) consolidacao.avaliacao.tipo_avaliacao = this.extra?.tipos_avaliacoes?.find((x: TipoAvaliacao) => x.id == consolidacao.avaliacao!.tipo_avaliacao_id);\n    });\n  }\n\n  public refreshConsolidacao(consolidacao: PlanoTrabalhoConsolidacao) {\n    (async () => {\n      await this.grid!.query!.refreshId(consolidacao.id, this.extraJoin);\n      this.grid!.refreshRows();\n    })();\n  }\n\n  public anterior(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\n    return (this.grid!.items as PlanoTrabalhoConsolidacao[]).reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_inicio) < this.util.asTimestamp(consolidacao.data_inicio) && (!a || this.util.asTimestamp(a.data_inicio) < this.util.asTimestamp(v.data_inicio)) ? v : a, undefined);\n  }\n\n  public proximo(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\n    return (this.grid!.items as PlanoTrabalhoConsolidacao[]).reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_fim) > this.util.asTimestamp(consolidacao.data_fim) && (!a || this.util.asTimestamp(a.data_fim) > this.util.asTimestamp(v.data_fim)) ? v : a, undefined);\n  }\n\n  public dynamicButtons(row: any): ToolbarButton[] {\n    let result: ToolbarButton[] = [];\n    let consolidacao: PlanoTrabalhoConsolidacao = row as PlanoTrabalhoConsolidacao;\n    let programa: Programa = consolidacao.plano_trabalho!.programa!;\n    const usuarioId = consolidacao.plano_trabalho!.usuario_id;\n    const unidadeId = consolidacao.plano_trabalho!.unidade_id;\n    const anterior = this.anterior(row as PlanoTrabalhoConsolidacao);\n    const proximo = this.proximo(row as PlanoTrabalhoConsolidacao);\n    const isAvaliador = this.auth.hasPermissionTo(\"MOD_PTR_CSLD_AVAL\") && (this.unidadeService.isGestorUnidade(unidadeId) || this.auth.isIntegrante('AVALIADOR_PLANO_TRABALHO', unidadeId));\n    const isUsuarioDoPlano = this.auth.usuario!.id == usuarioId;\n    const BOTAO_AVALIAR = { hint: \"Avaliar\", icon: \"bi bi-star\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, programa, this.refreshConsolidacao.bind(this)) };\n    const BOTAO_REAVALIAR = { hint: \"Reavaliar\", icon: \"bi bi-star-half\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, programa, this.refreshConsolidacao.bind(this)) };\n    const BOTAO_FAZER_RECURSO = { hint: \"Fazer recurso\", id: \"RECORRIDO\", icon: \"bi bi-journal-medical\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.fazerRecurso(row, programa, this.refreshConsolidacao.bind(this)) };\n    const BOTAO_CANCELAR_AVALIACAO = { hint: \"Cancelar avaliação\", id: \"INCLUIDO\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.cancelarAvaliacao(row, this, this.refreshConsolidacao.bind(this)) };\n    /* (RN_CSLD_11) Não pode concluir a consolidação antes que a anterior não esteja concluida, e não pode retornar status da consolidação se a posterior estiver a frente (em status); */\n    const canAvaliar = !anterior || [\"AVALIADO\"].includes(anterior!.status);\n    const canCancelarAvaliacao = !proximo || [\"INCLUIDO\", \"CONCLUIDO\"].includes(proximo!.status);\n    if(consolidacao.status == \"CONCLUIDO\" && canAvaliar && isAvaliador) {\n      result.push(BOTAO_AVALIAR);\n    }\n    if(consolidacao.status == \"AVALIADO\" && consolidacao!.avaliacao) {\n      /* (RN_AVL_2) [PT] O usuário do plano de trabalho que possuir o acesso MOD_PTR_CSLD_REC_AVAL poderá recorrer da nota atribuida dentro do limites estabelecido pelo programa; */\n      if(isUsuarioDoPlano && this.auth.hasPermissionTo('MOD_PTR_CSLD_REC_AVAL') && consolidacao!.avaliacao?.data_avaliacao && \n        (!programa.dias_tolerancia_recurso_avaliacao || \n        (this.util.daystamp(consolidacao!.avaliacao!.data_avaliacao) + programa.dias_tolerancia_recurso_avaliacao > this.util.daystamp(this.auth.hora)))) {\n        result.push(BOTAO_FAZER_RECURSO);\n      }\n      /* (RN_AVL_3) [PT] Após o recurso será realizado nova avaliação, podendo essa ser novamente recorrida dentro do mesmo prazo estabelecido no programa; */\n      /* (RN_AVL_6) [PT] Qualquer usuário capaz de avaliar tambem terá a capacidade de cancelar a avaliação; */\n      if(canAvaliar && isAvaliador) {\n        result.push(BOTAO_REAVALIAR);\n        if(canCancelarAvaliacao) result.push(BOTAO_CANCELAR_AVALIACAO);\n      }\n    }\n    return result;\n  }\n\n  public async onSelectTab(tab: LookupItem) {\n    if(this.viewInit) this.saveUsuarioConfig({active_tab: tab.key});\n  }\n\n  public initGrid(grid: GridComponent) {\n    grid.queryInit();\n  }\n\n  public filterWhereHistorico = (filter: FormGroup) => {\n    let result: any[] = [];\n    let form: any = filter.value;\n    result.push([\"status\", \"in\", [\"AVALIADO\"]]);\n    if(form.usuario_id?.length) result.push([\"plano_trabalho.usuario.id\", \"==\", form.usuario_id]);\n    if(form.unidade_id?.length) result.push([\"plano_trabalho.unidade.id\", \"==\", form.unidade_id]);\n    if(form.unidades_subordinadas) result.push([\"unidades_subordinadas\", \"==\", true]);\n    if(form.incluir_arquivados) result.push([\"incluir_arquivados\", \"==\", true]);\n    return result;\n  }\n\n  public getAvaliacoes(row: any) {\n    return this.avaliacoes!.filter((x: Avaliacao) => x.plano_trabalho_consolidacao_id == row.id);\n  }\n\n  public async loadData() {\n    this.loading = true;\n    try {\n      this.avaliacoes = await this.avaliacaoDao!.query({where: [[\"plano_trabalho_consolidacao_id\", \"in\", this.consolidacaoId]], join: this.joinAvaliacao, orderBy: [[\"data_avaliacao\", \"desc\"]]}).asPromise();\n      this.avaliacao = this.avaliacoes[0] || this.avaliacao;\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  public onGridLoadHistorico(rows?: Base[]) {\n    this.extra = (this.grid?.query || this.query!).extra;\n    let planosTrabalhos = (this.extra?.planos_trabalhos || []) as PlanoTrabalho[];\n    planosTrabalhos.forEach(p => {\n      let plano = p as PlanoTrabalho;\n      plano.programa = this.extra?.programas?.find((x: Programa) => x.id == plano.programa_id);\n    });\n    rows?.forEach(v => {\n      this.consolidacaoId?.push(v.id);\n      let consolidacao = v as PlanoTrabalhoConsolidacao;\n      consolidacao.plano_trabalho = this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.id == consolidacao.plano_trabalho_id);\n      if(consolidacao.avaliacao) consolidacao.avaliacao.tipo_avaliacao = this.extra?.tipos_avaliacoes?.find((x: TipoAvaliacao) => x.id == consolidacao.avaliacao!.tipo_avaliacao_id);\n    });\n    this.loadData();\n  }\n\n  public getNota(row:any) {\n    return row.tipo_avaliacao.notas.find((x: any) => x.codigo == row.nota);\n  }\n}\n\n","<tabs right [title]=\"isModal ? '' : title\" [select]=\"onSelectTab.bind(this)\">\n    <tab key=\"CONSOLIDACOES\" icon=\"bi bi-clipboard-check\" [label]=\"lex.translate('Consolidações')\" [template]=\"consolidacoes\">\n        <ng-template #consolidacoes>\n            <grid [dao]=\"dao\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [init]=\"initGrid.bind(this)\"\n                [hasAdd]=\"false\" [hasEdit]=\"false\" [loadList]=\"onGridLoad.bind(this)\" [groupTemplate]=\"groupUnidadeUsuario\"><!--[title]=\"isModal ? '' : title\"-->\n                <ng-template let-separator=\"separator\" #groupUnidadeUsuario>\n                    <div class=\"d-flex\">\n                        <div class=\"ms-3\">\n                            <profile-picture [url]=\"usuarioSeparator(separator)?.url_foto\" [size]=\"40\" [hint]=\"usuarioSeparator(separator)?.nome\"></profile-picture>\n                        </div>\n                        <div class=\"flex-fill ms-3\">\n                            <strong>{{usuarioSeparator(separator)?.nome || \"Desconhecido\"}}</strong><br>\n                            <badge [icon]=\"entityService.getIcon('Unidade')\" color=\"primary\" [label]=\"unidadeSeparator(separator)?.sigla || 'Desconhecido'\"></badge>\n                        </div>\n                    </div>\n                </ng-template>\n                <toolbar *ngIf=\"!selectable\"></toolbar>\n                <filter [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"filterCollapsed\" [deleted]=\"this.auth.hasPermissionTo('MOD_AUDIT_DEL')\">\n                    <div class=\"row\">\n                        <input-search [size]=\"5\" #usuario [control]=\"filter!.controls.usuario_id\" controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\n                        <input-search [size]=\"5\" #unidade [control]=\"filter!.controls.unidade_id\" controlName=\"unidade_id\" [dao]=\"unidadeDao\" (change)=\"onUnidadeChange($event)\"></input-search>\n                        <input-switch [size]=\"1\" #subordinadas [disabled]=\"canFilterSubordinadas\" label=\"Sub.\" [control]=\"filter!.controls.unidades_subordinadas\" controlName=\"unidades_subordinadas\" labelInfo=\"Incluir as unidades subordinadas\"></input-switch>\n                        <input-switch [size]=\"1\" #arquivadas label=\"Arq.\" [control]=\"filter!.controls.incluir_arquivados\" controlName=\"incluir_arquivados\" labelInfo=\"Incluir os planos de trabalhos arquivados\"></input-switch>\n                    </div>\n                </filter>\n                <columns>\n                    <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidação')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\n                        <ng-template let-row=\"row\" #columnConsolidacao>\n                            <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\n                        </ng-template>\n                        <ng-template let-row=\"row\" #columnExpandedConsolidacao>\n                            <plano-trabalho-consolidacao-form #consolidacao [disabled]=\"true\" [entity]=\"row\" [planoTrabalho]=\"row.plano_trabalho\" [cdRef]=\"cdRef\"></plano-trabalho-consolidacao-form>\n                        </ng-template>\n                    </column>\n                    <column [title]=\"'Plano de trabalho/Vigência\\nUnidade/Programa/Modalidade'\" [template]=\"columnPlanoTrabalho\">\n                        <ng-template let-row=\"row\" #columnPlanoTrabalho>\n                            {{row.plano_trabalho.usuario.nome}} <badge label=\"Início\" color=\"light\" icon=\"bi bi-calendar2\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_inicio)\"></badge><badge label=\"Término\" color=\"light\" icon=\"bi bi-calendar2-check\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_fim)\"></badge><br>\n                            <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"row.plano_trabalho.unidade?.sigla\" color=\"light\" [hint]=\"lex.translate('Unidade') + ': ' + row.plano_trabalho.unidade?.nome\"></badge>\n                            <badge [icon]=\"entityService.getIcon('Programa')\" [label]=\"row.plano_trabalho.programa?.nome\" color=\"light\" [hint]=\"lex.translate('Programa')\"></badge>\n                            <badge [icon]=\"entityService.getIcon('TipoModalidade')\" [label]=\"row.plano_trabalho.tipo_modalidade?.nome\" color=\"light\" [hint]=\"lex.translate('Tipo de modalidade')\"></badge>\n                        </ng-template>\n                    </column>\n                    <column title=\"Data início\" [template]=\"columnDataInicio\">\n                        <ng-template let-row=\"row\" #columnDataInicio>\n                            {{util.getDateFormatted(row.data_inicio)}}\n                        </ng-template>\n                    </column>\n                    <column title=\"Data fim\" [template]=\"columnDataFim\">\n                        <ng-template let-row=\"row\" #columnDataFim>\n                            <strong>{{util.getDateFormatted(row.data_fim)}}</strong>\n                        </ng-template>\n                    </column>\n                    <column [title]=\"'Estatísticas\\nAvaliações'\" [template]=\"columnEstatisticas\" [width]=\"300\">\n                        <ng-template let-row=\"row\" #columnEstatisticas>\n                            <avaliar-nota-badge *ngIf=\"row.avaliacao\" [align]=\"'left'\" [tipoAvaliacao]=\"row.avaliacao.tipo_avaliacao\" [nota]=\"row.avaliacao.nota\"></avaliar-nota-badge>\n                            <separator *ngIf=\"row.avaliacao?.recurso?.length\" title=\"Recurso da avaliação\" collapse [collapsed]=\"false\">\n                                <small>{{row.avaliacao.recurso}}</small>\n                            </separator>\n                        </ng-template>\n                    </column>\n                    <column title=\"Status\" [template]=\"columnStatus\">\n                        <ng-template let-row=\"row\" #columnStatus>\n                            <div class=\"one-per-line\">\n                                <badge [color]=\"lookup.getColor(lookup.CONSOLIDACAO_STATUS, row.status)\" [icon]=\"lookup.getIcon(lookup.CONSOLIDACAO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.CONSOLIDACAO_STATUS, row.status)\"></badge>\n                                <badge *ngIf=\"row.avaliacao?.recurso?.length\" icon=\"bi bi-journal-medical\" color=\"warning\" label=\"Recorrido\"></badge>\n                            </div>\n                        </ng-template>\n                    </column>\n                    <column type=\"options\" [dynamicButtons]=\"dynamicButtons.bind(this)\"></column>\n                </columns>\n                <pagination [rows]=\"rowsLimit\"></pagination>\n            </grid>\n        </ng-template>\n    </tab>\n    <!--Aba Histórico de Avaliações-------------------------------------------------------------->\n    <tab key=\"HISTORICO\" icon=\"bi bi-clipboard-pulse\" label=\"Histórico de Avaliações\" [template]=\"historico\">\n        <ng-template #historico>\n            <grid [dao]=\"dao\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [init]=\"initGrid.bind(this)\"\n                [hasAdd]=\"false\" [hasEdit]=\"false\" [loadList]=\"onGridLoadHistorico.bind(this)\" [groupTemplate]=\"groupHistorico\">\n                <ng-template let-separator=\"separator\" let-row=\"row\" #groupHistorico>\n                    <div class=\"d-flex\">\n                        <div class=\"ms-3\">\n                            <profile-picture [url]=\"usuarioSeparator(separator)?.url_foto\" [size]=\"40\" [hint]=\"usuarioSeparator(separator)?.nome\"></profile-picture>\n                        </div> \n                        <div class=\"flex-fill ms-3\">\n                            <strong>{{usuarioSeparator(separator)?.nome || \"Desconhecido\"}}</strong><br>\n                            <badge [icon]=\"entityService.getIcon('Unidade')\" color=\"primary\" [label]=\"unidadeSeparator(separator)?.sigla || 'Desconhecido'\"></badge>\n                        </div>\n                    </div>\n                </ng-template>\n                <toolbar *ngIf=\"!selectable\"></toolbar>\n                <filter [form]=\"filter\" [where]=\"filterWhereHistorico\" [submit]=\"filterSubmit.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"filterCollapsed\" [deleted]=\"this.auth.hasPermissionTo('MOD_AUDIT_DEL')\">\n                    <div class=\"row\">\n                        <input-search [size]=\"5\" #usuario [control]=\"filter!.controls.usuario_id\" controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\n                        <input-search [size]=\"5\" #unidade [control]=\"filter!.controls.unidade_id\" controlName=\"unidade_id\" [dao]=\"unidadeDao\" (change)=\"onUnidadeChange($event)\"></input-search>\n                        <input-switch [size]=\"1\" #subordinadas [disabled]=\"canFilterSubordinadas\" label=\"Sub.\" [control]=\"filter!.controls.unidades_subordinadas\" controlName=\"unidades_subordinadas\" labelInfo=\"Incluir as unidades subordinadas\"></input-switch>\n                        <input-switch [size]=\"1\" #arquivadas label=\"Arq.\" [control]=\"filter!.controls.incluir_arquivados\" controlName=\"incluir_arquivados\" labelInfo=\"Incluir os planos de trabalhos arquivados\"></input-switch>\n                    </div>\n                </filter>\n                <columns>\n                    <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [template]=\"columnHistorico\" [expandTemplate]=\"columnExpandedHistorico\">\n                        <ng-template #columnHistorico>\n                        </ng-template>\n\n                        <ng-template let-row=\"row\" #columnExpandedHistorico>\n                            \n                            <grid [items]=\"getAvaliacoes(row)\" [minHeight]=\"0\" #gridEntregas>\n                                <columns>\n                                    <column title=\"Data\" type=\"datetime\" field=\"data_avaliacao\"></column>\n                                    <column title=\"Avaliador\" [template]=\"columnAvaliador\">\n                                        <ng-template let-row=\"row\" #columnAvaliador>\n                                            <div class=\"avaliador\">\n                                                <div class=\"avaliador-profile\">\n                                                    <profile-picture [url]=\"row.avaliador.url_foto || ''\" [size]=\"40\" [hint]=\"row.avaliador.nome || ''\"></profile-picture>\n                                                </div>\n                                                <div class=\"avaliador-nome\">\n                                                    <strong>{{row.avaliador.nome || \"\"}}</strong><br>\n                                                    <small>{{row.avaliador.apelido || \"\"}}</small>\n                                                </div>\n                                            </div>\n                                        </ng-template>\n                                    </column>\n                                    <column [title]=\"'Nota'\" [template]=\"columnNota\">\n                                        <ng-template let-row=\"row\" #columnNota>\n                                            <badge [label]=\"getNota(row).nota\" [icon]=\"getNota(row).icone\" [color]=\"getNota(row).cor\"></badge><br>\n                                            <small>{{getNota(row).descricao}}</small>\n                                        </ng-template>\n                                    </column>\n                                    <column [title]=\"'Justificativas'\" [template]=\"columnJustificativa\">\n                                        <ng-template let-row=\"row\" #columnJustificativa>\n                                            {{row.justificativa || ''}}\n                                            <div class=\"one-per-line\">\n                                                <badge *ngFor=\"let justificativa of row.justificativas\" [icon]=\"entityService.getIcon('TipoJustificativa')\" [label]=\"justificativa.value\"></badge>\n                                            </div>\n                                        </ng-template>\n                                    </column>\n                                    <column title=\"Recurso\" [template]=\"columnRecurso\">\n                                        <ng-template let-row=\"row\" #columnRecurso>\n                                            <small>{{row.recurso || ''}}</small>\n                                        </ng-template>\n                                    </column>\n                                    <column title=\"Status\" [template]=\"columnStatus\">\n                                        <ng-template let-row=\"row\" #columnStatus>\n                                            <div class=\"one-per-line\">\n                                                <badge *ngIf=\"row.recurso?.length\" icon=\"bi bi-journal-medical\" color=\"warning\" label=\"Recorrido\"></badge>\n                                                <badge *ngIf=\"row.id == avaliacao?.id\" icon=\"bi bi-check-circle\" color=\"success\" label=\"Vigente\"></badge>\n                                            </div>\n                                        </ng-template>\n                                    </column>\n                                </columns>\n                            </grid>\n\n                        </ng-template>\n                    </column>\n                    <column [title]=\"'Plano de trabalho/Vigência\\nPrograma/Modalidade'\" [template]=\"columnPlanoTrabalho\">\n                        <ng-template let-row=\"row\" #columnPlanoTrabalho>\n                            {{row.plano_trabalho.usuario.nome}} <badge label=\"Início\" color=\"light\" icon=\"bi bi-calendar2\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_inicio)\"></badge><badge label=\"Término\" color=\"light\" icon=\"bi bi-calendar2-check\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_fim)\"></badge><br>\n                            <badge [icon]=\"entityService.getIcon('Programa')\" [label]=\"row.plano_trabalho.programa?.nome\" color=\"light\" [hint]=\"lex.translate('Programa')\"></badge>\n                            <badge [icon]=\"entityService.getIcon('TipoModalidade')\" [label]=\"row.plano_trabalho.tipo_modalidade?.nome\" color=\"light\" [hint]=\"lex.translate('Tipo de modalidade')\"></badge>\n                        </ng-template>\n                    </column>\n                    <column title=\"Data início\" [template]=\"columnDataInicio\">\n                        <ng-template let-row=\"row\" #columnDataInicio>\n                            {{util.getDateFormatted(row.data_inicio)}}\n                        </ng-template>\n                    </column>\n                    <column title=\"Data fim\" [template]=\"columnDataFim\">\n                        <ng-template let-row=\"row\" #columnDataFim>\n                            {{util.getDateFormatted(row.data_fim)}}\n                        </ng-template>\n                    </column>\n                </columns>\n                <pagination [rows]=\"rowsLimit\"></pagination>\n            </grid>\n        </ng-template>\n    </tab>\n</tabs>\n","import { ChangeDetectorRef, Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { ConsolidacaoDados, PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalhoConsolidacao } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { Atividade, Checklist } from 'src/app/models/atividade.model';\r\nimport { Afastamento } from 'src/app/models/afastamento.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { BadgeTrabalho, PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoAtividadeDaoService } from 'src/app/dao/tipo-atividade-dao.service';\r\nimport { PlanoEntregaService } from '../../plano-entrega/plano-entrega.service';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { AtividadeOptionsMetadata, AtividadeService } from '../../atividade/atividade.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { CalendarService } from 'src/app/services/calendar.service';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { TipoAtividade } from 'src/app/models/tipo-atividade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { Comparecimento } from 'src/app/models/comparecimento.model';\r\nimport { ComparecimentoDaoService } from 'src/app/dao/comparecimento-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { SeparatorComponent } from 'src/app/components/separator/separator.component';\r\nimport { OcorrenciaDaoService } from 'src/app/dao/ocorrencia-dao.service';\r\nimport { Ocorrencia } from 'src/app/models/ocorrencia.model';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { Comentario } from 'src/app/models/comentario';\r\n\r\nexport type ConsolidacaoEntrega = {\r\n  id: string,\r\n  entrega: PlanoTrabalhoEntrega,\r\n  badge: BadgeTrabalho,\r\n  atividades: Atividade[]\r\n};\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-consolidacao-form',\r\n  templateUrl: './plano-trabalho-consolidacao-form.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-form.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoFormComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridEntregas', { static: false }) public gridEntregas?: GridComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('etiqueta', { static: false }) public etiqueta?: InputSelectComponent;\r\n  @ViewChild('tipoAtividade', { static: false }) public tipoAtividade?: InputSearchComponent;\r\n  @Input() cdRef: ChangeDetectorRef;\r\n  @Input() planoTrabalho?: PlanoTrabalho;\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalhoConsolidacao | undefined) { super.entity = value; this.bindEntity(); } get entity(): PlanoTrabalhoConsolidacao | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) {\r\n    if (this._disabled != value || this.atividadeOptionsMetadata.disabled !== value) {\r\n      this._disabled = value;\r\n      this.atividadeOptionsMetadata.disabled = value;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n  get disabled(): boolean {\r\n    return this._disabled;\r\n  }\r\n\r\n  //public consolidacaoOcorrenciaDao: PlanoTrabalhoConsolidacaoOcorrenciaDaoService;\r\n  public ocorrenciaDao: OcorrenciaDaoService;\r\n  public comparecimentoDao: ComparecimentoDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public formAtividade: FormGroup;\r\n  //public formOcorrencia: FormGroup;\r\n  public formComparecimento: FormGroup;\r\n  public formEdit: FormGroup;\r\n  public unidade?: Unidade;\r\n  public dao: PlanoTrabalhoConsolidacaoDaoService;\r\n  public atividadeDao: AtividadeDaoService;\r\n  public atividadeService: AtividadeService;\r\n  public calendar: CalendarService;\r\n  public joinAtividade: string[] = ['demandante', 'usuario', 'tipo_atividade', 'comentarios.usuario:id,nome,apelido', 'reacoes.usuario:id,nome,apelido'];\r\n  public tipoAtividadeDao: TipoAtividadeDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public planoEntregaService: PlanoEntregaService;\r\n  public itemsEntregas: ConsolidacaoEntrega[] = [];\r\n  public etiquetas: LookupItem[] = [];\r\n  public checklist?: Checklist[];\r\n  public itemsOcorrencias: Ocorrencia[] = [];\r\n  public itemsComparecimentos: Comparecimento[] = [];\r\n  public itemsAfastamentos: Afastamento[] = [];\r\n  public atividadeOptionsMetadata: AtividadeOptionsMetadata;\r\n  public programa?: Programa;\r\n\r\n  private _disabled: boolean = true;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.dao = injector.get<PlanoTrabalhoConsolidacaoDaoService>(PlanoTrabalhoConsolidacaoDaoService);\r\n    //this.consolidacaoOcorrenciaDao = injector.get<PlanoTrabalhoConsolidacaoOcorrenciaDaoService>(PlanoTrabalhoConsolidacaoOcorrenciaDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.comparecimentoDao = injector.get<ComparecimentoDaoService>(ComparecimentoDaoService);\r\n    this.atividadeDao = injector.get<AtividadeDaoService>(AtividadeDaoService);\r\n    this.atividadeService = injector.get<AtividadeService>(AtividadeService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.ocorrenciaDao = injector.get<OcorrenciaDaoService>(OcorrenciaDaoService);\r\n    this.tipoAtividadeDao = injector.get<TipoAtividadeDaoService>(TipoAtividadeDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.planoEntregaService = injector.get<PlanoEntregaService>(PlanoEntregaService);\r\n    this.formAtividade = this.fh.FormBuilder({\r\n      descricao: { default: \"\" },\r\n      etiquetas: { default: [] },\r\n      checklist: { default: [] },\r\n      comentarios: { default: [] },\r\n      esforco: { default: 0 },\r\n      tempo_planejado: { default: 0 },\r\n      data_distribuicao: { default: new Date() },\r\n      data_estipulada_entrega: { default: new Date() },\r\n      data_inicio: { default: new Date() },\r\n      data_entrega: { default: new Date() },\r\n      //tipo_atividade_id: { default: null }\r\n    }, this.cdRef, this.validateAtividade);\r\n    /*this.formOcorrencia = this.fh.FormBuilder({\r\n      data_inicio: { default: new Date() },\r\n      data_fim: { default: new Date() },\r\n      descricao: { default: \"\" }\r\n    }, this.cdRef, this.validateOcorrencia);*/\r\n    this.formComparecimento = this.fh.FormBuilder({\r\n      data_comparecimento: { default: new Date() },\r\n      unidade_id: { default: \"\" },\r\n      detalhamento: { default: \"\" }\r\n    }, this.cdRef, this.validateComparecimento);\r\n    this.formEdit = this.fh.FormBuilder({\r\n      descricao: { default: \"\" },\r\n      //tipo_atividade_id: { default: null },\r\n      comentarios: { default: [] },\r\n      progresso: { default: 0 },\r\n      etiquetas: { default: [] },\r\n      etiqueta: { default: null }\r\n    });\r\n    this.atividadeOptionsMetadata = {\r\n      refreshId: this.atividadeRefreshId.bind(this),\r\n      removeId: this.atividadeRemoveId.bind(this),\r\n      refresh: this.refresh.bind(this)\r\n    }\r\n  }\r\n\r\n  public refresh() {\r\n    this.loadData(this.entity!, this.form);\r\n  }\r\n\r\n  public bindEntity() {\r\n    if (this.entity) {\r\n      this.entity._metadata = this.entity._metadata || {};\r\n      this.entity._metadata.planoTrabalhoConsolidacaoFormComponent = this;\r\n    }\r\n  }\r\n\r\n  public atividadeRefreshId(id: string, atividade?: Atividade) {\r\n    this.itemsEntregas.forEach(entrega => {\r\n      let foundIndex = entrega.atividades.findIndex(x => x.id == id);\r\n      if (foundIndex >= 0) {\r\n        if (atividade) {\r\n          entrega.atividades[foundIndex] = atividade;\r\n        } else {\r\n          this.atividadeDao.getById(id, this.joinAtividade).then(atividade => { if (atividade) entrega.atividades[foundIndex] = atividade; });\r\n        }\r\n      }\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public atividadeRemoveId(id: string) {\r\n    this.itemsEntregas.forEach(entrega => {\r\n      let foundIndex = entrega.atividades.findIndex(x => x.id == id);\r\n      if (foundIndex >= 0) entrega.atividades.splice(foundIndex, 1);\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public validateAtividade = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if (['data_inicio', 'data_entrega'].includes(controlName) && !this.util.isDataValid(control.value)) {//'data_distribuicao', 'data_estipulada_entrega',\r\n      result = \"Inválido\";\r\n    } /*else if (controlName == 'data_estipulada_entrega' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuição\";\r\n    }*/ else if (controlName == 'data_inicio' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuição\";\r\n    } else if (controlName == 'data_entrega' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuição\";\r\n    } else if (controlName == 'data_entrega' && control.value.getTime() < this.formAtividade?.controls.data_inicio.value.getTime()) {\r\n      result = \"Menor que início\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /*public validateOcorrencia = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if(['data_inicio', 'data_fim'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Inválido\";\r\n    } else if(controlName == 'data_fim' && control.value.getTime() < this.formOcorrencia?.controls.data_inicio.value.getTime()) {\r\n      result = \"Menor que início\";\r\n    } \r\n    return result;\r\n  }*/\r\n\r\n  public validateComparecimento = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['detalhamento', 'unidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if (controlName == 'data_comparecimento' && this.entity && !this.util.between(control.value, { start: this.entity!.data_inicio, end: this.entity!.data_fim })) {\r\n      result = \"Inválido\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public loadConsolidacao(dados: ConsolidacaoDados) {\r\n    this.itemsEntregas = dados.entregas.map(x => {\r\n      if (x.plano_entrega_entrega) x.plano_entrega_entrega.plano_entrega = dados.planosEntregas.find(pe => pe.id == x.plano_entrega_entrega?.plano_entrega_id);\r\n      let result = {\r\n        id: x.id,\r\n        entrega: x,\r\n        atividades: dados.atividades.filter(y => y.plano_trabalho_entrega_id == x.id),\r\n        badge: this.planoTrabalhoService.tipoEntrega(x, dados.planoTrabalho),\r\n        meta: x.plano_entrega_entrega ? this.planoEntregaService.getValorMeta(x.plano_entrega_entrega) : '',\r\n        metaRealizado: x.plano_entrega_entrega ? this.planoEntregaService.getValorRealizado(x.plano_entrega_entrega) : '',\r\n        progresso_realizado: x.plano_entrega_entrega ? x.plano_entrega_entrega.progresso_realizado : 0,\r\n        objetivos: x.plano_entrega_entrega ? x.plano_entrega_entrega.objetivos : [],\r\n        processos: x.plano_entrega_entrega ? x.plano_entrega_entrega.processos : [],\r\n      };\r\n      return result;\r\n    });\r\n    this.programa = dados.programa;\r\n    this.planoTrabalho = dados.planoTrabalho;\r\n    this.itemsOcorrencias = dados.ocorrencias;\r\n    this.itemsComparecimentos = dados.comparecimentos;\r\n    this.itemsAfastamentos = dados.afastamentos;\r\n    this.unidade = dados.planoTrabalho.unidade || this.entity!.plano_trabalho?.unidade;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.gridEntregas!.loading = true;\r\n    this.cdRef.detectChanges();\r\n    try {\r\n      let dados = await this.dao!.dadosConsolidacao(entity.id);\r\n      this.loadConsolidacao(dados);\r\n    } finally {\r\n      this.gridEntregas!.loading = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  /***************************************************************************************\r\n  * Atividades \r\n  ****************************************************************************************/\r\n  public async addAtividade(entrega: PlanoTrabalhoEntrega) {\r\n    let planoTrabalho: PlanoTrabalho | undefined = entrega.plano_trabalho || this.entity!.plano_trabalho;\r\n    let efemerides = this.calendar.calculaDataTempoUnidade(this.entity!.data_inicio, this.entity!.data_fim, planoTrabalho!.carga_horaria, this.unidade!, \"ENTREGA\");\r\n    const tempoPlanejado = this.calendar.horasUteis(this.entity!.data_inicio, this.entity!.data_fim, planoTrabalho!.carga_horaria, this.unidade!, \"DISTRIBUICAO\");\r\n    const dataInicio = this.util.maxDate(this.util.setTime(this.entity!.data_inicio, 0, 0, 0), planoTrabalho!.data_inicio);\r\n    const dataFim = this.util.minDate(this.util.setTime(this.entity!.data_fim, 23, 59, 59), planoTrabalho!.data_fim);\r\n    return new Atividade({\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho: planoTrabalho,\r\n      plano_trabalho_entrega: entrega,\r\n      plano_trabalho_consolidacao: this.entity,\r\n      demandante: this.auth.usuario,\r\n      usuario: this.auth.usuario,\r\n      unidade: this.unidade,\r\n      data_distribuicao: dataInicio,\r\n      carga_horaria: planoTrabalho!.carga_horaria,\r\n      data_estipulada_entrega: dataFim,\r\n      data_inicio: dataInicio,\r\n      data_entrega: dataFim,\r\n      tempo_planejado: tempoPlanejado,\r\n      tempo_despendido: efemerides?.tempoUtil || 0,\r\n      status: 'CONCLUIDO',\r\n      progresso: 100,\r\n      plano_trabalho_id: this.entity!.plano_trabalho_id,\r\n      plano_trabalho_entrega_id: entrega.id,\r\n      plano_trabalho_consolidacao_id: this.entity!.id,\r\n      demandante_id: this.auth.usuario!.id,\r\n      usuario_id: this.auth.usuario!.id,\r\n      unidade_id: this.unidade!.id,\r\n      metadados: { // Simula os metadados enviados pelo servidor\r\n        atrasado: false,\r\n        tempo_despendido: 0,\r\n        tempo_atraso: 0,\r\n        pausado: false,\r\n        iniciado: true,\r\n        concluido: true,\r\n        avaliado: false,\r\n        arquivado: false,\r\n        produtividade: 0,\r\n        extra: undefined,\r\n        _status: []\r\n      }\r\n    });\r\n  }\r\n\r\n  public async loadAtividade(form: FormGroup, row: any) {\r\n    this.formAtividade.patchValue(row);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeAtividade(atividades: Atividade[], row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let atividade = row as Atividade;\r\n        await this.atividadeDao?.delete(atividade);\r\n        atividades.splice(atividades.findIndex(x => x.id == atividade.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveAtividade(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.gridAtividades!.error = \"\";\r\n    this.formAtividade.markAllAsTouched();\r\n    if (this.formAtividade!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      this.util.fillForm(row, this.formAtividade!.value);\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.atividadeDao?.save(row, this.joinAtividade, ['etiquetas', 'checklist', 'comentarios', 'pausas', 'tarefas']);\r\n        this.atividadeRefreshId(row.id, result);\r\n      } catch (error: any) {\r\n        result = false;\r\n        this.gridAtividades!.error = error.message || error;\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public onDataDistribuicaoChange(event: Event) {\r\n    this.formAtividade!.controls.data_inicio.setValue(this.formAtividade!.controls.data_distribuicao.value);\r\n  }\r\n\r\n  public onDataEstipuladaEntregaChange(event: Event) {\r\n    this.formAtividade!.controls.data_entrega.setValue(this.formAtividade!.controls.data_estipulada_entrega.value);\r\n  }\r\n\r\n  public atividadeDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    result.push(Object.assign({}, this.gridEntregas!.BUTTON_EDIT, {}));\r\n    result.push(Object.assign({}, this.gridEntregas!.BUTTON_DELETE, {}));\r\n    return result;\r\n  }\r\n\r\n  public async onColumnProgressoEtiquetasChecklistEdit(row: any) {\r\n    this.formEdit.controls.progresso.setValue(row.progresso);\r\n    this.formEdit.controls.etiquetas.setValue(row.etiquetas);\r\n    this.formEdit.controls.etiqueta.setValue(null);\r\n    this.etiquetas = this.util.merge(row.tipo_atividade?.etiquetas, row.unidade?.etiquetas, (a, b) => a.key == b.key);\r\n    this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n    this.etiquetas = this.util.merge(this.etiquetas, await this.carregaEtiquetasUnidadesAscendentes(row.unidade), (a, b) => a.key == b.key);\r\n    this.checklist = this.util.clone(row.checklist);\r\n  }\r\n\r\n  public async carregaEtiquetasUnidadesAscendentes(unidadeAtual: Unidade) {\r\n    let etiquetasUnidades: LookupItem[] = [];\r\n    let path = unidadeAtual.path.split(\"/\");\r\n    let unidades = await this.unidadeDao.query({ where: [\"id\", \"in\", path] }).asPromise();\r\n    unidades.forEach(un => {\r\n      etiquetasUnidades = this.util.merge(etiquetasUnidades, un.etiquetas, (a, b) => a.key == b.key);\r\n    });\r\n    return etiquetasUnidades;\r\n  }\r\n\r\n  public async onColumnProgressoEtiquetasChecklistSave(row: any) {\r\n    try {\r\n      const saved = await this.atividadeDao!.update(row.id, {\r\n        progresso: this.formEdit.controls.progresso.value,\r\n        etiquetas: this.formEdit.controls.etiquetas.value,\r\n        checklist: this.checklist\r\n      });\r\n      row.progresso = this.formEdit.controls.progresso.value;\r\n      row.checklist = this.checklist;\r\n      return !!saved;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public onEtiquetaConfigClick() {\r\n    this.go.navigate({ route: [\"configuracoes\", \"preferencia\", \"usuario\", this.auth.usuario!.id], params: { etiquetas: true } }, {\r\n      modal: true, modalClose: (modalResult) => {\r\n        this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n        this.cdRef.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  public addItemHandleEtiquetas(): LookupItem | undefined {\r\n    let result = undefined;\r\n    if (this.etiqueta && this.etiqueta.selectedItem) {\r\n      const item = this.etiqueta.selectedItem;\r\n      const key = item.key?.length ? item.key : this.util.textHash(item.value);\r\n      if (this.util.validateLookupItem(this.formEdit.controls.etiquetas.value, key)) {\r\n        result = {\r\n          key: key,\r\n          value: item.value,\r\n          color: item.color,\r\n          icon: item.icon\r\n        };\r\n        this.formEdit.controls.etiqueta.setValue(null);\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public loadTipoAtividade(tipoAtividade: TipoAtividade | undefined) {\r\n    if (tipoAtividade) {\r\n      this.etiquetas = this.atividadeService.buildEtiquetas(this.unidade, tipoAtividade);\r\n      this.atividadeService.buildChecklist(tipoAtividade, this.formAtividade.controls.checklist);\r\n      this.formAtividade.controls.esforco.setValue(tipoAtividade?.esforco || 0);\r\n    } else {\r\n      this.etiquetas = [];\r\n      this.formAtividade.controls.esforco.setValue(0);\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onTipoAtividadeSelect(item: SelectItem) {\r\n    const tipoAtividade: TipoAtividade | undefined = item.entity as TipoAtividade;\r\n    this.loadTipoAtividade(tipoAtividade);\r\n    this.atividadeService.comentarioAtividade(tipoAtividade, this.formAtividade!.controls.comentarios);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async onColumnAtividadeDescricaoEdit(row: any) {\r\n    this.formEdit.controls.descricao.setValue(row.descricao);\r\n    //this.formEdit.controls.tipo_atividade_id.setValue(row.tipo_atividade_id);\r\n    this.formEdit.controls.comentarios.setValue(row.comentarios);\r\n  }\r\n\r\n  public async onColumnAtividadeDescricaoSave(row: any) {\r\n    try {\r\n      this.atividadeService.comentarioAtividade(this.tipoAtividade?.selectedEntity, this.formEdit!.controls.comentarios);\r\n      const saved = await this.atividadeDao!.update(row.id, {\r\n        descricao: this.formEdit.controls.descricao.value,\r\n        //tipo_atividade_id: this.formEdit.controls.tipo_atividade_id.value,\r\n        comentarios: (this.formEdit.controls.comentarios.value || []).filter((x: Comentario) => [\"ADD\", \"EDIT\", \"DELETE\"].includes(x._status || \"\"))\r\n      });\r\n      row.descricao = this.formEdit.controls.descricao.value;\r\n      //row.tipo_atividade_id = this.formEdit.controls.tipo_atividade_id.value;\r\n      row.tipo_atividade = this.tipoAtividade?.selectedEntity || null;\r\n      row.comentarios = this.formEdit.controls.comentarios.value;\r\n      return !!saved;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /***************************************************************************************\r\n  * Ocorrências \r\n  ****************************************************************************************/\r\n  public async addOcorrencia() {\r\n    /*return new PlanoTrabalhoConsolidacaoOcorrencia({\r\n      plano_trabalho_consolidacao_id: this.entity!.id\r\n    });*/\r\n    this.go.navigate({ route: ['gestao', 'ocorrencia', 'new'] }, {\r\n      metadata: {\r\n        consolidacao: this.entity,\r\n        planoTrabalho: this.planoTrabalho\r\n      },\r\n      modalClose: (modalResult) => {\r\n        if (modalResult) this.refresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  /*public async loadOcorrencia(form: FormGroup, row: any) {\r\n    this.formAtividade.patchValue({\r\n      data_inicio: row.data_inicio,\r\n      data_fim: row.data_fim,\r\n      descricao: row.descricao\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async saveOcorrencia(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formOcorrencia.markAllAsTouched();\r\n    if (this.formOcorrencia!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_inicio = form.controls.data_inicio.value;\r\n      row.data_fim = form.controls.data_fim.value;\r\n      row.descricao = form.controls.descricao.value;\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.consolidacaoOcorrenciaDao?.save(row);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }*/\r\n\r\n  public async editOcorrencia(row: any) {\r\n    this.go.navigate({ route: [\"gestao\", \"ocorrencia\", row.id, \"edit\"] }, {\r\n      modalClose: (modalResult) => {\r\n        if (modalResult) this.refresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  public async removeOcorrencia(row: any) {\r\n    if (await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\")) {\r\n      this.submitting = true;\r\n      try {\r\n        let ocorrencia = row as Ocorrencia;\r\n        await this.ocorrenciaDao?.delete(ocorrencia);\r\n        this.itemsOcorrencias.splice(this.itemsOcorrencias.findIndex(x => x.id == ocorrencia.id), 1);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public ocorrenciaDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    //result.push(Object.assign({}, this.OPTION_INFORMACOES, { onClick: (doc: Ocorrencia) => this.go.navigate({route: [\"gestao\", \"ocorrencia\", doc.id, \"consult\"]}) }));\r\n    if (!this.disabled && this.auth.hasPermissionTo(\"MOD_OCOR_EDT\")) result.push(Object.assign({}, this.OPTION_ALTERAR, { onClick: this.editOcorrencia.bind(this) }));\r\n    if (!this.disabled && this.auth.hasPermissionTo(\"MOD_OCOR_EXCL\")) result.push(Object.assign({}, this.OPTION_EXCLUIR, { onClick: this.removeOcorrencia.bind(this) }));\r\n    return result;\r\n  }\r\n\r\n  /***************************************************************************************\r\n  * Comparecimento \r\n  ****************************************************************************************/\r\n  public async addComparecimento() {\r\n    return new Comparecimento({\r\n      unidade_id: this.unidade?.id,\r\n      unidade: this.unidade,\r\n      plano_trabalho_consolidacao_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadComparecimento(form: FormGroup, row: any) {\r\n    this.formComparecimento.patchValue({\r\n      data_comparecimento: row.data_comparecimento,\r\n      unidade_id: row.unidade_id,\r\n      detalhamento: row.detalhamento\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeComparecimento(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let comparecimento = row as Comparecimento;\r\n        await this.comparecimentoDao?.delete(comparecimento);\r\n        this.itemsComparecimentos.splice(this.itemsComparecimentos.findIndex(x => x.id == comparecimento.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveComparecimento(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formComparecimento.markAllAsTouched();\r\n    if (this.formComparecimento!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_comparecimento = form.controls.data_comparecimento.value;\r\n      row.detalhamento = form.controls.detalhamento.value;\r\n      row.plano_trabalho_consolidacao_id = this.entity!.id;\r\n      row.unidade_id = form.controls.unidade_id.value;\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.comparecimentoDao?.save(row);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public comparecimentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }\r\n\r\n  /***************************************************************************************\r\n  * Afastamentos\r\n  ****************************************************************************************/\r\n  public async addAfastamento() {\r\n    this.go.navigate({ route: ['gestao', 'afastamento', 'new'] }, {\r\n      metadata: { consolidacao: this.entity },\r\n      filterSnapshot: undefined,\r\n      querySnapshot: undefined,\r\n      modalClose: (modalResult) => {\r\n        if (modalResult) this.refresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  public afastamentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    result.push(Object.assign({}, this.OPTION_INFORMACOES, { onClick: (doc: Afastamento) => this.go.navigate({ route: [\"cadastros\", \"afastamento\", doc.id, \"consult\"] }) }));\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }\r\n\r\n  public async showPlanejamento(planejamento_id: string) {\r\n    this.go.navigate({ route: ['gestao', 'planejamento', planejamento_id, 'consult'] }, { modal: true })\r\n  }\r\n\r\n  public async showCadeiaValor(cadeia_valor_id_id: string) {\r\n    this.go.navigate({ route: ['gestao', 'cadeia-valor', cadeia_valor_id_id, 'consult'] }, { modal: true })\r\n  }\r\n}\r\n","<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Atividades')\" [icon]=\"entityService.getIcon('Atividade')\">\r\n  <grid [items]=\"itemsEntregas\" #gridEntregas [minHeight]=\"0\">\r\n    <columns>\r\n      <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidação')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\r\n        <ng-template let-row=\"row\" #columnConsolidacao>\r\n          <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\r\n        </ng-template>\r\n        <ng-template let-row=\"row\" #columnExpandedConsolidacao>\r\n          <grid [items]=\"row.atividades\" [minHeight]=\"0\" #gridAtividades [form]=\"formAtividade\" [hasAdd]=\"!disabled\" [hasDelete]=\"false\" [hasEdit]=\"false\" [add]=\"addAtividade.bind(this, row.entrega)\" [load]=\"loadAtividade.bind(this)\" [remove]=\"removeAtividade.bind(this, row.atividades)\" [save]=\"saveAtividade.bind(this)\" editable>\r\n            <columns>\r\n              <column [title]=\"'#ID/Descrição'\" [width]=\"400\" [template]=\"columnAtividadeDescricao\" [editTemplate]=\"editAtividadeDescricao\" [columnEditTemplate]=\"atividadeOptionsMetadata.disabled ? undefined : editAtividadeDescricao\" [edit]=\"atividadeOptionsMetadata.disabled ? undefined : onColumnAtividadeDescricaoEdit.bind(this)\" [save]=\"atividadeOptionsMetadata.disabled ? undefined : onColumnAtividadeDescricaoSave.bind(this)\"><!--[title]=\"'#ID/' + lex.translate('Tipo de Atividade') + '\\nDescrição'\"-->\r\n                <ng-template let-row=\"row\" #columnAtividadeDescricao>\r\n                  <span class=\"text-nowrap d-block\">\r\n                    <badge icon=\"bi bi-hash\" [label]=\"row.numero\" color=\"light\" [data]=\"row.numero\" [click]=\"atividadeService.onIdClick.bind(this)\"></badge>\r\n                    <!--badge *ngIf=\"row.tipo_atividade\" [icon]=\"entityService.getIcon('TipoAtividade')\" [label]=\"row.tipo_atividade.nome\" color=\"light\"></badge-->\r\n                  </span>\r\n                  <span class=\"micro-text fw-ligh atividade-descricao\">{{row.descricao}}</span>\r\n                  <reaction [entity]=\"row\" origem=\"ATIVIDADE\"></reaction>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editAtividadeDescricao>\r\n                  <input-textarea label=\"Descrição\" [size]=\"12\" [rows]=\"2\" controlName=\"descricao\" [control]=\"formAtividade!.controls.descricao\" required></input-textarea>\r\n                  <!--input-search [label]=\"lex.translate('Tipo de atividade')\" #tipoAtividade [size]=\"12\" [emptyValue]=\"null\" controlName=\"tipo_atividade_id\" [control]=\"formAtividade!.controls.tipo_atividade_id\" [dao]=\"tipoAtividadeDao\" (select)=\"onTipoAtividadeSelect($event)\" [labelInfo]=\"lex.translate('Tipo de atividade') + ' utilizado para classificar a atividade'\" [required]=\"!auth.hasPermissionTo('MOD_ATV_TIPO_ATV_VAZIO') ? 'true' : undefined\"></input-search-->\r\n                </ng-template>\r\n              </column>\r\n              <column [title]=\"'Tempos'\" [width]=\"250\" [template]=\"columnTempos\" [editTemplate]=\"editTempos\">\r\n                <ng-template let-row=\"row\" #columnTempos>\r\n                  <div class=\"one-per-line\">\r\n                    <badge *ngFor=\"let tempo of atividadeService.temposAtividade(row)\" [badge]=\"tempo\"></badge>\r\n                  </div>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editTempos>\r\n                  <!--input-datetime icon=\"bi bi-file-earmark-plus\" [label]=\"lex.translate('Data de distribuição')\" controlName=\"data_distribuicao\" [control]=\"formAtividade!.controls.data_distribuicao\" (change)=\"onDataDistribuicaoChange($event)\" labelInfo=\"Data de inclusão/distribuição/lançamento\"></input-datetime-->\r\n                  <!--input-datetime icon=\"bi bi-calendar-check\" [label]=\"lex.translate('Prazo de entrega')\" controlName=\"data_estipulada_entrega\" [control]=\"formAtividade!.controls.data_estipulada_entrega\" (change)=\"onDataEstipuladaEntregaChange($event)\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime-->\r\n                  <separator title=\"Início e Conclusão\" collapse [collapsed]=\"false\">\r\n                    <input-datetime icon=\"bi bi-play-circle\" label=\"Início\" controlName=\"data_inicio\" [control]=\"formAtividade!.controls.data_inicio\" labelInfo=\"Data de inicialização da atividade\"></input-datetime>\r\n                    <input-datetime icon=\"bi bi-check-circle\" label=\"Conclusão\" controlName=\"data_entrega\" [control]=\"formAtividade!.controls.data_entrega\" labelInfo=\"Data da conclusão da atividade\"></input-datetime>\r\n                  </separator>\r\n                </ng-template>\r\n              </column>\r\n              <column [title]=\"'Progresso\\nEtiquetas/Checklist'\" [width]=\"200\" [template]=\"columnProgressoEtiquetasChecklist\" [editTemplate]=\"columnProgressoEtiquetasChecklist\" [columnEditTemplate]=\"atividadeOptionsMetadata.disabled ? undefined : columnProgressoEtiquetasChecklistEdit\" [edit]=\"atividadeOptionsMetadata.disabled ? undefined : onColumnProgressoEtiquetasChecklistEdit.bind(this)\" [save]=\"atividadeOptionsMetadata.disabled ? undefined : onColumnProgressoEtiquetasChecklistSave.bind(this)\">\r\n                <ng-template let-row=\"row\" #columnProgressoEtiquetasChecklist>\r\n                  <progress-bar [value]=\"row.progresso\" color=\"success\"></progress-bar>\r\n                  <badge *ngFor=\"let etiqueta of row.etiquetas\" [lookup]=\"etiqueta\"></badge>\r\n                  <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                  <table *ngIf=\"row.checklist?.length\">\r\n                    <tr *ngFor=\"let check of row.checklist\">\r\n                      <td><i *ngIf=\"check.checked\" class=\"bi bi-check-circle\"></i></td>\r\n                      <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                    </tr>\r\n                  </table>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #columnProgressoEtiquetasChecklistEdit>\r\n                  <input-number [size]=\"12\" [decimals]=\"2\" label=\"Progresso\" sufix=\"%\" icon=\"bi bi-clock\" controlName=\"progresso\" [control]=\"formEdit.controls.progresso\" labelInfo=\"Progresso de execução (% Concluído)\"></input-number>\r\n                  <input-multiselect controlName=\"etiquetas\" [size]=\"12\" [control]=\"formEdit.controls.etiquetas\" [addItemHandle]=\"addItemHandleEtiquetas.bind(this)\">\r\n                    <input-select [size]=\"12\" label=\"Etiqueta\" #etiqueta controlName=\"etiqueta\" nullable itemNull=\"- Selecione -\" detailsButton detailsButtonIcon=\"bi bi-tools\" (details)=\"onEtiquetaConfigClick()\" [control]=\"formEdit.controls.etiqueta\" [items]=\"etiquetas\"></input-select>\r\n                  </input-multiselect>\r\n                  <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                  <table *ngIf=\"row.checklist?.length\">\r\n                    <tr *ngFor=\"let check of checklist; let i = index\">\r\n                      <td><input-switch [size]=\"12\" scale=\"small\" [source]=\"checklist\" [path]=\"i + '.checked'\"></input-switch></td>\r\n                      <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                    </tr>\r\n                  </table>\r\n                </ng-template>\r\n              </column>\r\n              <column [title]=\"'nº Processo/Status\\nComentários'\" [width]=\"300\" [template]=\"columnNumero\" [editTemplate]=\"columnNumero\">\r\n                <ng-template let-row=\"row\" #columnNumero>\r\n                  <documentos-badge [documento]=\"row.documento_requisicao\"></documentos-badge>\r\n                  <span class=\"d-block\">\r\n                    <badge *ngFor=\"let status of atividadeService.getStatus(row, entity)\" [data]=\"status\" [color]=\"status.color\" [icon]=\"status.icon\" [label]=\"status.label\"></badge>\r\n                  </span>\r\n                  <comentarios-widget *ngIf=\"!gridAtividades.editing\" [entity]=\"row\" [selectable]=\"false\" origem=\"ATIVIDADE\" [grid]=\"gridAtividades\"></comentarios-widget>\r\n                </ng-template>\r\n              </column>\r\n              <column type=\"options\" [metadata]=\"atividadeOptionsMetadata\" [dynamicOptions]=\"atividadeService.dynamicOptions.bind(this)\" [dynamicButtons]=\"atividadeService.dynamicButtons.bind(this)\"></column>\r\n            </columns>\r\n          </grid>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"Origem\" [template]=\"columnOrigem\" [width]=\"200\">\r\n        <ng-template let-row=\"row\" #columnOrigem>\r\n          <badge [label]=\"row.badge.titulo\" [color]=\"row.badge.cor\"></badge>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"Entrega\" [template]=\"columnEntrega\">\r\n        <ng-template let-row=\"row\" #columnEntrega>\r\n          {{row.badge.descricao || row.entrega.descricao}}<br>\r\n          <small>{{row.entrega.descricao}}</small>\r\n          <reaction [entity]=\"row.entrega\" origem=\"PLANO_TRABALHO_ENTREGA\"></reaction>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"% CHD Planejado\" [template]=\"columnForcaTrabalho\" [width]=\"100\" [titleHint]=\"'% Carga Horária Disponível Planejada'\">\r\n        <ng-template let-row=\"row\" #columnForcaTrabalho>\r\n          <badge color=\"light\" [label]=\"row.entrega.forca_trabalho + '%'\"></badge>\r\n        </ng-template>\r\n      </column>\r\n      <column [title]=\"'Meta'\" [template]=\"columnMetaRealizado\" [width]=\"100\">\r\n        <ng-template let-row=\"row\" #columnMetaRealizado>\r\n          <badge icon=\"bi bi-graph-up-arrow\" [textValue]=\"row.meta\" color=\"light\" hint=\"Meta\"></badge><br>\r\n          <badge icon=\"bi bi-check-lg\" [textValue]=\"row.metaRealizado\" color=\"light\" hint=\"Realizado\"></badge>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"Progresso\" [template]=\"columnProgresso\" [width]=\"150\">\r\n        <ng-template let-row=\"row\" #columnProgresso>\r\n          <progress-bar [value]=\"row.progresso_realizado\" color=\"success\"></progress-bar>\r\n        </ng-template>\r\n      </column>\r\n      <column [title]=\"'Objetivos/Processos'\" [template]=\"columnObjProc\" [editTemplate]=\"columnObjProc\" [width]=\"200\">\r\n        <ng-template let-row=\"row\" #columnObjProc>\r\n          <separator [title]=\"lex.translate('Objetivos')\" *ngIf=\"row.objetivos?.length\" collapse [collapsed]=\"true\">\r\n            <div *ngFor=\"let pObjetivo of row.objetivos\" class=\"objetivo d-flex align-items-center\">\r\n              <button class=\"btn btn-sm btn-outline-info me-2\" (click)=\"showPlanejamento(pObjetivo.objetivo.planejamento_id)\"><i class=\"bi bi-eye\"></i></button>\r\n              <small>{{pObjetivo.objetivo.nome}}</small>\r\n            </div>\r\n          </separator>\r\n          <separator [title]=\"lex.translate('Processos')\" *ngIf=\"row.processos?.length\" collapse [collapsed]=\"true\">\r\n            <div *ngFor=\"let pProcesso of row.processos\" class=\"objetivo d-flex align-items-center\">\r\n              <button class=\"btn btn-sm btn-outline-info me-2\" (click)=\"showCadeiaValor(pProcesso.processo.cadeia_valor_id)\"><i class=\"bi bi-eye\"></i></button>\r\n              <small>{{pProcesso.processo.nome}}</small>\r\n            </div>\r\n          </separator>\r\n        </ng-template>\r\n      </column>\r\n    </columns>\r\n  </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Ocorrências')\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\">\r\n  <grid [items]=\"itemsOcorrencias\" [minHeight]=\"0\" #gridOcorrencia [hasDelete]=\"false\" [hasEdit]=\"false\" [hasAdd]=\"!disabled\" [add]=\"addOcorrencia.bind(this)\" editable>\r\n    <!-- [load]=\"loadOcorrencia.bind(this)\" [remove]=\"removeOcorrencia.bind(this)\" [save]=\"saveOcorrencia.bind(this)\" -->\r\n    <columns>\r\n      <column title=\"Início\" [width]=\"300\" type=\"datetime\" field=\"data_inicio\"></column>\r\n      <column title=\"Fim\" [width]=\"300\" type=\"datetime\" field=\"data_fim\"></column>\r\n      <column title=\"Descrição\" type=\"textarea\" field=\"descricao\"></column>\r\n      <column type=\"options\" [dynamicButtons]=\"ocorrenciaDynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n  </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Afastamentos')\" [icon]=\"entityService.getIcon('Afastamento')\">\r\n  <grid [items]=\"itemsAfastamentos\" [minHeight]=\"0\" #gridAfastamento [hasEdit]=\"false\" [hasDelete]=\"false\" [hasAdd]=\"!disabled\" [add]=\"addAfastamento.bind(this)\" editable>\r\n    <columns>\r\n      <column title=\"Início\" [width]=\"300\" type=\"datetime\" field=\"data_inicio\"></column>\r\n      <column title=\"Fim\" [width]=\"300\" type=\"datetime\" field=\"data_fim\"></column>\r\n      <column title=\"Motivo/Observação\" [template]=\"columnMotivoObservacao\">\r\n        <ng-template let-row=\"row\" #columnMotivoObservacao>\r\n          <badge [color]=\"row.tipo_motivo_afastamento.cor\" [icon]=\"row.tipo_motivo_afastamento.icone\" [label]=\"row.tipo_motivo_afastamento.nome\"></badge>\r\n          {{row.observacao}}\r\n        </ng-template>\r\n      </column>\r\n      <column type=\"options\" [dynamicButtons]=\"afastamentoDynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n  </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Comparecimentos')\" [icon]=\"entityService.getIcon('Comparecimento')\">\r\n  <grid [items]=\"itemsComparecimentos\" [minHeight]=\"0\" #gridComparecimento [form]=\"formComparecimento\" [hasDelete]=\"!disabled\" [hasAdd]=\"!disabled\" [hasEdit]=\"!disabled\" [add]=\"addComparecimento.bind(this)\" [load]=\"loadComparecimento.bind(this)\" [remove]=\"removeComparecimento.bind(this)\" [save]=\"saveComparecimento.bind(this)\" editable>\r\n    <columns>\r\n      <column title=\"Data\" [width]=\"300\" type=\"date\" field=\"data_comparecimento\"></column>\r\n      <column title=\"Unidade\" [template]=\"columnUnidade\" [editTemplate]=\"editUnidade\">\r\n        <ng-template let-row=\"row\" #columnUnidade>\r\n          <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"row.unidade.sigla\" [textValue]=\"row.unidade.nome\" color=\"success\"></badge>\r\n        </ng-template>\r\n        <ng-template let-row=\"row\" #editUnidade>\r\n          <input-search label icon [size]=\"6\" #unidade controlName=\"unidade_id\" [dao]=\"unidadeDao\"></input-search>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"Detalhamento\" type=\"text\" field=\"detalhamento\"></column>\r\n      <column type=\"options\" [dynamicButtons]=\"comparecimentoDynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n  </grid>\r\n</separator>","import { ChangeDetectorRef, Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { ConsolidacaoDados, PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoStatus } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { PlanoTrabalhoConsolidacaoFormComponent } from '../plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { Avaliacao } from 'src/app/models/avaliacao.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { AvaliacaoDaoService } from 'src/app/dao/avaliacao-dao.service';\r\nimport { UnidadeService } from 'src/app/services/unidade.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-consolidacao-list',\r\n  templateUrl: './plano-trabalho-consolidacao-list.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-list.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoListComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n\r\n  public get items(): PlanoTrabalhoConsolidacao[] {\r\n    return this.entity?.consolidacoes || [];\r\n  }\r\n\r\n  public dao?: PlanoTrabalhoConsolidacaoDaoService;\r\n  public avaliacaoDao: AvaliacaoDaoService;\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public unidadeService: UnidadeService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    /* Inicializações */\r\n    this.dao = injector.get<PlanoTrabalhoConsolidacaoDaoService>(PlanoTrabalhoConsolidacaoDaoService);\r\n    this.avaliacaoDao = injector.get<AvaliacaoDaoService>(AvaliacaoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.unidadeService = injector.get<UnidadeService>(UnidadeService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.title = this.lex.translate(\"Consolidações\");\r\n    this.code = \"MOD_PTR_CSLD\";\r\n    this.modalWidth = 1200;\r\n    this.form = this.fh.FormBuilder({\r\n      'data_inicio': {default: new Date()},\r\n      'data_fim': {default: new Date()}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      if (this.urlParams?.has(\"usuarioId\") && this.urlParams?.has(\"planoTrabalhoId\")) {\r\n        let dados = await this.planoTrabalhoDao!.getByUsuario(this.urlParams!.get(\"usuarioId\")!, true, this.urlParams!.get(\"planoTrabalhoId\")!);\r\n        if (dados.planos.length == 1) this.entity = dados.planos[0];\r\n      }\r\n      let agora = (new Date()).getTime();\r\n      this.items.forEach(v => {\r\n        if(!v.plano_trabalho) v.plano_trabalho = this.entity;\r\n        if(this.util.asTimestamp(v.data_inicio) <= agora && agora <= this.util.asTimestamp(v.data_fim)) this.grid!.expand(v.id);\r\n      });\r\n    })();\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    // TODO: Validar data\r\n    return result;\r\n  }\r\n\r\n  public async addConsolidacao() {\r\n    return new PlanoTrabalhoConsolidacao({\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadConsolidacao(form: FormGroup, row: any) {\r\n    this.form!.patchValue({\r\n      data_inicio: row.data_inicio,\r\n      data_fim: row.data_fim\r\n    });    \r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeConsolidacao(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let consolidacao = row as PlanoTrabalhoConsolidacao;\r\n        await this.dao?.delete(consolidacao);\r\n        this.items.splice(this.items.findIndex(x => x.id == consolidacao.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveConsolidacao(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.form!.markAllAsTouched();\r\n    if (this.form!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_inicio = form.controls.data_inicio.value;\r\n      row.data_fim = form.controls.data_fim.value;\r\n      result = await this.dao?.save(row);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public refreshConsolidacao(consolidacao: PlanoTrabalhoConsolidacao, dados?: ConsolidacaoDados) {\r\n    if(dados && consolidacao._metadata?.planoTrabalhoConsolidacaoFormComponent) {\r\n      let consolidacaoForm = consolidacao._metadata?.planoTrabalhoConsolidacaoFormComponent as PlanoTrabalhoConsolidacaoFormComponent;\r\n      consolidacaoForm.loadConsolidacao(dados);\r\n    } else {\r\n      this.grid!.refreshExpanded(consolidacao.id);\r\n    }\r\n    this.grid!.refreshRows();\r\n  }\r\n\r\n  public async concluir(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.submitting = true;\r\n    try {\r\n      let response = await this.dao!.concluir(consolidacao.id);\r\n      consolidacao.status = response.status as PlanoTrabalhoConsolidacaoStatus;\r\n      this.refreshConsolidacao(consolidacao, response);\r\n    } catch (error: any) {\r\n      this.error(error.message || error);\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  public async cancelarConclusao(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.submitting = true;\r\n    try {\r\n      let response = await this.dao!.cancelarConclusao(consolidacao.id);\r\n      consolidacao.status = response.status as PlanoTrabalhoConsolidacaoStatus;\r\n      this.refreshConsolidacao(consolidacao, response);\r\n    } catch (error: any) {\r\n      this.error(error.message || error);\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  public anterior(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return this.entity!.consolidacoes.reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_inicio) < this.util.asTimestamp(consolidacao.data_inicio) && (!a || this.util.asTimestamp(a.data_inicio) < this.util.asTimestamp(v.data_inicio)) ? v : a, undefined);\r\n  }\r\n\r\n  public proximo(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return this.entity!.consolidacoes.reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_fim) > this.util.asTimestamp(consolidacao.data_fim) && (!a || this.util.asTimestamp(a.data_fim) > this.util.asTimestamp(v.data_fim)) ? v : a, undefined);\r\n  }\r\n\r\n  public isDisabled(row?: PlanoTrabalhoConsolidacao): boolean {\r\n    return (row && row.status != \"INCLUIDO\") || this.entity?.status != \"ATIVO\";\r\n  }\r\n\r\n  public dynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let consolidacao: PlanoTrabalhoConsolidacao = row as PlanoTrabalhoConsolidacao;\r\n    const usuarioId = consolidacao!.plano_trabalho?.usuario_id;\r\n    const unidadeId = this.entity!.unidade_id;\r\n    const anterior = this.anterior(row as PlanoTrabalhoConsolidacao);\r\n    const proximo = this.proximo(row as PlanoTrabalhoConsolidacao);\r\n    const isAvaliador = this.auth.hasPermissionTo(\"MOD_PTR_CSLD_AVAL\") && (this.unidadeService.isGestorUnidade(unidadeId) || this.auth.isIntegrante('AVALIADOR_PLANO_TRABALHO', unidadeId));\r\n    const isUsuarioDoPlano = this.auth.usuario!.id == usuarioId;\r\n    const BOTAO_CONCLUIR = { hint: \"Concluir\", icon: \"bi bi-check-circle\", color: \"btn-outline-success\", onClick: this.concluir.bind(this) };\r\n    const BOTAO_CANCELAR_CONCLUSAO = { hint: \"Cancelar conclusão\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: this.cancelarConclusao.bind(this) };\r\n    const BOTAO_AVALIAR = { hint: \"Avaliar\", icon: \"bi bi-star\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, this.entity!.programa!, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_REAVALIAR = { hint: \"Reavaliar\", icon: \"bi bi-star-half\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, this.entity!.programa!, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_FAZER_RECURSO = { hint: \"Fazer recurso\", id: \"RECORRIDO\", icon: \"bi bi-journal-medical\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.fazerRecurso(row, this.entity!.programa!, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_CANCELAR_AVALIACAO = { hint: \"Cancelar avaliação\", id: \"INCLUIDO\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.cancelarAvaliacao(row, this, this.refreshConsolidacao.bind(this)) };\r\n    /* (RN_CSLD_11) Não pode concluir a consolidação antes que a anterior não esteja concluida, e não pode retornar status da consolidação se a posterior estiver a frente (em status); */\r\n    const canConcluir = !anterior || [\"CONCLUIDO\", \"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarConclusao = !proximo || [\"INCLUIDO\"].includes(proximo!.status);\r\n    const canAvaliar = !anterior || [\"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarAvaliacao = !proximo || [\"INCLUIDO\", \"CONCLUIDO\"].includes(proximo!.status);\r\n    if(!this.isDisabled()) {\r\n      if(consolidacao.status == \"INCLUIDO\" && canConcluir && (isUsuarioDoPlano || this.auth.hasPermissionTo(\"MOD_PTR_CSLD_CONCL\"))) {\r\n        result.push(BOTAO_CONCLUIR);\r\n      }\r\n      if(consolidacao.status == \"CONCLUIDO\" && canCancelarConclusao && this.planoTrabalhoService.diasParaConcluirConsolidacao(row, this.entity!.programa) >= 0 && (isUsuarioDoPlano || this.auth.hasPermissionTo(\"MOD_PTR_CSLD_DES_CONCL\"))) {\r\n        result.push(BOTAO_CANCELAR_CONCLUSAO);\r\n      }\r\n      if(consolidacao.status == \"CONCLUIDO\" && canAvaliar && isAvaliador) {\r\n        result.push(BOTAO_AVALIAR);\r\n      }\r\n      if(consolidacao.status == \"AVALIADO\" && consolidacao!.avaliacao) {\r\n        /* (RN_AVL_2) [PT] O usuário do plano de trabalho que possuir o acesso MOD_PTR_CSLD_REC_AVAL poderá recorrer da nota atribuida dentro do limites estabelecido pelo programa; */\r\n        if(isUsuarioDoPlano && this.auth.hasPermissionTo('MOD_PTR_CSLD_REC_AVAL') && consolidacao!.avaliacao?.data_avaliacao && \r\n          (!this.entity!.programa!.dias_tolerancia_recurso_avaliacao || \r\n          (this.util.daystamp(consolidacao!.avaliacao!.data_avaliacao) + this.entity!.programa!.dias_tolerancia_recurso_avaliacao > this.util.daystamp(this.auth.hora)))) {\r\n          result.push(BOTAO_FAZER_RECURSO);\r\n        }\r\n        /* (RN_AVL_3) [PT] Após o recurso será realizado nova avaliação, podendo essa ser novamente recorrida dentro do mesmo prazo estabelecido no programa; */\r\n        /* (RN_AVL_6) [PT] Qualquer usuário capaz de avaliar tambem terá a capacidade de cancelar a avaliação; */\r\n        if(canAvaliar && isAvaliador) {\r\n          result.push(BOTAO_REAVALIAR);\r\n          if(canCancelarAvaliacao) result.push(BOTAO_CANCELAR_AVALIACAO);\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n}\r\n","<grid [items]=\"items\" #grid [form]=\"form!\" [hasDelete]=\"true\" [minHeight]=\"0\"\n    [add]=\"addConsolidacao.bind(this)\" [hasAdd]=\"!isDisabled()\" [hasEdit]=\"false\" [hasDelete]=\"false\" editable>\n    <h5 class=\"my-2\">{{lex.translate(\"Consolidações\")}} <i class=\"bi bi-arrow-down\"></i></h5>\n    <columns>\n        <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidação')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\n            <ng-template let-row=\"row\" #columnConsolidacao>\n                <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\n            </ng-template>\n            <ng-template let-row=\"row\" #columnExpandedConsolidacao>\n                <plano-trabalho-consolidacao-form #consolidacao [disabled]=\"isDisabled(row)\" [entity]=\"row\" [planoTrabalho]=\"entity\" [cdRef]=\"cdRef\"></plano-trabalho-consolidacao-form>\n            </ng-template>\n        </column>\n        <column title=\"Data início\" [template]=\"columnDataInicio\">\n            <ng-template let-row=\"row\" #columnDataInicio>\n                {{util.getDateFormatted(row.data_inicio)}}\n            </ng-template>\n        </column>\n        <column title=\"Data fim\" [template]=\"columnDataFim\">\n            <ng-template let-row=\"row\" #columnDataFim>\n                {{util.getDateFormatted(row.data_fim)}}\n            </ng-template>\n        </column>\n        <column title=\"Estatísticas/Avaliações\" [template]=\"columnEstatisticas\" [width]=\"300\">\n            <ng-template let-row=\"row\" #columnEstatisticas>\n                <avaliar-nota-badge *ngIf=\"row.avaliacao\" [align]=\"'left'\" [tipoAvaliacao]=\"row.avaliacao.tipo_avaliacao || this.entity!.programa!.tipo_avaliacao_plano_trabalho\" [nota]=\"row.avaliacao.nota\"></avaliar-nota-badge>\n                <separator *ngIf=\"row.avaliacao?.recurso?.length\" title=\"Recurso da avaliação\" collapse [collapsed]=\"false\">\n                    <small>{{row.avaliacao.recurso}}</small>\n                </separator>\n            </ng-template>\n        </column>\n        <column title=\"Status\" [template]=\"columnStatus\">\n            <ng-template let-row=\"row\" #columnStatus>\n                <div class=\"one-per-line\">\n                    <badge [color]=\"lookup.getColor(lookup.CONSOLIDACAO_STATUS, row.status)\" [icon]=\"lookup.getIcon(lookup.CONSOLIDACAO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.CONSOLIDACAO_STATUS, row.status)\"></badge>\n                    <badge *ngIf=\"row.avaliacao?.recurso?.length\" icon=\"bi bi-journal-medical\" color=\"warning\" label=\"Recorrido\"></badge>\n                </div>\n            </ng-template>\n        </column>\n        <column type=\"options\" [dynamicButtons]=\"dynamicButtons.bind(this)\"></column>\n    </columns>\n</grid>","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageBase } from 'src/app/modules/base/page-base';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\n@Component({\r\n  selector: 'app-plano-trabalho-consolidacao',\r\n  templateUrl: './plano-trabalho-consolidacao.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoComponent extends PageFrameBase {\r\n  @ViewChild(TabsComponent, { static: false }) public tabs?: TabsComponent;\r\n  @ViewChild(InputSearchComponent, { static: false }) public unidadeSelecionada?: InputSearchComponent;\r\n\r\n  public usuarios: Usuario[] = [];\r\n  public unidade?: Unidade;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public loadingUnidade: boolean = false;\r\n  public filter: FormGroup;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      arquivados: { default: false }\r\n    });\r\n    this.filter = this.fh.FormBuilder({\r\n      unidade_id: { default: false }\r\n    });\r\n\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    this.tabs!.active = this.queryParams?.tab || \"USUARIO\";\r\n    this.tabs!.title = this.lex.translate('Consolidações');\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.unidade = this.auth.unidadeGestor();\r\n    this.filter!.controls.unidade_id.setValue(this.unidade?.id || this.auth.lotacao || null);\r\n    if(this.unidade) {\r\n      await this.loadUsuarios(this.unidade.id);\r\n    }\r\n  }\r\n  \r\n  public async loadUsuarios(unidade: any) {\r\n    this.usuarios = [];\r\n    this.loadingUnidade = true;\r\n    this.loading = true;\r\n    this.cdRef.detectChanges();\r\n    try {\r\n      this.usuarios = await this.unidadeDao.lotados(unidade);\r\n    } finally {\r\n      this.loading = false;\r\n      this.loadingUnidade = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let form: any = filter.value;\r\n    this.loadUsuarios(form.unidade_id);\r\n  }\r\n}\r\n","<tabs right #tabs [title]=\"isModal ? '' : title\">\r\n    <tab key=\"UNIDADE\" *ngIf=\"unidade\" [icon]=\"entityService.getIcon('Unidade')\" [label]=\"lex.translate('Unidade')\" [template]=\"tabUnidade\">\r\n        <ng-template #tabUnidade>\r\n            <filter [form]=\"filter\" [filter]=\"filterWhere\" [collapsed]=\"false\">\r\n                <div class=\"row\">\r\n                    <input-search [size]=\"12\" #unidadeSelecionada label=\"Selecione a unidade\" [control]=\"filter!.controls.unidade_id\" controlName=\"unidade_id\" [dao]=\"unidadeDao\"></input-search>\r\n                </div>\r\n            </filter>\r\n            <div class=\"p-3 mb-3 bg-body-secondary\">\r\n                <h5>{{lex.translate(\"Unidade\")}} selecionada: {{unidadeSelecionada?.selectedItem?.entity.sigla}} - {{unidadeSelecionada?.selectedItem?.entity.nome}}</h5>\r\n                <h4>{{lex.translate(\"Participantes\")}} <i class=\"bi bi-arrow-down\"></i></h4>\r\n            </div>\r\n            <div *ngIf=\"loading\" class=\"d-flex justify-content-center my-2\">\r\n                <div class=\"spinner-border\" role=\"status\">\r\n                    <span class=\"visually-hidden\"></span>\r\n                </div>\r\n            </div>\r\n            <collapse-card *ngFor=\"let usuario of usuarios\" [data]=\"usuario\" [titleTemplate]=\"usuarioCardTitle\" [template]=\"usuarioCard\">\r\n                <ng-template let-data=\"data\" #usuarioCardTitle>\r\n                    <div class=\"d-flex\">\r\n                        <div class=\"ms-3\">\r\n                            <profile-picture [url]=\"data.url_foto\" [size]=\"40\" [hint]=\"data.nome\"></profile-picture>\r\n                        </div>\r\n                        <div class=\"flex-fill ms-3\">\r\n                            <strong>{{data.nome || \"\"}}</strong><br>\r\n                            <small>{{data.apelido || \"\"}}</small>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template let-data=\"data\" #usuarioCard>\r\n                    <plano-trabalho-list-accordeon [usuarioId]=\"data.id\"></plano-trabalho-list-accordeon>\r\n                </ng-template>\r\n            </collapse-card>\r\n        </ng-template>\r\n    </tab>\r\n    <tab key=\"USUARIO\" [icon]=\"entityService.getIcon('Usuario')\" [label]=\"lex.translate('Usuário')\" [template]=\"tabUsuario\">\r\n        <ng-template #tabUsuario>\r\n            <div class=\"d-flex justify-content-between\">\r\n                <h5 class=\"mt-2\">{{lex.translate(\"Planos de Trabalho\")}} <i class=\"bi bi-arrow-down\"></i></h5>\r\n                <separator [control]=\"form!.controls.arquivados\" [title]=\"'Mostrar ' + lex.translate('Planos de trabalho') + ' arquivados?'\"></separator>\r\n            </div>            \r\n            <plano-trabalho-list-accordeon [usuarioId]=\"auth.usuario!.id\" [arquivados]=\"form!.controls.arquivados.value\"></plano-trabalho-list-accordeon>\r\n        </ng-template>\r\n    </tab>\r\n</tabs>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoDocumentoDaoService } from 'src/app/dao/tipo-documento-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { SeiKeys } from 'src/app/listeners/procedimento-trabalhar/procedimento-trabalhar.component';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoDocumento } from 'src/app/models/tipo-documento.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NavigateResult } from 'src/app/services/navigate.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form-termo',\r\n  templateUrl: './plano-trabalho-form-termo.component.html',\r\n  styleUrls: ['./plano-trabalho-form-termo.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormTermoComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('tipoDocumento', { static: false }) public tipoDocumento?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n\r\n  public unidadeDao: UnidadeDaoService;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public tipoDocumentoDao: TipoDocumentoDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public processo?: SeiKeys;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\"unidade\", \"usuario\", \"programa.template_tcr\", \"tipo_modalidade\", \"documento\", \"documentos\", \"atividades.atividade\"];\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.tipoDocumentoDao = injector.get<TipoDocumentoDaoService>(TipoDocumentoDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: {default: \"\"},\r\n      tempo_total: {default: \"\"},\r\n      tempo_proporcional: {default: \"\"},\r\n      data_inicio: {default: new Date()},\r\n      data_fim: {default: new Date()},\r\n      programa_id: {default: \"\"},\r\n      usuario_id: {default: \"\"},\r\n      unidade_id: {default: \"\"},\r\n      documento_id: {default: \"\"},\r\n      documentos: {default: []},\r\n      tipo_documento_id: {default: \"\"},\r\n      numero_processo: {default: \"\"},\r\n      vinculadas: {default: true},\r\n      tipo_modalidade_id: {default: \"\"},\r\n      forma_contagem_carga_horaria: {default: \"DIA\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == \"tipo_documento_id\" && !control?.value?.length && this.form?.controls?.numero_processo?.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    if(!this.tipoDocumento?.selectedEntity && form?.controls.tipo_documento_id.value?.length) {\r\n      return \"Aguarde o carregamento do tipo de documento\";\r\n    }\r\n    return undefined;\r\n  } \r\n\r\n  public onVinculadasChange(event: Event) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    await Promise.all ([\r\n      this.unidade!.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.usuario!.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.programa!.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade!.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    if(this.processo) {\r\n      formValue.id_processo = this.processo.id_processo;\r\n      formValue.numero_processo = this.processo.numero_processo;\r\n    }\r\n    formValue.data_inicio = this.auth.hora;\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getById(this.metadata.plano_trabalho.id, this.join))!;\r\n    this.processo = this.metadata?.processo;\r\n    await this.loadData(this.entity!, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<NavigateResult | undefined> {\r\n    return new Promise<NavigateResult | undefined>((resolve, reject) => {\r\n      //if(this.processo) {\r\n      resolve(new NavigateResult(Object.assign(this.form!.value, {\r\n        /* TODO Gerar documento do TCR\r\n        termo: this.termo!.conteudo,\r\n        atividades_termo_adesao: this.termo!.atividades.map((x: { nome: string; }) => this.util.removeAcentos(x.nome.toLowerCase())),*/\r\n        codigo_tipo_documento: (this.tipoDocumento?.selectedEntity as TipoDocumento)?.codigo\r\n      })));\r\n      /*} else {\r\n        const documento = Object.assign(new Documento(), {\r\n          especie: \"TERMO_ADESAO\",\r\n          conteudo: this.termo!.conteudo,\r\n          plano_id: this.entity!.id,\r\n          status: \"GERADO\"\r\n        });\r\n        this.documentoDao.save(documento).then(doc => resolve(undefined)).catch(reject);\r\n      }*/\r\n    });\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria?.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"TCR\") + ' ' + this.lex.translate(\"do Plano de Trabalho\") + ': ' + (entity?.usuario?.nome || \"\");\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [title]=\"isModal ? '' : title\" initialFocus=\"programa_id\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <separator [title]=\"lex.translate('Plano de trabalho')\" collapse [collapsed]=\"false\">\r\n        <div class=\"row\">\r\n            <input-search #programa [size]=\"6\" disabled controlName=\"programa_id\" [dao]=\"programaDao\"></input-search>\r\n            <input-search #usuario [size]=\"6\" disabled  controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-search #unidade [size]=\"5\" disabled controlName=\"unidade_id\" [dao]=\"unidadeDao\" ></input-search>\r\n            <input-search #tipoModalidade disabled [size]=\"3\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\"></input-search>\r\n            <input-text numbers disabled [size]=\"2\" label=\"% prod.\" icon=\"bi bi-hourglass-split\" controlName=\"ganho_produtividade\" [control]=\"form!.controls.ganho_produtividade\" [labelInfo]=\"'Percentual de ganho de produtividade (Será descontado do ' + lex.translate('tempo pactuado')+')'\" [attr.maxlength]=250></input-text>\r\n            <input-display [size]=\"2\" label=\"H. Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-display>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-datetime [size]=\"3\" disabled label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Início da Vigência do Programa\"></input-datetime>\r\n            <input-datetime [size]=\"3\" disabled label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim\" [control]=\"form!.controls.data_fim\" labelInfo=\"Final da Vigência do Programa\"></input-datetime>\r\n            <input-workload [size]=\"3\" disabled [unit]=\"formaContagemCargaHoraria\" label=\"C. Horária\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" [labelInfo]=\"'Carga horária' + lex.translate('do usuário')\"></input-workload>\r\n            <input-display [size]=\"3\" label=\"H. Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas úteis de trabalho no período de vigência considerando a carga horária, feriados e fins de semana\"></input-display>\r\n        </div>\r\n    </separator>\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"3\" disabled label=\"Data e hora\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Data de cadastro do termo\"></input-datetime>\r\n        <input-text [label]=\"'Número ' + lex.translate('Processo')\" [size]=\"3\" controlName=\"numero_processo\" [control]=\"form!.controls.numero_processo\" disabled labelInfo=\"Número do processo, com a formatação de origem\" [attr.maxlength]=250></input-text>\r\n        <input-search [size]=\"4\" #tipoDocumento [disabled]=\"!form!.controls.numero_processo.value?.length ? 'true' : undefined\" controlName=\"tipo_documento_id\" [dao]=\"tipoDocumentoDao\" required></input-search>\r\n        <input-switch label=\"Vinculadas\" [disabled]=\"entity?.atividades?.length ? 'true' : undefined\" [size]=\"2\" controlName=\"vinculadas\" [control]=\"form!.controls.vinculadas\" (change)=\"onVinculadasChange($event)\" labelInfo=\"Se inclui as atividades das unidades vinculadas a unidade do plano\"></input-switch>\r\n    </div>\r\n    <!--separator title=\"Pré-visualização do termo de adesão\" collapse [collapsed]=\"true\">\r\n        <plano-termo-adesao #termo [plano]=\"entity\" [vinculadas]=\"!!form?.controls?.vinculadas?.value\"></plano-termo-adesao>\r\n    </separator/-->\r\n</editable-form>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Documento } from 'src/app/models/documento.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { TipoModalidade } from 'src/app/models/tipo-modalidade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { DocumentoService } from 'src/app/modules/uteis/documentos/documento.service';\r\nimport { DocumentosComponent } from 'src/app/modules/uteis/documentos/documentos.component';\r\nimport { CalendarService, Efemerides } from 'src/app/services/calendar.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { TemplateDataset, TemplateService } from 'src/app/modules/uteis/templates/template.service';\r\nimport { Template } from 'src/app/models/template.model';\r\nimport { UtilService } from 'src/app/services/util.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form',\r\n  templateUrl: './plano-trabalho-form.component.html',\r\n  styleUrls: ['./plano-trabalho-form.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('gridDocumentos', { static: false }) public gridDocumentos?: GridComponent;\r\n  @ViewChild('tabs', { static: false }) public tabs?: TabsComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('atividade', { static: false }) public atividade?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @ViewChild('documentos', { static: false }) public documentos?: DocumentosComponent;\r\n\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public documentoService: DocumentoService;\r\n  public templateService: TemplateService;\r\n  public utilService: UtilService;\r\n  public allPages: ListenerAllPagesService;\r\n  public calendar: CalendarService;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public horasTotais?: Efemerides;\r\n  public horasParciais?: Efemerides;\r\n  public planoDataset: TemplateDataset[];\r\n  public joinPrograma: string[];\r\n  public entregas: LookupItem[] = [];\r\n  public planoTrabalho?: PlanoTrabalho;\r\n  public datasource: any;\r\n  public template?: Template;\r\n  public editingId?: string;\r\n  public gestoresUnidadeExecutora: string[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\r\n      \"unidade.entidade\", \r\n      \"entregas.entrega\", \r\n      \"entregas.plano_entrega_entrega:id,plano_entrega_id\", \r\n      \"usuario\",\r\n      \"programa.template_tcr\", \r\n      \"tipo_modalidade\", \r\n      \"documento\", \r\n      \"documentos.assinaturas.usuario:id,nome,apelido\", \r\n      \"entregas.plano_entrega_entrega.entrega\",\r\n      \"entregas.plano_entrega_entrega.plano_entrega.unidade:id,nome,sigla\",\r\n      'entregas.reacoes.usuario:id,nome,apelido'\r\n    ];\r\n    this.joinPrograma = [\"template_tcr\"];\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.documentoService = injector.get<DocumentoService>(DocumentoService);\r\n    this.templateService = injector.get<TemplateService>(TemplateService);\r\n    this.utilService = injector.get<UtilService>(UtilService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.modalWidth = 1300;\r\n    this.planoDataset = this.dao!.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: { default: \"\" },\r\n      tempo_total: { default: \"\" },\r\n      tempo_proporcional: { default: \"\" },\r\n      data_inicio: { default: new Date() },\r\n      data_fim: { default: new Date() },\r\n      usuario_id: { default: \"\" },\r\n      unidade_id: { default: \"\" },\r\n      programa_id: { default: \"\" },\r\n      documento_id: { default: null },\r\n      documentos: { default: [] },\r\n      atividades: { default: [] },\r\n      entregas: { default: [] },\r\n      tipo_modalidade_id: { default: \"\" },\r\n      forma_contagem_carga_horaria: { default: \"DIA\" },\r\n      editar_texto_complementar_unidade: { default: false },\r\n      editar_texto_complementar_usuario: { default: false },\r\n      unidade_texto_complementar: { default: \"\" },\r\n      usuario_texto_complementar: { default: \"\" },\r\n      criterios_avaliacao: { default: [] },\r\n      criterio_avaliacao: { default: \"\" }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public ngOnInit() {\r\n    super.ngOnInit();\r\n    const segment = (this.url ? this.url[this.url.length - 1]?.path : \"\") || \"\";\r\n    this.action = [\"termos\"].includes(segment) ? segment : this.action;\r\n    this.buscaGestoresUnidadeExecutora(this.entity?.unidade ?? null);\r\n  }\r\n\r\n  public atualizarTcr() {\r\n    this.entity = this.loadEntity();\r\n    let textoUsuario = this.form!.controls.usuario_texto_complementar.value;\r\n    let textoUnidade = this.form!.controls.unidade_texto_complementar.value;\r\n    let documento = this.planoTrabalhoService.atualizarTcr(this.planoTrabalho!, this.entity!, textoUsuario, textoUnidade);\r\n    this.form?.controls.documento_id.setValue(documento?.id);\r\n    this.form?.controls.documentos.setValue(this.entity!.documentos);\r\n    this.datasource = documento?.datasource || {};\r\n    this.template = this.entity.programa?.template_tcr;\r\n    this.editingId = [\"ADD\", \"EDIT\"].includes(documento?._status || \"\") ? documento!.id : undefined;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public get isTermos(): boolean {\r\n    return this.action == \"termos\";\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['unidade_id', 'programa_id', 'usuario_id', 'tipo_modalidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if (['carga_horaria'].indexOf(controlName) >= 0 && !control.value) {\r\n      result = \"Valor não pode ser zero.\";\r\n    } else if (['data_inicio', 'data_fim'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Inválido\";\r\n    } else if (controlName == 'data_fim' && this.util.isDataValid(this.form?.controls.data_inicio.value) && this.util.asTimestamp(control.value) <= this.util.asTimestamp(this.form!.controls.data_inicio.value)) {\r\n      result = \"Menor que o início\";\r\n    } else if (this.programa && controlName == 'data_inicio' && (control.value as Date).getTime() < this.programa!.selectedEntity?.data_inicio.getTime()) {\r\n      result = \"Menor que programa\";\r\n    } else if (this.programa && controlName == 'data_fim' && (control.value as Date).getTime() > this.programa!.selectedEntity?.data_fim.getTime()) {\r\n      result = \"Maior que programa\";\r\n    } else if (controlName == 'criterios_avaliacao' && control.value.length < 1) {\r\n      result = \"Insira ao menos um critério de avaliação\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = async (form?: FormGroup) => {\r\n    let result = \"\";\r\n    return result;\r\n    // TODO:\r\n    // Validar se as entregas pertencem ao plano de entregas da unidade\r\n  };\r\n\r\n  public onUnidadeSelect(selected: SelectItem) {\r\n    let unidade = this.unidade?.selectedEntity as Unidade;\r\n    this.entity!.unidade = unidade;\r\n    this.entity!.unidade_id = unidade.id;\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\");\r\n    this.form!.controls.unidade_texto_complementar.setValue(unidade?.texto_complementar_plano || \"\");\r\n    this.unidadeDao.getById(unidade.id, ['gestor:id,usuario_id','gestores_substitutos:id,usuario_id','gestores_delegados:id,usuario_id']).then( unidade => {\r\n      this.buscaGestoresUnidadeExecutora(unidade);\r\n    });\r\n  }\r\n\r\n  public onProgramaSelect(selected: SelectItem) {\r\n    let programa = selected.entity as Programa;\r\n    this.entity!.programa_id = programa.id;\r\n    this.entity!.programa = programa;\r\n    this.form?.controls.criterios_avaliacao.setValue(programa.plano_trabalho_criterios_avaliacao || []);\r\n    this.form?.controls.data_inicio.updateValueAndValidity();\r\n    this.form?.controls.data_fim.updateValueAndValidity();\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onUsuarioSelect(selected: SelectItem) {\r\n    this.form!.controls.usuario_texto_complementar.setValue((selected.entity as Usuario)?.texto_complementar_plano || \"\");\r\n    if(!this.form?.controls.unidade_id.value) {\r\n      selected.entity.unidades.every(async (unidade: any) => {\r\n        if (selected.entity.lotacao.unidade_id == unidade.id) {\r\n          if(!this.form?.controls.programa_id.value) {\r\n            let niveis = unidade.path.split(\"/\").reverse();\r\n            let hoje = new Date();\r\n            let preenchido = 0;\r\n            let indice = 0;\r\n            while (preenchido == 0) {\r\n              await this.programaDao.query({where : [[\"unidade_id\",\"==\",niveis[indice],],[\"data_inicio\",\"<\", hoje],[\"data_fim\",\">\", hoje]]}).asPromise().then( programa => {\r\n                if (programa.length > 0 && preenchido == 0) {\r\n                  preenchido = 1;\r\n                  this.preencheUnidade(unidade);\r\n                  this.preenchePrograma(programa[0]!);\r\n                }\r\n              })\r\n              indice += 1;\r\n            }\r\n          }\r\n        return false;\r\n        } else return true;\r\n      })\r\n    }\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public preencheUnidade(unidade: Unidade) {\r\n    this.form?.controls.unidade_id.setValue(unidade.id);\r\n    this.entity!.unidade = unidade;\r\n    this.entity!.unidade_id = unidade.id;\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\");\r\n    this.form!.controls.unidade_texto_complementar.setValue(unidade?.texto_complementar_plano || \"\");\r\n    this.unidadeDao.getById(unidade.id, ['gestor:id,usuario_id','gestores_substitutos:id,usuario_id','gestores_delegados:id,usuario_id']).then( unidade => {\r\n      this.buscaGestoresUnidadeExecutora(unidade);\r\n    });\r\n  }\r\n\r\n  public preenchePrograma(programa: Programa) {\r\n    this.form?.controls.programa_id.setValue(programa.id);\r\n    this.entity!.programa_id = programa.id;\r\n    this.entity!.programa = programa;\r\n    this.form?.controls.criterios_avaliacao.setValue(programa.plano_trabalho_criterios_avaliacao || []);\r\n    this.form?.controls.data_inicio.updateValueAndValidity();\r\n    this.form?.controls.data_fim.updateValueAndValidity();\r\n  }\r\n\r\n  public onDataInicioChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onDataFimChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onCargaHorariaChenge(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public calculaTempos() {\r\n    const inicio = this.form?.controls.data_inicio.value;\r\n    const fim = this.form?.controls.data_fim.value;\r\n    const carga = this.form?.controls.carga_horaria.value || 8;\r\n    const usuario = this.usuario?.selectedEntity as Usuario;\r\n    const unidade = this.unidade?.selectedEntity as Unidade;\r\n    if (usuario && unidade && this.util.isDataValid(inicio) && this.util.isDataValid(fim) && this.util.asTimestamp(inicio) < this.util.asTimestamp(fim)) {\r\n      this.calendar.loadFeriadosCadastrados(unidade.id).then((feriados) => {\r\n        this.horasTotais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, unidade, \"ENTREGA\", [], []);\r\n        this.horasParciais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, unidade, \"ENTREGA\", [], usuario.afastamentos);\r\n        this.form?.controls.tempo_total.setValue(this.horasTotais.tempoUtil);\r\n        this.form?.controls.tempo_proporcional.setValue(this.horasParciais.tempoUtil);\r\n      });\r\n    }\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    this.planoTrabalho = new PlanoTrabalho(entity);\r\n    await Promise.all([\r\n      this.calendar.loadFeriadosCadastrados(entity.unidade_id),\r\n      this.usuario?.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.unidade?.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.programa?.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade?.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    let formValue = Object.assign({}, form.value);\r\n    form.patchValue(this.util.fillForm(formValue, entity));\r\n    /*let documento = entity.documentos.find(x => x.id == entity.documento_id);\r\n    if(documento) this._datasource = documento.datasource;*/\r\n    this.calculaTempos();\r\n    this.atualizarTcr();\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    if (this.isTermos) {\r\n      this.entity = (await this.dao!.getById(this.urlParams!.get(\"id\")!, this.join))!;\r\n    } else {\r\n      this.entity = new PlanoTrabalho();\r\n      this.entity.carga_horaria = this.auth.entidade?.carga_horaria_padrao || 8;\r\n      this.entity.forma_contagem_carga_horaria = this.auth.entidade?.forma_contagem_carga_horaria || \"DIA\";\r\n      this.entity.unidade_id = this.auth.unidade!.id;\r\n      this.buscaGestoresUnidadeExecutora(this.auth.unidade!);\r\n      if(!this.gestoresUnidadeExecutora.includes(this.auth.unidade!.id)) {\r\n        this.entity.usuario_id = this.auth.usuario!.id;\r\n      }\r\n    }\r\n    await this.loadData(this.entity, this.form!);\r\n    let nowDate = new Date(); \r\n    nowDate.setHours(0,0,0,0)\r\n    this.form?.controls.data_inicio.setValue(nowDate);\r\n    this.form?.controls.data_fim.setValue(\"\");\r\n  }\r\n\r\n  /* Cria um objeto Plano baseado nos dados do formulário */\r\n  public loadEntity(): PlanoTrabalho {\r\n    let plano: PlanoTrabalho = this.util.fill(new PlanoTrabalho(), this.entity!);\r\n    plano = this.util.fillForm(plano, this.form!.value);\r\n    plano.usuario = (this.usuario!.selectedEntity || this.entity?.usuario) as Usuario;\r\n    plano.unidade = (this.unidade?.selectedEntity || this.entity?.unidade) as Unidade;\r\n    plano.programa = (this.programa?.selectedEntity || this.entity?.programa) as Programa;\r\n    plano.tipo_modalidade = (this.tipoModalidade!.selectedEntity || this.entity?.tipo_modalidade) as TipoModalidade;\r\n    return plano;\r\n  }\r\n\r\n  public async saveData(form: IIndexable): Promise<PlanoTrabalho | boolean> {\r\n    //let plano = this.loadEntity();\r\n    /* Atualiza o documento */\r\n    this.atualizarTcr();\r\n    /* Confirma dados do documento */\r\n    this.documentos?.saveData();\r\n    this.entity!.documentos = this.entity!.documentos.filter((documento: Documento) => {\r\n      return [\"ADD\", \"EDIT\", \"DELETE\"].includes(documento._status || \"\");\r\n    });\r\n    /* Salva separadamente as informações do plano */\r\n    this.submitting = true;\r\n    try {\r\n      let requests: Promise<any>[] = [this.dao!.save(this.entity!, this.join)];\r\n      if (this.form!.controls.editar_texto_complementar_unidade.value) requests.push(this.unidadeDao.update(this.entity!.unidade_id, { texto_complementar_plano: this.form!.controls.unidade_texto_complementar.value }));\r\n      if (this.form!.controls.editar_texto_complementar_usuario.value) requests.push(this.usuarioDao.update(this.entity!.usuario_id, { texto_complementar_plano: this.form!.controls.usuario_texto_complementar.value }));\r\n      let responses = await Promise.all(requests);\r\n      this.entity = responses[0] as PlanoTrabalho;\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public onTabSelect(tab: LookupItem) {\r\n    if (tab.key == \"TERMO\") this.atualizarTcr();\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"Plano de Trabalho\") + ': ' + (entity?.usuario?.apelido || \"\");\r\n  }\r\n\r\n  public documentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let documento: Documento = row as Documento;\r\n\r\n    if (this.isTermos && this.planoTrabalhoService.needSign(this.entity, documento)) {\r\n      result.push({ hint: \"Assinar\", icon: \"bi bi-pen\", onClick: this.signDocumento.bind(this) });\r\n    }\r\n    result.push({ hint: \"Preview\", icon: \"bi bi-zoom-in\", onClick: ((documento: Documento) => { this.dialog.html({ title: \"Termo de adesão\", modalWidth: 1000 }, documento.conteudo || \"\"); }).bind(this) });\r\n\r\n    return result;\r\n  }\r\n\r\n  public addItemHandleCriteriosAvaliacao(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form!.controls.criterio_avaliacao.value;\r\n    const key = this.util.textHash(value);\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.criterios_avaliacao.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form!.controls.criterio_avaliacao.value\r\n      };\r\n      this.form!.controls.criterio_avaliacao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public async signDocumento(documento: Documento) {\r\n    await this.documentoService.sign([documento]);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public onFormaContagemCargaHorariaChange(unit: UnitWorkload) {\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unit == \"day\" ? \"DIA\" : unit == \"week\" ? \"SEMANA\" : \"MES\");\r\n  }\r\n\r\n  public isVigente(documento: Documento): boolean {\r\n    return this.form!.controls.documento_id.value == documento.id;\r\n  }\r\n\r\n  public buscaGestoresUnidadeExecutora(unidade: Unidade | null){\r\n    if (unidade) [unidade.gestor?.usuario_id, ...unidade.gestores_substitutos?.map(x => x.usuario_id), ...unidade!.gestores_delegados?.map(x => x.usuario_id)].forEach(gestor => {\r\n      if (gestor) this.gestoresUnidadeExecutora.push(gestor);\r\n    });\r\n    return this.gestoresUnidadeExecutora;\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [noButtons]=\"isTermos ? 'true' : undefined\" initialFocus=\"plano_entrega_id\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\n    <tabs #tabs display right [hidden]=\"isTermos ? 'true' : undefined\" [title]=\"!isModal ? title : ''\" [select]=\"onTabSelect.bind(this)\">\n        <tab key=\"DADOS\" label=\"Dados\">\n            <div class=\"row\">\n                <div class=\"col-md-10\">\n                    <div class=\"row\">\n                        <!-- (RI_PTR_1) No formulário de inclusão/edição de um plano de trabalho, o input-search de unidade, programa e usuario devem ficar desabilitados nas edições e habilitado apenas nas inclusões; -->\n                        <input-search #usuario [size]=\"4\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"usuario_id\" [dao]=\"usuarioDao\" [join]=\"['afastamentos','lotacao','unidades','participacoes_programas']\" (select)=\"onUsuarioSelect($event)\"></input-search>\n                        <input-search #unidade [size]=\"4\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"unidade_id\" [dao]=\"unidadeDao\" (select)=\"onUnidadeSelect($event)\"></input-search>\n                        <input-search #programa [size]=\"4\" [label]=\"lex.translate('Programa de gestão')\" icon=\"bi bi-file-bar-graph\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"programa_id\" [join]=\"joinPrograma\" [dao]=\"programaDao\" (select)=\"onProgramaSelect($event)\"></input-search>\n                    </div>\n                    <div class=\"row\">\n                        <input-datetime [size]=\"3\" label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" (change)=\"onDataInicioChange($event)\" [labelInfo]=\"'Início da Vigência do '+ lex.translate('Plano de trabalho')\" required></input-datetime>\n                        <input-datetime [size]=\"3\" label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim\" [control]=\"form!.controls.data_fim\" (change)=\"onDataFimChange($event)\" [labelInfo]=\"'Final da Vigência do ' +lex.translate('Plano de trabalho')\" required></input-datetime>\n                        <input-search #tipoModalidade [size]=\"6\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\" required></input-search>\n                    </div>\n                    <ng-container *ngIf=\"tipoModalidade!.selectedEntity?.plano_trabalho_calcula_horas\">\n                        <div class=\"row\">\n                            <input-workload [size]=\"4\" [unit]=\"formaContagemCargaHoraria\" label=\"Carga Horária\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" [unitChange]=\"onFormaContagemCargaHorariaChange.bind(this)\" (change)=\"onCargaHorariaChenge($event)\" labelInfo=\"Carga horária do usuário (Máx.: diária 24 horas; semana 24*5=240 horas; mensal 24*20=480 horas)\" required></input-workload>\n                            <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas úteis de trabalho no período de vigência considerando a carga horária, feriados e fins de semana\"></input-timer>\n                            <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-timer>\n                        </div>\n                        <separator *ngIf=\"horasTotais\" title=\"Cálculos das horas totais\" collapse>\n                            <calendar-efemerides [efemerides]=\"horasTotais\" [partial]=\"false\"></calendar-efemerides>\n                        </separator>\n                        <separator *ngIf=\"horasParciais\" title=\"Cálculos das horas parciais\" collapse>\n                            <calendar-efemerides [efemerides]=\"horasParciais\"></calendar-efemerides>\n                        </separator>\n                    </ng-container>\n                </div>\n                <div class=\"col-md-2\">\n                    <input-multiselect label=\"Critérios de avaliação\" noBox [maxListHeight]=\"100\" controlName=\"criterios_avaliacao\" [size]=\"12\" [addItemHandle]=\"addItemHandleCriteriosAvaliacao.bind(this)\" required>\n                        <input-text [size]=\"12\" controlName=\"criterio_avaliacao\" [attr.maxlength]=250></input-text>\n                    </input-multiselect>\n                </div>\n            </div>\n            <separator [title]=\"lex.translate('Entregas') + lex.translate(' do plano de trabalho')\">\n                <top-alert *ngIf=\"!form!.controls.programa_id.value?.length || !form!.controls.unidade_id.value?.length\" type=\"warning\" [message]=\"'Antes de incluir ' + lex.translate('entrega') + ' neste ' + lex.translate('Plano de Trabalho') + ', é necessário selecionar ' + lex.translate('a Unidade') + ' e ' + ' o ' +  lex.translate('Programa') + '!'\"></top-alert>\n                <div *ngIf=\"form!.controls.programa_id.value?.length && form!.controls.unidade_id.value?.length\">\n                    <plano-trabalho-list-entrega noPersist [disabled]=\"formDisabled\" [entity]=\"entity\"></plano-trabalho-list-entrega>\n                </div>\n            </separator>\n        </tab>\n        <tab *ngIf=\"checkFilled(['usuario_id'])\" key=\"MENSAGENS\" [label]=\"lex.translate('Texto Complementar')\">\n            <separator [title]=\"'Texto complementar da '+ lex.translate('unidade')\">\n                <input-switch controlName=\"editar_texto_complementar_unidade\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar '+ lex.translate('na unidade')\"></input-switch>\n                <input-editor controlName=\"unidade_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_unidade.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\n            </separator>\n            <separator title=\"Texto complementar do usuario\">\n                <input-switch controlName=\"editar_texto_complementar_usuario\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar '+ lex.translate('do usuário')\"></input-switch>\n                <input-editor controlName=\"usuario_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_usuario.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\n            </separator>\n        </tab>\n        <tab *ngIf=\"checkFilled(['usuario_id', 'programa_id', 'tipo_modalidade_id'])\" key=\"TERMO\" [label]=\"lex.translate('Termo')\">\n            <!--top-alert *ngIf=\"!isTermos\" type=\"warning\" message=\"Para [INSERIR] ou [ASSINAR] termos escolha opção Termos de adesão na tela de listagem, ou utilize o Sei\"></top-alert/-->\n            <div clss=\"row\">\n                <documentos #documentos [entity]=\"entity\" [disabled]=\"formDisabled\" noPersist [cdRef]=\"cdRef\" [needSign]=\"planoTrabalhoService.needSign\" [extraTags]=\"planoTrabalhoService.extraTags\" especie=\"TCR\" [editingId]=\"formDisabled ? undefined : editingId\" [datasource]=\"datasource\" [template]=\"programa?.selectedEntity?.template_tcr\"></documentos>\n            </div>\n        </tab>\n    </tabs>\n</editable-form>\n","import { Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { AccordionComponent } from 'src/app/components/accordion/accordion.component';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-accordeon',\r\n  templateUrl: './plano-trabalho-list-accordeon.component.html',\r\n  styleUrls: ['./plano-trabalho-list-accordeon.component.scss']\r\n})\r\nexport class PlanoTrabalhoListAccordeonComponent extends PageFrameBase {\r\n  @ViewChild('accordion', { static: false }) public accordion?: AccordionComponent;\r\n  @Input() usuarioId?: string;\r\n  @Input() set arquivados(value: boolean) {\r\n    if(this._arquivados != value) {\r\n      this._arquivados = value;\r\n      if(this.viewInit) this.loadData(this.entity!, this.form);\r\n    }\r\n  }\r\n  get arquivados(): boolean {\r\n    return this._arquivados;\r\n  }\r\n\r\n  public selectedIndex: number = -1;\r\n  public dao?: PlanoTrabalhoDaoService;\r\n  public planos: PlanoTrabalho[] = [];\r\n\r\n  private _arquivados: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.accordion!.loading = true;\r\n    try {\r\n      let dados = await this.dao!.getByUsuario(this.usuarioId!, this.arquivados);\r\n      let agora = (new Date()).getTime();\r\n      let self = this;\r\n      this.planos = dados.planos;\r\n      for(var i = 0; i < this.planos.length; i++) {\r\n        if(this.util.asTimestamp(this.planos[i].data_inicio) <= agora && agora <= this.util.asTimestamp(this.planos[i].data_fim) && [\"ATIVO\", \"CONCLUIDO\"].includes(this.planos[i].status)) {\r\n          this.selectedIndex = i;\r\n        }\r\n      }\r\n    } finally {\r\n      this.accordion!.loading = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public getPlanoBadges(plano: PlanoTrabalho): BadgeButton[] {\r\n    let result: BadgeButton[] = [];\r\n    let concluidos = plano.consolidacoes.filter(x => x.status == \"CONCLUIDO\");\r\n    let avaliados = plano.consolidacoes.filter(x => x.status == \"AVALIADO\");\r\n    if(concluidos.length) {\r\n      const concluido = this.lookup.getLookup(this.lookup.CONSOLIDACAO_STATUS, \"CONCLUIDO\");\r\n      result.push({\r\n        icon: concluido?.icon,\r\n        label: concluido?.value,\r\n        color: concluido?.color,\r\n        textValue: concluidos.length.toString()\r\n      });\r\n    }\r\n    if(avaliados.length) {\r\n      const avaliado = this.lookup.getLookup(this.lookup.CONSOLIDACAO_STATUS, \"AVALIADO\");\r\n      result.push({\r\n        icon: avaliado?.icon,\r\n        label: avaliado?.value,\r\n        color: avaliado?.color,\r\n        textValue: avaliados.length.toString()\r\n      });\r\n    }\r\n    if(JSON.stringify(plano._metadata?.badges) != this.JSON.stringify(result)) {\r\n      plano._metadata = Object.assign(plano._metadata || {}, { badges: result });\r\n    }\r\n    return plano._metadata.badges;\r\n  }\r\n\r\n}\r\n","<div class=\"p-3 bg-body-secondary mb-3\">    \r\n    <div class=\"row w-100\">\r\n        <div class=\"col-md-1\">#ID</div>\r\n        <div class=\"col-md-4\">{{lex.translate('Participante')}}/{{lex.translate('Unidade')}}/{{lex.translate('Programa')}}/{{lex.translate('Tipo de modalidade')}}</div>\r\n        <div class=\"col-md-3\">Vigência</div>\r\n        <div class=\"col-md-2\"></div>\r\n        <div class=\"col-md-2\">Status</div>\r\n    </div>\r\n</div>\r\n\r\n<accordion #accordion [items]=\"planos\" [selectedIndex]=\"selectedIndex\" [titleTemplate]=\"planoTrabalhoSectionTitle\" [template]=\"planoTrabalhoSection\">\r\n    <ng-template let-item=\"item\" #planoTrabalhoSectionTitle>\r\n        <div class=\"row w-100\">\r\n            <div class=\"col-md-1\">{{'#' + item.numero}}</div>\r\n            <div class=\"col-md-4\">\r\n                <badge [icon]=\"entityService.getIcon('Usuario')\" [label]=\"item.usuario?.nome\" color=\"light\" [hint]=\"lex.translate('Participante') + ': ' + item.usuario?.nome\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"item.unidade?.sigla\" color=\"light\" [hint]=\"lex.translate('Unidade') + ': ' + item.unidade?.nome\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('Programa')\" [label]=\"item.programa?.nome\" color=\"light\" [hint]=\"lex.translate('Programa')\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('TipoModalidade')\" [label]=\"item.tipo_modalidade?.nome\" color=\"light\" [hint]=\"lex.translate('Tipo de modalidade')\"></badge>\r\n            </div>\r\n            <div class=\"col-md-3\">\r\n                {{dao!.getDateFormatted(item.data_inicio)+\" até \"+dao!.getDateFormatted(item.data_fim)}}\r\n            </div>\r\n            <div class=\"col-md-2\">\r\n                <badge *ngFor=\"let badge of getPlanoBadges(item)\" [badge]=\"badge\"></badge>\r\n            </div>\r\n            <div class=\"col-md-2\">\r\n                <badge [label]=\"lookup.getValue(lookup.PLANO_TRABALHO_STATUS, item.status)\" [icon]=\"lookup.getIcon(lookup.PLANO_TRABALHO_STATUS, item.status)\" [color]=\"lookup.getColor(lookup.PLANO_TRABALHO_STATUS, item.status)\"></badge>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template let-item=\"item\" #planoTrabalhoSection>\r\n        <plano-trabalho-consolidacao-list [entity]=\"item\"></plano-trabalho-consolidacao-list>\r\n    </ng-template>\r\n</accordion>\r\n","import { ChangeDetectorRef, Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { PlanoTrabalhoEntregaDaoService } from 'src/app/dao/plano-trabalho-entrega-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { PlanoEntregaDaoService } from 'src/app/dao/plano-entrega-dao.service';\r\nimport { PlanoEntregaEntregaDaoService } from 'src/app/dao/plano-entrega-entrega-dao.service';\r\nimport { PlanoEntrega } from 'src/app/models/plano-entrega.model';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { PlanoEntregaEntrega } from 'src/app/models/plano-entrega-entrega.model';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-entrega',\r\n  templateUrl: './plano-trabalho-list-entrega.component.html',\r\n  styleUrls: ['./plano-trabalho-list-entrega.component.scss']\r\n})\r\nexport class PlanoTrabalhoListEntregaComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('origem', { static: false }) public origem?: InputSelectComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) { if (this._disabled != value) this._disabled = value; } get disabled(): boolean { return this._disabled; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() cdRef: ChangeDetectorRef;\r\n\r\n  public get items(): PlanoTrabalhoEntrega[] {\r\n    if (!this.gridControl.value) this.gridControl.setValue(new PlanoTrabalho());\r\n    if (!this.gridControl.value.entregas) this.gridControl.value.entregas = [];\r\n    return this.gridControl.value.entregas;\r\n  }\r\n  public options: ToolbarButton[] = [];\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoEntregaDao?: PlanoEntregaDaoService;\r\n  public peeDao?: PlanoEntregaEntregaDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public totalForcaTrabalho: number = 0;\r\n  public entregas: LookupItem[] = [];\r\n\r\n  private _disabled: boolean = false;\r\n  //Colocar o plano de entrega em execucao quando for propria unidade\r\n  //quando adiciona um novo e edita o mesmo, salva 2x no banco\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoEntregaDaoService>(PlanoTrabalhoEntregaDaoService);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.planoEntregaDao = injector.get<PlanoEntregaDaoService>(PlanoEntregaDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.peeDao = injector.get<PlanoEntregaEntregaDaoService>(PlanoEntregaEntregaDaoService);\r\n    this.join = [\"entrega\", \"plano_entrega_entrega.entrega\", \"plano_entrega_entrega.plano_entrega:id,unidade_id\", \"plano_entrega_entrega.plano_entrega.unidade:id,sigla\"];\r\n    this.form = this.fh.FormBuilder({\r\n      origem: { default: null },\r\n      orgao: { default: null },\r\n      descricao: { default: \"\" },\r\n      forca_trabalho: { default: 1 },\r\n      plano_trabalho_id: { default: null },\r\n      plano_entrega_id: { default: null },\r\n      plano_entrega_entrega_id: { default: null }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a validação dos campos do formulário, por ocasião da edição ou inserção de itens.\r\n   * @param control \r\n   * @param controlName \r\n   * @returns \r\n   */\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && control.value == 1) return result;\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && !control.value) result = \"Obrigatório!\";\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) result = \"Obrigatório!\";\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && (control.value < 1 || control.value > 100)) result = \"Deve estar entre 1 e 100\";\r\n    if (['plano_entrega_entrega_id'].indexOf(controlName) >= 0) {\r\n      if (['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(this.form?.controls.origem.value) && !control.value) result = \"Obrigatório!\";\r\n      if (!!this.entity?.entregas?.filter(e => !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).find(x => x.plano_entrega_entrega_id == control.value)) result = \"Esta entrega está em duplicidade!\"; /* (*2) */\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validateEntregas(): string | undefined {\r\n    let planoInterval = { start: this.entity!.data_inicio, end: this.entity!.data_fim };\r\n    for (let entrega of this.items) {\r\n      let entregaPlano = entrega.plano_entrega_entrega;\r\n      // valida as datas das entregas quando vinculado a uma entrega do plano de entrega\r\n      if (entregaPlano) {\r\n        let entregaDataFim = entregaPlano!.data_fim ? entregaPlano!.data_fim : (entregaPlano!.data_inicio.getTime() <= this.entity!.data_fim.getTime() ? this.entity!.data_fim : undefined);\r\n        let entregaInterval = { start: entregaPlano!.data_inicio, end: entregaPlano!.data_fim || entregaPlano!.data_inicio };\r\n        if (!entregaDataFim || !this.util.intersection([entregaInterval, planoInterval])) {\r\n          return this.lex.translate(\"Entrega\") + \" \" + entregaPlano!.descricao + \" possui datas incompatíveis (início \" +\r\n            this.util.getDateFormatted(entregaPlano!.data_inicio) + (entregaPlano!.data_fim ? \"e fim \" + this.util.getDateFormatted(entregaPlano!.data_fim) : \"\") + \")\";\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente. Neste momento são carregadas as entregas do catálogo e as entregas da mesma unidade do plano de trabalho,\r\n   * visto que esses itens não se alteram durante a vida do componente e poderão ser utilizados durante sua utilização.\r\n   */\r\n  async ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity = this.metadata?.entity || this.entity;\r\n    this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n    this.entity!._metadata = this.entity!._metadata || {};\r\n    this.entity!._metadata.novaEntrega = undefined;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para inserir uma entrega de plano de trabalho no grid, seja este componente persistente ou não.\r\n   * @returns \r\n   */\r\n  public async addEntrega() {\r\n    return Object.assign(new PlanoTrabalhoEntrega(), {\r\n      _status: \"ADD\",\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity?.id\r\n    }) as IIndexable;\r\n  }\r\n\r\n  /**\r\n   * Método utilizado durante a inclusão/alteração de uma entrega de plano de trabalho no grid, seja este componente persistente ou não\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadEntrega(form: FormGroup, row: any) {\r\n    let entrega: PlanoTrabalhoEntrega = row;\r\n    form.controls.descricao.setValue(row.descricao);\r\n    form.controls.forca_trabalho.setValue(row.forca_trabalho);\r\n    form.controls.plano_trabalho_id.setValue(row.plano_trabalho_id);\r\n    form.controls.orgao.setValue(null);\r\n    form.controls.plano_entrega_entrega_id.setValue(null);\r\n    if (row.plano_entrega_entrega) {\r\n      form.controls.plano_entrega_id.setValue(row.plano_entrega_entrega.plano_entrega.id);\r\n      form.controls.plano_entrega_entrega_id.setValue(row.plano_entrega_entrega_id);\r\n    }\r\n    if (entrega._status == \"ADD\" && !form.controls.plano_entrega_id.value) { // É uma nova entrega\r\n      form.controls.origem.setValue('PROPRIA_UNIDADE');\r\n    } else if (entrega.plano_entrega_entrega?.plano_entrega?.unidade_id == this.entity!.unidade_id) {\r\n      form.controls.origem.setValue('PROPRIA_UNIDADE');\r\n      await this.carregarEntregas(entrega.plano_entrega_entrega.plano_entrega_id!);\r\n      form.controls.plano_entrega_entrega_id.setValue(entrega.plano_entrega_entrega_id);\r\n    } else if (entrega.plano_entrega_entrega) {\r\n      form.controls.origem.setValue('OUTRA_UNIDADE');\r\n      await this.carregarEntregas(entrega.plano_entrega_entrega.plano_entrega_id!);\r\n      form.controls.plano_entrega_entrega_id.setValue(entrega.plano_entrega_entrega_id);\r\n    } else if (!!entrega.orgao?.length) {\r\n      form.controls.origem.setValue('OUTRO_ORGAO');\r\n      form.controls.orgao.setValue(entrega.orgao);\r\n    } else {\r\n      form.controls.origem.setValue('SEM_ENTREGA');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a exclusão de uma entrega de plano de trabalho do grid, seja este componente persistente ou não. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeEntrega(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\");\r\n    if (confirm) {\r\n      this.loading = true;\r\n      try {\r\n        this.isNoPersist ? Object.assign(row, { _status: \"DELETE\" }) : await this.dao?.delete(row.id);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      this.totalForcaTrabalho = Math.round((this.totalForcaTrabalho - ((row as PlanoTrabalhoEntrega).forca_trabalho * 1)) * 100) / 100;\r\n      return this.isNoPersist ? false : true; // (*3)\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Método chamado no salvamento de uma entrega do plano de trabalho do grid, seja este componente persistente ou não.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveEntrega(form: FormGroup, row: any) {\r\n    this.entity!._metadata = this.entity!._metadata || {};\r\n    this.entity!._metadata.novaEntrega = row as PlanoTrabalhoEntrega;\r\n    this.entity!._metadata.novaEntrega.plano_entrega_entrega_id = this.form?.controls.plano_entrega_entrega_id.value;\r\n    this.entity!._metadata.novaEntrega.orgao = this.form?.controls.orgao.value;\r\n    this.entity!._metadata.novaEntrega.descricao = this.form?.controls.descricao.value;\r\n    this.entity!._metadata.novaEntrega.forca_trabalho = this.form?.controls.forca_trabalho.value;\r\n    this.loading = true;\r\n    try {\r\n      if (!this.isNoPersist) /* persistente */ { (this.dao as PlanoTrabalhoEntregaDaoService).save(this.entity!._metadata.novaEntrega, this.join); }\r\n    } catch (e: any) {\r\n      this.error(e.message ? e.message : e.toString() || e);\r\n    } finally {\r\n      row.forca_trabalho = this.form?.controls.forca_trabalho.value * 1;\r\n      row.plano_entrega_entrega = this.entrega?.selectedItem?.data || null;\r\n      this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n      this.loading = false;\r\n    }\r\n    return this.entity!._metadata.novaEntrega;\r\n  }\r\n\r\n  /**\r\n   *  Quando uma nova entrega de plano de trabalho é incluída no grid, o objeto '_metadata' é anexado em 'this.entity' para permitir a atualização do grid antes da atualização da página.\r\n   *  Após a atualização do grid, este método é chamado para excluir o objeto '_metadata' e garantir que, no caso da inserção de várias entregas no grid, apenas a última seja lida a partir deste objeto.\r\n   * @param row \r\n   */\r\n  public saveEndEntrega(row: any) {\r\n    this.entity!._metadata = null;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para somar os percentuais das forças de trabalho do array de entregas passado como parâmetro.\r\n   * @param entregas Array de entregas do plano de trabalho\r\n   * @returns \r\n   */\r\n  public somaForcaTrabalho(entregas: PlanoTrabalhoEntrega[] = []): number {\r\n    return entregas.map(x => x.forca_trabalho * 1).reduce((a, b) => a + b, 0);\r\n  }\r\n\r\n  /**\r\n   * Método chamado para carregar as entregas da unidade\r\n   * @param idPlanoOuPlano ID do plano de entregas ou o seu objeto completo.\r\n   */\r\n  public async carregarEntregas(idPlanoOuPlano: string | PlanoEntrega): Promise<void> {\r\n    let planoEntrega = typeof idPlanoOuPlano == 'string' ? await this.planoEntregaDao!.getById(idPlanoOuPlano, [\"entregas.entrega:id,nome\", \"unidade\"]) : idPlanoOuPlano;\r\n    let planoEntregaComUnidade = { id: planoEntrega?.id, unidade_id: planoEntrega?.unidade_id, unidade: planoEntrega?.unidade };\r\n    this.entregas = planoEntrega?.entregas.map(epe => Object.assign({}, { key: epe.id, value: epe.descricao || epe.entrega?.nome || \"Desconhecido\", data: Object.assign(epe, { plano_entrega: planoEntregaComUnidade }) })) || [];\r\n    this.entregas.sort((a,b) => (a.value > b.value ? 1 : -1));\r\n    if (!this.entregas.find(x => x.key == this.form!.controls.plano_entrega_entrega_id.value)) this.form!.controls.plano_entrega_entrega_id.setValue(null);\r\n  }\r\n\r\n  /* ---------  TRATAMENTO DOS EVENTOS ----------- */\r\n\r\n  public async onOrigemChange(row: any) {\r\n    let value = this.form!.controls.origem.value;\r\n    this.cdRef.detectChanges();\r\n    if (value == 'OUTRO_ORGAO') {\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if (value == 'SEM_ENTREGA') {\r\n      this.form?.controls.orgao.setValue(null);\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if (value == 'OUTRA_UNIDADE') {//if (value == 'PROPRIA_UNIDADE' || value == 'OUTRA_UNIDADE')\r\n      this.form?.controls.orgao.setValue(null);\r\n      if (!this.form?.controls.plano_entrega_id.value) {\r\n        this.loading = true;\r\n        this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n        this.loading = false;\r\n      }\r\n    }\r\n    /*      try {\r\n       let planosEntregas = await this.planoEntregaDao!.query({where: [[\"unidade_id\", \"==\", this.entity!.unidade_id], [\"status\", \"==\", \"ATIVO\"], [\"data_inicio\", \"<=\", this.entity!.data_fim], [\"data_fim\", \">=\", this.entity!.data_inicio]]}).asPromise();\r\n      if(planosEntregas.length == 1) {\r\n        this.form?.controls.plano_entrega_id.setValue(planosEntregas[0].id);\r\n      } else if(this.planoEntrega?.selectedEntity?.unidade_id != this.entity!.unidade_id) {\r\n        this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n      } \r\n      this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  } if (value == 'OUTRA_UNIDADE') {\r\n    this.form?.controls.orgao.setValue(null);\r\n    this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n  }*/\r\n  }\r\n\r\n  public onPlanoEntregaChange(event: Event) {\r\n    let planoEntrega = this.planoEntrega?.selectedEntity as PlanoEntrega;\r\n    this.carregarEntregas(planoEntrega);\r\n  }\r\n\r\n  public onEntregaChange(event: Event) {\r\n    /*let entrega = this.entrega!.selectedItem?.data as PlanoEntregaEntrega;\r\n    if(!this.form!.controls.descricao.value?.length) {\r\n      this.form!.controls.descricao.setValue(entrega?.descricao || \"\");\r\n    }*/\r\n  }\r\n\r\n  public onForcaTrabalhoChange(row: any) {\r\n    let index = this.items.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n    this.totalForcaTrabalho = Math.round((this.somaForcaTrabalho(this.grid?.items as PlanoTrabalhoEntrega[]) - (this.items[index].forca_trabalho * 1) + (this.form?.controls.forca_trabalho.value * 1)) * 100) / 100;\r\n  }\r\n}\r\n\r\n/*\r\nTESTES\r\n\r\n                                                  GRID PERSISTENTE                      GRID NÃO-PERSISTENTE\r\n                                              Fluxo Feliz    Validações                Fluxo Feliz    Validações\r\nInclusão Entrega Catálogo                          \r\nInclusão Entrega Mesma Unidade                     \r\nInclusão Entrega Outra Unidade                     \r\nAlteração Entrega Catálogo                         \r\nAlteração Entrega Mesma Unidade                    \r\nAlteração Entrega Outra Unidade                    \r\nCancelamento Entrega Catálogo                      \r\nCancelamento Entrega Mesma Unidade                 \r\nCancelamento Entrega Outra Unidade                 \r\nExclusão Entrega Catálogo                          \r\nExclusão Entrega Mesma Unidade                     \r\nExclusão Entrega Outra Unidade                     \r\n\r\n*/\r\n\r\n/*\r\nOBSERVAÇÕES:\r\n\r\n(*2)  this.entity?.entregas?.filter(e => !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).find(x => x.plano_entrega_entrega_id == control.value)\r\nFiltra as entregas da mesma unidade do plano de trabalho excluindo a entrega que está sendo editada. Em seguida conta aquelas que possuem o mesmo ID da que está sendo editada e dessa forma o resultado deve ser igual a 0, caso contrário a entrega editada\r\njá existe no grid.\r\n\r\n(*3)  return this.isNoPersist ? false : true;\r\nApós confirmada a remoção pelo usuário, a entrega é setada com _status = \"DELETE\" e é excluída da tela e sua confirmação é retornada para o método onDeleteItem() do gridComponent, que a excluirá também dos items do grid.\r\nEntretanto, quando se trata de um grid não persistente, ela não deve ser excluída dos items do grid, pois sua exclusão só se efetivará quando entity for salva, levando\r\ntodas as suas entregas para o back-end, que finalmente excluirá as que possuírem _status = \"DELETE\".\r\n\r\n(*4)  if(this.grid?.adding) this.grid!.items[this.grid!.items.length-1].id = '';\r\nNo caso de o componente ser 'persistente', essa linha apaga o ID que foi criado pelo banco de dados permitindo ao método saveItem do grid.component localizá-lo na sua lista de items para atualizar suas informações na tela.\r\n\r\n(*5)  if(!this.entity?.id?.length) return this.entregasPlanoEntrega;\r\nQuando o componente for chamado por um plano de trabalho (entity) que já existe, não poderá haver alteração no seu plano de entregas, portanto as entregas da mesma unidade do plano de trabalho serão lidas\r\nna própria entity. No entanto, quando o plano de trabalho (entity) ainda não existir (!this.entity?.id?.length), essas entregas vão variar de acordo com o plano de entregas\r\nselecionado no inputSelectComponent, e portanto elas serão lidas na variável que reflete essa escolha (this.entregasPlanoEntrega), e essa reflexão ocorre por causa do bind @Input() set/get entregasPlanoEntrega.\r\n\r\n\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\nID do Plano           |       Pode ser que a 'row'           |  Características           | inputs | entrega_id \r\nde Trabalho           |                                      |                            | search | plano_entrega_entrega_id\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Já tenha vindo do banco (TIPO I)   |                            | nenhum | um dos dois\r\n                      |   (foi carregada junto com o Plano)  |                            |        |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------\r\n  EXISTE              | - Tenho sido salva agora no banco    |                            | um dos | um dos dois\r\n  - Então o Grid é    |   (TIPO II)                          |                            | três   |\r\n    Persistente       |--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Esteja sendo criada agora          | addEntrega loadEntrega     | um dos | nenhum\r\n                      |                                      |                            | três   |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------     \r\n                      | - Seja do TIPO I e esteja sendo      | loadEntrega                | um dos | um dos dois\r\n                      |   editada agora                      |                            | três   |\r\n                      +--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Seja do TIPO II e esteja sendo     | loadEntrega                | um dos | um dos dois\r\n                      |   editada agora                      |                            | três   |\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\n  NÃO                 | - Já exista nos itens do grid        |                            | nenhum | um dos dois\r\n  EXISTE              |   (foi salva agora, não no banco)    | Possui _status == \"ADD\"    |        |\r\n  - Então o Grid é    |--------------------------------------+----------------------------+--------+------------------------------------\r\n    Não-persistente   | - Esteja sendo criada agora          | Possui _status == \"ADD\"    | um dos | nenhum\r\n                      |                                      | addEntrega loadEntrega     | três   |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Tenha acabado de ser criada e      | Possui _status == \"ADD\"    | um dos | um dos dois\r\n                      |   já está sendo editada              | loadEntrega                | três   |\r\n------------------------------------------------------------------------------------------+--------+------------------------------------\r\n(*) O ADD é inserido pelo método addEntrega e só sai quando persiste no banco e volta\r\n\r\n*/","<grid [items]=\"items\" [form]=\"form!\" noMargin #gridEntregas editable [selectable]=\"false\" [minHeight]=\"items.length > 2 ? 0 : 300\" [join]=\"join\" [groupBy]=\"groupBy\" [add]=\"addEntrega.bind(this)\" [remove]=\"removeEntrega.bind(this)\" [save]=\"saveEntrega.bind(this)\" [load]=\"loadEntrega.bind(this)\" [saveEnd]=\"saveEndEntrega.bind(this)\" [hasDelete]=\"!disabled\" [hasEdit]=\"!disabled\" [hasAdd]=\"!disabled\">\r\n  <columns>\r\n    <column [titleTemplate]=\"titleOrigem\" [template]=\"columnOrigem\" [editTemplate]=\"editOrigem\" [verticalAlign]=\"'middle'\" [width]=\"300\" [align]=\"'center'\">\r\n      <ng-template let-header=\"header\" #titleOrigem>\r\n        <div class=\"text-center\"><span><strong>Origem</strong></span></div>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #columnOrigem>\r\n        <div class=\"w-100 d-flex justify-content-center\">\r\n          <div class=\"one-per-line\">\r\n            <badge [label]=\"planoTrabalhoService.tipoEntrega(row, entity).titulo\" [color]=\"planoTrabalhoService.tipoEntrega(row, entity).cor\"></badge>\r\n            <badge *ngIf=\"row.plano_entrega_entrega_id?.length\" [label]=\"row.plano_entrega_entrega?.plano_entrega?.unidade?.sigla || 'DESCONHECIDO'\" [icon]=\"entityService.getIcon('Unidade')\" color=\"primary\"></badge>\r\n            <badge *ngIf=\"row.orgao?.length\" [label]=\"row.orgao\" icon=\"bi bi-box-arrow-down-left\" color=\"warning\"></badge>\r\n          </div>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #editOrigem>\r\n        <input-select #origem controlName=\"origem\" controlName=\"origem\" [control]=\"form!.controls.origem\" [items]=\"lookup.ORIGENS_ENTREGAS_PLANO_TRABALHO\" (change)=\"onOrigemChange(row)\"></input-select>\r\n        <!-- <input-search *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" label #planoEntrega [placeholder]=\"'Selecione o ' + lex.translate('Plano de entrega')\" [join]=\"['entregas.entrega:id,nome', 'unidade']\" [where]=\"origem?.value == 'PROPRIA_UNIDADE' ? [['unidade_id', '==', entity?.unidade_id]] : undefined\" [selectParams]=\"origem?.value == 'PROPRIA_UNIDADE' ? {filter: {unidade_id: entity?.unidade_id}} : undefined\" controlName=\"plano_entrega_id\" [dao]=\"planoEntregaDao\" (change)=\"onPlanoEntregaChange($event)\"></input-search> -->\r\n        <!-- (RN_PTR_G) Na criação/alteração de um Plano de Trabalho só podem ser criadas/alteradas entregas se vinculadas a entregas de planos de entregas não canceladas; //-->\r\n        <input-search *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" label #planoEntrega [placeholder]=\"'Selecione o ' + lex.translate('Plano de entrega')\" [join]=\"['entregas.entrega:id,nome', 'unidade']\" [where]=\"origem?.value == 'PROPRIA_UNIDADE' ? [['unidade_id', '==', entity?.unidade_id], ['status', '==', 'ATIVO']] : [['status', '==', 'ATIVO']]\" [selectParams]=\"origem?.value == 'PROPRIA_UNIDADE' ? {filter: {unidade_id: entity?.unidade_id, status: 'ATIVO'}} : {filter: {status: 'ATIVO'}}\" controlName=\"plano_entrega_id\" [dao]=\"planoEntregaDao\" (change)=\"onPlanoEntregaChange($event)\"></input-search>\r\n        <input-text *ngIf=\"origem?.value == 'OUTRO_ORGAO'\" #orgao controlName=\"orgao\" placeholder=\"Órgão\" [attr.maxlength]=250></input-text>\r\n      </ng-template>\r\n    </column>\r\n    <column [maxWidth]=\"350\" [titleTemplate]=\"titleEntrega\" [template]=\"columnEntrega\" [editTemplate]=\"editEntrega\" [verticalAlign]=\"'middle'\">\r\n      <ng-template let-header=\"header\" #titleEntrega><span><strong>Entrega</strong></span></ng-template>\r\n      <ng-template let-row=\"row\" #columnEntrega>\r\n        <small>{{ planoTrabalhoService.tipoEntrega(row, entity).descricao }}</small>\r\n        <div *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(planoTrabalhoService.tipoEntrega(row, entity).tipo)\" class=\"w-100\">\r\n          <badge color=\"light\" icon=\"bi bi-box-arrow-in-right\" [label]=\"util.getDateFormatted(row.plano_entrega_entrega?.data_inicio)\" hint=\"Data de início\"></badge>\r\n          <badge color=\"light\" icon=\"bi bi-box-arrow-right\" [label]=\"util.getDateFormatted(row.plano_entrega_entrega?.data_fim)\" hint=\"Data de término\"></badge>\r\n        </div>\r\n        <reaction [entity]=\"row\" origem=\"PLANO_TRABALHO_ENTREGA\"></reaction>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #editEntrega>\r\n        <input-select *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" #entrega nullable itemNull=\"- Selecione -\" controlName=\"plano_entrega_entrega_id\" [control]=\"form!.controls.plano_entrega_entrega_id\" [items]=\"entregas\" (change)=\"onEntregaChange($event)\"></input-select>\r\n        <div *ngIf=\"entrega?.selectedItem\" class=\"w-100\">\r\n          <badge color=\"light\" icon=\"bi bi-box-arrow-in-right\" [label]=\"util.getDateFormatted(entrega!.selectedItem!.data!.data_inicio)\" hint=\"Data de início\"></badge>\r\n          <badge color=\"light\" icon=\"bi bi-box-arrow-right\" [label]=\"util.getDateFormatted(entrega!.selectedItem!.data!.data_fim)\" hint=\"Data de término\"></badge>\r\n        </div>\r\n      </ng-template>\r\n    </column>\r\n    <column [titleTemplate]=\"titleForcaTrabalho\" [title]=\"'% CHD'\" [template]=\"columnForcaTrabalho\" [editTemplate]=\"editForcaTrabalho\" [width]=\"125\" [align]=\"'center'\" [titleHint]=\"'% Carga Horária Disponível'\">\r\n      <ng-template let-header=\"header\" #titleForcaTrabalho>\r\n        <div class=\"text-center\">\r\n          <!--<small><strong>% CHD</strong></small><br>-->\r\n          <div *ngIf=\"totalForcaTrabalho > 100; else umCHD\">\r\n            <small>\r\n              <badge icon=\"bi bi-calculator\" [color]=\"'warning'\" [label]=\"totalForcaTrabalho + '%'\"></badge>\r\n            </small>\r\n            <small>\r\n              <badge icon=\"bi bi-intersect\" [color]=\"'secondary'\" [label]=\"totalForcaTrabalho - 100 + '%'\"></badge>\r\n            </small><!--[hint]=\"'Sobreposição de CHD entre Entregas'\"-->\r\n          </div>\r\n          <ng-template #umCHD>\r\n            <small>\r\n              <badge icon=\"bi bi-calculator\" [color]=\"totalForcaTrabalho == 100 ? 'success' : 'warning'\" [label]=\"totalForcaTrabalho + '%'\"></badge>\r\n            </small>\r\n          </ng-template>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #columnForcaTrabalho><small>{{ row.forca_trabalho + '%' }}</small></ng-template>\r\n      <ng-template let-row=\"row\" #editForcaTrabalho><input-text number sufix=\"%\" controlName=\"forca_trabalho\" [control]=\"form!.controls.forca_trabalho\" (change)=\"onForcaTrabalhoChange(row)\" [attr.maxlength]=250></input-text></ng-template>\r\n    </column>\r\n    <column [maxWidth]=\"250\" [titleTemplate]=\"titleDescricao\" [template]=\"columnDescricao\" [editTemplate]=\"editDescricao\" [verticalAlign]=\"'middle'\" [align]=\"'center'\">\r\n      <ng-template let-header=\"header\" #titleDescricao>\r\n        <div class=\"text-center\"><span><strong>Descrição dos Trabalhos</strong></span></div>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #columnDescricao>\r\n        <div *ngIf=\"row.descricao != planoTrabalhoService.tipoEntrega(row, entity).descricao; else solicitarDescricao\"><small>{{ row.descricao }}</small></div>\r\n      </ng-template>\r\n      <ng-template #solicitarDescricao><small>Detalhe/Descreva os trabalhos</small></ng-template>\r\n      <ng-template let-row=\"row\" #editDescricao>\r\n        <input-textarea [rows]=\"2\" controlName=\"descricao\" [control]=\"form!.controls.descricao\"></input-textarea>\r\n      </ng-template>\r\n    </column>\r\n    <column type=\"options\"></column>\r\n  </columns>\r\n</grid>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\nimport { PlanoTrabalhoConsolidacaoComponent } from './plano-trabalho-consolidacao/plano-trabalho-consolidacao.component';\r\nimport { PlanoTrabalhoConsolidacaoListComponent } from './plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component';\r\nimport { AvaliarComponent } from '../../uteis/avaliar/avaliar.component';\r\nimport { PlanoTrabalhoConsolidacaoAvaliacaoComponent } from './plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: PlanoTrabalhoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Planos de Trabalho\" } },\r\n  { path: 'new', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão de Plano de Trabalho\", modal: true } },\r\n  { path: 'termo', component: PlanoTrabalhoFormTermoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Termo de adesão\", modal: true } },\r\n  { path: 'consolidacao/avaliacao', component: PlanoTrabalhoConsolidacaoAvaliacaoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Avaliação das Consolidações do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:consolidacaoId/avaliar', component: AvaliarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Avaliar Consolidação do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:consolidacaoId/recurso', component: AvaliarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Recurso da Avaliação da Consolidação do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:usuarioId/:planoTrabalhoId', component: PlanoTrabalhoConsolidacaoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consolidações do Plano de Trabalho\" } },\r\n  { path: 'consolidacao', component: PlanoTrabalhoConsolidacaoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consolidações\" } },\r\n  { path: ':id/edit', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição de Plano de Trabalho\", modal: true } },\r\n  { path: ':id/consult', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Plano de Trabalho\", modal: true } },\r\n  { path: 'entregaList', component: PlanoTrabalhoListEntregaComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Lista de Entregas do Plano de Trabalho\", modal: true } },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PlanoTrabalhoRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PlanoTrabalhoRoutingModule } from './plano-trabalho-routing.module';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\nimport { PlanoTrabalhoConsolidacaoComponent } from './plano-trabalho-consolidacao/plano-trabalho-consolidacao.component';\r\nimport { PlanoTrabalhoConsolidacaoListComponent } from './plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component';\r\nimport { PlanoTrabalhoListAccordeonComponent } from './plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component';\r\nimport { PlanoTrabalhoConsolidacaoFormComponent } from './plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component';\r\nimport { PlanoTrabalhoConsolidacaoAvaliacaoComponent } from './plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PlanoTrabalhoFormComponent,\r\n    PlanoTrabalhoListComponent,\r\n    PlanoTrabalhoListEntregaComponent,\r\n    PlanoTrabalhoFormTermoComponent,\r\n    PlanoTrabalhoConsolidacaoComponent,\r\n    PlanoTrabalhoConsolidacaoListComponent,\r\n    PlanoTrabalhoConsolidacaoFormComponent,\r\n    PlanoTrabalhoListAccordeonComponent,\r\n    PlanoTrabalhoConsolidacaoAvaliacaoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    ReactiveFormsModule,\r\n    PlanoTrabalhoRoutingModule,\r\n    UteisModule\r\n  ]\r\n})\r\nexport class PlanoTrabalhoModule { }\r\n"],"names":["DaoBaseService","ComparecimentoDaoService","constructor","injector","inputSearchConfig","searchFields","_","i0","ɵɵinject","Injector","_2","factory","ɵfac","providedIn","Base","PlanoTrabalhoConsolidacao","data","data_inicio","Date","data_fim","status","avaliacoes","status_historico","plano_trabalho_id","avaliacao_id","initialization","GridComponent","PageListBase","UsuarioDaoService","PlanoTrabalhoConsolidacaoDaoService","UnidadeDaoService","Avaliacao","AvaliacaoDaoService","PlanoTrabalhoService","UnidadeService","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵproperty","tmp_0_0","ctx_r5","usuarioSeparator","separator_r25","url_foto","tmp_2_0","nome","ɵɵtextInterpolate","tmp_3_0","entityService","getIcon","tmp_5_0","unidadeSeparator","sigla","row_r27","plano_trabalho","ctx_r14","cdRef","ɵɵtextInterpolate1","row_r29","usuario","ctx_r16","util","getDateFormatted","unidade","lex","translate","programa","tipo_modalidade","ctx_r18","row_r30","ctx_r20","row_r31","row_r32","avaliacao","tipo_avaliacao","nota","recurso","ɵɵtemplate","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_30_avaliar_nota_badge_0_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_30_separator_1_Template","length","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_33_badge_2_Template","ctx_r24","lookup","getColor","CONSOLIDACAO_STATUS","row_r37","getValue","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_1_Template","ɵɵtemplateRefExtractor","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_toolbar_3_Template","ɵɵlistener","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_Template_input_search_change_8_listener","$event","ɵɵrestoreView","_r40","ctx_r39","ɵɵnextContext","ɵɵresetView","onUnidadeChange","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_16_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_18_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_21_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_24_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_27_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_30_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_33_Template","ctx_r1","dao","orderBy","groupBy","join","initGrid","bind","onGridLoad","_r4","selectable","filter","filterWhere","filterSubmit","filterCollapseChange","filterCollapsed","auth","hasPermissionTo","controls","usuario_id","usuarioDao","unidade_id","unidadeDao","canFilterSubordinadas","unidades_subordinadas","incluir_arquivados","_r11","_r13","_r15","_r17","_r19","_r21","_r23","dynamicButtons","rowsLimit","ctx_r42","separator_r58","row_r72","avaliador","apelido","ctx_r65","getNota","row_r73","icone","cor","descricao","ctx_r75","justificativa_r76","value","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_11_badge_2_Template","row_r74","justificativa","justificativas","row_r77","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_17_badge_1_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_17_badge_2_Template","row_r78","id","ctx_r71","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_5_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_8_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_11_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_14_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_17_Template","ctx_r51","getAvaliacoes","row_r60","_r62","_r64","_r66","_r68","_r70","row_r81","ctx_r53","ctx_r55","row_r82","ctx_r57","row_r83","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_1_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_toolbar_3_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_Template_input_search_change_8_listener","_r85","ctx_r84","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_16_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_21_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_24_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_27_Template","ctx_r3","onGridLoadHistorico","_r41","filterWhereHistorico","_r48","_r50","_r52","_r54","_r56","PlanoTrabalhoConsolidacaoAvaliacaoComponent","consolidacaoId","joinAvaliacao","result","form","push","unidadeService","get","extraJoin","field","label","avaliacaoDao","planoTrabalhoService","title","code","fh","FormBuilder","default","addOption","OPTION_INFORMACOES","OPTION_LOGS","ngOnInit","setValue","unidadeGestor","lotacao","isGestorUnidade","undefined","separator","usuarioId","group","metadata","extra","planos_trabalhos","find","x","unidadeId","event","rows","grid","query","planosTrabalhos","forEach","p","plano","programas","programa_id","v","consolidacao","tipos_avaliacoes","tipo_avaliacao_id","refreshConsolidacao","_this","_asyncToGenerator","refreshId","refreshRows","anterior","items","reduce","a","asTimestamp","proximo","row","isAvaliador","isIntegrante","isUsuarioDoPlano","BOTAO_AVALIAR","hint","icon","color","onClick","avaliar","BOTAO_REAVALIAR","BOTAO_FAZER_RECURSO","fazerRecurso","BOTAO_CANCELAR_AVALIACAO","cancelarAvaliacao","canAvaliar","includes","canCancelarAvaliacao","data_avaliacao","dias_tolerancia_recurso_avaliacao","daystamp","hora","onSelectTab","tab","_this2","viewInit","saveUsuarioConfig","active_tab","key","queryInit","plano_trabalho_consolidacao_id","loadData","_this3","loading","where","asPromise","notas","codigo","ɵɵdirectiveInject","selectors","viewQuery","PlanoTrabalhoConsolidacaoAvaliacaoComponent_Query","rf","ctx","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_Template","isModal","_r0","_r2","ChangeDetectorRef","EditableFormComponent","PageFrameBase","Atividade","TipoAtividadeDaoService","PlanoEntregaService","AtividadeDaoService","AtividadeService","CalendarService","Comparecimento","OcorrenciaDaoService","row_r43","numero","ctx_r30","atividadeService","onIdClick","ctx_r32","formAtividade","tempo_r47","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_9_badge_1_Template","ctx_r34","temposAtividade","row_r45","ctx_r36","data_entrega","etiqueta_r53","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_table_3_tr_1_i_2_Template","check_r55","checked","texto","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_table_3_tr_1_Template","row_r49","checklist","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_badge_1_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_separator_2_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_table_3_Template","progresso","etiquetas","ctx_r62","i_r64","check_r63","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_table_5_tr_1_Template","ctx_r61","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_Template_input_select_details_2_listener","onEtiquetaConfigClick","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_separator_4_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_table_5_Template","ctx_r40","formEdit","addItemHandleEtiquetas","etiqueta","row_r58","status_r70","row_r67","_r28","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_badge_2_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_comentarios_widget_3_Template","documento_requisicao","getStatus","entity","editing","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_4_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_6_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_9_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_11_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_Template","atividades","ctx_r4","disabled","addAtividade","entrega","loadAtividade","removeAtividade","saveAtividade","_r29","_r31","atividadeOptionsMetadata","onColumnAtividadeDescricaoEdit","onColumnAtividadeDescricaoSave","_r33","_r35","_r37","_r39","onColumnProgressoEtiquetasChecklistEdit","onColumnProgressoEtiquetasChecklistSave","dynamicOptions","badge","titulo","forca_trabalho","row_r75","meta","metaRealizado","row_r76","progresso_realizado","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_0_div_1_Template_button_click_1_listener","restoredCtx","_r83","pObjetivo_r81","$implicit","ctx_r82","showPlanejamento","objetivo","planejamento_id","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_0_div_1_Template","ctx_r78","objetivos","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_1_div_1_Template_button_click_1_listener","_r88","pProcesso_r86","ctx_r87","showCadeiaValor","processo","cadeia_valor_id","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_1_div_1_Template","ctx_r79","processos","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_0_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_1_Template","row_r90","tipo_motivo_afastamento","observacao","ctx_r23","row_r91","ctx_r25","PlanoTrabalhoConsolidacaoFormComponent","noPersist","control","bindEntity","_disabled","detectChanges","joinAtividade","itemsEntregas","itemsOcorrencias","itemsComparecimentos","itemsAfastamentos","validateAtividade","controlName","indexOf","isDataValid","getTime","data_distribuicao","validateComparecimento","between","start","end","comparecimentoDao","atividadeDao","calendar","ocorrenciaDao","tipoAtividadeDao","planoEntregaService","comentarios","esforco","tempo_planejado","data_estipulada_entrega","formComparecimento","data_comparecimento","detalhamento","atividadeRefreshId","removeId","atividadeRemoveId","refresh","_metadata","planoTrabalhoConsolidacaoFormComponent","atividade","foundIndex","findIndex","getById","then","splice","ngAfterViewInit","loadConsolidacao","dados","entregas","map","plano_entrega_entrega","plano_entrega","planosEntregas","pe","plano_entrega_id","y","plano_trabalho_entrega_id","tipoEntrega","planoTrabalho","getValorMeta","getValorRealizado","ocorrencias","comparecimentos","afastamentos","gridEntregas","dadosConsolidacao","efemerides","calculaDataTempoUnidade","carga_horaria","tempoPlanejado","horasUteis","dataInicio","maxDate","setTime","dataFim","minDate","generateUuid","plano_trabalho_entrega","plano_trabalho_consolidacao","demandante","tempo_despendido","tempoUtil","demandante_id","metadados","atrasado","tempo_atraso","pausado","iniciado","concluido","avaliado","arquivado","produtividade","_status","_this4","patchValue","_this5","confirm","dialog","delete","_this6","gridAtividades","error","markAllAsTouched","valid","fillForm","submitting","save","message","onDataDistribuicaoChange","onDataEstipuladaEntregaChange","atividadeDynamicButtons","Object","assign","BUTTON_EDIT","BUTTON_DELETE","_this7","merge","tipo_atividade","b","config","carregaEtiquetasUnidadesAscendentes","clone","unidadeAtual","_this8","etiquetasUnidades","path","split","unidades","un","_this9","saved","update","go","navigate","route","params","modal","modalClose","modalResult","selectedItem","item","textHash","validateLookupItem","loadTipoAtividade","tipoAtividade","buildEtiquetas","buildChecklist","onTipoAtividadeSelect","comentarioAtividade","_this10","_this11","selectedEntity","addOcorrencia","_this12","editOcorrencia","_this13","removeOcorrencia","_this14","ocorrencia","ocorrenciaDynamicButtons","OPTION_ALTERAR","OPTION_EXCLUIR","addComparecimento","_this15","loadComparecimento","_this16","removeComparecimento","_this17","comparecimento","saveComparecimento","_this18","comparecimentoDynamicButtons","addAfastamento","_this19","filterSnapshot","querySnapshot","afastamentoDynamicButtons","doc","_this20","cadeia_valor_id_id","_this21","PlanoTrabalhoConsolidacaoFormComponent_Query","PlanoTrabalhoConsolidacaoFormComponent_ng_template_5_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_10_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_13_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_16_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_19_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_22_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_42_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_51_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_53_Template","_r1","_r3","_r5","_r7","_r9","_r22","_r24","PlanoTrabalhoDaoService","isDisabled","row_r14","ctx_r6","row_r16","ctx_r8","row_r17","row_r18","ctx_r19","tipo_avaliacao_plano_trabalho","PlanoTrabalhoConsolidacaoListComponent_ng_template_18_avaliar_nota_badge_0_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_18_separator_1_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_21_badge_2_Template","ctx_r12","row_r23","PlanoTrabalhoConsolidacaoListComponent","consolidacoes","validate","planoTrabalhoDao","modalWidth","urlParams","has","getByUsuario","planos","agora","expand","addConsolidacao","removeConsolidacao","saveConsolidacao","consolidacaoForm","refreshExpanded","concluir","response","cancelarConclusao","BOTAO_CONCLUIR","BOTAO_CANCELAR_CONCLUSAO","canConcluir","canCancelarConclusao","diasParaConcluirConsolidacao","PlanoTrabalhoConsolidacaoListComponent_Query","PlanoTrabalhoConsolidacaoListComponent_ng_template_7_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_9_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_12_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_15_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_18_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_21_Template","TabsComponent","InputSearchComponent","data_r14","data_r15","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_11_ng_template_1_Template","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_11_ng_template_3_Template","usuario_r9","_r10","_r12","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_div_10_Template","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_11_Template","ɵɵtextInterpolate3","_r6","usuarios","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_Template","arquivados","PlanoTrabalhoConsolidacaoComponent","loadingUnidade","loadUsuarios","tabs","active","queryParams","lotados","PlanoTrabalhoConsolidacaoComponent_Query","PlanoTrabalhoConsolidacaoComponent_tab_2_Template","PlanoTrabalhoConsolidacaoComponent_ng_template_4_Template","DocumentoDaoService","ProgramaDaoService","TipoDocumentoDaoService","TipoModalidadeDaoService","ListenerAllPagesService","PlanoTrabalho","PageFormBase","NavigateResult","PlanoTrabalhoFormTermoComponent","numero_processo","formValidation","tipoDocumento","tipo_documento_id","titleEdit","programaDao","tipoDocumentoDao","allPages","tipoModalidadeDao","documentoDao","tempo_total","tempo_proporcional","documento_id","documentos","vinculadas","tipo_modalidade_id","forma_contagem_carga_horaria","onVinculadasChange","formValue","Promise","all","loadSearch","tipoModalidade","id_processo","initializeData","saveData","resolve","reject","codigo_tipo_documento","formaContagemCargaHoraria","forma","PlanoTrabalhoFormTermoComponent_Query","PlanoTrabalhoFormTermoComponent_Template_editable_form_submit_0_listener","onSaveData","PlanoTrabalhoFormTermoComponent_Template_editable_form_cancel_0_listener","onCancel","PlanoTrabalhoFormTermoComponent_Template_input_switch_change_24_listener","formDisabled","ganho_produtividade","ɵɵattribute","DocumentoService","TemplateService","UtilService","ctx_r10","horasTotais","ctx_r11","horasParciais","ɵɵelementContainerStart","PlanoTrabalhoFormComponent_ng_container_18_Template_input_workload_change_2_listener","onCargaHorariaChenge","PlanoTrabalhoFormComponent_ng_container_18_separator_5_Template","PlanoTrabalhoFormComponent_ng_container_18_separator_6_Template","ɵɵelementContainerEnd","onFormaContagemCargaHorariaChange","ctx_r7","editar_texto_complementar_unidade","planoDataset","editar_texto_complementar_usuario","ctx_r9","needSign","extraTags","editingId","datasource","template_tcr","PlanoTrabalhoFormComponent","gestoresUnidadeExecutora","_ref","_x","apply","arguments","joinPrograma","documentoService","templateService","utilService","dataset","unidade_texto_complementar","usuario_texto_complementar","criterios_avaliacao","criterio_avaliacao","segment","url","action","buscaGestoresUnidadeExecutora","atualizarTcr","loadEntity","textoUsuario","textoUnidade","documento","template","isTermos","onUnidadeSelect","selected","entidade","texto_complementar_plano","onProgramaSelect","plano_trabalho_criterios_avaliacao","updateValueAndValidity","calculaTempos","onUsuarioSelect","every","_ref2","niveis","reverse","hoje","preenchido","indice","preencheUnidade","preenchePrograma","_x2","onDataInicioChange","onDataFimChange","inicio","fim","carga","loadFeriadosCadastrados","feriados","carga_horaria_padrao","nowDate","setHours","fill","requests","responses","onTabSelect","documentoDynamicButtons","signDocumento","html","conteudo","addItemHandleCriteriosAvaliacao","sign","unit","isVigente","gestor","gestores_substitutos","gestores_delegados","PlanoTrabalhoFormComponent_Query","PlanoTrabalhoFormComponent_Template_editable_form_submit_0_listener","PlanoTrabalhoFormComponent_Template_editable_form_cancel_0_listener","PlanoTrabalhoFormComponent_Template_input_search_select_7_listener","PlanoTrabalhoFormComponent_Template_input_search_select_9_listener","PlanoTrabalhoFormComponent_Template_input_search_select_11_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_14_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_15_listener","PlanoTrabalhoFormComponent_ng_container_18_Template","PlanoTrabalhoFormComponent_top_alert_23_Template","PlanoTrabalhoFormComponent_div_24_Template","PlanoTrabalhoFormComponent_tab_25_Template","PlanoTrabalhoFormComponent_tab_26_Template","ɵɵpureFunction0","_c11","plano_trabalho_calcula_horas","checkFilled","_c12","_c13","badge_r7","PlanoTrabalhoListAccordeonComponent_ng_template_13_badge_11_Template","item_r5","ctx_r2","getPlanoBadges","PLANO_TRABALHO_STATUS","item_r8","PlanoTrabalhoListAccordeonComponent","_arquivados","selectedIndex","accordion","self","i","concluidos","avaliados","getLookup","textValue","toString","JSON","stringify","badges","PlanoTrabalhoListAccordeonComponent_Query","PlanoTrabalhoListAccordeonComponent_ng_template_13_Template","PlanoTrabalhoListAccordeonComponent_ng_template_15_Template","ɵɵtextInterpolate4","PlanoTrabalhoEntrega","PlanoTrabalhoEntregaDaoService","PlanoEntregaDaoService","PlanoEntregaEntregaDaoService","row_r28","ctx_r29","orgao","PlanoTrabalhoListEntregaComponent_ng_template_6_badge_3_Template","PlanoTrabalhoListEntregaComponent_ng_template_6_badge_4_Template","plano_entrega_entrega_id","PlanoTrabalhoListEntregaComponent_ng_template_8_input_search_2_Template_input_search_change_0_listener","ctx_r38","onPlanoEntregaChange","ctx_r35","_c3","_r34","ɵɵpureFunction2","_c6","ɵɵpureFunction1","_c4","_c5","_c7","_c9","_c8","_c10","planoEntregaDao","PlanoTrabalhoListEntregaComponent_ng_template_8_Template_input_select_change_0_listener","_r42","row_r33","ctx_r41","onOrigemChange","PlanoTrabalhoListEntregaComponent_ng_template_8_input_search_2_Template","PlanoTrabalhoListEntregaComponent_ng_template_8_input_text_3_Template","origem","ORIGENS_ENTREGAS_PLANO_TRABALHO","ctx_r45","row_r44","PlanoTrabalhoListEntregaComponent_ng_template_13_div_2_Template","tipo","PlanoTrabalhoListEntregaComponent_ng_template_15_input_select_0_Template_input_select_change_0_listener","onEntregaChange","ctx_r48","ctx_r49","PlanoTrabalhoListEntregaComponent_ng_template_15_input_select_0_Template","PlanoTrabalhoListEntregaComponent_ng_template_15_div_1_Template","ctx_r54","totalForcaTrabalho","ctx_r56","PlanoTrabalhoListEntregaComponent_ng_template_18_div_1_Template","PlanoTrabalhoListEntregaComponent_ng_template_18_ng_template_2_Template","_r55","row_r57","PlanoTrabalhoListEntregaComponent_ng_template_22_Template_input_text_change_0_listener","_r60","ctx_r59","onForcaTrabalhoChange","row_r62","PlanoTrabalhoListEntregaComponent_ng_template_27_div_0_Template","ctx_r22","ctx_r26","PlanoTrabalhoListEntregaComponent","gridControl","options","e","peeDao","validateEntregas","planoInterval","entregaPlano","entregaDataFim","entregaInterval","intersection","_superprop_getNgOnInit","call","Math","round","somaForcaTrabalho","novaEntrega","addEntrega","loadEntrega","carregarEntregas","removeEntrega","isNoPersist","saveEntrega","saveEndEntrega","idPlanoOuPlano","planoEntrega","planoEntregaComUnidade","epe","sort","onSelectClick","Event","index","PlanoTrabalhoListEntregaComponent_Query","PlanoTrabalhoListEntregaComponent_ng_template_4_Template","PlanoTrabalhoListEntregaComponent_ng_template_6_Template","PlanoTrabalhoListEntregaComponent_ng_template_8_Template","PlanoTrabalhoListEntregaComponent_ng_template_11_Template","PlanoTrabalhoListEntregaComponent_ng_template_13_Template","PlanoTrabalhoListEntregaComponent_ng_template_15_Template","PlanoTrabalhoListEntregaComponent_ng_template_18_Template","PlanoTrabalhoListEntregaComponent_ng_template_20_Template","PlanoTrabalhoListEntregaComponent_ng_template_22_Template","PlanoTrabalhoListEntregaComponent_ng_template_25_Template","PlanoTrabalhoListEntregaComponent_ng_template_27_Template","PlanoTrabalhoListEntregaComponent_ng_template_29_Template","PlanoTrabalhoListEntregaComponent_ng_template_31_Template","_r25","RouterModule","AuthGuard","ConfigResolver","PlanoTrabalhoListComponent","AvaliarComponent","routes","component","canActivate","runGuardsAndResolvers","PlanoTrabalhoRoutingModule","_3","forChild","imports","i1","exports","CommonModule","ComponentsModule","ReactiveFormsModule","UteisModule","PlanoTrabalhoModule","declarations","NgIf","i2","i3","ColumnsComponent","i4","ColumnComponent","i5","FilterComponent","i6","ToolbarComponent","i7","PaginationComponent","i8","InputSwitchComponent","i9","i10","InputTextComponent","i11","InputDatetimeComponent","i12","InputSelectComponent","i13","ReportComponent","i14","OrderComponent","i15","BadgeComponent","i16","DocumentosBadgeComponent"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
=======
{"version":3,"file":"5796.js","mappings":"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","sources":["./src/app/dao/comparecimento-dao.service.ts","./src/app/models/plano-trabalho-consolidacao.model.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao/plano-trabalho-consolidacao.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao/plano-trabalho-consolidacao.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-routing.module.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho.module.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\r\nimport { Comparecimento } from '../models/comparecimento.model';\r\nimport { DaoBaseService } from './dao-base.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ComparecimentoDaoService extends DaoBaseService<Comparecimento> {\r\n\r\n  constructor(protected injector: Injector) {\r\n    super(\"Comparecimento\", injector);\r\n    this.inputSearchConfig.searchFields = [\"data_comparecimento\"];\r\n  }\r\n\r\n}\r\n\r\n","import { Avaliacao, HasAvaliacao } from './avaliacao.model';\r\nimport { Base } from './base.model';\r\nimport { PlanoTrabalho } from './plano-trabalho.model';\r\nimport { HasStatus, StatusJustificativa } from './status-justificativa.model';\r\n\r\nexport type PlanoTrabalhoConsolidacaoStatus = 'CONCLUIDO' | 'AVALIADO' | 'INCLUIDO';\r\n\r\nexport class PlanoTrabalhoConsolidacao extends Base implements HasAvaliacao, HasStatus {\r\n    public plano_trabalho?: PlanoTrabalho;\r\n    public avaliacao?: Avaliacao;\r\n\r\n    public data_inicio: Date = new Date();\r\n    public data_fim: Date = new Date();\r\n    public status: PlanoTrabalhoConsolidacaoStatus = \"INCLUIDO\"; // Status atual da consolidação\r\n    public avaliacoes: Avaliacao[] = [];\r\n    public status_historico: StatusJustificativa[] = [];\r\n\r\n    public plano_trabalho_id: string = \"\";\r\n    public avaliacao_id: string | null = null;\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { GridComponent, GridGroupSeparator } from 'src/app/components/grid/grid.component';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { PlanoTrabalhoConsolidacao } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { Avaliacao } from 'src/app/models/avaliacao.model';\r\nimport { Base } from 'src/app/models/base.model';\r\nimport { TipoAvaliacao } from 'src/app/models/tipo-avaliacao.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { AvaliacaoDaoService } from 'src/app/dao/avaliacao-dao.service';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { UnidadeService } from 'src/app/services/unidade.service';\r\n\r\n@Component({\r\n  selector: 'app-plano-trabalho-consolidacao-avaliacao',\r\n  templateUrl: './plano-trabalho-consolidacao-avaliacao.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-avaliacao.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoConsolidacaoAvaliacaoComponent extends PageListBase<PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoDaoService> {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public avaliacaoDao: AvaliacaoDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public unidadeService: UnidadeService;\r\n  public extraJoin: string[];\r\n  public extra: any;\r\n\r\n  public avaliacoes: Avaliacao[] = [];\r\n  public avaliacao: Avaliacao = new Avaliacao();\r\n  public consolidacaoId?: string[] = [];//public consolidacaoId?: PlanoTrabalhoConsolidacao[] = [];\r\n  public joinAvaliacao: string[] = [\"avaliador\", \"entregas_checklist\", \"tipo_avaliacao.notas\"];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoDaoService);\r\n    this.unidadeService = injector.get<UnidadeService>(UnidadeService);\r\n    /* Inicializações */\r\n    this.join = [\r\n      \"avaliacao\", // \"avaliacao.tipoAvaliacao.notas\"\r\n      \"plano_trabalho:id\", // \"planoTrabalho.unidade:id,sigla,nome\", \"planoTrabalho.unidade.gestor:id,unidade_id,usuario_id\", \"planoTrabalho.unidade.gestorSubstituto:id,unidade_id,usuario_id\", \"planoTrabalho.tipoModalidade:id,nome\", \"planoTrabalho.usuario:id,nome,apelido,url_foto\"\r\n    ];\r\n    this.extraJoin = [ // Utilizado pelo RefreshId\r\n      \"avaliacao.tipoAvaliacao.notas\",\r\n      \"planoTrabalho.unidade:id,sigla,nome\", \r\n      \"planoTrabalho.unidade.gestor:id,unidade_id,usuario_id\", \r\n      \"planoTrabalho.unidade.gestoresSubstitutos:id,unidade_id,usuario_id\", \r\n      \"planoTrabalho.tipoModalidade:id,nome\", \r\n      \"planoTrabalho.usuario:id,nome,apelido,foto_perfil,url_foto\"//id,nome,apelido,url_foto,foto_perfil\r\n    ];\r\n    this.groupBy = [\r\n      { field: \"plano_trabalho.unidade.sigla\", label: this.lex.translate(\"Unidade\") }, \r\n      { field: \"plano_trabalho.unidade.id\", label: \"Unidade Id\" }, \r\n      { field: \"plano_trabalho.usuario.nome\", label: this.lex.translate(\"Participante\") },\r\n      { field: \"plano_trabalho.usuario.id\", label: \"Usuário Id\" }\r\n    ];\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.avaliacaoDao = injector.get<AvaliacaoDaoService>(AvaliacaoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.title = \"Avaliações \" + this.lex.translate(\"das Consolidações\");\r\n    this.code = \"MOD_PTR_CSLD_AVAL\";\r\n    this.filter = this.fh.FormBuilder({\r\n      usuario_id: {default: \"\"},\r\n      unidade_id: {default: \"\"},\r\n      unidades_subordinadas: {default: false},\r\n      incluir_arquivados: {default: false}\r\n    });\r\n    this.addOption(this.OPTION_INFORMACOES);\r\n    this.addOption(this.OPTION_LOGS, \"MOD_AUDIT_LOG\");\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    this.filter!.controls.unidade_id.setValue(this.auth.unidadeGestor()?.id || this.auth.lotacao || null);\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let result: any[] = [];\r\n    let form: any = filter.value;\r\n    result.push([\"status\", \"in\", [\"CONCLUIDO\", \"AVALIADO\"]]);\r\n//    if(form.usuario_id?.length) result.push([\"usuario_id\", \"==\", form.usuario_id]);\r\n    if(form.usuario_id?.length) result.push([\"plano_trabalho.usuario.id\", \"==\", form.usuario_id]);\r\n    if(form.unidade_id?.length) result.push([\"plano_trabalho.unidade.id\", \"==\", form.unidade_id]);\r\n    if(form.unidades_subordinadas) result.push([\"unidades_subordinadas\", \"==\", true]);\r\n    if(form.incluir_arquivados) result.push([\"incluir_arquivados\", \"==\", true]);\r\n    return result;\r\n  }\r\n\r\n  public get canFilterSubordinadas(): string | undefined {\r\n    return this.unidadeService.isGestorUnidade(this.filter!.controls.unidade_id.value) ? undefined : 'true';\r\n  }\r\n\r\n  public usuarioSeparator(separator: GridGroupSeparator) {\r\n    let usuarioId = separator.group[3].value;\r\n    separator.metadata = separator.metadata || {};\r\n    separator.metadata.usuario = separator.metadata.usuario || this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.usuario_id == usuarioId)?.usuario;\r\n    return separator.metadata.usuario;\r\n  }\r\n\r\n  public unidadeSeparator(separator: GridGroupSeparator) {\r\n    let unidadeId = separator.group[1].value;\r\n    separator.metadata = separator.metadata || {};\r\n    separator.metadata.unidade = separator.metadata.unidade || this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.unidade_id == unidadeId)?.unidade;\r\n    return separator.metadata.unidade;\r\n  }\r\n\r\n  public onUnidadeChange(event: Event) {\r\n    if(!this.unidadeService.isGestorUnidade(this.filter!.controls.unidade_id.value)) this.filter!.controls.unidades_subordinadas.setValue(false);\r\n  }\r\n\r\n  public onGridLoad(rows?: Base[]) {\r\n    this.extra = (this.grid?.query || this.query!).extra;\r\n    let planosTrabalhos = (this.extra?.planos_trabalhos || []) as PlanoTrabalho[];\r\n    planosTrabalhos.forEach(p => {\r\n      let plano = p as PlanoTrabalho;\r\n      plano.programa = this.extra?.programas?.find((x: Programa) => x.id == plano.programa_id);\r\n    });\r\n    rows?.forEach(v => {\r\n      let consolidacao = v as PlanoTrabalhoConsolidacao;\r\n      consolidacao.plano_trabalho = this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.id == consolidacao.plano_trabalho_id);\r\n      if(consolidacao.avaliacao) consolidacao.avaliacao.tipo_avaliacao = this.extra?.tipos_avaliacoes?.find((x: TipoAvaliacao) => x.id == consolidacao.avaliacao!.tipo_avaliacao_id);\r\n    });\r\n  }\r\n\r\n  public refreshConsolidacao(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    (async () => {\r\n      await this.grid!.query!.refreshId(consolidacao.id, this.extraJoin);\r\n      this.grid!.refreshRows();\r\n    })();\r\n  }\r\n\r\n  public anterior(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return (this.grid!.items as PlanoTrabalhoConsolidacao[]).reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_inicio) < this.util.asTimestamp(consolidacao.data_inicio) && (!a || this.util.asTimestamp(a.data_inicio) < this.util.asTimestamp(v.data_inicio)) ? v : a, undefined);\r\n  }\r\n\r\n  public proximo(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return (this.grid!.items as PlanoTrabalhoConsolidacao[]).reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_fim) > this.util.asTimestamp(consolidacao.data_fim) && (!a || this.util.asTimestamp(a.data_fim) > this.util.asTimestamp(v.data_fim)) ? v : a, undefined);\r\n  }\r\n\r\n  public dynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let consolidacao: PlanoTrabalhoConsolidacao = row as PlanoTrabalhoConsolidacao;\r\n    let programa: Programa = consolidacao.plano_trabalho!.programa!;\r\n    const usuarioId = consolidacao.plano_trabalho!.usuario_id;\r\n    const unidadeId = consolidacao.plano_trabalho!.unidade_id;\r\n    const anterior = this.anterior(row as PlanoTrabalhoConsolidacao);\r\n    const proximo = this.proximo(row as PlanoTrabalhoConsolidacao);\r\n    const isAvaliador = this.auth.hasPermissionTo(\"MOD_PTR_CSLD_AVAL\") && (this.unidadeService.isGestorUnidade(unidadeId) || this.auth.isIntegrante('AVALIADOR_PLANO_TRABALHO', unidadeId));\r\n    const isUsuarioDoPlano = this.auth.usuario!.id == usuarioId;\r\n    const BOTAO_AVALIAR = { hint: \"Avaliar\", icon: \"bi bi-star\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, programa, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_REAVALIAR = { hint: \"Reavaliar\", icon: \"bi bi-star-half\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, programa, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_FAZER_RECURSO = { hint: \"Fazer recurso\", id: \"RECORRIDO\", icon: \"bi bi-journal-medical\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.fazerRecurso(row, programa, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_CANCELAR_AVALIACAO = { hint: \"Cancelar avaliação\", id: \"INCLUIDO\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.cancelarAvaliacao(row, this, this.refreshConsolidacao.bind(this)) };\r\n    /* (RN_CSLD_11) Não pode concluir a consolidação antes que a anterior não esteja concluida, e não pode retornar status da consolidação se a posterior estiver a frente (em status); */\r\n    const canAvaliar = !anterior || [\"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarAvaliacao = !proximo || [\"INCLUIDO\", \"CONCLUIDO\"].includes(proximo!.status);\r\n    if(consolidacao.status == \"CONCLUIDO\" && canAvaliar && isAvaliador) {\r\n      result.push(BOTAO_AVALIAR);\r\n    }\r\n    if(consolidacao.status == \"AVALIADO\" && consolidacao!.avaliacao) {\r\n      /* (RN_AVL_2) [PT] O usuário do plano de trabalho que possuir o acesso MOD_PTR_CSLD_REC_AVAL poderá recorrer da nota atribuida dentro do limites estabelecido pelo programa; */\r\n      if(isUsuarioDoPlano && this.auth.hasPermissionTo('MOD_PTR_CSLD_REC_AVAL') && consolidacao!.avaliacao?.data_avaliacao && \r\n        (!programa.dias_tolerancia_recurso_avaliacao || \r\n        (this.util.daystamp(consolidacao!.avaliacao!.data_avaliacao) + programa.dias_tolerancia_recurso_avaliacao > this.util.daystamp(this.auth.hora)))) {\r\n        result.push(BOTAO_FAZER_RECURSO);\r\n      }\r\n      /* (RN_AVL_3) [PT] Após o recurso será realizado nova avaliação, podendo essa ser novamente recorrida dentro do mesmo prazo estabelecido no programa; */\r\n      /* (RN_AVL_6) [PT] Qualquer usuário capaz de avaliar tambem terá a capacidade de cancelar a avaliação; */\r\n      if(canAvaliar && isAvaliador) {\r\n        result.push(BOTAO_REAVALIAR);\r\n        if(canCancelarAvaliacao) result.push(BOTAO_CANCELAR_AVALIACAO);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public async onSelectTab(tab: LookupItem) {\r\n    if(this.viewInit) this.saveUsuarioConfig({active_tab: tab.key});\r\n  }\r\n\r\n  public initGrid(grid: GridComponent) {\r\n    grid.queryInit();\r\n  }\r\n\r\n  public filterWhereHistorico = (filter: FormGroup) => {\r\n    let result: any[] = [];\r\n    let form: any = filter.value;\r\n    result.push([\"status\", \"in\", [\"AVALIADO\"]]);\r\n    if(form.usuario_id?.length) result.push([\"plano_trabalho.usuario.id\", \"==\", form.usuario_id]);\r\n    if(form.unidade_id?.length) result.push([\"plano_trabalho.unidade.id\", \"==\", form.unidade_id]);\r\n    if(form.unidades_subordinadas) result.push([\"unidades_subordinadas\", \"==\", true]);\r\n    if(form.incluir_arquivados) result.push([\"incluir_arquivados\", \"==\", true]);\r\n    return result;\r\n  }\r\n\r\n  public getAvaliacoes(row: any) {\r\n    return this.avaliacoes!.filter((x: Avaliacao) => x.plano_trabalho_consolidacao_id == row.id);\r\n  }\r\n\r\n  public async loadData() {\r\n    this.loading = true;\r\n    try {\r\n      this.avaliacoes = await this.avaliacaoDao!.query({where: [[\"plano_trabalho_consolidacao_id\", \"in\", this.consolidacaoId]], join: this.joinAvaliacao, orderBy: [[\"data_avaliacao\", \"desc\"]]}).asPromise();\r\n      this.avaliacao = this.avaliacoes[0] || this.avaliacao;\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  public onGridLoadHistorico(rows?: Base[]) {\r\n    this.extra = (this.grid?.query || this.query!).extra;\r\n    let planosTrabalhos = (this.extra?.planos_trabalhos || []) as PlanoTrabalho[];\r\n    planosTrabalhos.forEach(p => {\r\n      let plano = p as PlanoTrabalho;\r\n      plano.programa = this.extra?.programas?.find((x: Programa) => x.id == plano.programa_id);\r\n    });\r\n    rows?.forEach(v => {\r\n      this.consolidacaoId?.push(v.id);\r\n      let consolidacao = v as PlanoTrabalhoConsolidacao;\r\n      consolidacao.plano_trabalho = this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.id == consolidacao.plano_trabalho_id);\r\n      if(consolidacao.avaliacao) consolidacao.avaliacao.tipo_avaliacao = this.extra?.tipos_avaliacoes?.find((x: TipoAvaliacao) => x.id == consolidacao.avaliacao!.tipo_avaliacao_id);\r\n    });\r\n    this.loadData();\r\n  }\r\n\r\n  public getNota(row:any) {\r\n    return row.tipo_avaliacao.notas.find((x: any) => x.codigo == row.nota);\r\n  }\r\n}\r\n\r\n","<tabs right [title]=\"isModal ? '' : title\" [select]=\"onSelectTab.bind(this)\">\r\n    <tab key=\"CONSOLIDACOES\" icon=\"bi bi-clipboard-check\" [label]=\"lex.translate('Consolidações')\" [template]=\"consolidacoes\">\r\n        <ng-template #consolidacoes>\r\n            <grid [dao]=\"dao\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [init]=\"initGrid.bind(this)\"\r\n                [hasAdd]=\"false\" [hasEdit]=\"false\" [loadList]=\"onGridLoad.bind(this)\" [groupTemplate]=\"groupUnidadeUsuario\"><!--[title]=\"isModal ? '' : title\"-->\r\n                <ng-template let-separator=\"separator\" #groupUnidadeUsuario>\r\n                    <div class=\"d-flex\">\r\n                        <div class=\"ms-3\">\r\n                            <profile-picture [url]=\"usuarioSeparator(separator)?.url_foto\" [size]=\"40\" [hint]=\"usuarioSeparator(separator)?.nome\"></profile-picture>\r\n                        </div>\r\n                        <div class=\"flex-fill ms-3\">\r\n                            <strong>{{usuarioSeparator(separator)?.nome || \"Desconhecido\"}}</strong><br>\r\n                            <badge [icon]=\"entityService.getIcon('Unidade')\" color=\"primary\" [label]=\"unidadeSeparator(separator)?.sigla || 'Desconhecido'\"></badge>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n                <toolbar *ngIf=\"!selectable\"></toolbar>\r\n                <filter [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"filterCollapsed\" [deleted]=\"this.auth.hasPermissionTo('MOD_AUDIT_DEL')\">\r\n                    <div class=\"row\">\r\n                        <input-search [size]=\"5\" #usuario [control]=\"filter!.controls.usuario_id\" controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n                        <input-search [size]=\"5\" #unidade [control]=\"filter!.controls.unidade_id\" controlName=\"unidade_id\" [dao]=\"unidadeDao\" (change)=\"onUnidadeChange($event)\"></input-search>\r\n                        <input-switch [size]=\"1\" #subordinadas [disabled]=\"canFilterSubordinadas\" label=\"Sub.\" [control]=\"filter!.controls.unidades_subordinadas\" controlName=\"unidades_subordinadas\" labelInfo=\"Incluir as unidades subordinadas\"></input-switch>\r\n                        <input-switch [size]=\"1\" #arquivadas label=\"Arq.\" [control]=\"filter!.controls.incluir_arquivados\" controlName=\"incluir_arquivados\" labelInfo=\"Incluir os planos de trabalhos arquivados\"></input-switch>\r\n                    </div>\r\n                </filter>\r\n                <columns>\r\n                    <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidação')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\r\n                        <ng-template let-row=\"row\" #columnConsolidacao>\r\n                            <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\r\n                        </ng-template>\r\n                        <ng-template let-row=\"row\" #columnExpandedConsolidacao>\r\n                            <plano-trabalho-consolidacao-form #consolidacao [disabled]=\"true\" [entity]=\"row\" [planoTrabalho]=\"row.plano_trabalho\" [cdRef]=\"cdRef\"></plano-trabalho-consolidacao-form>\r\n                        </ng-template>\r\n                    </column>\r\n                    <column [title]=\"'Plano de trabalho/Vigência\\nUnidade/Programa/Modalidade'\" [template]=\"columnPlanoTrabalho\">\r\n                        <ng-template let-row=\"row\" #columnPlanoTrabalho>\r\n                            {{row.plano_trabalho.usuario.nome}} <badge label=\"Início\" color=\"light\" icon=\"bi bi-calendar2\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_inicio)\"></badge><badge label=\"Término\" color=\"light\" icon=\"bi bi-calendar2-check\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_fim)\"></badge><br>\r\n                            <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"row.plano_trabalho.unidade?.sigla\" color=\"light\" [hint]=\"lex.translate('Unidade') + ': ' + row.plano_trabalho.unidade?.nome\"></badge>\r\n                            <badge [icon]=\"entityService.getIcon('Programa')\" [label]=\"row.plano_trabalho.programa?.nome\" color=\"light\" [hint]=\"lex.translate('Programa')\"></badge>\r\n                            <badge [icon]=\"entityService.getIcon('TipoModalidade')\" [label]=\"row.plano_trabalho.tipo_modalidade?.nome\" color=\"light\" [hint]=\"lex.translate('Tipo de modalidade')\"></badge>\r\n                        </ng-template>\r\n                    </column>\r\n                    <column title=\"Data início\" [template]=\"columnDataInicio\">\r\n                        <ng-template let-row=\"row\" #columnDataInicio>\r\n                            {{util.getDateFormatted(row.data_inicio)}}\r\n                        </ng-template>\r\n                    </column>\r\n                    <column title=\"Data fim\" [template]=\"columnDataFim\">\r\n                        <ng-template let-row=\"row\" #columnDataFim>\r\n                            <strong>{{util.getDateFormatted(row.data_fim)}}</strong>\r\n                        </ng-template>\r\n                    </column>\r\n                    <column [title]=\"'Estatísticas\\nAvaliações'\" [template]=\"columnEstatisticas\" [width]=\"300\">\r\n                        <ng-template let-row=\"row\" #columnEstatisticas>\r\n                            <avaliar-nota-badge *ngIf=\"row.avaliacao\" [align]=\"'left'\" [tipoAvaliacao]=\"row.avaliacao.tipo_avaliacao\" [nota]=\"row.avaliacao.nota\"></avaliar-nota-badge>\r\n                            <separator *ngIf=\"row.avaliacao?.recurso?.length\" title=\"Recurso da avaliação\" collapse [collapsed]=\"false\">\r\n                                <small>{{row.avaliacao.recurso}}</small>\r\n                            </separator>\r\n                        </ng-template>\r\n                    </column>\r\n                    <column title=\"Status\" [template]=\"columnStatus\">\r\n                        <ng-template let-row=\"row\" #columnStatus>\r\n                            <div class=\"one-per-line\">\r\n                                <badge [color]=\"lookup.getColor(lookup.CONSOLIDACAO_STATUS, row.status)\" [icon]=\"lookup.getIcon(lookup.CONSOLIDACAO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.CONSOLIDACAO_STATUS, row.status)\"></badge>\r\n                                <badge *ngIf=\"row.avaliacao?.recurso?.length\" icon=\"bi bi-journal-medical\" color=\"warning\" label=\"Recorrido\"></badge>\r\n                            </div>\r\n                        </ng-template>\r\n                    </column>\r\n                    <column type=\"options\" [dynamicButtons]=\"dynamicButtons.bind(this)\"></column>\r\n                </columns>\r\n                <pagination [rows]=\"rowsLimit\"></pagination>\r\n            </grid>\r\n        </ng-template>\r\n    </tab>\r\n    <!--Aba Histórico de Avaliações-------------------------------------------------------------->\r\n    <tab key=\"HISTORICO\" icon=\"bi bi-clipboard-pulse\" label=\"Histórico de Avaliações\" [template]=\"historico\">\r\n        <ng-template #historico>\r\n            <grid [dao]=\"dao\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [init]=\"initGrid.bind(this)\"\r\n                [hasAdd]=\"false\" [hasEdit]=\"false\" [loadList]=\"onGridLoadHistorico.bind(this)\" [groupTemplate]=\"groupHistorico\">\r\n                <ng-template let-separator=\"separator\" let-row=\"row\" #groupHistorico>\r\n                    <div class=\"d-flex\">\r\n                        <div class=\"ms-3\">\r\n                            <profile-picture [url]=\"usuarioSeparator(separator)?.url_foto\" [size]=\"40\" [hint]=\"usuarioSeparator(separator)?.nome\"></profile-picture>\r\n                        </div> \r\n                        <div class=\"flex-fill ms-3\">\r\n                            <strong>{{usuarioSeparator(separator)?.nome || \"Desconhecido\"}}</strong><br>\r\n                            <badge [icon]=\"entityService.getIcon('Unidade')\" color=\"primary\" [label]=\"unidadeSeparator(separator)?.sigla || 'Desconhecido'\"></badge>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n                <toolbar *ngIf=\"!selectable\"></toolbar>\r\n                <filter [form]=\"filter\" [where]=\"filterWhereHistorico\" [submit]=\"filterSubmit.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"filterCollapsed\" [deleted]=\"this.auth.hasPermissionTo('MOD_AUDIT_DEL')\">\r\n                    <div class=\"row\">\r\n                        <input-search [size]=\"5\" #usuario [control]=\"filter!.controls.usuario_id\" controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n                        <input-search [size]=\"5\" #unidade [control]=\"filter!.controls.unidade_id\" controlName=\"unidade_id\" [dao]=\"unidadeDao\" (change)=\"onUnidadeChange($event)\"></input-search>\r\n                        <input-switch [size]=\"1\" #subordinadas [disabled]=\"canFilterSubordinadas\" label=\"Sub.\" [control]=\"filter!.controls.unidades_subordinadas\" controlName=\"unidades_subordinadas\" labelInfo=\"Incluir as unidades subordinadas\"></input-switch>\r\n                        <input-switch [size]=\"1\" #arquivadas label=\"Arq.\" [control]=\"filter!.controls.incluir_arquivados\" controlName=\"incluir_arquivados\" labelInfo=\"Incluir os planos de trabalhos arquivados\"></input-switch>\r\n                    </div>\r\n                </filter>\r\n                <columns>\r\n                    <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [template]=\"columnHistorico\" [expandTemplate]=\"columnExpandedHistorico\">\r\n                        <ng-template #columnHistorico>\r\n                        </ng-template>\r\n\r\n                        <ng-template let-row=\"row\" #columnExpandedHistorico>\r\n                            \r\n                            <grid [items]=\"getAvaliacoes(row)\" [minHeight]=\"0\" #gridEntregas>\r\n                                <columns>\r\n                                    <column title=\"Data\" type=\"datetime\" field=\"data_avaliacao\"></column>\r\n                                    <column title=\"Avaliador\" [template]=\"columnAvaliador\">\r\n                                        <ng-template let-row=\"row\" #columnAvaliador>\r\n                                            <div class=\"avaliador\">\r\n                                                <div class=\"avaliador-profile\">\r\n                                                    <profile-picture [url]=\"row.avaliador.url_foto || ''\" [size]=\"40\" [hint]=\"row.avaliador.nome || ''\"></profile-picture>\r\n                                                </div>\r\n                                                <div class=\"avaliador-nome\">\r\n                                                    <strong>{{row.avaliador.nome || \"\"}}</strong><br>\r\n                                                    <small>{{row.avaliador.apelido || \"\"}}</small>\r\n                                                </div>\r\n                                            </div>\r\n                                        </ng-template>\r\n                                    </column>\r\n                                    <column [title]=\"'Nota'\" [template]=\"columnNota\">\r\n                                        <ng-template let-row=\"row\" #columnNota>\r\n                                            <badge [label]=\"getNota(row).nota\" [icon]=\"getNota(row).icone\" [color]=\"getNota(row).cor\"></badge><br>\r\n                                            <small>{{getNota(row).descricao}}</small>\r\n                                        </ng-template>\r\n                                    </column>\r\n                                    <column [title]=\"'Justificativas'\" [template]=\"columnJustificativa\">\r\n                                        <ng-template let-row=\"row\" #columnJustificativa>\r\n                                            {{row.justificativa || ''}}\r\n                                            <div class=\"one-per-line\">\r\n                                                <badge *ngFor=\"let justificativa of row.justificativas\" [icon]=\"entityService.getIcon('TipoJustificativa')\" [label]=\"justificativa.value\"></badge>\r\n                                            </div>\r\n                                        </ng-template>\r\n                                    </column>\r\n                                    <column title=\"Recurso\" [template]=\"columnRecurso\">\r\n                                        <ng-template let-row=\"row\" #columnRecurso>\r\n                                            <small>{{row.recurso || ''}}</small>\r\n                                        </ng-template>\r\n                                    </column>\r\n                                    <column title=\"Status\" [template]=\"columnStatus\">\r\n                                        <ng-template let-row=\"row\" #columnStatus>\r\n                                            <div class=\"one-per-line\">\r\n                                                <badge *ngIf=\"row.recurso?.length\" icon=\"bi bi-journal-medical\" color=\"warning\" label=\"Recorrido\"></badge>\r\n                                                <badge *ngIf=\"row.id == avaliacao?.id\" icon=\"bi bi-check-circle\" color=\"success\" label=\"Vigente\"></badge>\r\n                                            </div>\r\n                                        </ng-template>\r\n                                    </column>\r\n                                </columns>\r\n                            </grid>\r\n\r\n                        </ng-template>\r\n                    </column>\r\n                    <column [title]=\"'Plano de trabalho/Vigência\\nPrograma/Modalidade'\" [template]=\"columnPlanoTrabalho\">\r\n                        <ng-template let-row=\"row\" #columnPlanoTrabalho>\r\n                            {{row.plano_trabalho.usuario.nome}} <badge label=\"Início\" color=\"light\" icon=\"bi bi-calendar2\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_inicio)\"></badge><badge label=\"Término\" color=\"light\" icon=\"bi bi-calendar2-check\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_fim)\"></badge><br>\r\n                            <badge [icon]=\"entityService.getIcon('Programa')\" [label]=\"row.plano_trabalho.programa?.nome\" color=\"light\" [hint]=\"lex.translate('Programa')\"></badge>\r\n                            <badge [icon]=\"entityService.getIcon('TipoModalidade')\" [label]=\"row.plano_trabalho.tipo_modalidade?.nome\" color=\"light\" [hint]=\"lex.translate('Tipo de modalidade')\"></badge>\r\n                        </ng-template>\r\n                    </column>\r\n                    <column title=\"Data início\" [template]=\"columnDataInicio\">\r\n                        <ng-template let-row=\"row\" #columnDataInicio>\r\n                            {{util.getDateFormatted(row.data_inicio)}}\r\n                        </ng-template>\r\n                    </column>\r\n                    <column title=\"Data fim\" [template]=\"columnDataFim\">\r\n                        <ng-template let-row=\"row\" #columnDataFim>\r\n                            {{util.getDateFormatted(row.data_fim)}}\r\n                        </ng-template>\r\n                    </column>\r\n                </columns>\r\n                <pagination [rows]=\"rowsLimit\"></pagination>\r\n            </grid>\r\n        </ng-template>\r\n    </tab>\r\n</tabs>\r\n","import { ChangeDetectorRef, Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton, ToolbarComponent } from 'src/app/components/toolbar/toolbar.component';\r\nimport { ConsolidacaoDados, PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalhoConsolidacao } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { Atividade, Checklist } from 'src/app/models/atividade.model';\r\nimport { Afastamento } from 'src/app/models/afastamento.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { BadgeTrabalho, PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoAtividadeDaoService } from 'src/app/dao/tipo-atividade-dao.service';\r\nimport { PlanoEntregaService } from '../../plano-entrega/plano-entrega.service';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { AtividadeOptionsMetadata, AtividadeService } from '../../atividade/atividade.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { CalendarService } from 'src/app/services/calendar.service';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { TipoAtividade } from 'src/app/models/tipo-atividade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { Comparecimento } from 'src/app/models/comparecimento.model';\r\nimport { ComparecimentoDaoService } from 'src/app/dao/comparecimento-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { OcorrenciaDaoService } from 'src/app/dao/ocorrencia-dao.service';\r\nimport { Ocorrencia } from 'src/app/models/ocorrencia.model';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { Comentario } from 'src/app/models/comentario';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\nimport { AtividadeListTarefaComponent } from '../../atividade/atividade-list-tarefa/atividade-list-tarefa.component';\r\nimport { AtividadeModule } from '../../atividade/atividade.module';\r\nimport { PlanoEntregaEntrega } from 'src/app/models/plano-entrega-entrega.model';\r\nimport { PlanoEntregaEntregaDaoService } from 'src/app/dao/plano-entrega-entrega-dao.service';\r\n\r\nexport type ConsolidacaoEntrega = {\r\n  id: string,\r\n  entrega: PlanoTrabalhoEntrega,\r\n  badge: BadgeTrabalho,\r\n  atividades: Atividade[]\r\n};\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-consolidacao-form',\r\n  templateUrl: './plano-trabalho-consolidacao-form.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-form.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoFormComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridEntregas', { static: false }) public gridEntregas?: GridComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('etiqueta', { static: false }) public etiqueta?: InputSelectComponent;\r\n  @ViewChild('tipoAtividade', { static: false }) public tipoAtividade?: InputSearchComponent;\r\n  @ViewChild('listTarefas', { static: false }) public listTarefas?: AtividadeListTarefaComponent;\r\n  @Input() cdRef: ChangeDetectorRef;\r\n  @Input() planoTrabalho?: PlanoTrabalho;\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalhoConsolidacao | undefined) { super.entity = value; this.bindEntity(); } get entity(): PlanoTrabalhoConsolidacao | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) {\r\n    if (this._disabled != value || this.atividadeOptionsMetadata.disabled !== value) {\r\n      this._disabled = value;\r\n      this.atividadeOptionsMetadata.disabled = value;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n  get disabled(): boolean {\r\n    return this._disabled;\r\n  }\r\n\r\n  //public consolidacaoOcorrenciaDao: PlanoTrabalhoConsolidacaoOcorrenciaDaoService;\r\n  public ocorrenciaDao: OcorrenciaDaoService;\r\n  public comparecimentoDao: ComparecimentoDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public formAtividade: FormGroup;\r\n  //public formOcorrencia: FormGroup;\r\n  public formComparecimento: FormGroup;\r\n  public formEdit: FormGroup;\r\n  public unidade?: Unidade;\r\n  public dao: PlanoTrabalhoConsolidacaoDaoService;\r\n  public atividadeDao: AtividadeDaoService;\r\n  public atividadeService: AtividadeService;\r\n  public calendar: CalendarService;\r\n  public joinAtividade: string[] = ['demandante', 'usuario', 'tipo_atividade', 'comentarios.usuario:id,nome,apelido', 'reacoes.usuario:id,nome,apelido'];\r\n  public tipoAtividadeDao: TipoAtividadeDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public planoEntregaService: PlanoEntregaService;\r\n  public itemsEntregas: ConsolidacaoEntrega[] = [];\r\n  public etiquetas: LookupItem[] = [];\r\n  public checklist?: Checklist[];\r\n  public itemsOcorrencias: Ocorrencia[] = [];\r\n  public itemsComparecimentos: Comparecimento[] = [];\r\n  public itemsAfastamentos: Afastamento[] = [];\r\n  public atividadeOptionsMetadata: AtividadeOptionsMetadata;\r\n  public programa?: Programa;\r\n  public pEEDao: PlanoEntregaEntregaDaoService;\r\n\r\n  private _disabled: boolean = true;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.dao = injector.get<PlanoTrabalhoConsolidacaoDaoService>(PlanoTrabalhoConsolidacaoDaoService);\r\n    //this.consolidacaoOcorrenciaDao = injector.get<PlanoTrabalhoConsolidacaoOcorrenciaDaoService>(PlanoTrabalhoConsolidacaoOcorrenciaDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.comparecimentoDao = injector.get<ComparecimentoDaoService>(ComparecimentoDaoService);\r\n    this.atividadeDao = injector.get<AtividadeDaoService>(AtividadeDaoService);\r\n    this.atividadeService = injector.get<AtividadeService>(AtividadeService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.ocorrenciaDao = injector.get<OcorrenciaDaoService>(OcorrenciaDaoService);\r\n    this.tipoAtividadeDao = injector.get<TipoAtividadeDaoService>(TipoAtividadeDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.planoEntregaService = injector.get<PlanoEntregaService>(PlanoEntregaService);\r\n    this.pEEDao = injector.get<PlanoEntregaEntregaDaoService>(PlanoEntregaEntregaDaoService);\r\n    this.formAtividade = this.fh.FormBuilder({\r\n      descricao: { default: \"\" },\r\n      etiquetas: { default: [] },\r\n      checklist: { default: [] },\r\n      comentarios: { default: [] },\r\n      esforco: { default: 0 },\r\n      tempo_planejado: { default: 0 },\r\n      data_distribuicao: { default: new Date() },\r\n      data_estipulada_entrega: { default: new Date() },\r\n      data_inicio: { default: new Date() },\r\n      data_entrega: { default: new Date() },\r\n      //tipo_atividade_id: { default: null }\r\n    }, this.cdRef, this.validateAtividade);\r\n    /*this.formOcorrencia = this.fh.FormBuilder({\r\n      data_inicio: { default: new Date() },\r\n      data_fim: { default: new Date() },\r\n      descricao: { default: \"\" }\r\n    }, this.cdRef, this.validateOcorrencia);*/\r\n    this.formComparecimento = this.fh.FormBuilder({\r\n      data_comparecimento: { default: new Date() },\r\n      unidade_id: { default: \"\" },\r\n      detalhamento: { default: \"\" }\r\n    }, this.cdRef, this.validateComparecimento);\r\n    this.formEdit = this.fh.FormBuilder({\r\n      descricao: { default: \"\" },\r\n      //tipo_atividade_id: { default: null },\r\n      comentarios: { default: [] },\r\n      progresso: { default: 0 },\r\n      etiquetas: { default: [] },\r\n      etiqueta: { default: null }\r\n    });\r\n    this.atividadeOptionsMetadata = {\r\n      refreshId: this.atividadeRefreshId.bind(this),\r\n      removeId: this.atividadeRemoveId.bind(this),\r\n      refresh: this.refresh.bind(this)\r\n    }\r\n  }\r\n\r\n  public refresh() {\r\n    this.loadData(this.entity!, this.form);\r\n  }\r\n\r\n  public bindEntity() {\r\n    if (this.entity) {\r\n      this.entity._metadata = this.entity._metadata || {};\r\n      this.entity._metadata.planoTrabalhoConsolidacaoFormComponent = this;\r\n    }\r\n  }\r\n\r\n  public atividadeRefreshId(id: string, atividade?: Atividade) {\r\n    this.itemsEntregas.forEach(entrega => {\r\n      let foundIndex = entrega.atividades.findIndex(x => x.id == id);\r\n      if (foundIndex >= 0) {\r\n        if (atividade) {\r\n          entrega.atividades[foundIndex] = atividade;\r\n        } else {\r\n          this.atividadeDao.getById(id, this.joinAtividade).then(atividade => { if (atividade) entrega.atividades[foundIndex] = atividade; });\r\n        }\r\n      }\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public atividadeRemoveId(id: string) {\r\n    this.itemsEntregas.forEach(entrega => {\r\n      let foundIndex = entrega.atividades.findIndex(x => x.id == id);\r\n      if (foundIndex >= 0) entrega.atividades.splice(foundIndex, 1);\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public validateAtividade = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if (['data_inicio', 'data_entrega'].includes(controlName) && !this.util.isDataValid(control.value)) {//'data_distribuicao', 'data_estipulada_entrega',\r\n      result = \"Inválido\";\r\n    } /*else if (controlName == 'data_estipulada_entrega' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuição\";\r\n    }*/ else if (controlName == 'data_inicio' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuição\";\r\n    } else if (controlName == 'data_entrega' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuição\";\r\n    } else if (controlName == 'data_entrega' && control.value.getTime() < this.formAtividade?.controls.data_inicio.value.getTime()) {\r\n      result = \"Menor que início\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  //Não apagar\r\n  /*public validateOcorrencia = (control: AbstractControl, controlName: string) => { \r\n    let result = null;\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if(['data_inicio', 'data_fim'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Inválido\";\r\n    } else if(controlName == 'data_fim' && control.value.getTime() < this.formOcorrencia?.controls.data_inicio.value.getTime()) {\r\n      result = \"Menor que início\";\r\n    } \r\n    return result;\r\n  }*/\r\n\r\n  public validateComparecimento = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['detalhamento', 'unidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if (controlName == 'data_comparecimento' && this.entity && !this.util.between(control.value, { start: this.entity!.data_inicio, end: this.entity!.data_fim })) {\r\n      result = \"Inválido\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public loadConsolidacao(dados: ConsolidacaoDados) {\r\n    this.itemsEntregas = dados.entregas.map(x => {\r\n      if (x.plano_entrega_entrega) x.plano_entrega_entrega.plano_entrega = dados.planosEntregas.find(pe => pe.id == x.plano_entrega_entrega?.plano_entrega_id);\r\n      let result = {\r\n        id: x.id,\r\n        entrega: x,\r\n        atividades: dados.atividades.filter(y => y.plano_trabalho_entrega_id == x.id),\r\n        badge: this.planoTrabalhoService.tipoEntrega(x, dados.planoTrabalho),\r\n        meta: x.plano_entrega_entrega ? this.planoEntregaService.getValorMeta(x.plano_entrega_entrega) : '',\r\n        metaRealizado: x.plano_entrega_entrega ? this.planoEntregaService.getValorRealizado(x.plano_entrega_entrega) : '',\r\n        progresso_realizado: x.plano_entrega_entrega ? x.plano_entrega_entrega.progresso_realizado : 0,\r\n        objetivos: x.plano_entrega_entrega ? x.plano_entrega_entrega.objetivos : [],\r\n        processos: x.plano_entrega_entrega ? x.plano_entrega_entrega.processos : [],\r\n      };\r\n      return result;\r\n    });\r\n    this.programa = dados.programa;\r\n    this.planoTrabalho = dados.planoTrabalho;\r\n    this.itemsOcorrencias = dados.ocorrencias;\r\n    this.itemsComparecimentos = dados.comparecimentos;\r\n    this.itemsAfastamentos = dados.afastamentos;\r\n    this.unidade = dados.planoTrabalho.unidade || this.entity!.plano_trabalho?.unidade;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.gridEntregas!.loading = true;\r\n    this.cdRef.detectChanges();\r\n    try {\r\n      let dados = await this.dao!.dadosConsolidacao(entity.id);\r\n      this.loadConsolidacao(dados);\r\n    } finally {\r\n      this.gridEntregas!.loading = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  /***************************************************************************************\r\n  * Atividades \r\n  ****************************************************************************************/\r\n  public async addAtividade(entrega: PlanoTrabalhoEntrega) {\r\n    let planoTrabalho: PlanoTrabalho | undefined = entrega.plano_trabalho || this.entity!.plano_trabalho;\r\n    let efemerides = this.calendar.calculaDataTempoUnidade(this.entity!.data_inicio, this.entity!.data_fim, planoTrabalho!.carga_horaria, this.unidade!, \"ENTREGA\");\r\n    const tempoPlanejado = this.calendar.horasUteis(this.entity!.data_inicio, this.entity!.data_fim, planoTrabalho!.carga_horaria, this.unidade!, \"DISTRIBUICAO\");\r\n    const dataInicio = this.util.maxDate(this.util.setTime(this.entity!.data_inicio, 0, 0, 0), planoTrabalho!.data_inicio);\r\n    const dataFim = this.util.minDate(this.util.setTime(this.entity!.data_fim, 23, 59, 59), planoTrabalho!.data_fim);\r\n    return new Atividade({\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho: planoTrabalho,\r\n      plano_trabalho_entrega: entrega,\r\n      plano_trabalho_consolidacao: this.entity,\r\n      demandante: this.auth.usuario,\r\n      usuario: this.auth.usuario,\r\n      unidade: this.unidade,\r\n      data_distribuicao: dataInicio,\r\n      carga_horaria: planoTrabalho!.carga_horaria,\r\n      data_estipulada_entrega: dataFim,\r\n      data_inicio: dataInicio,\r\n      data_entrega: dataFim,\r\n      tempo_planejado: tempoPlanejado,\r\n      tempo_despendido: efemerides?.tempoUtil || 0,\r\n      status: 'CONCLUIDO',\r\n      progresso: 100,\r\n      plano_trabalho_id: this.entity!.plano_trabalho_id,\r\n      plano_trabalho_entrega_id: entrega.id,\r\n      plano_trabalho_consolidacao_id: this.entity!.id,\r\n      demandante_id: this.auth.usuario!.id,\r\n      usuario_id: this.auth.usuario!.id,\r\n      unidade_id: this.unidade!.id,\r\n      metadados: { // Simula os metadados enviados pelo servidor\r\n        atrasado: false,\r\n        tempo_despendido: 0,\r\n        tempo_atraso: 0,\r\n        pausado: false,\r\n        iniciado: true,\r\n        concluido: true,\r\n        avaliado: false,\r\n        arquivado: false,\r\n        produtividade: 0,\r\n        extra: undefined,\r\n        _status: []\r\n      }\r\n    });\r\n  }\r\n\r\n  public async loadAtividade(form: FormGroup, row: any) {\r\n    this.formAtividade.patchValue(row);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeAtividade(atividades: Atividade[], row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let atividade = row as Atividade;\r\n        await this.atividadeDao?.delete(atividade);\r\n        atividades.splice(atividades.findIndex(x => x.id == atividade.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveAtividade(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    console.log(\"AQIO\");\r\n    this.gridAtividades!.error = \"\";\r\n    this.formAtividade.markAllAsTouched();\r\n    if (this.formAtividade!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      this.util.fillForm(row, this.formAtividade!.value);\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.atividadeDao?.save(row, this.joinAtividade, ['etiquetas', 'checklist', 'comentarios', 'pausas', 'tarefas']);\r\n        this.atividadeRefreshId(row.id, result);\r\n      } catch (error: any) {\r\n        result = false;\r\n        this.gridAtividades!.error = error.message || error;\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public onDataDistribuicaoChange(event: Event) {\r\n    this.formAtividade!.controls.data_inicio.setValue(this.formAtividade!.controls.data_distribuicao.value);\r\n  }\r\n\r\n  public onDataEstipuladaEntregaChange(event: Event) {\r\n    this.formAtividade!.controls.data_entrega.setValue(this.formAtividade!.controls.data_estipulada_entrega.value);\r\n  }\r\n\r\n  public atividadeDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    result.push(Object.assign({}, this.gridEntregas!.BUTTON_EDIT, {}));\r\n    result.push(Object.assign({}, this.gridEntregas!.BUTTON_DELETE, {}));\r\n    return result;\r\n  }\r\n\r\n  public async onColumnProgressoEtiquetasChecklistEdit(row: any) {\r\n    this.formEdit.controls.progresso.setValue(row.progresso);\r\n    this.formEdit.controls.etiquetas.setValue(row.etiquetas);\r\n    this.formEdit.controls.etiqueta.setValue(null);\r\n    this.etiquetas = this.util.merge(row.tipo_atividade?.etiquetas, row.unidade?.etiquetas, (a, b) => a.key == b.key);\r\n    this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n    this.etiquetas = this.util.merge(this.etiquetas, await this.carregaEtiquetasUnidadesAscendentes(row.unidade), (a, b) => a.key == b.key);\r\n    this.checklist = this.util.clone(row.checklist);\r\n  }\r\n\r\n  public async carregaEtiquetasUnidadesAscendentes(unidadeAtual: Unidade) {\r\n    let etiquetasUnidades: LookupItem[] = [];\r\n    let path = unidadeAtual.path.split(\"/\");\r\n    let unidades = await this.unidadeDao.query({ where: [\"id\", \"in\", path] }).asPromise();\r\n    unidades.forEach(un => {\r\n      etiquetasUnidades = this.util.merge(etiquetasUnidades, un.etiquetas, (a, b) => a.key == b.key);\r\n    });\r\n    return etiquetasUnidades;\r\n  }\r\n\r\n  public async onColumnProgressoEtiquetasChecklistSave(row: any) {\r\n    try {\r\n      const saved = await this.atividadeDao!.update(row.id, {\r\n        progresso: this.formEdit.controls.progresso.value,\r\n        etiquetas: this.formEdit.controls.etiquetas.value,\r\n        checklist: this.checklist\r\n      });\r\n      row.progresso = this.formEdit.controls.progresso.value;\r\n      row.checklist = this.checklist;\r\n      return !!saved;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public onEtiquetaConfigClick() {\r\n    this.go.navigate({ route: [\"configuracoes\", \"preferencia\", \"usuario\", this.auth.usuario!.id], params: { etiquetas: true } }, {\r\n      modal: true, modalClose: (modalResult) => {\r\n        this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n        this.cdRef.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  public addItemHandleEtiquetas(): LookupItem | undefined {\r\n    let result = undefined;\r\n    if (this.etiqueta && this.etiqueta.selectedItem) {\r\n      const item = this.etiqueta.selectedItem;\r\n      const key = item.key?.length ? item.key : this.util.textHash(item.value);\r\n      if (this.util.validateLookupItem(this.formEdit.controls.etiquetas.value, key)) {\r\n        result = {\r\n          key: key,\r\n          value: item.value,\r\n          color: item.color,\r\n          icon: item.icon\r\n        };\r\n        this.formEdit.controls.etiqueta.setValue(null);\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public loadTipoAtividade(tipoAtividade: TipoAtividade | undefined) {\r\n    if (tipoAtividade) {\r\n      this.etiquetas = this.atividadeService.buildEtiquetas(this.unidade, tipoAtividade);\r\n      this.atividadeService.buildChecklist(tipoAtividade, this.formAtividade.controls.checklist);\r\n      this.formAtividade.controls.esforco.setValue(tipoAtividade?.esforco || 0);\r\n    } else {\r\n      this.etiquetas = [];\r\n      this.formAtividade.controls.esforco.setValue(0);\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onTipoAtividadeSelect(item: SelectItem) {\r\n    const tipoAtividade: TipoAtividade | undefined = item.entity as TipoAtividade;\r\n    this.loadTipoAtividade(tipoAtividade);\r\n    this.atividadeService.comentarioAtividade(tipoAtividade, this.formAtividade!.controls.comentarios);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async onColumnAtividadeDescricaoEdit(row: any) {\r\n    this.formAtividade.controls.descricao.setValue(row.descricao);\r\n    //this.formEdit.controls.tipo_atividade_id.setValue(row.tipo_atividade_id);\r\n    this.formAtividade.controls.comentarios.setValue(row.comentarios);\r\n  }\r\n\r\n  public async onColumnAtividadeDescricaoSave(row: any) {\r\n    try {\r\n      this.atividadeService.comentarioAtividade(this.tipoAtividade?.selectedEntity, this.formAtividade!.controls.comentarios);\r\n      const saved = await this.atividadeDao!.update(row.id, {\r\n        descricao: this.formAtividade.controls.descricao.value,\r\n        //tipo_atividade_id: this.formEdit.controls.tipo_atividade_id.value,\r\n        comentarios: (this.formAtividade.controls.comentarios.value || []).filter((x: Comentario) => [\"ADD\", \"EDIT\", \"DELETE\"].includes(x._status || \"\"))\r\n      });\r\n      row.descricao = this.formAtividade.controls.descricao.value;\r\n      //row.tipo_atividade_id = this.formEdit.controls.tipo_atividade_id.value;\r\n      row.tipo_atividade = this.tipoAtividade?.selectedEntity || null;\r\n      row.comentarios = this.formAtividade.controls.comentarios.value;\r\n      return !!saved;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public tempoAtividade(row: any) {\r\n    let badge: BadgeButton[] = [\r\n      { color: \"light\", hint: \"Início\", icon: \"bi bi-file-earmark-play\", label: this.dao.getDateTimeFormatted(row.data_inicio) },\r\n    ];\r\n    let badgeTratar = this.atividadeService.temposAtividade(row);\r\n    badgeTratar = badgeTratar.filter(bad => bad.icon != \"bi bi-file-earmark-plus\" && bad.icon != \"bi bi-calendar-check\")\r\n    badge.push(...badgeTratar);\r\n    return badge;\r\n  }\r\n\r\n  public dynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    result.push({ label: \"Detalhes\", icon: \"bi bi-eye\", color: 'btn-outline-success', onClick: this.showDetalhes.bind(this) });\r\n    return result;\r\n  }\r\n\r\n  public async showDetalhes(elemento: any) {\r\n    let entrega = await this.pEEDao.getById(elemento.entrega.plano_entrega_entrega.id, ['entrega', 'objetivos.objetivo']);\r\n    this.go.navigate({ route: ['gestao', 'plano-entrega', 'entrega', elemento.entrega.plano_entrega_entrega.id, \"detalhes\"] }, {\r\n      metadata: {\r\n        plano_entrega: elemento.entrega.plano_entrega_entrega.plano_entrega,\r\n        planejamento_id: elemento.entrega.plano_entrega_entrega.plano_entrega.planejamento_id,\r\n        cadeia_valor_id: elemento.entrega.plano_entrega_entrega.plano_entrega.cadeia_valor_id,\r\n        unidade_id: elemento.entrega.plano_entrega_entrega.plano_entrega.unidade_id,\r\n        entrega: entrega\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /***************************************************************************************\r\n  * Ocorrências \r\n  ****************************************************************************************/\r\n  public async addOcorrencia() {\r\n    /*return new PlanoTrabalhoConsolidacaoOcorrencia({\r\n      plano_trabalho_consolidacao_id: this.entity!.id\r\n    });*/\r\n    this.go.navigate({ route: ['gestao', 'ocorrencia', 'new'] }, {\r\n      metadata: {\r\n        consolidacao: this.entity,\r\n        planoTrabalho: this.planoTrabalho\r\n      },\r\n      modalClose: (modalResult) => {\r\n        if (modalResult) this.refresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  /*public async loadOcorrencia(form: FormGroup, row: any) {\r\n    this.formAtividade.patchValue({\r\n      data_inicio: row.data_inicio,\r\n      data_fim: row.data_fim,\r\n      descricao: row.descricao\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async saveOcorrencia(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formOcorrencia.markAllAsTouched();\r\n    if (this.formOcorrencia!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_inicio = form.controls.data_inicio.value;\r\n      row.data_fim = form.controls.data_fim.value;\r\n      row.descricao = form.controls.descricao.value;\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.consolidacaoOcorrenciaDao?.save(row);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }*/\r\n\r\n  public async editOcorrencia(row: any) {\r\n    this.go.navigate({ route: [\"gestao\", \"ocorrencia\", row.id, \"edit\"] }, {\r\n      modalClose: (modalResult) => {\r\n        if (modalResult) this.refresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  public async removeOcorrencia(row: any) {\r\n    if (await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\")) {\r\n      this.submitting = true;\r\n      try {\r\n        let ocorrencia = row as Ocorrencia;\r\n        await this.ocorrenciaDao?.delete(ocorrencia);\r\n        this.itemsOcorrencias.splice(this.itemsOcorrencias.findIndex(x => x.id == ocorrencia.id), 1);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public ocorrenciaDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    //result.push(Object.assign({}, this.OPTION_INFORMACOES, { onClick: (doc: Ocorrencia) => this.go.navigate({route: [\"gestao\", \"ocorrencia\", doc.id, \"consult\"]}) }));\r\n    if (!this.disabled && this.auth.hasPermissionTo(\"MOD_OCOR_EDT\")) result.push(Object.assign({}, this.OPTION_ALTERAR, { onClick: this.editOcorrencia.bind(this) }));\r\n    if (!this.disabled && this.auth.hasPermissionTo(\"MOD_OCOR_EXCL\")) result.push(Object.assign({}, this.OPTION_EXCLUIR, { onClick: this.removeOcorrencia.bind(this) }));\r\n    return result;\r\n  }\r\n\r\n  /***************************************************************************************\r\n  * Comparecimento \r\n  ****************************************************************************************/\r\n  public async addComparecimento() {\r\n    return new Comparecimento({\r\n      unidade_id: this.unidade?.id,\r\n      unidade: this.unidade,\r\n      plano_trabalho_consolidacao_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadComparecimento(form: FormGroup, row: any) {\r\n    this.formComparecimento.patchValue({\r\n      data_comparecimento: row.data_comparecimento,\r\n      unidade_id: row.unidade_id,\r\n      detalhamento: row.detalhamento\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeComparecimento(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let comparecimento = row as Comparecimento;\r\n        await this.comparecimentoDao?.delete(comparecimento);\r\n        this.itemsComparecimentos.splice(this.itemsComparecimentos.findIndex(x => x.id == comparecimento.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveComparecimento(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formComparecimento.markAllAsTouched();\r\n    if (this.formComparecimento!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_comparecimento = form.controls.data_comparecimento.value;\r\n      row.detalhamento = form.controls.detalhamento.value;\r\n      row.plano_trabalho_consolidacao_id = this.entity!.id;\r\n      row.unidade_id = form.controls.unidade_id.value;\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.comparecimentoDao?.save(row);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public comparecimentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }\r\n\r\n  /***************************************************************************************\r\n  * Afastamentos\r\n  ****************************************************************************************/\r\n  public async addAfastamento() {\r\n    this.go.navigate({ route: ['gestao', 'afastamento', 'new'] }, {\r\n      metadata: { consolidacao: this.entity },\r\n      filterSnapshot: undefined,\r\n      querySnapshot: undefined,\r\n      modalClose: (modalResult) => {\r\n        if (modalResult) this.refresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  public afastamentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    result.push(Object.assign({}, this.OPTION_INFORMACOES, { onClick: (doc: Afastamento) => this.go.navigate({ route: [\"cadastros\", \"afastamento\", doc.id, \"consult\"] }) }));\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }\r\n\r\n  public async showPlanejamento(planejamento_id: string) {\r\n    this.go.navigate({ route: ['gestao', 'planejamento', planejamento_id, 'consult'] }, { modal: true })\r\n  }\r\n\r\n  public async showCadeiaValor(cadeia_valor_id_id: string) {\r\n    this.go.navigate({ route: ['gestao', 'cadeia-valor', cadeia_valor_id_id, 'consult'] }, { modal: true })\r\n  }\r\n}\r\n","<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Atividades')\" [icon]=\"entityService.getIcon('Atividade')\">\r\n  <grid [items]=\"itemsEntregas\" #gridEntregas [minHeight]=\"0\" [hasEdit]=\"false\">\r\n    <columns>\r\n      <column type=\"expand\" [width]=\"50\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidação')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\r\n        <ng-template let-row=\"row\" #columnConsolidacao>\r\n          <span *ngIf=\"row.atividades?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row.atividades?.length}}</span>\r\n        </ng-template>\r\n        <ng-template let-row=\"row\" #columnExpandedConsolidacao>\r\n          <grid [items]=\"row.atividades\" [minHeight]=\"0\" #gridAtividades [form]=\"formAtividade\" [hasAdd]=\"!disabled\" [hasDelete]=\"false\" [hasEdit]=\"false\" [add]=\"addAtividade.bind(this, row.entrega)\" [load]=\"loadAtividade.bind(this)\" [remove]=\"removeAtividade.bind(this, row.atividades)\" [save]=\"saveAtividade.bind(this)\" editable>\r\n            <columns>\r\n              <column type=\"expand\" [width]=\"50\" icon=\"bi bi-boxes\" [align]=\"'center'\" [hint]=\"'Tarefas da ' + lex.translate('atividade')\" [template]=\"columnTarefas\" [expandTemplate]=\"columnExpandedTarefas\">\r\n                <ng-template let-row=\"row\" #columnTarefas>\r\n                  <span *ngIf=\"row.tarefas?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row.tarefas?.length}}</span>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #columnExpandedTarefas>\r\n                  <atividade-list-tarefa persist #listTarefas [atividade]=\"row\" [consolidacao]=\"false\"></atividade-list-tarefa>\r\n                </ng-template>\r\n              </column>\r\n              <column [title]=\"'#ID/Trabalho executado'\" [width]=\"400\" [template]=\"columnAtividadeDescricao\" [editTemplate]=\"editAtividadeDescricao\" [columnEditTemplate]=\"atividadeOptionsMetadata.disabled ? undefined : editAtividadeDescricao\" [edit]=\"atividadeOptionsMetadata.disabled ? undefined : onColumnAtividadeDescricaoEdit.bind(this)\" [save]=\"atividadeOptionsMetadata.disabled ? undefined : onColumnAtividadeDescricaoSave.bind(this)\"><!--[title]=\"'#ID/' + lex.translate('Tipo de Atividade') + '\\nDescrição'\"-->\r\n                <ng-template let-row=\"row\" #columnAtividadeDescricao>\r\n                  <span class=\"text-nowrap d-block\">\r\n                    <badge icon=\"bi bi-hash\" [label]=\"row.numero\" color=\"light\" [data]=\"row.numero\" [click]=\"atividadeService.onIdClick.bind(this)\"></badge>\r\n                    <!--badge *ngIf=\"row.tipo_atividade\" [icon]=\"entityService.getIcon('TipoAtividade')\" [label]=\"row.tipo_atividade.nome\" color=\"light\"></badge-->\r\n                  </span>\r\n                  <span class=\"micro-text fw-ligh atividade-descricao\">{{row.descricao}}</span>\r\n                  <reaction [entity]=\"row\" origem=\"ATIVIDADE\"></reaction>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editAtividadeDescricao>\r\n                  <input-textarea label=\"Descrição\" [size]=\"12\" [rows]=\"2\" controlName=\"descricao\" [control]=\"formAtividade!.controls.descricao\" required></input-textarea>\r\n                  <!--input-search [label]=\"lex.translate('Tipo de atividade')\" #tipoAtividade [size]=\"12\" [emptyValue]=\"null\" controlName=\"tipo_atividade_id\" [control]=\"formAtividade!.controls.tipo_atividade_id\" [dao]=\"tipoAtividadeDao\" (select)=\"onTipoAtividadeSelect($event)\" [labelInfo]=\"lex.translate('Tipo de atividade') + ' utilizado para classificar a atividade'\" [required]=\"!auth.hasPermissionTo('MOD_ATV_TIPO_ATV_VAZIO') ? 'true' : undefined\"></input-search-->\r\n                </ng-template>\r\n              </column>\r\n              <column [title]=\"'Início e Conclusão'\" [width]=\"250\" [template]=\"columnTempos\" [editTemplate]=\"editTempos\">\r\n                <ng-template let-row=\"row\" #columnTempos>\r\n                  <div class=\"one-per-line\">\r\n                    <badge *ngFor=\"let tempo of tempoAtividade(row)\" [badge]=\"tempo\"></badge>\r\n                  </div>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editTempos>\r\n                  <!--input-datetime icon=\"bi bi-file-earmark-plus\" [label]=\"lex.translate('Data de distribuição')\" controlName=\"data_distribuicao\" [control]=\"formAtividade!.controls.data_distribuicao\" (change)=\"onDataDistribuicaoChange($event)\" labelInfo=\"Data de inclusão/distribuição/lançamento\"></input-datetime-->\r\n                  <!--input-datetime icon=\"bi bi-calendar-check\" [label]=\"lex.translate('Prazo de entrega')\" controlName=\"data_estipulada_entrega\" [control]=\"formAtividade!.controls.data_estipulada_entrega\" (change)=\"onDataEstipuladaEntregaChange($event)\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime-->\r\n                  <separator title=\"Início e Conclusão\" collapse [collapsed]=\"true\">\r\n                    <input-datetime icon=\"bi bi-play-circle\" label=\"Início\" controlName=\"data_inicio\" [control]=\"formAtividade!.controls.data_inicio\" labelInfo=\"Data de inicialização da atividade\"></input-datetime>\r\n                    <input-datetime icon=\"bi bi-check-circle\" label=\"Conclusão\" controlName=\"data_entrega\" [control]=\"formAtividade!.controls.data_entrega\" labelInfo=\"Data da conclusão da atividade\"></input-datetime>\r\n                  </separator>\r\n                </ng-template>\r\n              </column>\r\n              <column [title]=\"'Progresso\\nEtiquetas/Checklist'\" [width]=\"200\" [template]=\"columnProgressoEtiquetasChecklist\" [editTemplate]=\"columnProgressoEtiquetasChecklist\" [columnEditTemplate]=\"atividadeOptionsMetadata.disabled ? undefined : columnProgressoEtiquetasChecklistEdit\" [edit]=\"atividadeOptionsMetadata.disabled ? undefined : onColumnProgressoEtiquetasChecklistEdit.bind(this)\" [save]=\"atividadeOptionsMetadata.disabled ? undefined : onColumnProgressoEtiquetasChecklistSave.bind(this)\">\r\n                <ng-template let-row=\"row\" #columnProgressoEtiquetasChecklist>\r\n                  <progress-bar [value]=\"row.progresso\" color=\"success\"></progress-bar>\r\n                  <badge *ngFor=\"let etiqueta of row.etiquetas\" [lookup]=\"etiqueta\"></badge>\r\n                  <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                  <table *ngIf=\"row.checklist?.length\">\r\n                    <tr *ngFor=\"let check of row.checklist\">\r\n                      <td><i *ngIf=\"check.checked\" class=\"bi bi-check-circle\"></i></td>\r\n                      <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                    </tr>\r\n                  </table>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #columnProgressoEtiquetasChecklistEdit>\r\n                  <input-number [size]=\"12\" [decimals]=\"2\" label=\"Progresso\" sufix=\"%\" icon=\"bi bi-clock\" controlName=\"progresso\" [control]=\"formEdit.controls.progresso\" labelInfo=\"Progresso de execução (% Concluído)\"></input-number>\r\n                  <input-multiselect controlName=\"etiquetas\" [size]=\"12\" [control]=\"formEdit.controls.etiquetas\" [addItemHandle]=\"addItemHandleEtiquetas.bind(this)\">\r\n                    <input-select [size]=\"12\" label=\"Etiqueta\" #etiqueta controlName=\"etiqueta\" nullable itemNull=\"- Selecione -\" detailsButton detailsButtonIcon=\"bi bi-tools\" (details)=\"onEtiquetaConfigClick()\" [control]=\"formEdit.controls.etiqueta\" [items]=\"etiquetas\"></input-select>\r\n                  </input-multiselect>\r\n                  <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                  <table *ngIf=\"row.checklist?.length\">\r\n                    <tr *ngFor=\"let check of checklist; let i = index\">\r\n                      <td><input-switch [size]=\"12\" scale=\"small\" [source]=\"checklist\" [path]=\"i + '.checked'\"></input-switch></td>\r\n                      <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                    </tr>\r\n                  </table>\r\n                </ng-template>\r\n              </column>\r\n              <column [title]=\"'nº Processo/Status\\nComentários'\" [width]=\"300\" [template]=\"columnNumero\" [editTemplate]=\"columnNumero\">\r\n                <ng-template let-row=\"row\" #columnNumero>\r\n                  <documentos-badge [documento]=\"row.documento_requisicao\"></documentos-badge>\r\n                  <span class=\"d-block\">\r\n                    <badge *ngFor=\"let status of atividadeService.getStatus(row, entity)\" [data]=\"status\" [color]=\"status.color\" [icon]=\"status.icon\" [label]=\"status.label\"></badge>\r\n                  </span>\r\n                  <comentarios-widget *ngIf=\"!gridAtividades.editing\" [entity]=\"row\" [selectable]=\"false\" origem=\"ATIVIDADE\" [grid]=\"gridAtividades\"></comentarios-widget>\r\n                </ng-template>\r\n              </column>\r\n              <column type=\"options\" [metadata]=\"atividadeOptionsMetadata\" [dynamicOptions]=\"atividadeService.dynamicOptions.bind(this)\" [dynamicButtons]=\"atividadeService.dynamicButtons.bind(this)\"></column>\r\n            </columns>\r\n          </grid>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"Origem\" [template]=\"columnOrigem\" [width]=\"200\">\r\n        <ng-template let-row=\"row\" #columnOrigem>\r\n          <badge [label]=\"row.badge.titulo\" [color]=\"row.badge.cor\"></badge>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"Entrega\" [template]=\"columnEntrega\">\r\n        <ng-template let-row=\"row\" #columnEntrega>\r\n          {{row.badge.descricao || row.entrega.descricao}}<br>\r\n          <small>{{row.entrega.descricao}}</small>\r\n          <reaction [entity]=\"row.entrega\" origem=\"PLANO_TRABALHO_ENTREGA\"></reaction>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"% CHD Planejado\" [template]=\"columnForcaTrabalho\" [width]=\"100\" [titleHint]=\"'% Carga Horária Disponível Planejada'\">\r\n        <ng-template let-row=\"row\" #columnForcaTrabalho>\r\n          <badge color=\"light\" [label]=\"row.entrega.forca_trabalho + '%'\"></badge>\r\n        </ng-template>\r\n      </column>\r\n      <column [title]=\"'Meta'\" [template]=\"columnMetaRealizado\" [width]=\"100\">\r\n        <ng-template let-row=\"row\" #columnMetaRealizado>\r\n          <badge icon=\"bi bi-graph-up-arrow\" [textValue]=\"row.meta\" color=\"light\" hint=\"Meta\"></badge><br>\r\n          <badge icon=\"bi bi-check-lg\" [textValue]=\"row.metaRealizado\" color=\"light\" hint=\"Realizado\"></badge>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"Progresso\" [template]=\"columnProgresso\" [width]=\"150\">\r\n        <ng-template let-row=\"row\" #columnProgresso>\r\n          <progress-bar [value]=\"row.progresso_realizado\" color=\"success\"></progress-bar>\r\n        </ng-template>\r\n      </column>\r\n      <!--column [title]=\"'Objetivos/Processos'\" [template]=\"columnObjProc\" [editTemplate]=\"columnObjProc\" [width]=\"200\">\r\n        <ng-template let-row=\"row\" #columnObjProc>\r\n          <separator [title]=\"lex.translate('Objetivos')\" *ngIf=\"row.objetivos?.length\" collapse [collapsed]=\"true\">\r\n            <div *ngFor=\"let pObjetivo of row.objetivos\" class=\"objetivo d-flex align-items-center\">\r\n              <button class=\"btn btn-sm btn-outline-info me-2\" (click)=\"showPlanejamento(pObjetivo.objetivo.planejamento_id)\"><i class=\"bi bi-eye\"></i></button>\r\n              <small>{{pObjetivo.objetivo.nome}}</small>\r\n            </div>\r\n          </separator>\r\n          <separator [title]=\"lex.translate('Processos')\" *ngIf=\"row.processos?.length\" collapse [collapsed]=\"true\">\r\n            <div *ngFor=\"let pProcesso of row.processos\" class=\"objetivo d-flex align-items-center\">\r\n              <button class=\"btn btn-sm btn-outline-info me-2\" (click)=\"showCadeiaValor(pProcesso.processo.cadeia_valor_id)\"><i class=\"bi bi-eye\"></i></button>\r\n              <small>{{pProcesso.processo.nome}}</small>\r\n            </div>\r\n          </separator>\r\n        </ng-template>\r\n      </column-->\r\n      <column type=\"options\" [dynamicButtons]=\"dynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n  </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Ocorrências')\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\">\r\n  <grid [items]=\"itemsOcorrencias\" [minHeight]=\"0\" #gridOcorrencia [hasDelete]=\"false\" [hasEdit]=\"false\" [hasAdd]=\"!disabled\" [add]=\"addOcorrencia.bind(this)\" editable>\r\n    <!-- [load]=\"loadOcorrencia.bind(this)\" [remove]=\"removeOcorrencia.bind(this)\" [save]=\"saveOcorrencia.bind(this)\" -->\r\n    <columns>\r\n      <column title=\"Início\" [width]=\"300\" type=\"datetime\" field=\"data_inicio\"></column>\r\n      <column title=\"Fim\" [width]=\"300\" type=\"datetime\" field=\"data_fim\"></column>\r\n      <column title=\"Descrição\" type=\"textarea\" field=\"descricao\"></column>\r\n      <column type=\"options\" [dynamicButtons]=\"ocorrenciaDynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n  </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Afastamentos')\" [icon]=\"entityService.getIcon('Afastamento')\">\r\n  <grid [items]=\"itemsAfastamentos\" [minHeight]=\"0\" #gridAfastamento [hasEdit]=\"false\" [hasDelete]=\"false\" [hasAdd]=\"!disabled\" [add]=\"addAfastamento.bind(this)\" editable>\r\n    <columns>\r\n      <column title=\"Início\" [width]=\"300\" type=\"datetime\" field=\"data_inicio\"></column>\r\n      <column title=\"Fim\" [width]=\"300\" type=\"datetime\" field=\"data_fim\"></column>\r\n      <column title=\"Motivo/Observação\" [template]=\"columnMotivoObservacao\">\r\n        <ng-template let-row=\"row\" #columnMotivoObservacao>\r\n          <badge [color]=\"row.tipo_motivo_afastamento.cor\" [icon]=\"row.tipo_motivo_afastamento.icone\" [label]=\"row.tipo_motivo_afastamento.nome\"></badge>\r\n          {{row.observacao}}\r\n        </ng-template>\r\n      </column>\r\n      <column type=\"options\" [dynamicButtons]=\"afastamentoDynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n  </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Comparecimentos')\" [icon]=\"entityService.getIcon('Comparecimento')\">\r\n  <grid [items]=\"itemsComparecimentos\" [minHeight]=\"0\" #gridComparecimento [form]=\"formComparecimento\" [hasDelete]=\"!disabled\" [hasAdd]=\"!disabled\" [hasEdit]=\"!disabled\" [add]=\"addComparecimento.bind(this)\" [load]=\"loadComparecimento.bind(this)\" [remove]=\"removeComparecimento.bind(this)\" [save]=\"saveComparecimento.bind(this)\" editable>\r\n    <columns>\r\n      <column title=\"Data\" [width]=\"300\" type=\"date\" field=\"data_comparecimento\"></column>\r\n      <column title=\"Unidade\" [template]=\"columnUnidade\" [editTemplate]=\"editUnidade\">\r\n        <ng-template let-row=\"row\" #columnUnidade>\r\n          <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"row.unidade.sigla\" [textValue]=\"row.unidade.nome\" color=\"success\"></badge>\r\n        </ng-template>\r\n        <ng-template let-row=\"row\" #editUnidade>\r\n          <input-search label icon [size]=\"6\" #unidade controlName=\"unidade_id\" [dao]=\"unidadeDao\"></input-search>\r\n        </ng-template>\r\n      </column>\r\n      <column title=\"Detalhamento\" type=\"text\" field=\"detalhamento\"></column>\r\n      <column type=\"options\" [dynamicButtons]=\"comparecimentoDynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n  </grid>\r\n</separator>","import { ChangeDetectorRef, Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { ConsolidacaoDados, PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoStatus } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { PlanoTrabalhoConsolidacaoFormComponent } from '../plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { Avaliacao } from 'src/app/models/avaliacao.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { AvaliacaoDaoService } from 'src/app/dao/avaliacao-dao.service';\r\nimport { UnidadeService } from 'src/app/services/unidade.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-consolidacao-list',\r\n  templateUrl: './plano-trabalho-consolidacao-list.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-list.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoListComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n\r\n  public get items(): PlanoTrabalhoConsolidacao[] {\r\n    return this.entity?.consolidacoes || [];\r\n  }\r\n\r\n  public dao?: PlanoTrabalhoConsolidacaoDaoService;\r\n  public avaliacaoDao: AvaliacaoDaoService;\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public unidadeService: UnidadeService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    /* Inicializações */\r\n    this.dao = injector.get<PlanoTrabalhoConsolidacaoDaoService>(PlanoTrabalhoConsolidacaoDaoService);\r\n    this.avaliacaoDao = injector.get<AvaliacaoDaoService>(AvaliacaoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.unidadeService = injector.get<UnidadeService>(UnidadeService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.title = this.lex.translate(\"Consolidações\");\r\n    this.code = \"MOD_PTR_CSLD\";\r\n    this.modalWidth = 1200;\r\n    this.form = this.fh.FormBuilder({\r\n      'data_inicio': {default: new Date()},\r\n      'data_fim': {default: new Date()}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      if (this.urlParams?.has(\"usuarioId\") && this.urlParams?.has(\"planoTrabalhoId\")) {\r\n        let dados = await this.planoTrabalhoDao!.getByUsuario(this.urlParams!.get(\"usuarioId\")!, true, this.urlParams!.get(\"planoTrabalhoId\")!);\r\n        if (dados.planos.length == 1) this.entity = dados.planos[0];\r\n      }\r\n      let agora = (new Date()).getTime();\r\n      this.items.forEach(v => {\r\n        if(!v.plano_trabalho) v.plano_trabalho = this.entity;\r\n        if(this.util.asTimestamp(v.data_inicio) <= agora && agora <= this.util.asTimestamp(v.data_fim)) this.grid!.expand(v.id);\r\n      });\r\n    })();\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    // TODO: Validar data\r\n    return result;\r\n  }\r\n\r\n  public async addConsolidacao() {\r\n    return new PlanoTrabalhoConsolidacao({\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadConsolidacao(form: FormGroup, row: any) {\r\n    this.form!.patchValue({\r\n      data_inicio: row.data_inicio,\r\n      data_fim: row.data_fim\r\n    });    \r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeConsolidacao(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let consolidacao = row as PlanoTrabalhoConsolidacao;\r\n        await this.dao?.delete(consolidacao);\r\n        this.items.splice(this.items.findIndex(x => x.id == consolidacao.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveConsolidacao(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.form!.markAllAsTouched();\r\n    if (this.form!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_inicio = form.controls.data_inicio.value;\r\n      row.data_fim = form.controls.data_fim.value;\r\n      result = await this.dao?.save(row);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public refreshConsolidacao(consolidacao: PlanoTrabalhoConsolidacao, dados?: ConsolidacaoDados) {\r\n    if(dados && consolidacao._metadata?.planoTrabalhoConsolidacaoFormComponent) {\r\n      let consolidacaoForm = consolidacao._metadata?.planoTrabalhoConsolidacaoFormComponent as PlanoTrabalhoConsolidacaoFormComponent;\r\n      consolidacaoForm.loadConsolidacao(dados);\r\n    } else {\r\n      this.grid!.refreshExpanded(consolidacao.id);\r\n    }\r\n    this.grid!.refreshRows();\r\n  }\r\n\r\n  public async concluir(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.submitting = true;\r\n    try {\r\n      let response = await this.dao!.concluir(consolidacao.id);\r\n      consolidacao.status = response.status as PlanoTrabalhoConsolidacaoStatus;\r\n      this.refreshConsolidacao(consolidacao, response);\r\n    } catch (error: any) {\r\n      this.error(error.message || error);\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  public async cancelarConclusao(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.submitting = true;\r\n    try {\r\n      let response = await this.dao!.cancelarConclusao(consolidacao.id);\r\n      consolidacao.status = response.status as PlanoTrabalhoConsolidacaoStatus;\r\n      this.refreshConsolidacao(consolidacao, response);\r\n    } catch (error: any) {\r\n      this.error(error.message || error);\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  public anterior(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return this.entity!.consolidacoes.reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_inicio) < this.util.asTimestamp(consolidacao.data_inicio) && (!a || this.util.asTimestamp(a.data_inicio) < this.util.asTimestamp(v.data_inicio)) ? v : a, undefined);\r\n  }\r\n\r\n  public proximo(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return this.entity!.consolidacoes.reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_fim) > this.util.asTimestamp(consolidacao.data_fim) && (!a || this.util.asTimestamp(a.data_fim) > this.util.asTimestamp(v.data_fim)) ? v : a, undefined);\r\n  }\r\n\r\n  public isDisabled(row?: PlanoTrabalhoConsolidacao): boolean {\r\n    return (row && row.status != \"INCLUIDO\") || this.entity?.status != \"ATIVO\";\r\n  }\r\n\r\n  public dynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let consolidacao: PlanoTrabalhoConsolidacao = row as PlanoTrabalhoConsolidacao;\r\n    const usuarioId = consolidacao!.plano_trabalho?.usuario_id;\r\n    const unidadeId = this.entity!.unidade_id;\r\n    const anterior = this.anterior(row as PlanoTrabalhoConsolidacao);\r\n    const proximo = this.proximo(row as PlanoTrabalhoConsolidacao);\r\n    const isAvaliador = this.auth.hasPermissionTo(\"MOD_PTR_CSLD_AVAL\") && (this.unidadeService.isGestorUnidade(unidadeId) || this.auth.isIntegrante('AVALIADOR_PLANO_TRABALHO', unidadeId));\r\n    const isUsuarioDoPlano = this.auth.usuario!.id == usuarioId;\r\n    const BOTAO_CONCLUIR = { hint: \"Concluir\", icon: \"bi bi-check-circle\", color: \"btn-outline-success\", onClick: this.concluir.bind(this) };\r\n    const BOTAO_CANCELAR_CONCLUSAO = { hint: \"Cancelar conclusão\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: this.cancelarConclusao.bind(this) };\r\n    const BOTAO_AVALIAR = { hint: \"Avaliar\", icon: \"bi bi-star\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, this.entity!.programa!, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_REAVALIAR = { hint: \"Reavaliar\", icon: \"bi bi-star-half\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, this.entity!.programa!, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_FAZER_RECURSO = { hint: \"Fazer recurso\", id: \"RECORRIDO\", icon: \"bi bi-journal-medical\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.fazerRecurso(row, this.entity!.programa!, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_CANCELAR_AVALIACAO = { hint: \"Cancelar avaliação\", id: \"INCLUIDO\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.cancelarAvaliacao(row, this, this.refreshConsolidacao.bind(this)) };\r\n    /* (RN_CSLD_11) Não pode concluir a consolidação antes que a anterior não esteja concluida, e não pode retornar status da consolidação se a posterior estiver a frente (em status); */\r\n    const canConcluir = !anterior || [\"CONCLUIDO\", \"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarConclusao = !proximo || [\"INCLUIDO\"].includes(proximo!.status);\r\n    const canAvaliar = !anterior || [\"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarAvaliacao = !proximo || [\"INCLUIDO\", \"CONCLUIDO\"].includes(proximo!.status);\r\n    if(!this.isDisabled()) {\r\n      if(consolidacao.status == \"INCLUIDO\" && canConcluir && (isUsuarioDoPlano || this.auth.hasPermissionTo(\"MOD_PTR_CSLD_CONCL\"))) {\r\n        result.push(BOTAO_CONCLUIR);\r\n      }\r\n      if(consolidacao.status == \"CONCLUIDO\" && canCancelarConclusao && this.planoTrabalhoService.diasParaConcluirConsolidacao(row, this.entity!.programa) >= 0 && (isUsuarioDoPlano || this.auth.hasPermissionTo(\"MOD_PTR_CSLD_DES_CONCL\"))) {\r\n        result.push(BOTAO_CANCELAR_CONCLUSAO);\r\n      }\r\n      if(consolidacao.status == \"CONCLUIDO\" && canAvaliar && isAvaliador) {\r\n        result.push(BOTAO_AVALIAR);\r\n      }\r\n      if(consolidacao.status == \"AVALIADO\" && consolidacao!.avaliacao) {\r\n        /* (RN_AVL_2) [PT] O usuário do plano de trabalho que possuir o acesso MOD_PTR_CSLD_REC_AVAL poderá recorrer da nota atribuida dentro do limites estabelecido pelo programa; */\r\n        if(isUsuarioDoPlano && this.auth.hasPermissionTo('MOD_PTR_CSLD_REC_AVAL') && consolidacao!.avaliacao?.data_avaliacao && \r\n          (!this.entity!.programa!.dias_tolerancia_recurso_avaliacao || \r\n          (this.util.daystamp(consolidacao!.avaliacao!.data_avaliacao) + this.entity!.programa!.dias_tolerancia_recurso_avaliacao > this.util.daystamp(this.auth.hora)))) {\r\n          result.push(BOTAO_FAZER_RECURSO);\r\n        }\r\n        /* (RN_AVL_3) [PT] Após o recurso será realizado nova avaliação, podendo essa ser novamente recorrida dentro do mesmo prazo estabelecido no programa; */\r\n        /* (RN_AVL_6) [PT] Qualquer usuário capaz de avaliar tambem terá a capacidade de cancelar a avaliação; */\r\n        if(canAvaliar && isAvaliador) {\r\n          result.push(BOTAO_REAVALIAR);\r\n          if(canCancelarAvaliacao) result.push(BOTAO_CANCELAR_AVALIACAO);\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n}\r\n","<grid [items]=\"items\" #grid [form]=\"form!\" [hasDelete]=\"true\" [minHeight]=\"0\"\r\n    [add]=\"addConsolidacao.bind(this)\" [hasAdd]=\"!isDisabled()\" [hasEdit]=\"false\" [hasDelete]=\"false\" editable>\r\n    <h5 class=\"my-2\">{{lex.translate(\"Consolidações\")}} <i class=\"bi bi-arrow-down\"></i></h5>\r\n    <columns>\r\n        <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidação')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\r\n            <ng-template let-row=\"row\" #columnConsolidacao>\r\n                <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnExpandedConsolidacao>\r\n                <plano-trabalho-consolidacao-form #consolidacao [disabled]=\"isDisabled(row)\" [entity]=\"row\" [planoTrabalho]=\"entity\" [cdRef]=\"cdRef\"></plano-trabalho-consolidacao-form>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Data início\" [template]=\"columnDataInicio\">\r\n            <ng-template let-row=\"row\" #columnDataInicio>\r\n                {{util.getDateFormatted(row.data_inicio)}}\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Data fim\" [template]=\"columnDataFim\">\r\n            <ng-template let-row=\"row\" #columnDataFim>\r\n                {{util.getDateFormatted(row.data_fim)}}\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Estatísticas/Avaliações\" [template]=\"columnEstatisticas\" [width]=\"300\">\r\n            <ng-template let-row=\"row\" #columnEstatisticas>\r\n                <avaliar-nota-badge *ngIf=\"row.avaliacao\" [align]=\"'left'\" [tipoAvaliacao]=\"row.avaliacao.tipo_avaliacao || this.entity!.programa!.tipo_avaliacao_plano_trabalho\" [nota]=\"row.avaliacao.nota\"></avaliar-nota-badge>\r\n                <separator *ngIf=\"row.avaliacao?.recurso?.length\" title=\"Recurso da avaliação\" collapse [collapsed]=\"false\">\r\n                    <small>{{row.avaliacao.recurso}}</small>\r\n                </separator>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Status\" [template]=\"columnStatus\">\r\n            <ng-template let-row=\"row\" #columnStatus>\r\n                <div class=\"one-per-line\">\r\n                    <badge [color]=\"lookup.getColor(lookup.CONSOLIDACAO_STATUS, row.status)\" [icon]=\"lookup.getIcon(lookup.CONSOLIDACAO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.CONSOLIDACAO_STATUS, row.status)\"></badge>\r\n                    <badge *ngIf=\"row.avaliacao?.recurso?.length\" icon=\"bi bi-journal-medical\" color=\"warning\" label=\"Recorrido\"></badge>\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\" [dynamicButtons]=\"dynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n</grid>","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageBase } from 'src/app/modules/base/page-base';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\n@Component({\r\n  selector: 'app-plano-trabalho-consolidacao',\r\n  templateUrl: './plano-trabalho-consolidacao.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoComponent extends PageFrameBase {\r\n  @ViewChild(TabsComponent, { static: false }) public tabs?: TabsComponent;\r\n  @ViewChild(InputSearchComponent, { static: false }) public unidadeSelecionada?: InputSearchComponent;\r\n\r\n  public usuarios: Usuario[] = [];\r\n  public unidade?: Unidade;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public loadingUnidade: boolean = false;\r\n  public filter: FormGroup;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      arquivados: { default: false }\r\n    });\r\n    this.filter = this.fh.FormBuilder({\r\n      unidade_id: { default: false }\r\n    });\r\n\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    this.tabs!.active = this.queryParams?.tab || \"USUARIO\";\r\n    this.tabs!.title = this.lex.translate('Consolidações');\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.unidade = this.auth.unidadeGestor();\r\n    this.filter!.controls.unidade_id.setValue(this.unidade?.id || this.auth.lotacao || null);\r\n    if(this.unidade) {\r\n      await this.loadUsuarios(this.unidade.id);\r\n    }\r\n  }\r\n  \r\n  public async loadUsuarios(unidade: any) {\r\n    this.usuarios = [];\r\n    this.loadingUnidade = true;\r\n    this.loading = true;\r\n    this.cdRef.detectChanges();\r\n    try {\r\n      this.usuarios = await this.unidadeDao.lotados(unidade);\r\n    } finally {\r\n      this.loading = false;\r\n      this.loadingUnidade = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let form: any = filter.value;\r\n    this.loadUsuarios(form.unidade_id);\r\n  }\r\n}\r\n","<tabs right #tabs [title]=\"isModal ? '' : title\">\r\n    <tab key=\"UNIDADE\" *ngIf=\"unidade\" [icon]=\"entityService.getIcon('Unidade')\" [label]=\"lex.translate('Unidade')\" [template]=\"tabUnidade\">\r\n        <ng-template #tabUnidade>\r\n            <filter [form]=\"filter\" [filter]=\"filterWhere\" [collapsed]=\"false\">\r\n                <div class=\"row\">\r\n                    <input-search [size]=\"12\" #unidadeSelecionada label=\"Selecione a unidade\" [control]=\"filter!.controls.unidade_id\" controlName=\"unidade_id\" [dao]=\"unidadeDao\"></input-search>\r\n                </div>\r\n            </filter>\r\n            <div class=\"p-3 mb-3 bg-body-secondary\">\r\n                <h5>{{lex.translate(\"Unidade\")}} selecionada: {{unidadeSelecionada?.selectedItem?.entity.sigla}} - {{unidadeSelecionada?.selectedItem?.entity.nome}}</h5>\r\n                <h4>{{lex.translate(\"Participantes\")}} <i class=\"bi bi-arrow-down\"></i></h4>\r\n            </div>\r\n            <div *ngIf=\"loading\" class=\"d-flex justify-content-center my-2\">\r\n                <div class=\"spinner-border\" role=\"status\">\r\n                    <span class=\"visually-hidden\"></span>\r\n                </div>\r\n            </div>\r\n            <collapse-card *ngFor=\"let usuario of usuarios\" [data]=\"usuario\" [titleTemplate]=\"usuarioCardTitle\" [template]=\"usuarioCard\">\r\n                <ng-template let-data=\"data\" #usuarioCardTitle>\r\n                    <div class=\"d-flex\">\r\n                        <div class=\"ms-3\">\r\n                            <profile-picture [url]=\"data.url_foto\" [size]=\"40\" [hint]=\"data.nome\"></profile-picture>\r\n                        </div>\r\n                        <div class=\"flex-fill ms-3\">\r\n                            <strong>{{data.nome || \"\"}}</strong><br>\r\n                            <small>{{data.apelido || \"\"}}</small>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template let-data=\"data\" #usuarioCard>\r\n                    <plano-trabalho-list-accordeon [usuarioId]=\"data.id\"></plano-trabalho-list-accordeon>\r\n                </ng-template>\r\n            </collapse-card>\r\n        </ng-template>\r\n    </tab>\r\n    <tab key=\"USUARIO\" [icon]=\"entityService.getIcon('Usuario')\" [label]=\"lex.translate('Usuário')\" [template]=\"tabUsuario\">\r\n        <ng-template #tabUsuario>\r\n            <div class=\"d-flex justify-content-between\">\r\n                <h5 class=\"mt-2\">{{lex.translate(\"Planos de Trabalho\")}} <i class=\"bi bi-arrow-down\"></i></h5>\r\n                <separator [control]=\"form!.controls.arquivados\" [title]=\"'Mostrar ' + lex.translate('Planos de trabalho') + ' arquivados?'\"></separator>\r\n            </div>            \r\n            <plano-trabalho-list-accordeon [usuarioId]=\"auth.usuario!.id\" [arquivados]=\"form!.controls.arquivados.value\"></plano-trabalho-list-accordeon>\r\n        </ng-template>\r\n    </tab>\r\n</tabs>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoDocumentoDaoService } from 'src/app/dao/tipo-documento-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { SeiKeys } from 'src/app/listeners/procedimento-trabalhar/procedimento-trabalhar.component';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoDocumento } from 'src/app/models/tipo-documento.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NavigateResult } from 'src/app/services/navigate.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form-termo',\r\n  templateUrl: './plano-trabalho-form-termo.component.html',\r\n  styleUrls: ['./plano-trabalho-form-termo.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormTermoComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('tipoDocumento', { static: false }) public tipoDocumento?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n\r\n  public unidadeDao: UnidadeDaoService;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public tipoDocumentoDao: TipoDocumentoDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public processo?: SeiKeys;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\"unidade\", \"usuario\", \"programa.template_tcr\", \"tipo_modalidade\", \"documento\", \"documentos\", \"atividades.atividade\"];\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.tipoDocumentoDao = injector.get<TipoDocumentoDaoService>(TipoDocumentoDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: {default: \"\"},\r\n      tempo_total: {default: \"\"},\r\n      tempo_proporcional: {default: \"\"},\r\n      data_inicio: {default: new Date()},\r\n      data_fim: {default: new Date()},\r\n      programa_id: {default: \"\"},\r\n      usuario_id: {default: \"\"},\r\n      unidade_id: {default: \"\"},\r\n      documento_id: {default: \"\"},\r\n      documentos: {default: []},\r\n      tipo_documento_id: {default: \"\"},\r\n      numero_processo: {default: \"\"},\r\n      vinculadas: {default: true},\r\n      tipo_modalidade_id: {default: \"\"},\r\n      forma_contagem_carga_horaria: {default: \"DIA\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == \"tipo_documento_id\" && !control?.value?.length && this.form?.controls?.numero_processo?.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    if(!this.tipoDocumento?.selectedEntity && form?.controls.tipo_documento_id.value?.length) {\r\n      return \"Aguarde o carregamento do tipo de documento\";\r\n    }\r\n    return undefined;\r\n  } \r\n\r\n  public onVinculadasChange(event: Event) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    await Promise.all ([\r\n      this.unidade!.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.usuario!.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.programa!.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade!.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    if(this.processo) {\r\n      formValue.id_processo = this.processo.id_processo;\r\n      formValue.numero_processo = this.processo.numero_processo;\r\n    }\r\n    formValue.data_inicio = this.auth.hora;\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getById(this.metadata.plano_trabalho.id, this.join))!;\r\n    this.processo = this.metadata?.processo;\r\n    await this.loadData(this.entity!, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<NavigateResult | undefined> {\r\n    return new Promise<NavigateResult | undefined>((resolve, reject) => {\r\n      //if(this.processo) {\r\n      resolve(new NavigateResult(Object.assign(this.form!.value, {\r\n        /* TODO Gerar documento do TCR\r\n        termo: this.termo!.conteudo,\r\n        atividades_termo_adesao: this.termo!.atividades.map((x: { nome: string; }) => this.util.removeAcentos(x.nome.toLowerCase())),*/\r\n        codigo_tipo_documento: (this.tipoDocumento?.selectedEntity as TipoDocumento)?.codigo\r\n      })));\r\n      /*} else {\r\n        const documento = Object.assign(new Documento(), {\r\n          especie: \"TERMO_ADESAO\",\r\n          conteudo: this.termo!.conteudo,\r\n          plano_id: this.entity!.id,\r\n          status: \"GERADO\"\r\n        });\r\n        this.documentoDao.save(documento).then(doc => resolve(undefined)).catch(reject);\r\n      }*/\r\n    });\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria?.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"TCR\") + ' ' + this.lex.translate(\"do Plano de Trabalho\") + ': ' + (entity?.usuario?.nome || \"\");\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [title]=\"isModal ? '' : title\" initialFocus=\"programa_id\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <separator [title]=\"lex.translate('Plano de trabalho')\" collapse [collapsed]=\"false\">\r\n        <div class=\"row\">\r\n            <input-search #programa [size]=\"6\" disabled controlName=\"programa_id\" [dao]=\"programaDao\"></input-search>\r\n            <input-search #usuario [size]=\"6\" disabled  controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-search #unidade [size]=\"5\" disabled controlName=\"unidade_id\" [dao]=\"unidadeDao\" ></input-search>\r\n            <input-search #tipoModalidade disabled [size]=\"3\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\"></input-search>\r\n            <input-text numbers disabled [size]=\"2\" label=\"% prod.\" icon=\"bi bi-hourglass-split\" controlName=\"ganho_produtividade\" [control]=\"form!.controls.ganho_produtividade\" [labelInfo]=\"'Percentual de ganho de produtividade (Será descontado do ' + lex.translate('tempo pactuado')+')'\" [attr.maxlength]=250></input-text>\r\n            <input-display [size]=\"2\" label=\"H. Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-display>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-datetime [size]=\"3\" disabled label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Início da Vigência do Programa\"></input-datetime>\r\n            <input-datetime [size]=\"3\" disabled label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim\" [control]=\"form!.controls.data_fim\" labelInfo=\"Final da Vigência do Programa\"></input-datetime>\r\n            <input-workload [size]=\"3\" disabled [unit]=\"formaContagemCargaHoraria\" label=\"C. Horária\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" [labelInfo]=\"'Carga horária' + lex.translate('do usuário')\"></input-workload>\r\n            <input-display [size]=\"3\" label=\"H. Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas úteis de trabalho no período de vigência considerando a carga horária, feriados e fins de semana\"></input-display>\r\n        </div>\r\n    </separator>\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"3\" disabled label=\"Data e hora\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Data de cadastro do termo\"></input-datetime>\r\n        <input-text [label]=\"'Número ' + lex.translate('Processo')\" [size]=\"3\" controlName=\"numero_processo\" [control]=\"form!.controls.numero_processo\" disabled labelInfo=\"Número do processo, com a formatação de origem\" [attr.maxlength]=250></input-text>\r\n        <input-search [size]=\"4\" #tipoDocumento [disabled]=\"!form!.controls.numero_processo.value?.length ? 'true' : undefined\" controlName=\"tipo_documento_id\" [dao]=\"tipoDocumentoDao\" required></input-search>\r\n        <input-switch label=\"Vinculadas\" [disabled]=\"entity?.atividades?.length ? 'true' : undefined\" [size]=\"2\" controlName=\"vinculadas\" [control]=\"form!.controls.vinculadas\" (change)=\"onVinculadasChange($event)\" labelInfo=\"Se inclui as atividades das unidades vinculadas a unidade do plano\"></input-switch>\r\n    </div>\r\n    <!--separator title=\"Pré-visualização do termo de adesão\" collapse [collapsed]=\"true\">\r\n        <plano-termo-adesao #termo [plano]=\"entity\" [vinculadas]=\"!!form?.controls?.vinculadas?.value\"></plano-termo-adesao>\r\n    </separator/-->\r\n</editable-form>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Documento } from 'src/app/models/documento.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { TipoModalidade } from 'src/app/models/tipo-modalidade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { DocumentoService } from 'src/app/modules/uteis/documentos/documento.service';\r\nimport { DocumentosComponent } from 'src/app/modules/uteis/documentos/documentos.component';\r\nimport { CalendarService, Efemerides } from 'src/app/services/calendar.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { TemplateDataset, TemplateService } from 'src/app/modules/uteis/templates/template.service';\r\nimport { Template } from 'src/app/models/template.model';\r\nimport { UtilService } from 'src/app/services/util.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form',\r\n  templateUrl: './plano-trabalho-form.component.html',\r\n  styleUrls: ['./plano-trabalho-form.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('gridDocumentos', { static: false }) public gridDocumentos?: GridComponent;\r\n  @ViewChild('tabs', { static: false }) public tabs?: TabsComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('atividade', { static: false }) public atividade?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @ViewChild('documentos', { static: false }) public documentos?: DocumentosComponent;\r\n\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public documentoService: DocumentoService;\r\n  public templateService: TemplateService;\r\n  public utilService: UtilService;\r\n  public allPages: ListenerAllPagesService;\r\n  public calendar: CalendarService;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public horasTotais?: Efemerides;\r\n  public horasParciais?: Efemerides;\r\n  public planoDataset: TemplateDataset[];\r\n  public joinPrograma: string[];\r\n  public entregas: LookupItem[] = [];\r\n  public planoTrabalho?: PlanoTrabalho;\r\n  public datasource: any;\r\n  public template?: Template;\r\n  public editingId?: string;\r\n  public gestoresUnidadeExecutora: string[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\r\n      \"unidade.entidade\", \r\n      \"entregas.entrega\", \r\n      \"entregas.plano_entrega_entrega:id,plano_entrega_id\", \r\n      \"usuario\",\r\n      \"programa.template_tcr\", \r\n      \"tipo_modalidade\", \r\n      \"documento\", \r\n      \"documentos.assinaturas.usuario:id,nome,apelido\", \r\n      \"entregas.plano_entrega_entrega.entrega\",\r\n      \"entregas.plano_entrega_entrega.plano_entrega.unidade:id,nome,sigla\",\r\n      'entregas.reacoes.usuario:id,nome,apelido'\r\n    ];\r\n    this.joinPrograma = [\"template_tcr\"];\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.documentoService = injector.get<DocumentoService>(DocumentoService);\r\n    this.templateService = injector.get<TemplateService>(TemplateService);\r\n    this.utilService = injector.get<UtilService>(UtilService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.modalWidth = 1300;\r\n    this.planoDataset = this.dao!.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: { default: \"\" },\r\n      tempo_total: { default: \"\" },\r\n      tempo_proporcional: { default: \"\" },\r\n      data_inicio: { default: new Date() },\r\n      data_fim: { default: new Date() },\r\n      usuario_id: { default: \"\" },\r\n      unidade_id: { default: \"\" },\r\n      programa_id: { default: \"\" },\r\n      documento_id: { default: null },\r\n      documentos: { default: [] },\r\n      atividades: { default: [] },\r\n      entregas: { default: [] },\r\n      tipo_modalidade_id: { default: \"\" },\r\n      forma_contagem_carga_horaria: { default: \"DIA\" },\r\n      editar_texto_complementar_unidade: { default: false },\r\n      editar_texto_complementar_usuario: { default: false },\r\n      unidade_texto_complementar: { default: \"\" },\r\n      usuario_texto_complementar: { default: \"\" },\r\n      criterios_avaliacao: { default: [] },\r\n      criterio_avaliacao: { default: \"\" }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public ngOnInit() {\r\n    super.ngOnInit();\r\n    const segment = (this.url ? this.url[this.url.length - 1]?.path : \"\") || \"\";\r\n    this.action = [\"termos\"].includes(segment) ? segment : this.action;\r\n    this.buscaGestoresUnidadeExecutora(this.entity?.unidade ?? null);\r\n  }\r\n\r\n  public atualizarTcr() {\r\n    this.entity = this.loadEntity();\r\n    let textoUsuario = this.form!.controls.usuario_texto_complementar.value;\r\n    let textoUnidade = this.form!.controls.unidade_texto_complementar.value;\r\n    let documento = this.planoTrabalhoService.atualizarTcr(this.planoTrabalho!, this.entity!, textoUsuario, textoUnidade);\r\n    this.form?.controls.documento_id.setValue(documento?.id);\r\n    this.form?.controls.documentos.setValue(this.entity!.documentos);\r\n    this.datasource = documento?.datasource || {};\r\n    this.template = this.entity.programa?.template_tcr;\r\n    this.editingId = [\"ADD\", \"EDIT\"].includes(documento?._status || \"\") ? documento!.id : undefined;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public get isTermos(): boolean {\r\n    return this.action == \"termos\";\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['unidade_id', 'programa_id', 'usuario_id', 'tipo_modalidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if (['carga_horaria'].indexOf(controlName) >= 0 && !control.value) {\r\n      result = \"Valor não pode ser zero.\";\r\n    } else if (['data_inicio', 'data_fim'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Inválido\";\r\n    } else if (controlName == 'data_fim' && this.util.isDataValid(this.form?.controls.data_inicio.value) && this.util.asTimestamp(control.value) <= this.util.asTimestamp(this.form!.controls.data_inicio.value)) {\r\n      result = \"Menor que o início\";\r\n    } else if (this.programa && controlName == 'data_inicio' && (control.value as Date).getTime() < this.programa!.selectedEntity?.data_inicio.getTime()) {\r\n      result = \"Menor que programa\";\r\n    } else if (this.programa && controlName == 'data_fim' && (control.value as Date).getTime() > this.programa!.selectedEntity?.data_fim.getTime()) {\r\n      result = \"Maior que programa\";\r\n    } /*else if (controlName == 'criterios_avaliacao' && control.value.length < 1) {\r\n      result = \"Insira ao menos um critério de avaliação\";\r\n    }*/\r\n    return result;\r\n  }\r\n\r\n  public formValidation = async (form?: FormGroup) => {\r\n    let result = \"\";\r\n    return result;\r\n    // TODO:\r\n    // Validar se as entregas pertencem ao plano de entregas da unidade\r\n  };\r\n\r\n  public onUnidadeSelect(selected: SelectItem) {\r\n    let unidade = this.unidade?.selectedEntity as Unidade;\r\n    this.entity!.unidade = unidade;\r\n    this.entity!.unidade_id = unidade.id;\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\");\r\n    this.form!.controls.unidade_texto_complementar.setValue(unidade?.texto_complementar_plano || \"\");\r\n    this.unidadeDao.getById(unidade.id, ['gestor:id,usuario_id','gestores_substitutos:id,usuario_id','gestores_delegados:id,usuario_id']).then( unidade => {\r\n      this.buscaGestoresUnidadeExecutora(unidade);\r\n    });\r\n  }\r\n\r\n  public onProgramaSelect(selected: SelectItem) {\r\n    let programa = selected.entity as Programa;\r\n    this.entity!.programa_id = programa.id;\r\n    this.entity!.programa = programa;\r\n    this.form?.controls.criterios_avaliacao.setValue(programa.plano_trabalho_criterios_avaliacao || []);\r\n    this.form?.controls.data_inicio.updateValueAndValidity();\r\n    this.form?.controls.data_fim.updateValueAndValidity();\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onUsuarioSelect(selected: SelectItem) {\r\n    this.form!.controls.usuario_texto_complementar.setValue((selected.entity as Usuario)?.texto_complementar_plano || \"\");\r\n    if(!this.form?.controls.unidade_id.value) {\r\n      selected.entity.unidades.every(async (unidade: any) => {\r\n        if (selected.entity.lotacao.unidade_id == unidade.id) {\r\n          if(!this.form?.controls.programa_id.value) {\r\n            let niveis = unidade.path.split(\"/\").reverse();\r\n            let hoje = new Date();\r\n            let preenchido = 0;\r\n            let indice = 0;\r\n            while (preenchido == 0) {\r\n              await this.programaDao.query({where : [[\"unidade_id\",\"==\",niveis[indice],],[\"data_inicio\",\"<\", hoje],[\"data_fim\",\">\", hoje]]}).asPromise().then( programa => {\r\n                if (programa.length > 0 && preenchido == 0) {\r\n                  preenchido = 1;\r\n                  this.preencheUnidade(unidade);\r\n                  this.preenchePrograma(programa[0]!);\r\n                }\r\n              })\r\n              indice += 1;\r\n            }\r\n          }\r\n        return false;\r\n        } else return true;\r\n      })\r\n    }\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public preencheUnidade(unidade: Unidade) {\r\n    this.form?.controls.unidade_id.setValue(unidade.id);\r\n    this.entity!.unidade = unidade;\r\n    this.entity!.unidade_id = unidade.id;\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\");\r\n    this.form!.controls.unidade_texto_complementar.setValue(unidade?.texto_complementar_plano || \"\");\r\n    this.unidadeDao.getById(unidade.id, ['gestor:id,usuario_id','gestores_substitutos:id,usuario_id','gestores_delegados:id,usuario_id']).then( unidade => {\r\n      this.buscaGestoresUnidadeExecutora(unidade);\r\n    });\r\n  }\r\n\r\n  public preenchePrograma(programa: Programa) {\r\n    this.form?.controls.programa_id.setValue(programa.id);\r\n    this.entity!.programa_id = programa.id;\r\n    this.entity!.programa = programa;\r\n    this.form?.controls.criterios_avaliacao.setValue(programa.plano_trabalho_criterios_avaliacao || []);\r\n    this.form?.controls.data_inicio.updateValueAndValidity();\r\n    this.form?.controls.data_fim.updateValueAndValidity();\r\n  }\r\n\r\n  public onDataInicioChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onDataFimChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onCargaHorariaChenge(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public calculaTempos() {\r\n    const inicio = this.form?.controls.data_inicio.value;\r\n    const fim = this.form?.controls.data_fim.value;\r\n    const carga = this.form?.controls.carga_horaria.value || 8;\r\n    const usuario = this.usuario?.selectedEntity as Usuario;\r\n    const unidade = this.unidade?.selectedEntity as Unidade;\r\n    if (usuario && unidade && this.util.isDataValid(inicio) && this.util.isDataValid(fim) && this.util.asTimestamp(inicio) < this.util.asTimestamp(fim)) {\r\n      this.calendar.loadFeriadosCadastrados(unidade.id).then((feriados) => {\r\n        this.horasTotais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, unidade, \"ENTREGA\", [], []);\r\n        this.horasParciais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, unidade, \"ENTREGA\", [], usuario.afastamentos);\r\n        this.form?.controls.tempo_total.setValue(this.horasTotais.tempoUtil);\r\n        this.form?.controls.tempo_proporcional.setValue(this.horasParciais.tempoUtil);\r\n      });\r\n    }\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    this.planoTrabalho = new PlanoTrabalho(entity);\r\n    await Promise.all([\r\n      this.calendar.loadFeriadosCadastrados(entity.unidade_id),\r\n      this.usuario?.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.unidade?.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.programa?.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade?.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    let formValue = Object.assign({}, form.value);\r\n    form.patchValue(this.util.fillForm(formValue, entity));\r\n    /*let documento = entity.documentos.find(x => x.id == entity.documento_id);\r\n    if(documento) this._datasource = documento.datasource;*/\r\n    this.calculaTempos();\r\n    this.atualizarTcr();\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    if (this.isTermos) {\r\n      this.entity = (await this.dao!.getById(this.urlParams!.get(\"id\")!, this.join))!;\r\n    } else {\r\n      this.entity = new PlanoTrabalho();\r\n      this.entity.carga_horaria = this.auth.entidade?.carga_horaria_padrao || 8;\r\n      this.entity.forma_contagem_carga_horaria = this.auth.entidade?.forma_contagem_carga_horaria || \"DIA\";\r\n      this.entity.unidade_id = this.auth.unidade!.id;\r\n      this.buscaGestoresUnidadeExecutora(this.auth.unidade!);\r\n      if(!this.gestoresUnidadeExecutora.includes(this.auth.unidade!.id)) {\r\n        this.entity.usuario_id = this.auth.usuario!.id;\r\n      }\r\n    }\r\n    await this.loadData(this.entity, this.form!);\r\n    let nowDate = new Date(); \r\n    nowDate.setHours(0,0,0,0)\r\n    this.form?.controls.data_inicio.setValue(nowDate);\r\n    this.form?.controls.data_fim.setValue(\"\");\r\n  }\r\n\r\n  /* Cria um objeto Plano baseado nos dados do formulário */\r\n  public loadEntity(): PlanoTrabalho {\r\n    let plano: PlanoTrabalho = this.util.fill(new PlanoTrabalho(), this.entity!);\r\n    plano = this.util.fillForm(plano, this.form!.value);\r\n    plano.usuario = (this.usuario!.selectedEntity || this.entity?.usuario) as Usuario;\r\n    plano.unidade = (this.unidade?.selectedEntity || this.entity?.unidade) as Unidade;\r\n    plano.programa = (this.programa?.selectedEntity || this.entity?.programa) as Programa;\r\n    plano.tipo_modalidade = (this.tipoModalidade!.selectedEntity || this.entity?.tipo_modalidade) as TipoModalidade;\r\n    return plano;\r\n  }\r\n\r\n  public async saveData(form: IIndexable): Promise<PlanoTrabalho | boolean> {\r\n    //let plano = this.loadEntity();\r\n    /* Atualiza o documento */\r\n    this.atualizarTcr();\r\n    /* Confirma dados do documento */\r\n    this.documentos?.saveData();\r\n    this.entity!.documentos = this.entity!.documentos.filter((documento: Documento) => {\r\n      return [\"ADD\", \"EDIT\", \"DELETE\"].includes(documento._status || \"\");\r\n    });\r\n    /* Salva separadamente as informações do plano */\r\n    this.submitting = true;\r\n    try {\r\n      let requests: Promise<any>[] = [this.dao!.save(this.entity!, this.join)];\r\n      if (this.form!.controls.editar_texto_complementar_unidade.value) requests.push(this.unidadeDao.update(this.entity!.unidade_id, { texto_complementar_plano: this.form!.controls.unidade_texto_complementar.value }));\r\n      if (this.form!.controls.editar_texto_complementar_usuario.value) requests.push(this.usuarioDao.update(this.entity!.usuario_id, { texto_complementar_plano: this.form!.controls.usuario_texto_complementar.value }));\r\n      let responses = await Promise.all(requests);\r\n      this.entity = responses[0] as PlanoTrabalho;\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public onTabSelect(tab: LookupItem) {\r\n    if (tab.key == \"TERMO\") this.atualizarTcr();\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"Plano de Trabalho\") + ': ' + (entity?.usuario?.apelido || \"\");\r\n  }\r\n\r\n  public documentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let documento: Documento = row as Documento;\r\n\r\n    if (this.isTermos && this.planoTrabalhoService.needSign(this.entity, documento)) {\r\n      result.push({ hint: \"Assinar\", icon: \"bi bi-pen\", onClick: this.signDocumento.bind(this) });\r\n    }\r\n    result.push({ hint: \"Preview\", icon: \"bi bi-zoom-in\", onClick: ((documento: Documento) => { this.dialog.html({ title: \"Termo de adesão\", modalWidth: 1000 }, documento.conteudo || \"\"); }).bind(this) });\r\n\r\n    return result;\r\n  }\r\n\r\n  //Não apagar\r\n  /*public addItemHandleCriteriosAvaliacao(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form!.controls.criterio_avaliacao.value;\r\n    const key = this.util.textHash(value);\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.criterios_avaliacao.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form!.controls.criterio_avaliacao.value\r\n      };\r\n      this.form!.controls.criterio_avaliacao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };*/\r\n\r\n  public async signDocumento(documento: Documento) {\r\n    await this.documentoService.sign([documento]);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public onFormaContagemCargaHorariaChange(unit: UnitWorkload) {\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unit == \"day\" ? \"DIA\" : unit == \"week\" ? \"SEMANA\" : \"MES\");\r\n  }\r\n\r\n  public isVigente(documento: Documento): boolean {\r\n    return this.form!.controls.documento_id.value == documento.id;\r\n  }\r\n\r\n  public buscaGestoresUnidadeExecutora(unidade: Unidade | null){\r\n    if (unidade) [unidade.gestor?.usuario_id, ...unidade.gestores_substitutos?.map(x => x.usuario_id), ...unidade!.gestores_delegados?.map(x => x.usuario_id)].forEach(gestor => {\r\n      if (gestor) this.gestoresUnidadeExecutora.push(gestor);\r\n    });\r\n    return this.gestoresUnidadeExecutora;\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [noButtons]=\"isTermos ? 'true' : undefined\" initialFocus=\"plano_entrega_id\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n  <tabs #tabs display right [hidden]=\"isTermos ? 'true' : undefined\" [title]=\"!isModal ? title : ''\" [select]=\"onTabSelect.bind(this)\">\r\n    <tab key=\"DADOS\" label=\"Dados\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n          <div class=\"row\">\r\n            <!-- (RI_PTR_1) No formulário de inclusão/edição de um plano de trabalho, o input-search de unidade, programa e usuario devem ficar desabilitados nas edições e habilitado apenas nas inclusões; -->\r\n            <input-search #usuario [size]=\"4\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"usuario_id\" [dao]=\"usuarioDao\" [join]=\"['afastamentos','lotacao','unidades','participacoes_programas']\" (select)=\"onUsuarioSelect($event)\"></input-search>\r\n            <input-search #unidade [size]=\"4\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"unidade_id\" [dao]=\"unidadeDao\" (select)=\"onUnidadeSelect($event)\"></input-search>\r\n            <input-search #programa [size]=\"4\" [label]=\"lex.translate('Programa de gestão')\" icon=\"bi bi-file-bar-graph\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"programa_id\" [join]=\"joinPrograma\" [dao]=\"programaDao\" (select)=\"onProgramaSelect($event)\"></input-search>\r\n          </div>\r\n          <div class=\"row\">\r\n            <input-datetime [size]=\"3\" label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" (change)=\"onDataInicioChange($event)\" [labelInfo]=\"'Início da Vigência do '+ lex.translate('Plano de trabalho')\" required></input-datetime>\r\n            <input-datetime [size]=\"3\" label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim\" [control]=\"form!.controls.data_fim\" (change)=\"onDataFimChange($event)\" [labelInfo]=\"'Final da Vigência do ' +lex.translate('Plano de trabalho')\" required></input-datetime>\r\n            <input-search #tipoModalidade [size]=\"6\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\" required></input-search>\r\n          </div>\r\n          <ng-container *ngIf=\"tipoModalidade!.selectedEntity?.plano_trabalho_calcula_horas\">\r\n            <div class=\"row\">\r\n              <input-workload [size]=\"4\" [unit]=\"formaContagemCargaHoraria\" label=\"Carga Horária\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" [unitChange]=\"onFormaContagemCargaHorariaChange.bind(this)\" (change)=\"onCargaHorariaChenge($event)\" labelInfo=\"Carga horária do usuário (Máx.: diária 24 horas; semana 24*5=240 horas; mensal 24*20=480 horas)\" required></input-workload>\r\n              <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas úteis de trabalho no período de vigência considerando a carga horária, feriados e fins de semana\"></input-timer>\r\n              <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-timer>\r\n            </div>\r\n            <separator *ngIf=\"horasTotais\" title=\"Cálculos das horas totais\" collapse>\r\n              <calendar-efemerides [efemerides]=\"horasTotais\" [partial]=\"false\"></calendar-efemerides>\r\n            </separator>\r\n            <separator *ngIf=\"horasParciais\" title=\"Cálculos das horas parciais\" collapse>\r\n              <calendar-efemerides [efemerides]=\"horasParciais\"></calendar-efemerides>\r\n            </separator>\r\n          </ng-container>\r\n        </div>\r\n        <!--div class=\"col-md-2\">\r\n          <input-multiselect label=\"Critérios de avaliação\" noBox [maxListHeight]=\"100\" controlName=\"criterios_avaliacao\" [size]=\"12\" [addItemHandle]=\"addItemHandleCriteriosAvaliacao.bind(this)\" required>\r\n            <input-text [size]=\"12\" controlName=\"criterio_avaliacao\" [attr.maxlength]=250></input-text>\r\n          </input-multiselect>\r\n        </div-->\r\n      </div>\r\n      <separator [title]=\"lex.translate('Entregas') + lex.translate(' do plano de trabalho')\">\r\n        <top-alert *ngIf=\"!form!.controls.programa_id.value?.length || !form!.controls.unidade_id.value?.length\" type=\"warning\" [message]=\"'Antes de incluir ' + lex.translate('entrega') + ' neste ' + lex.translate('Plano de Trabalho') + ', é necessário selecionar ' + lex.translate('a Unidade') + ' e ' + ' o ' +  lex.translate('Programa') + '!'\"></top-alert>\r\n        <div *ngIf=\"form!.controls.programa_id.value?.length && form!.controls.unidade_id.value?.length\">\r\n          <plano-trabalho-list-entrega noPersist [disabled]=\"formDisabled\" [entity]=\"entity\"></plano-trabalho-list-entrega>\r\n        </div>\r\n      </separator>\r\n    </tab>\r\n    <tab *ngIf=\"checkFilled(['usuario_id'])\" key=\"MENSAGENS\" [label]=\"lex.translate('Texto Complementar')\">\r\n      <separator [title]=\"'Texto complementar da '+ lex.translate('unidade')\">\r\n        <input-switch controlName=\"editar_texto_complementar_unidade\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar '+ lex.translate('na unidade')\"></input-switch>\r\n        <input-editor controlName=\"unidade_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_unidade.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n      </separator>\r\n      <separator title=\"Texto complementar do usuario\">\r\n        <input-switch controlName=\"editar_texto_complementar_usuario\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar '+ lex.translate('do usuário')\"></input-switch>\r\n        <input-editor controlName=\"usuario_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_usuario.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n      </separator>\r\n    </tab>\r\n    <tab *ngIf=\"checkFilled(['usuario_id', 'programa_id', 'tipo_modalidade_id'])\" key=\"TERMO\" [label]=\"lex.translate('Termo')\">\r\n      <!--top-alert *ngIf=\"!isTermos\" type=\"warning\" message=\"Para [INSERIR] ou [ASSINAR] termos escolha opção Termos de adesão na tela de listagem, ou utilize o Sei\"></top-alert/-->\r\n      <div clss=\"row\">\r\n        <documentos #documentos [entity]=\"entity\" [disabled]=\"formDisabled\" noPersist [cdRef]=\"cdRef\" [needSign]=\"planoTrabalhoService.needSign\" [extraTags]=\"planoTrabalhoService.extraTags\" especie=\"TCR\" [editingId]=\"formDisabled ? undefined : editingId\" [datasource]=\"datasource\" [template]=\"programa?.selectedEntity?.template_tcr\"></documentos>\r\n      </div>\r\n    </tab>\r\n  </tabs>\r\n</editable-form>","import { Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { AccordionComponent } from 'src/app/components/accordion/accordion.component';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-accordeon',\r\n  templateUrl: './plano-trabalho-list-accordeon.component.html',\r\n  styleUrls: ['./plano-trabalho-list-accordeon.component.scss']\r\n})\r\nexport class PlanoTrabalhoListAccordeonComponent extends PageFrameBase {\r\n  @ViewChild('accordion', { static: false }) public accordion?: AccordionComponent;\r\n  @Input() usuarioId?: string;\r\n  @Input() set arquivados(value: boolean) {\r\n    if(this._arquivados != value) {\r\n      this._arquivados = value;\r\n      if(this.viewInit) this.loadData(this.entity!, this.form);\r\n    }\r\n  }\r\n  get arquivados(): boolean {\r\n    return this._arquivados;\r\n  }\r\n\r\n  public selectedIndex: number = -1;\r\n  public dao?: PlanoTrabalhoDaoService;\r\n  public planos: PlanoTrabalho[] = [];\r\n\r\n  private _arquivados: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.accordion!.loading = true;\r\n    try {\r\n      let dados = await this.dao!.getByUsuario(this.usuarioId!, this.arquivados);\r\n      let agora = (new Date()).getTime();\r\n      let self = this;\r\n      this.planos = dados.planos;\r\n      for(var i = 0; i < this.planos.length; i++) {\r\n        if(this.util.asTimestamp(this.planos[i].data_inicio) <= agora && agora <= this.util.asTimestamp(this.planos[i].data_fim) && [\"ATIVO\", \"CONCLUIDO\"].includes(this.planos[i].status)) {\r\n          this.selectedIndex = i;\r\n        }\r\n      }\r\n    } finally {\r\n      this.accordion!.loading = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public getPlanoBadges(plano: PlanoTrabalho): BadgeButton[] {\r\n    let result: BadgeButton[] = [];\r\n    let concluidos = plano.consolidacoes.filter(x => x.status == \"CONCLUIDO\");\r\n    let avaliados = plano.consolidacoes.filter(x => x.status == \"AVALIADO\");\r\n    if(concluidos.length) {\r\n      const concluido = this.lookup.getLookup(this.lookup.CONSOLIDACAO_STATUS, \"CONCLUIDO\");\r\n      result.push({\r\n        icon: concluido?.icon,\r\n        label: concluido?.value,\r\n        color: concluido?.color,\r\n        textValue: concluidos.length.toString()\r\n      });\r\n    }\r\n    if(avaliados.length) {\r\n      const avaliado = this.lookup.getLookup(this.lookup.CONSOLIDACAO_STATUS, \"AVALIADO\");\r\n      result.push({\r\n        icon: avaliado?.icon,\r\n        label: avaliado?.value,\r\n        color: avaliado?.color,\r\n        textValue: avaliados.length.toString()\r\n      });\r\n    }\r\n    if(JSON.stringify(plano._metadata?.badges) != this.JSON.stringify(result)) {\r\n      plano._metadata = Object.assign(plano._metadata || {}, { badges: result });\r\n    }\r\n    return plano._metadata.badges;\r\n  }\r\n\r\n}\r\n","<div class=\"p-3 bg-body-secondary mb-3\">    \r\n    <div class=\"row w-100\">\r\n        <div class=\"col-md-1\">#ID</div>\r\n        <div class=\"col-md-4\">{{lex.translate('Participante')}}/{{lex.translate('Unidade')}}/{{lex.translate('Programa')}}/{{lex.translate('Tipo de modalidade')}}</div>\r\n        <div class=\"col-md-3\">Vigência</div>\r\n        <div class=\"col-md-2\"></div>\r\n        <div class=\"col-md-2\">Status</div>\r\n    </div>\r\n</div>\r\n\r\n<accordion #accordion [items]=\"planos\" [selectedIndex]=\"selectedIndex\" [titleTemplate]=\"planoTrabalhoSectionTitle\" [template]=\"planoTrabalhoSection\">\r\n    <ng-template let-item=\"item\" #planoTrabalhoSectionTitle>\r\n        <div class=\"row w-100\">\r\n            <div class=\"col-md-1\">{{'#' + item.numero}}</div>\r\n            <div class=\"col-md-4\">\r\n                <badge [icon]=\"entityService.getIcon('Usuario')\" [label]=\"item.usuario?.nome\" color=\"light\" [hint]=\"lex.translate('Participante') + ': ' + item.usuario?.nome\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"item.unidade?.sigla\" color=\"light\" [hint]=\"lex.translate('Unidade') + ': ' + item.unidade?.nome\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('Programa')\" [label]=\"item.programa?.nome\" color=\"light\" [hint]=\"lex.translate('Programa')\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('TipoModalidade')\" [label]=\"item.tipo_modalidade?.nome\" color=\"light\" [hint]=\"lex.translate('Tipo de modalidade')\"></badge>\r\n            </div>\r\n            <div class=\"col-md-3\">\r\n                {{dao!.getDateFormatted(item.data_inicio)+\" até \"+dao!.getDateFormatted(item.data_fim)}}\r\n            </div>\r\n            <div class=\"col-md-2\">\r\n                <badge *ngFor=\"let badge of getPlanoBadges(item)\" [badge]=\"badge\"></badge>\r\n            </div>\r\n            <div class=\"col-md-2\">\r\n                <badge [label]=\"lookup.getValue(lookup.PLANO_TRABALHO_STATUS, item.status)\" [icon]=\"lookup.getIcon(lookup.PLANO_TRABALHO_STATUS, item.status)\" [color]=\"lookup.getColor(lookup.PLANO_TRABALHO_STATUS, item.status)\"></badge>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template let-item=\"item\" #planoTrabalhoSection>\r\n        <plano-trabalho-consolidacao-list [entity]=\"item\"></plano-trabalho-consolidacao-list>\r\n    </ng-template>\r\n</accordion>\r\n","import { ChangeDetectorRef, Component, EventEmitter, Injector, Input, Output, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { PlanoTrabalhoEntregaDaoService } from 'src/app/dao/plano-trabalho-entrega-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { PlanoEntregaDaoService } from 'src/app/dao/plano-entrega-dao.service';\r\nimport { PlanoEntregaEntregaDaoService } from 'src/app/dao/plano-entrega-entrega-dao.service';\r\nimport { PlanoEntrega } from 'src/app/models/plano-entrega.model';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { PlanoEntregaEntrega } from 'src/app/models/plano-entrega-entrega.model';\r\nimport { UnidadeService } from 'src/app/services/unidade.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-entrega',\r\n  templateUrl: './plano-trabalho-list-entrega.component.html',\r\n  styleUrls: ['./plano-trabalho-list-entrega.component.scss']\r\n})\r\nexport class PlanoTrabalhoListEntregaComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('origem', { static: false }) public origem?: InputSelectComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) { if (this._disabled != value) this._disabled = value; } get disabled(): boolean { return this._disabled; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() cdRef: ChangeDetectorRef;\r\n  @Input() set planoTrabalhoEditavel(value: boolean ) { if (this._planoTrabalhoEditavel != value) this._planoTrabalhoEditavel = value} get planoTrabalhoEditavel(): boolean {return this._planoTrabalhoEditavel }\r\n  @Output() atualizaPlanoTrabalhoEvent = new EventEmitter<string>();\r\n\r\n  public get items(): PlanoTrabalhoEntrega[] {\r\n    if (!this.gridControl.value) this.gridControl.setValue(new PlanoTrabalho());\r\n    if (!this.gridControl.value.entregas) this.gridControl.value.entregas = [];\r\n    return this.gridControl.value.entregas;\r\n  }\r\n  public options: ToolbarButton[] = [];\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoEntregaDao?: PlanoEntregaDaoService;\r\n  public peeDao?: PlanoEntregaEntregaDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public unidadeService: UnidadeService;\r\n  public totalForcaTrabalho: number = 0;\r\n  public entregas: LookupItem[] = [];\r\n\r\n  private _disabled: boolean = false;\r\n  private _planoTrabalhoEditavel: boolean = true;\r\n  //quando adiciona um novo e edita o mesmo, salva 2x no banco\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoEntregaDaoService>(PlanoTrabalhoEntregaDaoService);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.planoEntregaDao = injector.get<PlanoEntregaDaoService>(PlanoEntregaDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.peeDao = injector.get<PlanoEntregaEntregaDaoService>(PlanoEntregaEntregaDaoService);\r\n    this.unidadeService = injector.get<UnidadeService>(UnidadeService);\r\n    this.join = [\"entrega\", \"plano_entrega_entrega.entrega\", \"plano_entrega_entrega.plano_entrega:id,unidade_id\", \"plano_entrega_entrega.plano_entrega.unidade:id,sigla\"];\r\n    this.form = this.fh.FormBuilder({\r\n      origem: { default: null },\r\n      orgao: { default: null },\r\n      descricao: { default: \"\" },\r\n      forca_trabalho: { default: 1 },\r\n      plano_trabalho_id: { default: null },\r\n      plano_entrega_id: { default: null },\r\n      plano_entrega_entrega_id: { default: null }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a validação dos campos do formulário, por ocasião da edição ou inserção de itens.\r\n   * @param control \r\n   * @param controlName \r\n   * @returns \r\n   */\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && control.value == 1) return result;\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && !control.value) result = \"Obrigatório!\";\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) result = \"Obrigatório!\";\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && (control.value < 1 || control.value > 100)) result = \"Deve estar entre 1 e 100\";\r\n    if (['plano_entrega_entrega_id'].indexOf(controlName) >= 0) {\r\n      if (['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(this.form?.controls.origem.value) && !control.value) result = \"Obrigatório!\";\r\n      if (!!this.entity?.entregas?.filter(e => !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).find(x => x.plano_entrega_entrega_id == control.value)) result = \"Esta entrega está em duplicidade!\"; /* (*2) */\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validateEntregas(): string | undefined {\r\n    let planoInterval = { start: this.entity!.data_inicio, end: this.entity!.data_fim };\r\n    for (let entrega of this.items) {\r\n      let entregaPlano = entrega.plano_entrega_entrega;\r\n      // valida as datas das entregas quando vinculado a uma entrega do plano de entrega\r\n      if (entregaPlano) {\r\n        let entregaDataFim = entregaPlano!.data_fim ? entregaPlano!.data_fim : (entregaPlano!.data_inicio.getTime() <= this.entity!.data_fim.getTime() ? this.entity!.data_fim : undefined);\r\n        let entregaInterval = { start: entregaPlano!.data_inicio, end: entregaPlano!.data_fim || entregaPlano!.data_inicio };\r\n        if (!entregaDataFim || !this.util.intersection([entregaInterval, planoInterval])) {\r\n          return this.lex.translate(\"Entrega\") + \" \" + entregaPlano!.descricao + \" possui datas incompatíveis (início \" +\r\n            this.util.getDateFormatted(entregaPlano!.data_inicio) + (entregaPlano!.data_fim ? \"e fim \" + this.util.getDateFormatted(entregaPlano!.data_fim) : \"\") + \")\";\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente. Neste momento são carregadas as entregas do catálogo e as entregas da mesma unidade do plano de trabalho,\r\n   * visto que esses itens não se alteram durante a vida do componente e poderão ser utilizados durante sua utilização.\r\n   */\r\n  async ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity = this.metadata?.entity || this.entity;\r\n    this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n    this.entity!._metadata = this.entity!._metadata || {};\r\n    this.entity!._metadata.novaEntrega = undefined;    \r\n  }\r\n\r\n  /**\r\n   * Método chamado para inserir uma entrega de plano de trabalho no grid, seja este componente persistente ou não.\r\n   * @returns \r\n   */\r\n  public async addEntrega() {\r\n    return Object.assign(new PlanoTrabalhoEntrega(), {\r\n      _status: \"ADD\",\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity?.id\r\n    }) as IIndexable;\r\n  }\r\n\r\n  /**\r\n   * Método utilizado durante a inclusão/alteração de uma entrega de plano de trabalho no grid, seja este componente persistente ou não\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadEntrega(form: FormGroup, row: any) {\r\n    let entrega: PlanoTrabalhoEntrega = row;\r\n    form.controls.descricao.setValue(row.descricao);\r\n    form.controls.forca_trabalho.setValue(row.forca_trabalho);\r\n    form.controls.plano_trabalho_id.setValue(row.plano_trabalho_id);\r\n    form.controls.orgao.setValue(null);\r\n    form.controls.plano_entrega_entrega_id.setValue(null);\r\n    if (row.plano_entrega_entrega) {\r\n      form.controls.plano_entrega_id.setValue(row.plano_entrega_entrega.plano_entrega.id);\r\n      form.controls.plano_entrega_entrega_id.setValue(row.plano_entrega_entrega_id);\r\n    }\r\n    if (entrega._status == \"ADD\" && !form.controls.plano_entrega_id.value) { // É uma nova entrega\r\n      form.controls.origem.setValue('PROPRIA_UNIDADE');\r\n      let planosEntregas = await this.planoEntregaDao!.query({ where: [[\"unidade_id\", \"==\", this.entity!.unidade_id], [\"status\", \"==\", \"ATIVO\"]] }).asPromise();//[\"data_inicio\", \"<=\", this.entity!.data_fim], [\"data_fim\", \">=\", this.entity!.data_inicio]\r\n      form.controls.plano_entrega_id.setValue(planosEntregas[0].id);\r\n    } else if (entrega.plano_entrega_entrega?.plano_entrega?.unidade_id == this.entity!.unidade_id) {\r\n      form.controls.origem.setValue('PROPRIA_UNIDADE');\r\n      await this.carregarEntregas(entrega.plano_entrega_entrega.plano_entrega_id!);\r\n      form.controls.plano_entrega_entrega_id.setValue(entrega.plano_entrega_entrega_id);\r\n    } else if (entrega.plano_entrega_entrega) {\r\n      form.controls.origem.setValue('OUTRA_UNIDADE');\r\n      await this.carregarEntregas(entrega.plano_entrega_entrega.plano_entrega_id!);\r\n      form.controls.plano_entrega_entrega_id.setValue(entrega.plano_entrega_entrega_id);\r\n    } else if (!!entrega.orgao?.length) {\r\n      form.controls.origem.setValue('OUTRO_ORGAO');\r\n      form.controls.orgao.setValue(entrega.orgao);\r\n    } else {\r\n      form.controls.origem.setValue('SEM_ENTREGA');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a exclusão de uma entrega de plano de trabalho do grid, seja este componente persistente ou não. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeEntrega(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\");\r\n    if (confirm) {\r\n      this.loading = true;\r\n      try {\r\n        this.isNoPersist ? Object.assign(row, { _status: \"DELETE\" }) : await this.dao?.delete(row.id);\r\n      } finally {\r\n        this.loading = false;\r\n        this.atualizaPlanoTrabalhoEvent.emit(this.entity!.id);\r\n      }\r\n      this.totalForcaTrabalho = Math.round((this.totalForcaTrabalho - ((row as PlanoTrabalhoEntrega).forca_trabalho * 1)) * 100) / 100;\r\n      return this.isNoPersist ? false : true; // (*3)\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Método chamado no salvamento de uma entrega do plano de trabalho do grid, seja este componente persistente ou não.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveEntrega(form: FormGroup, row: any) {\r\n    this.entity!._metadata = this.entity!._metadata || {};\r\n    this.entity!._metadata.novaEntrega = row as PlanoTrabalhoEntrega;\r\n    this.entity!._metadata.novaEntrega.plano_entrega_entrega_id = this.form?.controls.plano_entrega_entrega_id.value;\r\n    this.entity!._metadata.novaEntrega.orgao = this.form?.controls.orgao.value;\r\n    this.entity!._metadata.novaEntrega.descricao = this.form?.controls.descricao.value;\r\n    this.entity!._metadata.novaEntrega.forca_trabalho = this.form?.controls.forca_trabalho.value;\r\n    this.loading = true;\r\n    try {\r\n      if (!this.isNoPersist) /* persistente */ { await (this.dao as PlanoTrabalhoEntregaDaoService).save(this.entity!._metadata.novaEntrega, this.join); }\r\n    } catch (e: any) {\r\n      this.error(e.message ? e.message : e.toString() || e);\r\n    } finally {\r\n      row.forca_trabalho = this.form?.controls.forca_trabalho.value * 1;\r\n      row.plano_entrega_entrega = this.entrega?.selectedItem?.data || null;\r\n      this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n      this.loading = false;\r\n    }\r\n    return this.entity!._metadata.novaEntrega;\r\n  }\r\n\r\n  /**\r\n   *  Quando uma nova entrega de plano de trabalho é incluída no grid, o objeto '_metadata' é anexado em 'this.entity' para permitir a atualização do grid antes da atualização da página.\r\n   *  Após a atualização do grid, este método é chamado para excluir o objeto '_metadata' e garantir que, no caso da inserção de várias entregas no grid, apenas a última seja lida a partir deste objeto.\r\n   * @param row \r\n   */\r\n  public saveEndEntrega(row: any) {\r\n    this.entity!._metadata = null;\r\n          \r\n    this.atualizaPlanoTrabalhoEvent.emit(this.entity!.id);\r\n  }\r\n\r\n  /**\r\n   * Método chamado para somar os percentuais das forças de trabalho do array de entregas passado como parâmetro.\r\n   * @param entregas Array de entregas do plano de trabalho\r\n   * @returns \r\n   */\r\n  public somaForcaTrabalho(entregas: PlanoTrabalhoEntrega[] = []): number {\r\n    return entregas.map(x => x.forca_trabalho * 1).reduce((a, b) => a + b, 0);\r\n  }\r\n\r\n  /**\r\n   * Método chamado para carregar as entregas da unidade\r\n   * @param idPlanoOuPlano ID do plano de entregas ou o seu objeto completo.\r\n   */\r\n  public async carregarEntregas(idPlanoOuPlano: string | PlanoEntrega): Promise<void> {\r\n    let planoEntrega = typeof idPlanoOuPlano == 'string' ? await this.planoEntregaDao!.getById(idPlanoOuPlano, [\"entregas.entrega:id,nome\", \"unidade\"]) : idPlanoOuPlano;\r\n    let planoEntregaComUnidade = { id: planoEntrega?.id, unidade_id: planoEntrega?.unidade_id, unidade: planoEntrega?.unidade };\r\n    this.entregas = planoEntrega?.entregas.map(epe => Object.assign({}, { key: epe.id, value: epe.descricao || epe.entrega?.nome || \"Desconhecido\", data: Object.assign(epe, { plano_entrega: planoEntregaComUnidade }) })) || [];\r\n    this.entregas.sort((a, b) => (a.value > b.value ? 1 : -1));\r\n    if (!this.entregas.find(x => x.key == this.form!.controls.plano_entrega_entrega_id.value)) this.form!.controls.plano_entrega_entrega_id.setValue(null);\r\n  }\r\n\r\n  /* ---------  TRATAMENTO DOS EVENTOS ----------- */\r\n\r\n  public async onOrigemChange(row: any) {\r\n    let value = this.form!.controls.origem.value;\r\n    this.cdRef.detectChanges();\r\n    if (value == 'OUTRO_ORGAO') {\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if (value == 'SEM_ENTREGA') {\r\n      this.form?.controls.orgao.setValue(null);\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if (value == 'OUTRA_UNIDADE') {//if (value == 'PROPRIA_UNIDADE' || value == 'OUTRA_UNIDADE')\r\n      this.form?.controls.orgao.setValue(null);\r\n      if (!this.form?.controls.plano_entrega_id.value) {\r\n        this.loading = true;\r\n        this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n        this.loading = false;\r\n      }\r\n    }\r\n    /*      try {\r\n       let planosEntregas = await this.planoEntregaDao!.query({where: [[\"unidade_id\", \"==\", this.entity!.unidade_id], [\"status\", \"==\", \"ATIVO\"], [\"data_inicio\", \"<=\", this.entity!.data_fim], [\"data_fim\", \">=\", this.entity!.data_inicio]]}).asPromise();\r\n      if(planosEntregas.length == 1) {\r\n        this.form?.controls.plano_entrega_id.setValue(planosEntregas[0].id);\r\n      } else if(this.planoEntrega?.selectedEntity?.unidade_id != this.entity!.unidade_id) {\r\n        this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n      } \r\n      this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  } if (value == 'OUTRA_UNIDADE') {\r\n    this.form?.controls.orgao.setValue(null);\r\n    this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n  }*/\r\n  }\r\n\r\n  public onPlanoEntregaChange(event: Event) {\r\n    let planoEntrega = this.planoEntrega?.selectedEntity as PlanoEntrega;\r\n    this.carregarEntregas(planoEntrega);\r\n  }\r\n\r\n  public onEntregaChange(event: Event) {\r\n    /*let entrega = this.entrega!.selectedItem?.data as PlanoEntregaEntrega;\r\n    if(!this.form!.controls.descricao.value?.length) {\r\n      this.form!.controls.descricao.setValue(entrega?.descricao || \"\");\r\n    }*/\r\n  }\r\n\r\n  public onForcaTrabalhoChange(row: any) {\r\n    let index = this.items.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n    this.totalForcaTrabalho = Math.round((this.somaForcaTrabalho(this.grid?.items as PlanoTrabalhoEntrega[]) - (this.items[index].forca_trabalho * 1) + (this.form?.controls.forca_trabalho.value * 1)) * 100) / 100;\r\n  }\r\n}\r\n\r\n/*\r\nTESTES\r\n\r\n                                                  GRID PERSISTENTE                      GRID NÃO-PERSISTENTE\r\n                                              Fluxo Feliz    Validações                Fluxo Feliz    Validações\r\nInclusão Entrega Catálogo                          \r\nInclusão Entrega Mesma Unidade                     \r\nInclusão Entrega Outra Unidade                     \r\nAlteração Entrega Catálogo                         \r\nAlteração Entrega Mesma Unidade                    \r\nAlteração Entrega Outra Unidade                    \r\nCancelamento Entrega Catálogo                      \r\nCancelamento Entrega Mesma Unidade                 \r\nCancelamento Entrega Outra Unidade                 \r\nExclusão Entrega Catálogo                          \r\nExclusão Entrega Mesma Unidade                     \r\nExclusão Entrega Outra Unidade                     \r\n\r\n*/\r\n\r\n/*\r\nOBSERVAÇÕES:\r\n\r\n(*2)  this.entity?.entregas?.filter(e => !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).find(x => x.plano_entrega_entrega_id == control.value)\r\nFiltra as entregas da mesma unidade do plano de trabalho excluindo a entrega que está sendo editada. Em seguida conta aquelas que possuem o mesmo ID da que está sendo editada e dessa forma o resultado deve ser igual a 0, caso contrário a entrega editada\r\njá existe no grid.\r\n\r\n(*3)  return this.isNoPersist ? false : true;\r\nApós confirmada a remoção pelo usuário, a entrega é setada com _status = \"DELETE\" e é excluída da tela e sua confirmação é retornada para o método onDeleteItem() do gridComponent, que a excluirá também dos items do grid.\r\nEntretanto, quando se trata de um grid não persistente, ela não deve ser excluída dos items do grid, pois sua exclusão só se efetivará quando entity for salva, levando\r\ntodas as suas entregas para o back-end, que finalmente excluirá as que possuírem _status = \"DELETE\".\r\n\r\n(*4)  if(this.grid?.adding) this.grid!.items[this.grid!.items.length-1].id = '';\r\nNo caso de o componente ser 'persistente', essa linha apaga o ID que foi criado pelo banco de dados permitindo ao método saveItem do grid.component localizá-lo na sua lista de items para atualizar suas informações na tela.\r\n\r\n(*5)  if(!this.entity?.id?.length) return this.entregasPlanoEntrega;\r\nQuando o componente for chamado por um plano de trabalho (entity) que já existe, não poderá haver alteração no seu plano de entregas, portanto as entregas da mesma unidade do plano de trabalho serão lidas\r\nna própria entity. No entanto, quando o plano de trabalho (entity) ainda não existir (!this.entity?.id?.length), essas entregas vão variar de acordo com o plano de entregas\r\nselecionado no inputSelectComponent, e portanto elas serão lidas na variável que reflete essa escolha (this.entregasPlanoEntrega), e essa reflexão ocorre por causa do bind @Input() set/get entregasPlanoEntrega.\r\n\r\n\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\nID do Plano           |       Pode ser que a 'row'           |  Características           | inputs | entrega_id \r\nde Trabalho           |                                      |                            | search | plano_entrega_entrega_id\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Já tenha vindo do banco (TIPO I)   |                            | nenhum | um dos dois\r\n                      |   (foi carregada junto com o Plano)  |                            |        |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------\r\n  EXISTE              | - Tenho sido salva agora no banco    |                            | um dos | um dos dois\r\n  - Então o Grid é    |   (TIPO II)                          |                            | três   |\r\n    Persistente       |--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Esteja sendo criada agora          | addEntrega loadEntrega     | um dos | nenhum\r\n                      |                                      |                            | três   |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------     \r\n                      | - Seja do TIPO I e esteja sendo      | loadEntrega                | um dos | um dos dois\r\n                      |   editada agora                      |                            | três   |\r\n                      +--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Seja do TIPO II e esteja sendo     | loadEntrega                | um dos | um dos dois\r\n                      |   editada agora                      |                            | três   |\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\n  NÃO                 | - Já exista nos itens do grid        |                            | nenhum | um dos dois\r\n  EXISTE              |   (foi salva agora, não no banco)    | Possui _status == \"ADD\"    |        |\r\n  - Então o Grid é    |--------------------------------------+----------------------------+--------+------------------------------------\r\n    Não-persistente   | - Esteja sendo criada agora          | Possui _status == \"ADD\"    | um dos | nenhum\r\n                      |                                      | addEntrega loadEntrega     | três   |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Tenha acabado de ser criada e      | Possui _status == \"ADD\"    | um dos | um dos dois\r\n                      |   já está sendo editada              | loadEntrega                | três   |\r\n------------------------------------------------------------------------------------------+--------+------------------------------------\r\n(*) O ADD é inserido pelo método addEntrega e só sai quando persiste no banco e volta\r\n\r\n*/","<grid [items]=\"items\" [form]=\"form!\" noMargin #gridEntregas editable [selectable]=\"false\" [minHeight]=\"items.length > 2 ? 0 : 300\" [join]=\"join\" [groupBy]=\"groupBy\" [add]=\"addEntrega.bind(this)\" [remove]=\"removeEntrega.bind(this)\" [save]=\"saveEntrega.bind(this)\" [load]=\"loadEntrega.bind(this)\" [saveEnd]=\"saveEndEntrega.bind(this)\" [hasDelete]=\"!disabled && planoTrabalhoEditavel\" [hasEdit]=\"!disabled && planoTrabalhoEditavel\" [hasAdd]=\"!disabled && planoTrabalhoEditavel\">\r\n  <columns>\r\n    <column [titleTemplate]=\"titleOrigem\" [template]=\"columnOrigem\" [editTemplate]=\"editOrigem\" [verticalAlign]=\"'middle'\" [width]=\"300\" [align]=\"'center'\">\r\n      <ng-template let-header=\"header\" #titleOrigem>\r\n        <div class=\"text-center\"><span><strong>Origem</strong></span></div>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #columnOrigem>\r\n        <div class=\"w-100 d-flex justify-content-center\">\r\n          <div class=\"one-per-line\">\r\n            <badge [label]=\"planoTrabalhoService.tipoEntrega(row, entity).titulo\" [color]=\"planoTrabalhoService.tipoEntrega(row, entity).cor\"></badge>\r\n            <badge *ngIf=\"row.plano_entrega_entrega_id?.length\" [label]=\"row.plano_entrega_entrega?.plano_entrega?.unidade?.sigla || 'DESCONHECIDO'\" [icon]=\"entityService.getIcon('Unidade')\" color=\"primary\"></badge>\r\n            <badge *ngIf=\"row.orgao?.length\" [label]=\"row.orgao\" icon=\"bi bi-box-arrow-down-left\" color=\"warning\"></badge>\r\n          </div>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #editOrigem>\r\n        <input-select #origem controlName=\"origem\" controlName=\"origem\" [control]=\"form!.controls.origem\" [items]=\"lookup.ORIGENS_ENTREGAS_PLANO_TRABALHO\" (change)=\"onOrigemChange(row)\"></input-select>\r\n        <!-- <input-search *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" label #planoEntrega [placeholder]=\"'Selecione o ' + lex.translate('Plano de entrega')\" [join]=\"['entregas.entrega:id,nome', 'unidade']\" [where]=\"origem?.value == 'PROPRIA_UNIDADE' ? [['unidade_id', '==', entity?.unidade_id]] : undefined\" [selectParams]=\"origem?.value == 'PROPRIA_UNIDADE' ? {filter: {unidade_id: entity?.unidade_id}} : undefined\" controlName=\"plano_entrega_id\" [dao]=\"planoEntregaDao\" (change)=\"onPlanoEntregaChange($event)\"></input-search> -->\r\n        <!-- (RN_PTR_G) Na criação/alteração de um Plano de Trabalho só podem ser criadas/alteradas entregas se vinculadas a entregas de planos de entregas não canceladas; //-->\r\n        <input-search *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" label #planoEntrega [placeholder]=\"'Selecione o ' + lex.translate('Plano de entrega')\" [join]=\"['entregas.entrega:id,nome', 'unidade']\" [where]=\"origem?.value == 'PROPRIA_UNIDADE' ? [['unidade_id', '==', entity?.unidade_id], ['status', '==', 'ATIVO']] : [['status', '==', 'ATIVO']]\" [selectParams]=\"origem?.value == 'PROPRIA_UNIDADE' ? {filter: {unidade_id: entity?.unidade_id, status: 'ATIVO'}} : {filter: {status: 'ATIVO'}}\" controlName=\"plano_entrega_id\" [dao]=\"planoEntregaDao\" (change)=\"onPlanoEntregaChange($event)\"></input-search>\r\n        <input-text *ngIf=\"origem?.value == 'OUTRO_ORGAO'\" #orgao controlName=\"orgao\" placeholder=\"Órgão\" [attr.maxlength]=250></input-text>\r\n      </ng-template>\r\n    </column>\r\n    <column [width]=\"350\" [titleTemplate]=\"titleEntrega\" [template]=\"columnEntrega\" [editTemplate]=\"editEntrega\" [verticalAlign]=\"'middle'\" [align]=\"'center'\">\r\n      <ng-template let-header=\"header\" class=\"text-center\" #titleEntrega><span><strong>Entrega</strong></span></ng-template>\r\n      <ng-template let-row=\"row\" #columnEntrega>\r\n        <small>{{ planoTrabalhoService.tipoEntrega(row, entity).descricao }}</small>\r\n        <div *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(planoTrabalhoService.tipoEntrega(row, entity).tipo)\" class=\"w-100\">\r\n          <badge color=\"light\" icon=\"bi bi-box-arrow-in-right\" [label]=\"util.getDateFormatted(row.plano_entrega_entrega?.data_inicio)\" hint=\"Data de início\"></badge>\r\n          <badge color=\"light\" icon=\"bi bi-box-arrow-right\" [label]=\"util.getDateFormatted(row.plano_entrega_entrega?.data_fim)\" hint=\"Data de término\"></badge>\r\n        </div>\r\n        <reaction [entity]=\"row\" origem=\"PLANO_TRABALHO_ENTREGA\"></reaction>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #editEntrega>\r\n        <input-select *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" #entrega nullable itemNull=\"- Selecione -\" controlName=\"plano_entrega_entrega_id\" [control]=\"form!.controls.plano_entrega_entrega_id\" [items]=\"entregas\" (change)=\"onEntregaChange($event)\"></input-select>\r\n        <div *ngIf=\"entrega?.selectedItem\" class=\"w-100\">\r\n          <badge color=\"light\" icon=\"bi bi-box-arrow-in-right\" [label]=\"util.getDateFormatted(entrega!.selectedItem!.data!.data_inicio)\" hint=\"Data de início\"></badge>\r\n          <badge color=\"light\" icon=\"bi bi-box-arrow-right\" [label]=\"util.getDateFormatted(entrega!.selectedItem!.data!.data_fim)\" hint=\"Data de término\"></badge>\r\n        </div>\r\n      </ng-template>\r\n    </column>\r\n    <column [titleTemplate]=\"titleForcaTrabalho\" [title]=\"'% CHD'\" [template]=\"columnForcaTrabalho\" [editTemplate]=\"editForcaTrabalho\" [width]=\"100\" [align]=\"'center'\" [titleHint]=\"'% Carga Horária Disponível'\">\r\n      <ng-template let-header=\"header\" #titleForcaTrabalho>\r\n        <div class=\"text-center\">\r\n          <!--<small><strong>% CHD</strong></small><br>-->\r\n          <div *ngIf=\"totalForcaTrabalho > 100; else umCHD\">\r\n            <small>\r\n              <badge icon=\"bi bi-calculator\" [color]=\"'warning'\" [label]=\"totalForcaTrabalho + '%'\"></badge>\r\n            </small>\r\n            <small>\r\n              <badge icon=\"bi bi-intersect\" [color]=\"'secondary'\" [label]=\"totalForcaTrabalho - 100 + '%'\"></badge>\r\n            </small><!--[hint]=\"'Sobreposição de CHD entre Entregas'\"-->\r\n          </div>\r\n          <ng-template #umCHD>\r\n            <small>\r\n              <badge icon=\"bi bi-calculator\" [color]=\"totalForcaTrabalho == 100 ? 'success' : 'warning'\" [label]=\"totalForcaTrabalho + '%'\"></badge>\r\n            </small>\r\n          </ng-template>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #columnForcaTrabalho><small>{{ row.forca_trabalho + '%' }}</small></ng-template>\r\n      <ng-template let-row=\"row\" #editForcaTrabalho><input-text number sufix=\"%\" controlName=\"forca_trabalho\" [control]=\"form!.controls.forca_trabalho\" (change)=\"onForcaTrabalhoChange(row)\" [attr.maxlength]=250></input-text></ng-template>\r\n    </column>\r\n    <column [maxWidth]=\"250\" [titleTemplate]=\"titleDescricao\" [template]=\"columnDescricao\" [editTemplate]=\"editDescricao\" [verticalAlign]=\"'middle'\" [align]=\"'center'\">\r\n      <ng-template let-header=\"header\" #titleDescricao>\r\n        <div class=\"text-center\"><span><strong>Descrição dos Trabalhos</strong></span></div>\r\n      </ng-template>\r\n      <ng-template let-row=\"row\" #columnDescricao>\r\n        <div *ngIf=\"row.descricao != planoTrabalhoService.tipoEntrega(row, entity).descricao; else solicitarDescricao\"><small>{{ row.descricao }}</small></div>\r\n      </ng-template>\r\n      <ng-template #solicitarDescricao><small>Detalhe/Descreva os trabalhos</small></ng-template>\r\n      <ng-template let-row=\"row\" #editDescricao>\r\n        <input-textarea [rows]=\"2\" controlName=\"descricao\" [control]=\"form!.controls.descricao\"></input-textarea>\r\n      </ng-template>\r\n    </column>\r\n    <column type=\"options\"></column>\r\n  </columns>\r\n</grid>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\nimport { PlanoTrabalhoConsolidacaoComponent } from './plano-trabalho-consolidacao/plano-trabalho-consolidacao.component';\r\nimport { PlanoTrabalhoConsolidacaoListComponent } from './plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component';\r\nimport { AvaliarComponent } from '../../uteis/avaliar/avaliar.component';\r\nimport { PlanoTrabalhoConsolidacaoAvaliacaoComponent } from './plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: PlanoTrabalhoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Planos de Trabalho\" } },\r\n  { path: 'new', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão de Plano de Trabalho\", modal: true } },\r\n  { path: 'termo', component: PlanoTrabalhoFormTermoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Termo de adesão\", modal: true } },\r\n  { path: 'consolidacao/avaliacao', component: PlanoTrabalhoConsolidacaoAvaliacaoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Avaliação das Consolidações do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:consolidacaoId/avaliar', component: AvaliarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Avaliar Consolidação do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:consolidacaoId/recurso', component: AvaliarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Recurso da Avaliação da Consolidação do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:usuarioId/:planoTrabalhoId', component: PlanoTrabalhoConsolidacaoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consolidações do Plano de Trabalho\" } },\r\n  { path: 'consolidacao', component: PlanoTrabalhoConsolidacaoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consolidações\" } },\r\n  { path: ':id/edit', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição de Plano de Trabalho\", modal: true } },\r\n  { path: ':id/consult', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Plano de Trabalho\", modal: true } },\r\n  { path: 'entregaList', component: PlanoTrabalhoListEntregaComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Lista de Entregas do Plano de Trabalho\", modal: true } },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PlanoTrabalhoRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PlanoTrabalhoRoutingModule } from './plano-trabalho-routing.module';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\nimport { PlanoTrabalhoConsolidacaoComponent } from './plano-trabalho-consolidacao/plano-trabalho-consolidacao.component';\r\nimport { PlanoTrabalhoConsolidacaoListComponent } from './plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component';\r\nimport { PlanoTrabalhoListAccordeonComponent } from './plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component';\r\nimport { PlanoTrabalhoConsolidacaoFormComponent } from './plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component';\r\nimport { PlanoTrabalhoConsolidacaoAvaliacaoComponent } from './plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component';\r\nimport { AtividadeModule } from '../atividade/atividade.module';\r\nimport { AtividadeListTarefaComponent } from '../atividade/atividade-list-tarefa/atividade-list-tarefa.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PlanoTrabalhoFormComponent,\r\n    PlanoTrabalhoListComponent,\r\n    PlanoTrabalhoListEntregaComponent,\r\n    PlanoTrabalhoFormTermoComponent,\r\n    PlanoTrabalhoConsolidacaoComponent,\r\n    PlanoTrabalhoConsolidacaoListComponent,\r\n    PlanoTrabalhoConsolidacaoFormComponent,\r\n    PlanoTrabalhoListAccordeonComponent,\r\n    PlanoTrabalhoConsolidacaoAvaliacaoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    ReactiveFormsModule,\r\n    PlanoTrabalhoRoutingModule,\r\n    UteisModule,\r\n    AtividadeModule,\r\n  ]\r\n})\r\nexport class PlanoTrabalhoModule { }\r\n"],"names":["DaoBaseService","ComparecimentoDaoService","constructor","injector","inputSearchConfig","searchFields","_","i0","ɵɵinject","Injector","_2","factory","ɵfac","providedIn","Base","PlanoTrabalhoConsolidacao","data","data_inicio","Date","data_fim","status","avaliacoes","status_historico","plano_trabalho_id","avaliacao_id","initialization","GridComponent","PageListBase","UsuarioDaoService","PlanoTrabalhoConsolidacaoDaoService","UnidadeDaoService","Avaliacao","AvaliacaoDaoService","PlanoTrabalhoService","UnidadeService","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵproperty","tmp_0_0","ctx_r5","usuarioSeparator","separator_r25","url_foto","tmp_2_0","nome","ɵɵtextInterpolate","tmp_3_0","entityService","getIcon","tmp_5_0","unidadeSeparator","sigla","row_r27","plano_trabalho","ctx_r14","cdRef","ɵɵtextInterpolate1","row_r29","usuario","ctx_r16","util","getDateFormatted","unidade","lex","translate","programa","tipo_modalidade","ctx_r18","row_r30","ctx_r20","row_r31","row_r32","avaliacao","tipo_avaliacao","nota","recurso","ɵɵtemplate","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_30_avaliar_nota_badge_0_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_30_separator_1_Template","length","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_33_badge_2_Template","ctx_r24","lookup","getColor","CONSOLIDACAO_STATUS","row_r37","getValue","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_1_Template","ɵɵtemplateRefExtractor","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_toolbar_3_Template","ɵɵlistener","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_Template_input_search_change_8_listener","$event","ɵɵrestoreView","_r40","ctx_r39","ɵɵnextContext","ɵɵresetView","onUnidadeChange","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_16_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_18_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_21_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_24_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_27_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_30_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_ng_template_33_Template","ctx_r1","dao","orderBy","groupBy","join","initGrid","bind","onGridLoad","_r4","selectable","filter","filterWhere","filterSubmit","filterCollapseChange","filterCollapsed","auth","hasPermissionTo","controls","usuario_id","usuarioDao","unidade_id","unidadeDao","canFilterSubordinadas","unidades_subordinadas","incluir_arquivados","_r11","_r13","_r15","_r17","_r19","_r21","_r23","dynamicButtons","rowsLimit","ctx_r42","separator_r58","row_r72","avaliador","apelido","ctx_r65","getNota","row_r73","icone","cor","descricao","ctx_r75","justificativa_r76","value","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_11_badge_2_Template","row_r74","justificativa","justificativas","row_r77","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_17_badge_1_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_17_badge_2_Template","row_r78","id","ctx_r71","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_5_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_8_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_11_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_14_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_ng_template_17_Template","ctx_r51","getAvaliacoes","row_r60","_r62","_r64","_r66","_r68","_r70","row_r81","ctx_r53","ctx_r55","row_r82","ctx_r57","row_r83","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_1_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_toolbar_3_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_Template_input_search_change_8_listener","_r85","ctx_r84","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_16_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_18_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_21_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_24_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_ng_template_27_Template","ctx_r3","onGridLoadHistorico","_r41","filterWhereHistorico","_r48","_r50","_r52","_r54","_r56","PlanoTrabalhoConsolidacaoAvaliacaoComponent","consolidacaoId","joinAvaliacao","result","form","push","unidadeService","get","extraJoin","field","label","avaliacaoDao","planoTrabalhoService","title","code","fh","FormBuilder","default","addOption","OPTION_INFORMACOES","OPTION_LOGS","ngOnInit","setValue","unidadeGestor","lotacao","isGestorUnidade","undefined","separator","usuarioId","group","metadata","extra","planos_trabalhos","find","x","unidadeId","event","rows","grid","query","planosTrabalhos","forEach","p","plano","programas","programa_id","v","consolidacao","tipos_avaliacoes","tipo_avaliacao_id","refreshConsolidacao","_this","_asyncToGenerator","refreshId","refreshRows","anterior","items","reduce","a","asTimestamp","proximo","row","isAvaliador","isIntegrante","isUsuarioDoPlano","BOTAO_AVALIAR","hint","icon","color","onClick","avaliar","BOTAO_REAVALIAR","BOTAO_FAZER_RECURSO","fazerRecurso","BOTAO_CANCELAR_AVALIACAO","cancelarAvaliacao","canAvaliar","includes","canCancelarAvaliacao","data_avaliacao","dias_tolerancia_recurso_avaliacao","daystamp","hora","onSelectTab","tab","_this2","viewInit","saveUsuarioConfig","active_tab","key","queryInit","plano_trabalho_consolidacao_id","loadData","_this3","loading","where","asPromise","notas","codigo","ɵɵdirectiveInject","selectors","viewQuery","PlanoTrabalhoConsolidacaoAvaliacaoComponent_Query","rf","ctx","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_2_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_5_Template","isModal","_r0","_r2","ChangeDetectorRef","EditableFormComponent","PageFrameBase","Atividade","TipoAtividadeDaoService","PlanoEntregaService","AtividadeDaoService","AtividadeService","CalendarService","Comparecimento","OcorrenciaDaoService","PlanoEntregaEntregaDaoService","row_r24","atividades","PlanoTrabalhoConsolidacaoFormComponent_ng_template_5_span_0_Template","row_r47","tarefas","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_4_span_0_Template","row_r50","row_r52","numero","ctx_r34","atividadeService","onIdClick","ctx_r36","formAtividade","tempo_r56","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_badge_1_Template","ctx_r38","tempoAtividade","row_r54","ctx_r40","data_entrega","etiqueta_r62","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_table_3_tr_1_i_2_Template","check_r64","checked","texto","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_table_3_tr_1_Template","row_r58","checklist","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_badge_1_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_separator_2_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_table_3_Template","progresso","etiquetas","i_r73","check_r72","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_21_table_5_tr_1_Template","ctx_r70","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_21_Template_input_select_details_2_listener","_r75","ctx_r74","onEtiquetaConfigClick","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_21_separator_4_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_21_table_5_Template","ctx_r44","formEdit","addItemHandleEtiquetas","etiqueta","row_r67","status_r79","row_r76","_r28","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_24_badge_2_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_24_comentarios_widget_3_Template","documento_requisicao","ctx_r46","getStatus","entity","editing","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_4_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_6_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_9_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_11_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_21_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_24_Template","ctx_r4","disabled","addAtividade","entrega","loadAtividade","removeAtividade","saveAtividade","_r29","_r31","_r33","_r35","atividadeOptionsMetadata","onColumnAtividadeDescricaoEdit","onColumnAtividadeDescricaoSave","_r37","_r39","_r43","onColumnProgressoEtiquetasChecklistEdit","onColumnProgressoEtiquetasChecklistSave","_r45","dynamicOptions","badge","titulo","forca_trabalho","row_r84","meta","metaRealizado","row_r85","progresso_realizado","row_r86","tipo_motivo_afastamento","observacao","ctx_r21","row_r87","ctx_r23","PlanoTrabalhoConsolidacaoFormComponent","noPersist","control","bindEntity","_disabled","detectChanges","joinAtividade","itemsEntregas","itemsOcorrencias","itemsComparecimentos","itemsAfastamentos","validateAtividade","controlName","indexOf","isDataValid","getTime","data_distribuicao","validateComparecimento","between","start","end","comparecimentoDao","atividadeDao","calendar","ocorrenciaDao","tipoAtividadeDao","planoEntregaService","pEEDao","comentarios","esforco","tempo_planejado","data_estipulada_entrega","formComparecimento","data_comparecimento","detalhamento","atividadeRefreshId","removeId","atividadeRemoveId","refresh","_metadata","planoTrabalhoConsolidacaoFormComponent","atividade","foundIndex","findIndex","getById","then","splice","ngAfterViewInit","loadConsolidacao","dados","entregas","map","plano_entrega_entrega","plano_entrega","planosEntregas","pe","plano_entrega_id","y","plano_trabalho_entrega_id","tipoEntrega","planoTrabalho","getValorMeta","getValorRealizado","objetivos","processos","ocorrencias","comparecimentos","afastamentos","gridEntregas","dadosConsolidacao","efemerides","calculaDataTempoUnidade","carga_horaria","tempoPlanejado","horasUteis","dataInicio","maxDate","setTime","dataFim","minDate","generateUuid","plano_trabalho_entrega","plano_trabalho_consolidacao","demandante","tempo_despendido","tempoUtil","demandante_id","metadados","atrasado","tempo_atraso","pausado","iniciado","concluido","avaliado","arquivado","produtividade","_status","_this4","patchValue","_this5","confirm","dialog","delete","_this6","console","log","gridAtividades","error","markAllAsTouched","valid","fillForm","submitting","save","message","onDataDistribuicaoChange","onDataEstipuladaEntregaChange","atividadeDynamicButtons","Object","assign","BUTTON_EDIT","BUTTON_DELETE","_this7","merge","tipo_atividade","b","config","carregaEtiquetasUnidadesAscendentes","clone","unidadeAtual","_this8","etiquetasUnidades","path","split","unidades","un","_this9","saved","update","go","navigate","route","params","modal","modalClose","modalResult","selectedItem","item","textHash","validateLookupItem","loadTipoAtividade","tipoAtividade","buildEtiquetas","buildChecklist","onTipoAtividadeSelect","comentarioAtividade","_this10","_this11","selectedEntity","getDateTimeFormatted","badgeTratar","temposAtividade","bad","showDetalhes","elemento","_this12","planejamento_id","cadeia_valor_id","addOcorrencia","_this13","editOcorrencia","_this14","removeOcorrencia","_this15","ocorrencia","ocorrenciaDynamicButtons","OPTION_ALTERAR","OPTION_EXCLUIR","addComparecimento","_this16","loadComparecimento","_this17","removeComparecimento","_this18","comparecimento","saveComparecimento","_this19","comparecimentoDynamicButtons","addAfastamento","_this20","filterSnapshot","querySnapshot","afastamentoDynamicButtons","doc","showPlanejamento","_this21","showCadeiaValor","cadeia_valor_id_id","_this22","PlanoTrabalhoConsolidacaoFormComponent_Query","PlanoTrabalhoConsolidacaoFormComponent_ng_template_5_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_10_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_13_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_16_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_19_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_22_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_40_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_49_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_51_Template","_r1","_r3","_r5","_r7","_r9","_r20","_r22","PlanoTrabalhoDaoService","isDisabled","row_r14","ctx_r6","row_r16","ctx_r8","row_r17","row_r18","ctx_r19","tipo_avaliacao_plano_trabalho","PlanoTrabalhoConsolidacaoListComponent_ng_template_18_avaliar_nota_badge_0_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_18_separator_1_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_21_badge_2_Template","ctx_r12","row_r23","PlanoTrabalhoConsolidacaoListComponent","consolidacoes","validate","planoTrabalhoDao","modalWidth","urlParams","has","getByUsuario","planos","agora","expand","addConsolidacao","removeConsolidacao","saveConsolidacao","consolidacaoForm","refreshExpanded","concluir","response","cancelarConclusao","BOTAO_CONCLUIR","BOTAO_CANCELAR_CONCLUSAO","canConcluir","canCancelarConclusao","diasParaConcluirConsolidacao","PlanoTrabalhoConsolidacaoListComponent_Query","PlanoTrabalhoConsolidacaoListComponent_ng_template_7_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_9_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_12_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_15_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_18_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_21_Template","TabsComponent","InputSearchComponent","data_r14","data_r15","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_11_ng_template_1_Template","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_11_ng_template_3_Template","usuario_r9","_r10","_r12","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_div_10_Template","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_11_Template","ɵɵtextInterpolate3","_r6","usuarios","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_Template","arquivados","PlanoTrabalhoConsolidacaoComponent","loadingUnidade","loadUsuarios","tabs","active","queryParams","lotados","PlanoTrabalhoConsolidacaoComponent_Query","PlanoTrabalhoConsolidacaoComponent_tab_2_Template","PlanoTrabalhoConsolidacaoComponent_ng_template_4_Template","DocumentoDaoService","ProgramaDaoService","TipoDocumentoDaoService","TipoModalidadeDaoService","ListenerAllPagesService","PlanoTrabalho","PageFormBase","NavigateResult","PlanoTrabalhoFormTermoComponent","numero_processo","formValidation","tipoDocumento","tipo_documento_id","titleEdit","programaDao","tipoDocumentoDao","allPages","tipoModalidadeDao","documentoDao","tempo_total","tempo_proporcional","documento_id","documentos","vinculadas","tipo_modalidade_id","forma_contagem_carga_horaria","onVinculadasChange","formValue","Promise","all","loadSearch","tipoModalidade","processo","id_processo","initializeData","saveData","resolve","reject","codigo_tipo_documento","formaContagemCargaHoraria","forma","PlanoTrabalhoFormTermoComponent_Query","PlanoTrabalhoFormTermoComponent_Template_editable_form_submit_0_listener","onSaveData","PlanoTrabalhoFormTermoComponent_Template_editable_form_cancel_0_listener","onCancel","PlanoTrabalhoFormTermoComponent_Template_input_switch_change_24_listener","formDisabled","ganho_produtividade","ɵɵattribute","DocumentoService","TemplateService","UtilService","ctx_r10","horasTotais","ctx_r11","horasParciais","ɵɵelementContainerStart","PlanoTrabalhoFormComponent_ng_container_18_Template_input_workload_change_2_listener","onCargaHorariaChenge","PlanoTrabalhoFormComponent_ng_container_18_separator_5_Template","PlanoTrabalhoFormComponent_ng_container_18_separator_6_Template","ɵɵelementContainerEnd","onFormaContagemCargaHorariaChange","ctx_r7","editar_texto_complementar_unidade","planoDataset","editar_texto_complementar_usuario","ctx_r9","needSign","extraTags","editingId","datasource","template_tcr","PlanoTrabalhoFormComponent","gestoresUnidadeExecutora","_ref","_x","apply","arguments","joinPrograma","documentoService","templateService","utilService","dataset","unidade_texto_complementar","usuario_texto_complementar","criterios_avaliacao","criterio_avaliacao","segment","url","action","buscaGestoresUnidadeExecutora","atualizarTcr","loadEntity","textoUsuario","textoUnidade","documento","template","isTermos","onUnidadeSelect","selected","entidade","texto_complementar_plano","onProgramaSelect","plano_trabalho_criterios_avaliacao","updateValueAndValidity","calculaTempos","onUsuarioSelect","every","_ref2","niveis","reverse","hoje","preenchido","indice","preencheUnidade","preenchePrograma","_x2","onDataInicioChange","onDataFimChange","inicio","fim","carga","loadFeriadosCadastrados","feriados","carga_horaria_padrao","nowDate","setHours","fill","requests","responses","onTabSelect","documentoDynamicButtons","signDocumento","html","conteudo","sign","unit","isVigente","gestor","gestores_substitutos","gestores_delegados","PlanoTrabalhoFormComponent_Query","PlanoTrabalhoFormComponent_Template_editable_form_submit_0_listener","PlanoTrabalhoFormComponent_Template_editable_form_cancel_0_listener","PlanoTrabalhoFormComponent_Template_input_search_select_7_listener","PlanoTrabalhoFormComponent_Template_input_search_select_9_listener","PlanoTrabalhoFormComponent_Template_input_search_select_11_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_14_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_15_listener","PlanoTrabalhoFormComponent_ng_container_18_Template","PlanoTrabalhoFormComponent_top_alert_20_Template","PlanoTrabalhoFormComponent_div_21_Template","PlanoTrabalhoFormComponent_tab_22_Template","PlanoTrabalhoFormComponent_tab_23_Template","ɵɵpureFunction0","_c11","plano_trabalho_calcula_horas","checkFilled","_c12","_c13","badge_r7","PlanoTrabalhoListAccordeonComponent_ng_template_13_badge_11_Template","item_r5","ctx_r2","getPlanoBadges","PLANO_TRABALHO_STATUS","item_r8","PlanoTrabalhoListAccordeonComponent","_arquivados","selectedIndex","accordion","self","i","concluidos","avaliados","getLookup","textValue","toString","JSON","stringify","badges","PlanoTrabalhoListAccordeonComponent_Query","PlanoTrabalhoListAccordeonComponent_ng_template_13_Template","PlanoTrabalhoListAccordeonComponent_ng_template_15_Template","ɵɵtextInterpolate4","EventEmitter","PlanoTrabalhoEntrega","PlanoTrabalhoEntregaDaoService","PlanoEntregaDaoService","row_r28","ctx_r29","orgao","PlanoTrabalhoListEntregaComponent_ng_template_6_badge_3_Template","PlanoTrabalhoListEntregaComponent_ng_template_6_badge_4_Template","plano_entrega_entrega_id","PlanoTrabalhoListEntregaComponent_ng_template_8_input_search_2_Template_input_search_change_0_listener","onPlanoEntregaChange","ctx_r35","_c3","_r34","ɵɵpureFunction2","_c6","ɵɵpureFunction1","_c4","_c5","_c7","_c9","_c8","_c10","planoEntregaDao","PlanoTrabalhoListEntregaComponent_ng_template_8_Template_input_select_change_0_listener","restoredCtx","_r42","row_r33","ctx_r41","onOrigemChange","PlanoTrabalhoListEntregaComponent_ng_template_8_input_search_2_Template","PlanoTrabalhoListEntregaComponent_ng_template_8_input_text_3_Template","origem","ORIGENS_ENTREGAS_PLANO_TRABALHO","ctx_r45","row_r44","PlanoTrabalhoListEntregaComponent_ng_template_13_div_2_Template","tipo","PlanoTrabalhoListEntregaComponent_ng_template_15_input_select_0_Template_input_select_change_0_listener","onEntregaChange","ctx_r48","ctx_r49","PlanoTrabalhoListEntregaComponent_ng_template_15_input_select_0_Template","PlanoTrabalhoListEntregaComponent_ng_template_15_div_1_Template","ctx_r54","totalForcaTrabalho","ctx_r56","PlanoTrabalhoListEntregaComponent_ng_template_18_div_1_Template","PlanoTrabalhoListEntregaComponent_ng_template_18_ng_template_2_Template","_r55","row_r57","PlanoTrabalhoListEntregaComponent_ng_template_22_Template_input_text_change_0_listener","_r60","ctx_r59","onForcaTrabalhoChange","row_r62","PlanoTrabalhoListEntregaComponent_ng_template_27_div_0_Template","ctx_r22","ctx_r26","PlanoTrabalhoListEntregaComponent","planoTrabalhoEditavel","_planoTrabalhoEditavel","gridControl","atualizaPlanoTrabalhoEvent","options","e","peeDao","validateEntregas","planoInterval","entregaPlano","entregaDataFim","entregaInterval","intersection","_superprop_getNgOnInit","call","Math","round","somaForcaTrabalho","novaEntrega","addEntrega","loadEntrega","carregarEntregas","removeEntrega","isNoPersist","emit","saveEntrega","saveEndEntrega","idPlanoOuPlano","planoEntrega","planoEntregaComUnidade","epe","sort","onSelectClick","Event","index","PlanoTrabalhoListEntregaComponent_Query","PlanoTrabalhoListEntregaComponent_ng_template_4_Template","PlanoTrabalhoListEntregaComponent_ng_template_6_Template","PlanoTrabalhoListEntregaComponent_ng_template_8_Template","PlanoTrabalhoListEntregaComponent_ng_template_11_Template","PlanoTrabalhoListEntregaComponent_ng_template_13_Template","PlanoTrabalhoListEntregaComponent_ng_template_15_Template","PlanoTrabalhoListEntregaComponent_ng_template_18_Template","PlanoTrabalhoListEntregaComponent_ng_template_20_Template","PlanoTrabalhoListEntregaComponent_ng_template_22_Template","PlanoTrabalhoListEntregaComponent_ng_template_25_Template","PlanoTrabalhoListEntregaComponent_ng_template_27_Template","PlanoTrabalhoListEntregaComponent_ng_template_29_Template","PlanoTrabalhoListEntregaComponent_ng_template_31_Template","_r25","RouterModule","AuthGuard","ConfigResolver","PlanoTrabalhoListComponent","AvaliarComponent","routes","component","canActivate","runGuardsAndResolvers","PlanoTrabalhoRoutingModule","_3","forChild","imports","i1","exports","CommonModule","ComponentsModule","ReactiveFormsModule","UteisModule","AtividadeModule","PlanoTrabalhoModule","declarations","NgIf","i2","i3","ColumnsComponent","i4","ColumnComponent","i5","FilterComponent","i6","ToolbarComponent","i7","PaginationComponent","i8","InputSwitchComponent","i9","i10","InputTextComponent","i11","InputDatetimeComponent","i12","InputSelectComponent","i13","ReportComponent","i14","OrderComponent","i15","BadgeComponent","i16","DocumentosBadgeComponent"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
>>>>>>> develop
