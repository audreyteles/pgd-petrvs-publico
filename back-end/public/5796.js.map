{"version":3,"file":"5796.js","mappings":"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","sources":["./src/app/dao/comparecimento-dao.service.ts","./src/app/dao/plano-trabalho-consolidacao-ocorrencia-dao.service.ts","./src/app/models/plano-trabalho-consolidacao.model.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao/plano-trabalho-consolidacao.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-consolidacao/plano-trabalho-consolidacao.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-routing.module.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho.module.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\r\nimport { Comparecimento } from '../models/comparecimento.model';\r\nimport { DaoBaseService } from './dao-base.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ComparecimentoDaoService extends DaoBaseService<Comparecimento> {\r\n\r\n  constructor(protected injector: Injector) {\r\n    super(\"Comparecimento\", injector);\r\n    this.inputSearchConfig.searchFields = [\"data_comparecimento\"];\r\n  }\r\n\r\n}\r\n\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { DaoBaseService } from './dao-base.service';\r\nimport { TemplateDataset } from '../modules/uteis/templates/template.service';\r\nimport { PlanoTrabalhoConsolidacaoOcorrencia } from '../models/plano-trabalho-consolidacao-ocorrencia.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PlanoTrabalhoConsolidacaoOcorrenciaDaoService extends DaoBaseService<PlanoTrabalhoConsolidacaoOcorrencia> {\r\n\r\n  constructor(protected injector: Injector) {\r\n    super(\"PlanoTrabalhoConsolidacaoOcorrencia\", injector);\r\n  }\r\n\r\n  public dataset(deeps?: string[]): TemplateDataset[] {\r\n    return this.deepsFilter([], deeps);\r\n  }\r\n\r\n}\r\n\r\n","import { Avaliacao, HasAvaliacao } from './avaliacao.model';\r\nimport { Base } from './base.model';\r\nimport { PlanoTrabalho } from './plano-trabalho.model';\r\nimport { HasStatus, StatusJustificativa } from './status-justificativa.model';\r\n\r\nexport type PlanoTrabalhoConsolidacaoStatus = 'CONCLUIDO' | 'AVALIADO' | 'INCLUIDO';\r\n\r\nexport class PlanoTrabalhoConsolidacao extends Base implements HasAvaliacao, HasStatus {\r\n    public plano_trabalho?: PlanoTrabalho;\r\n    public avaliacao?: Avaliacao;\r\n\r\n    public data_inicio: Date = new Date();\r\n    public data_fim: Date = new Date();\r\n    public status: PlanoTrabalhoConsolidacaoStatus = \"INCLUIDO\"; // Status atual da consolidação\r\n    public avaliacoes: Avaliacao[] = [];\r\n    public status_historico: StatusJustificativa[] = [];\r\n\r\n    public plano_trabalho_id: string = \"\";\r\n    public avaliacao_id: string | null = null;\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { GridComponent, GridGroupSeparator } from 'src/app/components/grid/grid.component';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { PlanoTrabalhoConsolidacao } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { Avaliacao } from 'src/app/models/avaliacao.model';\r\nimport { Base } from 'src/app/models/base.model';\r\nimport { TipoAvaliacao } from 'src/app/models/tipo-avaliacao.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { AvaliacaoDaoService } from 'src/app/dao/avaliacao-dao.service';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { Programa } from 'src/app/models/programa.model';\r\n\r\n@Component({\r\n  selector: 'app-plano-trabalho-consolidacao-avaliacao',\r\n  templateUrl: './plano-trabalho-consolidacao-avaliacao.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-avaliacao.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoConsolidacaoAvaliacaoComponent extends PageListBase<PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoDaoService> {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public avaliacaoDao: AvaliacaoDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public extraJoin: string[];\r\n  public extra: any;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoDaoService);\r\n    /* Inicializações */\r\n    this.join = [\r\n      \"avaliacao\", // \"avaliacao.tipoAvaliacao.notas\"\r\n      \"plano_trabalho:id\", // \"planoTrabalho.unidade:id,sigla,nome\", \"planoTrabalho.unidade.gestor:id,unidade_id,usuario_id\", \"planoTrabalho.unidade.gestorSubstituto:id,unidade_id,usuario_id\", \"planoTrabalho.tipoModalidade:id,nome\", \"planoTrabalho.usuario:id,nome,apelido,url_foto\"\r\n    ];\r\n    this.extraJoin = [ // Utilizado pelo RefreshId\r\n      \"avaliacao.tipoAvaliacao.notas\",\r\n      \"planoTrabalho.unidade:id,sigla,nome\", \r\n      \"planoTrabalho.unidade.gestor:id,unidade_id,usuario_id\", \r\n      \"planoTrabalho.unidade.gestorSubstituto:id,unidade_id,usuario_id\", \r\n      \"planoTrabalho.tipoModalidade:id,nome\", \r\n      \"planoTrabalho.usuario:id,nome,apelido,url_foto\"\r\n    ];\r\n    this.groupBy = [\r\n      { field: \"plano_trabalho.unidade.sigla\", label: \"Unidade\" }, \r\n      { field: \"plano_trabalho.unidade.id\", label: \"Unidade Id\" }, \r\n      { field: \"plano_trabalho.usuario.nome\", label: \"Usuário\" },\r\n      { field: \"plano_trabalho.usuario.id\", label: \"Usuário Id\" }\r\n    ];\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.avaliacaoDao = injector.get<AvaliacaoDaoService>(AvaliacaoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.title = \"Avaliações \" + this.lex.translate(\"das Consolidações\");\r\n    this.code = \"MOD_PTR_CSLD_AVAL\";\r\n    this.filter = this.fh.FormBuilder({\r\n      usuario_id: {default: \"\"},\r\n      unidade_id: {default: \"\"},\r\n      unidades_subordinadas: {default: false},\r\n      incluir_arquivados: {default: false}\r\n    });\r\n    this.addOption(this.OPTION_INFORMACOES);\r\n    this.addOption(this.OPTION_LOGS, \"MOD_AUDIT_LOG\");\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    this.filter!.controls.unidade_id.setValue(this.auth.unidadeGestor()?.id || this.auth.lotacao || null);\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let result: any[] = [];\r\n    let form: any = filter.value;\r\n    result.push([\"status\", \"in\", [\"CONCLUIDO\", \"AVALIADO\"]]);\r\n    if(form.usuario_id?.length) result.push([\"usuario_id\", \"==\", form.usuario_id]);\r\n    if(form.unidade_id?.length) result.push([\"plano_trabalho.unidade.id\", \"==\", form.unidade_id]);\r\n    if(form.unidades_subordinadas) result.push([\"unidades_subordinadas\", \"==\", true]);\r\n    if(form.incluir_arquivados) result.push([\"incluir_arquivados\", \"==\", true]);\r\n    return result;\r\n  }\r\n\r\n  public get canFilterSubordinadas(): string | undefined {\r\n    return this.auth.isGestorUnidade(this.filter!.controls.unidade_id.value) ? undefined : 'true';\r\n  }\r\n\r\n  public usuarioSeparator(separator: GridGroupSeparator) {\r\n    let usuarioId = separator.group[3].value;\r\n    separator.metadata = separator.metadata || {};\r\n    separator.metadata.usuario = separator.metadata.usuario || this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.usuario_id == usuarioId)?.usuario;\r\n    return separator.metadata.usuario;\r\n  }\r\n\r\n  public unidadeSeparator(separator: GridGroupSeparator) {\r\n    let unidadeId = separator.group[1].value;\r\n    separator.metadata = separator.metadata || {};\r\n    separator.metadata.unidade = separator.metadata.unidade || this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.unidade_id == unidadeId)?.unidade;\r\n    return separator.metadata.unidade;\r\n  }\r\n\r\n  public onUnidadeChange(event: Event) {\r\n    if(!this.auth.isGestorUnidade(this.filter!.controls.unidade_id.value)) this.filter!.controls.unidades_subordinadas.setValue(false);\r\n  }\r\n\r\n  public onGridLoad(rows?: Base[]) {\r\n    this.extra = (this.grid?.query || this.query!).extra;\r\n    let planosTrabalhos = (this.extra?.planos_trabalhos || []) as PlanoTrabalho[];\r\n    planosTrabalhos.forEach(p => {\r\n      let plano = p as PlanoTrabalho;\r\n      plano.programa = this.extra?.programas?.find((x: Programa) => x.id == plano.programa_id);\r\n    });\r\n    rows?.forEach(v => {\r\n      let consolidacao = v as PlanoTrabalhoConsolidacao;\r\n      consolidacao.plano_trabalho = this.extra?.planos_trabalhos?.find((x: PlanoTrabalho) => x.id == consolidacao.plano_trabalho_id);\r\n      if(consolidacao.avaliacao) consolidacao.avaliacao.tipo_avaliacao = this.extra?.tipos_avaliacoes?.find((x: TipoAvaliacao) => x.id == consolidacao.avaliacao!.tipo_avaliacao_id);\r\n    });\r\n  }\r\n\r\n  public refreshConsolidacao(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    (async () => {\r\n      await this.grid!.query!.refreshId(consolidacao.id, this.extraJoin);\r\n      this.grid!.refreshRows();\r\n    })();\r\n  }\r\n\r\n  public anterior(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return (this.grid!.items as PlanoTrabalhoConsolidacao[]).reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_inicio) < this.util.asTimestamp(consolidacao.data_inicio) && (!a || this.util.asTimestamp(a.data_inicio) < this.util.asTimestamp(v.data_inicio)) ? v : a, undefined);\r\n  }\r\n\r\n  public proximo(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return (this.grid!.items as PlanoTrabalhoConsolidacao[]).reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_fim) > this.util.asTimestamp(consolidacao.data_fim) && (!a || this.util.asTimestamp(a.data_fim) > this.util.asTimestamp(v.data_fim)) ? v : a, undefined);\r\n  }\r\n\r\n  public dynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let consolidacao: PlanoTrabalhoConsolidacao = row as PlanoTrabalhoConsolidacao;\r\n    let programa: Programa = consolidacao.plano_trabalho!.programa!;\r\n    const usuarioId = consolidacao.plano_trabalho!.usuario_id;\r\n    const unidadeId = consolidacao.plano_trabalho!.unidade_id;\r\n    const anterior = this.anterior(row as PlanoTrabalhoConsolidacao);\r\n    const proximo = this.proximo(row as PlanoTrabalhoConsolidacao);\r\n    const isAvaliador = this.auth.hasPermissionTo(\"MOD_PTR_CSLD_AVAL\") && (this.auth.isGestorUnidade(unidadeId) || this.auth.isIntegrante('AVALIADOR_PLANO_TRABALHO', unidadeId));\r\n    const isUsuarioDoPlano = this.auth.usuario!.id == usuarioId;\r\n    const BOTAO_AVALIAR = { hint: \"Avaliar\", icon: \"bi bi-star\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, programa, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_REAVALIAR = { hint: \"Reavaliar\", icon: \"bi bi-star-half\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, programa, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_FAZER_RECURSO = { hint: \"Fazer recurso\", id: \"RECORRIDO\", icon: \"bi bi-journal-medical\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.fazerRecurso(row, programa, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_CANCELAR_AVALIACAO = { hint: \"Cancelar avaliação\", id: \"INCLUIDO\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.cancelarAvaliacao(row, this, this.refreshConsolidacao.bind(this)) };\r\n    /* (RN_CSLD_11) Não pode concluir a consolidação antes que a anterior não esteja concluida, e não pode retornar status da consolidação se a posterior estiver a frente (em status); */\r\n    const canAvaliar = !anterior || [\"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarAvaliacao = !proximo || [\"INCLUIDO\", \"CONCLUIDO\"].includes(proximo!.status);\r\n    if(consolidacao.status == \"CONCLUIDO\" && canAvaliar && isAvaliador) {\r\n      result.push(BOTAO_AVALIAR);\r\n    }\r\n    if(consolidacao.status == \"AVALIADO\" && consolidacao!.avaliacao) {\r\n      /* (RN_AVL_2) [PT] O usuário do plano de trabalho que possuir o acesso MOD_PTR_CSLD_REC_AVAL poderá recorrer da nota atribuida dentro do limites estabelecido pelo programa; */\r\n      if(isUsuarioDoPlano && this.auth.hasPermissionTo('MOD_PTR_CSLD_REC_AVAL') && consolidacao!.avaliacao?.data_avaliacao && \r\n        (!programa.dias_tolerancia_recurso_avaliacao || \r\n        (this.util.daystamp(consolidacao!.avaliacao!.data_avaliacao) + programa.dias_tolerancia_recurso_avaliacao > this.util.daystamp(this.auth.hora)))) {\r\n        result.push(BOTAO_FAZER_RECURSO);\r\n      }\r\n      /* (RN_AVL_3) [PT] Após o recurso será realizado nova avaliação, podendo essa ser novamente recorrida dentro do mesmo prazo estabelecido no programa; */\r\n      /* (RN_AVL_6) [PT] Qualquer usuário capaz de avaliar tambem terá a capacidade de cancelar a avaliação; */\r\n      if(canAvaliar && isAvaliador) {\r\n        result.push(BOTAO_REAVALIAR);\r\n        if(canCancelarAvaliacao) result.push(BOTAO_CANCELAR_AVALIACAO);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n}\r\n\r\n","<grid [dao]=\"dao\" [title]=\"isModal ? '' : title\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\"\r\n    [hasAdd]=\"false\" [hasEdit]=\"false\" [loadList]=\"onGridLoad.bind(this)\" [groupTemplate]=\"groupUnidadeUsuario\">\r\n    <ng-template let-separator=\"separator\" #groupUnidadeUsuario>\r\n        <div class=\"d-flex\">\r\n            <div class=\"ms-3\">\r\n                <profile-picture [url]=\"usuarioSeparator(separator)?.url_foto\" [size]=\"40\" [hint]=\"usuarioSeparator(separator)?.nome\"></profile-picture>\r\n            </div>\r\n            <div class=\"flex-fill ms-3\">\r\n                <strong>{{usuarioSeparator(separator)?.nome || \"Desconhecido\"}}</strong><br>\r\n                <badge [icon]=\"entityService.getIcon('Unidade')\" color=\"primary\" [label]=\"unidadeSeparator(separator)?.sigla || 'Desconhecido'\"></badge>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n    <toolbar *ngIf=\"!selectable\"></toolbar>\r\n    <filter [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"filterCollapsed\" [deleted]=\"this.auth.hasPermissionTo('MOD_AUDIT_DEL')\">\r\n        <div class=\"row\">\r\n            <input-search [size]=\"5\" #usuario [control]=\"filter!.controls.usuario_id\" controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n            <input-search [size]=\"5\" #unidade [control]=\"filter!.controls.unidade_id\" controlName=\"unidade_id\" [dao]=\"unidadeDao\" (change)=\"onUnidadeChange($event)\"></input-search>\r\n            <input-switch [size]=\"1\" #subordinadas [disabled]=\"canFilterSubordinadas\" label=\"Sub.\" [control]=\"filter!.controls.unidades_subordinadas\" controlName=\"unidades_subordinadas\" labelInfo=\"Incluir as unidades subordinadas\"></input-switch>\r\n            <input-switch [size]=\"1\" #arquivadas label=\"Arq.\" [control]=\"filter!.controls.incluir_arquivados\" controlName=\"incluir_arquivados\" labelInfo=\"Incluir os planos de trabalhos arquivados\"></input-switch>\r\n        </div>\r\n    </filter>\r\n    <columns>\r\n        <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidação')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\r\n            <ng-template let-row=\"row\" #columnConsolidacao>\r\n                <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnExpandedConsolidacao>\r\n                <plano-trabalho-consolidacao-form #consolidacao [disabled]=\"true\" [entity]=\"row\" [planoTrabalho]=\"row.plano_trabalho\" [cdRef]=\"cdRef\"></plano-trabalho-consolidacao-form>\r\n            </ng-template>\r\n        </column>\r\n        <column [title]=\"'Plano de trabalho/Vigência\\nUnidade/Programa/Modalidade'\" [template]=\"columnPlanoTrabalho\">\r\n            <ng-template let-row=\"row\" #columnPlanoTrabalho>\r\n                {{row.plano_trabalho.usuario.nome}} <badge label=\"Início\" color=\"light\" icon=\"bi bi-calendar2\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_inicio)\"></badge><badge label=\"Término\" color=\"light\" icon=\"bi bi-calendar2-check\" [textValue]=\"util.getDateFormatted(row.plano_trabalho.data_fim)\"></badge><br>\r\n                <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"row.plano_trabalho.unidade?.sigla\" color=\"light\" [hint]=\"lex.translate('Unidade') + ': ' + row.plano_trabalho.unidade?.nome\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('Programa')\" [label]=\"row.plano_trabalho.programa?.nome\" color=\"light\" [hint]=\"lex.translate('Programa')\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('TipoModalidade')\" [label]=\"row.plano_trabalho.tipo_modalidade?.nome\" color=\"light\" [hint]=\"lex.translate('Tipo de modalidade')\"></badge>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Data início\" [template]=\"columnDataInicio\">\r\n            <ng-template let-row=\"row\" #columnDataInicio>\r\n                {{util.getDateFormatted(row.data_inicio)}}\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Data fim\" [template]=\"columnDataFim\">\r\n            <ng-template let-row=\"row\" #columnDataFim>\r\n                <strong>{{util.getDateFormatted(row.data_fim)}}</strong>\r\n            </ng-template>\r\n        </column>\r\n        <column [title]=\"'Estatísticas\\nAvaliações'\" [template]=\"columnEstatisticas\" [width]=\"300\">\r\n            <ng-template let-row=\"row\" #columnEstatisticas>\r\n                <avaliar-nota-badge *ngIf=\"row.avaliacao\" [align]=\"'left'\" [tipoAvaliacao]=\"row.avaliacao.tipo_avaliacao\" [nota]=\"row.avaliacao.nota\"></avaliar-nota-badge>\r\n                <separator *ngIf=\"row.avaliacao?.recurso?.length\" title=\"Recurso da avaliação\" collapse [collapsed]=\"false\">\r\n                    <small>{{row.avaliacao.recurso}}</small>\r\n                </separator>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Status\" [template]=\"columnStatus\">\r\n            <ng-template let-row=\"row\" #columnStatus>\r\n                <div class=\"one-per-line\">\r\n                    <badge [color]=\"lookup.getColor(lookup.CONSOLIDACAO_STATUS, row.status)\" [icon]=\"lookup.getIcon(lookup.CONSOLIDACAO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.CONSOLIDACAO_STATUS, row.status)\"></badge>\r\n                    <badge *ngIf=\"row.avaliacao?.recurso?.length\" icon=\"bi bi-journal-medical\" color=\"warning\" label=\"Recorrido\"></badge>\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\" [dynamicButtons]=\"dynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n    <pagination [rows]=\"rowsLimit\"></pagination>\r\n</grid>\r\n","import { ChangeDetectorRef, Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { ConsolidacaoDados, PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { PlanoTrabalhoConsolidacaoOcorrenciaDaoService } from 'src/app/dao/plano-trabalho-consolidacao-ocorrencia-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalhoConsolidacao } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { Atividade, Checklist } from 'src/app/models/atividade.model';\r\nimport { PlanoTrabalhoConsolidacaoOcorrencia } from 'src/app/models/plano-trabalho-consolidacao-ocorrencia.model';\r\nimport { Afastamento } from 'src/app/models/afastamento.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { BadgeTrabalho, PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoAtividadeDaoService } from 'src/app/dao/tipo-atividade-dao.service';\r\nimport { PlanoEntregaService } from '../../plano-entrega/plano-entrega.service';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { AtividadeOptionsMetadata, AtividadeService } from '../../atividade/atividade.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { CalendarService } from 'src/app/services/calendar.service';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { TipoAtividade } from 'src/app/models/tipo-atividade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { Comparecimento } from 'src/app/models/comparecimento.model';\r\nimport { ComparecimentoDaoService } from 'src/app/dao/comparecimento-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\n\r\nexport type ConsolidacaoEntrega = {\r\n  id: string,\r\n  entrega: PlanoTrabalhoEntrega,\r\n  badge: BadgeTrabalho,\r\n  atividades: Atividade[]\r\n};\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-consolidacao-form',\r\n  templateUrl: './plano-trabalho-consolidacao-form.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-form.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoFormComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridEntregas', { static: false }) public gridEntregas?: GridComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('etiqueta', { static: false }) public etiqueta?: InputSelectComponent;\r\n  @Input() cdRef: ChangeDetectorRef;\r\n  @Input() planoTrabalho?: PlanoTrabalho;\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalhoConsolidacao | undefined) { super.entity = value; this.bindEntity(); } get entity(): PlanoTrabalhoConsolidacao | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) {\r\n    if(this._disabled != value || this.atividadeOptionsMetadata.disabled !== value) {\r\n      this._disabled = value;\r\n      this.atividadeOptionsMetadata.disabled = value;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n  get disabled(): boolean {\r\n    return this._disabled;\r\n  }\r\n\r\n  public consolidacaoOcorrenciaDao: PlanoTrabalhoConsolidacaoOcorrenciaDaoService;\r\n  public ocorrenciaDao: PlanoTrabalhoConsolidacaoOcorrenciaDaoService;\r\n  public comparecimentoDao: ComparecimentoDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public formAtividade: FormGroup;\r\n  public formOcorrencia: FormGroup;\r\n  public formComparecimento: FormGroup;\r\n  public formEdit: FormGroup;\r\n  public unidade?: Unidade;\r\n  public dao: PlanoTrabalhoConsolidacaoDaoService;\r\n  public atividadeDao: AtividadeDaoService;\r\n  public atividadeService: AtividadeService;\r\n  public calendar: CalendarService;\r\n  public joinAtividade: string[] = ['demandante', 'usuario', 'tipo_atividade', 'comentarios.usuario:id,nome,apelido'];\r\n  public tipoAtividadeDao: TipoAtividadeDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public planoEntregaService: PlanoEntregaService;\r\n  public itemsEntregas: ConsolidacaoEntrega[] = [];\r\n  public etiquetas: LookupItem[] = [];\r\n  public checklist?: Checklist[];\r\n  public itemsOcorrencias: PlanoTrabalhoConsolidacaoOcorrencia[] = [];\r\n  public itemsComparecimentos: Comparecimento[] = [];\r\n  public itemsAfastamentos: Afastamento[] = [];\r\n  public atividadeOptionsMetadata: AtividadeOptionsMetadata;\r\n  public programa?: Programa;\r\n  \r\n  private _disabled: boolean = true;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.dao = injector.get<PlanoTrabalhoConsolidacaoDaoService>(PlanoTrabalhoConsolidacaoDaoService);\r\n    this.consolidacaoOcorrenciaDao = injector.get<PlanoTrabalhoConsolidacaoOcorrenciaDaoService>(PlanoTrabalhoConsolidacaoOcorrenciaDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.comparecimentoDao = injector.get<ComparecimentoDaoService>(ComparecimentoDaoService);\r\n    this.atividadeDao = injector.get<AtividadeDaoService>(AtividadeDaoService);\r\n    this.atividadeService = injector.get<AtividadeService>(AtividadeService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.ocorrenciaDao = injector.get<PlanoTrabalhoConsolidacaoOcorrenciaDaoService>(PlanoTrabalhoConsolidacaoOcorrenciaDaoService);\r\n    this.tipoAtividadeDao = injector.get<TipoAtividadeDaoService>(TipoAtividadeDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.planoEntregaService = injector.get<PlanoEntregaService>(PlanoEntregaService);\r\n    this.formAtividade = this.fh.FormBuilder({\r\n      descricao: { default: \"\" },\r\n      etiquetas: { default: [] },\r\n      checklist: { default: [] },\r\n      comentarios: { default: [] },\r\n      esforco: { default: 0 },\r\n      tempo_planejado: { default: 0 },\r\n      data_distribuicao: {default: new Date()},\r\n      data_estipulada_entrega: {default: new Date()},\r\n      data_entrega: {default: new Date()},\r\n      tipo_atividade_id: {default: null}\r\n    }, this.cdRef, this.validateAtividade);\r\n    this.formOcorrencia = this.fh.FormBuilder({\r\n      data_inicio: { default: new Date() },\r\n      data_fim: { default: new Date() },\r\n      descricao: { default: \"\" }\r\n    }, this.cdRef, this.validateOcorrencia);\r\n    this.formComparecimento = this.fh.FormBuilder({\r\n      data_comparecimento: { default: new Date() },\r\n      unidade_id: { default: \"\" },\r\n      detalhamento: { default: \"\" }\r\n    }, this.cdRef, this.validateComparecimento);\r\n    this.formEdit = this.fh.FormBuilder({\r\n      progresso: { default: 0 },\r\n      etiquetas: { default: [] },\r\n      etiqueta: { default: null }\r\n    });\r\n    this.atividadeOptionsMetadata = {\r\n      refreshId: this.atividadeRefreshId.bind(this),\r\n      removeId: this.atividadeRemoveId.bind(this),\r\n      refresh: this.refresh.bind(this)\r\n    }\r\n  }\r\n\r\n  public refresh() {\r\n    this.loadData(this.entity!, this.form);\r\n  }\r\n\r\n  public bindEntity() {\r\n    if(this.entity) {\r\n      this.entity._metadata = this.entity._metadata || {};\r\n      this.entity._metadata.planoTrabalhoConsolidacaoFormComponent = this;\r\n    }\r\n  }\r\n\r\n  public atividadeRefreshId(id: string, atividade?: Atividade) {\r\n    this.itemsEntregas.forEach(entrega => {\r\n      let foundIndex = entrega.atividades.findIndex(x => x.id == id);\r\n      if(foundIndex >= 0) {\r\n        if(atividade) {\r\n          entrega.atividades[foundIndex] = atividade;\r\n        } else {\r\n          this.atividadeDao.getById(id, this.joinAtividade).then(atividade => { if(atividade) entrega.atividades[foundIndex] = atividade; });\r\n        }\r\n      }\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public atividadeRemoveId(id: string) {\r\n    this.itemsEntregas.forEach(entrega => {\r\n      let foundIndex = entrega.atividades.findIndex(x => x.id == id);\r\n      if(foundIndex >= 0) entrega.atividades.splice(foundIndex, 1);\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public validateAtividade = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if(['data_distribuicao', 'data_estipulada_entrega', 'data_entrega'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Inválido\";\r\n    } else if(controlName == 'data_estipulada_entrega' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuição\";\r\n    } else if(controlName == 'data_entrega' && control.value.getTime() < this.formAtividade?.controls.data_distribuicao.value.getTime()) {\r\n      result = \"Menor que distribuição\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validateOcorrencia = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['descricao'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if(['data_inicio', 'data_fim'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Inválido\";\r\n    } else if(controlName == 'data_fim' && control.value.getTime() < this.formOcorrencia?.controls.data_inicio.value.getTime()) {\r\n      result = \"Menor que início\";\r\n    } \r\n    return result;\r\n  }\r\n\r\n  public validateComparecimento = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['detalhamento', 'unidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if(controlName == 'data_comparecimento' && this.entity && !this.util.between(control.value, {start: this.entity!.data_inicio, end: this.entity!.data_fim})) {\r\n      result = \"Inválido\";\r\n    } \r\n    return result;\r\n  }\r\n\r\n  public loadConsolidacao(dados: ConsolidacaoDados) {\r\n    this.itemsEntregas = dados.entregas.map(x => {\r\n      if(x.plano_entrega_entrega) x.plano_entrega_entrega.plano_entrega = dados.planosEntregas.find(pe => pe.id == x.plano_entrega_entrega?.plano_entrega_id);\r\n      let result = {\r\n        id: x.id,\r\n        entrega: x,\r\n        atividades: dados.atividades.filter(y => y.plano_trabalho_entrega_id == x.id),\r\n        badge: this.planoTrabalhoService.tipoEntrega(x, dados.planoTrabalho),\r\n        meta: x.plano_entrega_entrega ? this.planoEntregaService.getValorMeta(x.plano_entrega_entrega) : '',\r\n        metaRealizado: x.plano_entrega_entrega ? this.planoEntregaService.getValorRealizado(x.plano_entrega_entrega) : '',\r\n        progresso_realizado: x.plano_entrega_entrega ? x.plano_entrega_entrega.progresso_realizado : 0,\r\n        objetivos: x.plano_entrega_entrega ? x.plano_entrega_entrega.objetivos : [],\r\n        processos: x.plano_entrega_entrega ? x.plano_entrega_entrega.processos : [],\r\n      };\r\n      return result;\r\n    });\r\n    this.programa = dados.programa;\r\n    this.planoTrabalho = dados.planoTrabalho;\r\n    this.itemsOcorrencias = dados.ocorrencias;\r\n    this.itemsComparecimentos = dados.comparecimentos;\r\n    this.itemsAfastamentos = dados.afastamentos;\r\n    this.unidade = dados.planoTrabalho.unidade || this.entity!.plano_trabalho?.unidade;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.gridEntregas!.loading = true;\r\n    this.cdRef.detectChanges();\r\n    try {\r\n      let dados = await this.dao!.dadosConsolidacao(entity.id);\r\n      this.loadConsolidacao(dados);\r\n    } finally {\r\n      this.gridEntregas!.loading = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }  \r\n  \r\n  /***************************************************************************************\r\n  * Atividades \r\n  ****************************************************************************************/\r\n  public async addAtividade(entrega: PlanoTrabalhoEntrega) {\r\n    let planoTrabalho: PlanoTrabalho | undefined = entrega.plano_trabalho || this.entity!.plano_trabalho;\r\n    let efemerides = this.calendar.calculaDataTempoUnidade(this.entity!.data_inicio, this.entity!.data_fim, planoTrabalho!.carga_horaria, this.unidade!, \"ENTREGA\");\r\n    const tempoPlanejado = this.calendar.horasUteis(this.entity!.data_inicio, this.entity!.data_fim, planoTrabalho!.carga_horaria, this.unidade!, \"DISTRIBUICAO\");\r\n    const dataInicio = this.util.setTime(this.entity!.data_inicio, 0, 0, 0);\r\n    const dataFim = this.util.setTime(this.entity!.data_fim, 23, 59, 59);\r\n    return new Atividade({\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho: planoTrabalho,\r\n      plano_trabalho_entrega: entrega,\r\n      plano_trabalho_consolidacao: this.entity,\r\n      demandante: this.auth.usuario,\r\n      usuario: this.auth.usuario,\r\n      unidade: this.unidade,\r\n      data_distribuicao: dataInicio,\r\n      carga_horaria: planoTrabalho!.carga_horaria,\r\n      data_estipulada_entrega: dataFim,\r\n      data_inicio: dataInicio,\r\n      data_entrega: dataFim,\r\n      tempo_planejado: tempoPlanejado,\r\n      tempo_despendido: efemerides?.tempoUtil || 0,\r\n      status: 'CONCLUIDO',\r\n      progresso: 100,\r\n      plano_trabalho_id: this.entity!.plano_trabalho_id,\r\n      plano_trabalho_entrega_id: entrega.id,\r\n      plano_trabalho_consolidacao_id: this.entity!.id,\r\n      demandante_id: this.auth.usuario!.id,\r\n      usuario_id: this.auth.usuario!.id,\r\n      unidade_id: this.unidade!.id,\r\n      metadados: { // Simula os metadados enviados pelo servidor\r\n        atrasado: false,\r\n        tempo_despendido: 0,\r\n        tempo_atraso: 0,\r\n        pausado: false,\r\n        iniciado: true,\r\n        concluido: true,\r\n        avaliado: false,\r\n        arquivado: false,\r\n        produtividade: 0,\r\n        extra: undefined,\r\n        _status: []\r\n      }\r\n    });\r\n  }\r\n\r\n  public async loadAtividade(form: FormGroup, row: any) {\r\n    this.formAtividade.patchValue(row);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeAtividade(atividades: Atividade[], row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let atividade = row as Atividade;\r\n        await this.atividadeDao?.delete(atividade);\r\n        atividades.splice(atividades.findIndex(x => x.id == atividade.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveAtividade(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formAtividade.markAllAsTouched();\r\n    if (this.formAtividade!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      this.util.fillForm(row, this.formAtividade!.value);\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.atividadeDao?.save(row, this.joinAtividade, ['etiquetas', 'checklist', 'comentarios', 'pausas', 'tarefas']);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n      this.atividadeRefreshId(row.id, result);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public atividadeDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    result.push(Object.assign({}, this.gridEntregas!.BUTTON_EDIT, {}));\r\n    result.push(Object.assign({}, this.gridEntregas!.BUTTON_DELETE, {}));\r\n    return result;\r\n  }  \r\n\r\n  public async onColumnProgressoEtiquetasChecklistEdit(row: any) {\r\n    this.formEdit.controls.progresso.setValue(row.progresso);\r\n    this.formEdit.controls.etiquetas.setValue(row.etiquetas);\r\n    this.formEdit.controls.etiqueta.setValue(null);\r\n    this.etiquetas = this.util.merge(row.tipo_atividade?.etiquetas, row.unidade?.etiquetas, (a, b) => a.key == b.key);\r\n    this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n    this.checklist = this.util.clone(row.checklist);\r\n  }\r\n\r\n  public async onColumnProgressoEtiquetasChecklistSave(row: any) {\r\n    try {\r\n      const saved = await this.atividadeDao!.update(row.id, {\r\n        progresso: this.formEdit.controls.progresso.value,\r\n        etiquetas: this.formEdit.controls.etiquetas.value,\r\n        checklist: this.checklist\r\n      });\r\n      row.progresso = this.formEdit.controls.progresso.value;\r\n      row.checklist = this.checklist;\r\n      return !!saved;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public onEtiquetaConfigClick() {\r\n    this.go.navigate({ route: [\"configuracoes\", \"preferencia\", \"usuario\", this.auth.usuario!.id], params: { etiquetas: true } }, {\r\n      modal: true, modalClose: (modalResult) => {\r\n        this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n        this.cdRef.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  public addItemHandleEtiquetas(): LookupItem | undefined {\r\n    let result = undefined;\r\n    if (this.etiqueta && this.etiqueta.selectedItem) {\r\n      const item = this.etiqueta.selectedItem;\r\n      const key = item.key?.length ? item.key : this.util.textHash(item.value);\r\n      if (this.util.validateLookupItem(this.formEdit.controls.etiquetas.value, key)) {\r\n        result = {\r\n          key: key,\r\n          value: item.value,\r\n          color: item.color,\r\n          icon: item.icon\r\n        };\r\n        this.formEdit.controls.etiqueta.setValue(null);\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public loadTipoAtividade(tipoAtividade: TipoAtividade | undefined) {\r\n    if(tipoAtividade) {\r\n      this.etiquetas = this.atividadeService.buildEtiquetas(this.unidade, tipoAtividade);\r\n      this.atividadeService.buildChecklist(tipoAtividade, this.formAtividade.controls.checklist);\r\n      this.formAtividade.controls.esforco.setValue(tipoAtividade?.esforco || 0);\r\n    } else {\r\n      this.etiquetas = [];\r\n      this.formAtividade.controls.esforco.setValue(0);\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onTipoAtividadeSelect(item: SelectItem) {\r\n    const tipoAtividade: TipoAtividade | undefined = item.entity as TipoAtividade;\r\n    this.loadTipoAtividade(tipoAtividade);\r\n    this.atividadeService.comentarioAtividade(tipoAtividade, this.formAtividade!.controls.comentarios);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  /***************************************************************************************\r\n  * Ocorrências \r\n  ****************************************************************************************/\r\n  public async addOcorrencia() {\r\n    return new PlanoTrabalhoConsolidacaoOcorrencia({\r\n      plano_trabalho_consolidacao_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadOcorrencia(form: FormGroup, row: any) {\r\n    this.formAtividade.patchValue({\r\n      data_inicio: row.data_inicio,\r\n      data_fim: row.data_fim,\r\n      descricao: row.descricao\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeOcorrencia(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let ocorrencia = row as PlanoTrabalhoConsolidacaoOcorrencia;\r\n        await this.consolidacaoOcorrenciaDao?.delete(ocorrencia);\r\n        this.itemsOcorrencias.splice(this.itemsOcorrencias.findIndex(x => x.id == ocorrencia.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveOcorrencia(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formOcorrencia.markAllAsTouched();\r\n    if (this.formOcorrencia!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_inicio = form.controls.data_inicio.value;\r\n      row.data_fim = form.controls.data_fim.value;\r\n      row.descricao = form.controls.descricao.value;\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.consolidacaoOcorrenciaDao?.save(row);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public ocorrenciaDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }  \r\n\r\n  /***************************************************************************************\r\n  * Comparecimento \r\n  ****************************************************************************************/\r\n  public async addComparecimento() {\r\n    return new Comparecimento({\r\n      unidade_id: this.unidade?.id,\r\n      unidade: this.unidade,\r\n      plano_trabalho_consolidacao_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadComparecimento(form: FormGroup, row: any) {\r\n    this.formComparecimento.patchValue({\r\n      data_comparecimento: row.data_comparecimento,\r\n      unidade_id: row.unidade_id,\r\n      detalhamento: row.detalhamento\r\n    });\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeComparecimento(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let comparecimento = row as Comparecimento;\r\n        await this.comparecimentoDao?.delete(comparecimento);\r\n        this.itemsComparecimentos.splice(this.itemsComparecimentos.findIndex(x => x.id == comparecimento.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveComparecimento(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.formComparecimento.markAllAsTouched();\r\n    if (this.formComparecimento!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_comparecimento = form.controls.data_comparecimento.value;\r\n      row.detalhamento = form.controls.detalhamento.value;\r\n      row.plano_trabalho_consolidacao_id = this.entity!.id;\r\n      row.unidade_id = form.controls.unidade_id.value;\r\n      this.submitting = true;\r\n      try {\r\n        result = await this.comparecimentoDao?.save(row);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public comparecimentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }  \r\n\r\n  /***************************************************************************************\r\n  * Afastamentos\r\n  ****************************************************************************************/\r\n  public async addAfastamento() {\r\n    this.go.navigate({route: ['cadastros', 'afastamento', 'new']}, {\r\n      metadata: { consolidacao: this.entity },\r\n      filterSnapshot: undefined,\r\n      querySnapshot: undefined,\r\n      modalClose: (modalResult) => {\r\n        if(modalResult) this.refresh();\r\n      }\r\n    });\r\n  }\r\n\r\n  public afastamentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    result.push(Object.assign({}, this.OPTION_INFORMACOES, { onClick: (doc: Afastamento) => this.go.navigate({route: [\"cadastros\", \"afastamento\", doc.id, \"consult\"]}) }));\r\n    //result.push({ hint: \"Adicionar filho\", icon: \"bi bi-plus-circle\", onClick: this.addChildProcesso.bind(this) });\r\n    return result;\r\n  }  \r\n\r\n  public async showPlanejamento(planejamento_id: string){\r\n    this.go.navigate({ route: ['gestao', 'planejamento', planejamento_id, 'consult'] }, {modal: true})\r\n  }\r\n\r\n  public async showCadeiaValor(cadeia_valor_id_id: string){\r\n    this.go.navigate({ route: ['gestao', 'cadeia-valor', cadeia_valor_id_id, 'consult'] }, {modal: true})\r\n  }\r\n \r\n}\r\n","<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Atividades')\" [icon]=\"entityService.getIcon('Atividade')\">\r\n    <grid [items]=\"itemsEntregas\" #gridEntregas [minHeight]=\"0\">\r\n        <columns>\r\n            <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidação')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\r\n                <ng-template let-row=\"row\" #columnConsolidacao>\r\n                    <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #columnExpandedConsolidacao>\r\n                    <grid [items]=\"row.atividades\" [minHeight]=\"0\" #gridAtividade [form]=\"formAtividade\" [hasAdd]=\"!disabled\" [hasDelete]=\"false\" [hasEdit]=\"false\"\r\n                        [add]=\"addAtividade.bind(this, row.entrega)\" [load]=\"loadAtividade.bind(this)\" [remove]=\"removeAtividade.bind(this, row.atividades)\" [save]=\"saveAtividade.bind(this)\" editable>\r\n                        <columns>\r\n                            <column [title]=\"'#ID/' + lex.translate('Tipo de Atividade') + '\\nDescrição'\" [template]=\"columnAtividadeDescricao\" [editTemplate]=\"editAtividadeDescricao\">\r\n                                <ng-template let-row=\"row\" #columnAtividadeDescricao>\r\n                                    <span class=\"text-nowrap d-block\">\r\n                                        <badge icon=\"bi bi-hash\" [label]=\"row.numero\" color=\"light\" [data]=\"row.numero\" [click]=\"atividadeService.onIdClick.bind(this)\"></badge>\r\n                                        <badge *ngIf=\"row.tipo_atividade\" [icon]=\"entityService.getIcon('TipoAtividade')\" [label]=\"row.tipo_atividade.nome\" color=\"light\"></badge>\r\n                                    </span>\r\n                                    <span class=\"micro-text fw-ligh atividade-descricao\">{{row.descricao}}</span>\r\n                                </ng-template>\r\n                                <ng-template let-row=\"row\" #editAtividadeDescricao>\r\n                                    <input-search [label]=\"lex.translate('Tipo de atividade')\" [size]=\"12\" [emptyValue]=\"null\" controlName=\"tipo_atividade_id\" [control]=\"formAtividade!.controls.tipo_atividade_id\" [dao]=\"tipoAtividadeDao\" (select)=\"onTipoAtividadeSelect($event)\" [labelInfo]=\"lex.translate('Tipo de atividade') + ' utilizado para classificar a atividade'\" [required]=\"!auth.hasPermissionTo('MOD_ATV_TIPO_ATV_VAZIO') ? 'true' : undefined\"></input-search>\r\n                                    <input-textarea label=\"Descrição\" [size]=\"12\" [rows]=\"2\" controlName=\"descricao\" [control]=\"formAtividade!.controls.descricao\" required></input-textarea>\r\n                                </ng-template>\r\n                            </column>\r\n                            <column [title]=\"'Tempos'\" [width]=\"300\" [template]=\"columnTempos\" [editTemplate]=\"editTempos\">\r\n                                <ng-template let-row=\"row\" #columnTempos>\r\n                                    <div class=\"one-per-line\">\r\n                                        <badge *ngFor=\"let tempo of atividadeService.temposAtividade(row)\" [badge]=\"tempo\"></badge>\r\n                                    </div>\r\n                                </ng-template>\r\n                                <ng-template let-row=\"row\" #editTempos>\r\n                                    <input-datetime icon=\"bi bi-file-earmark-plus\" [label]=\"lex.translate('Data de distribuição')\" controlName=\"data_distribuicao\" [control]=\"formAtividade!.controls.data_distribuicao\" labelInfo=\"Data de inclusão/distribuição/lançamento\"></input-datetime>\r\n                                    <input-datetime icon=\"bi bi-calendar-check\" [label]=\"lex.translate('Prazo de entrega')\" controlName=\"data_estipulada_entrega\" [control]=\"formAtividade!.controls.data_estipulada_entrega\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime>\r\n                                    <input-datetime icon=\"bi bi-check-circle\" label=\"Conclusão\" controlName=\"data_entrega\" [control]=\"formAtividade!.controls.data_entrega\" labelInfo=\"Data da conclusão da atividade\"></input-datetime>\r\n                                </ng-template>\r\n                            </column>\r\n                            <column [title]=\"'Progresso\\nEtiquetas/Checklist'\" [width]=\"200\" [template]=\"columnProgressoEtiquetasChecklist\" [editTemplate]=\"columnProgressoEtiquetasChecklist\" [columnEditTemplate]=\"columnProgressoEtiquetasChecklistEdit\" [edit]=\"onColumnProgressoEtiquetasChecklistEdit.bind(this)\" [save]=\"onColumnProgressoEtiquetasChecklistSave.bind(this)\">\r\n                                <ng-template let-row=\"row\" #columnProgressoEtiquetasChecklist>\r\n                                    <progress-bar [value]=\"row.progresso\" color=\"success\"></progress-bar>\r\n                                    <badge *ngFor=\"let etiqueta of row.etiquetas\" [lookup]=\"etiqueta\"></badge>\r\n                                    <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                                    <table *ngIf=\"row.checklist?.length\">\r\n                                        <tr *ngFor=\"let check of row.checklist\">\r\n                                            <td><i *ngIf=\"check.checked\" class=\"bi bi-check-circle\"></i></td>\r\n                                            <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                                        </tr>\r\n                                    </table>\r\n                                </ng-template>\r\n                                <ng-template let-row=\"row\" #columnProgressoEtiquetasChecklistEdit>\r\n                                    <input-number [size]=\"12\" [decimals]=\"2\" label=\"Progresso\" sufix=\"%\" icon=\"bi bi-clock\" controlName=\"progresso\" [control]=\"formEdit.controls.progresso\" labelInfo=\"Progresso de execução (% Concluído)\"></input-number>\r\n                                    <input-multiselect controlName=\"etiquetas\" [size]=\"12\" [control]=\"formEdit.controls.etiquetas\" [addItemHandle]=\"addItemHandleEtiquetas.bind(this)\">\r\n                                        <input-select [size]=\"12\" label=\"Etiqueta\" #etiqueta controlName=\"etiqueta\" nullable itemNull=\"- Selecione -\" detailsButton detailsButtonIcon=\"bi bi-tools\" (details)=\"onEtiquetaConfigClick()\" [control]=\"formEdit.controls.etiqueta\" [items]=\"etiquetas\"></input-select>\r\n                                    </input-multiselect>\r\n                                    <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                                    <table *ngIf=\"row.checklist?.length\">\r\n                                        <tr *ngFor=\"let check of checklist; let i = index\">\r\n                                            <td><input-switch [size]=\"12\" scale=\"small\" [source]=\"checklist\" [path]=\"i + '.checked'\"></input-switch></td>\r\n                                            <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                                        </tr>\r\n                                    </table>\r\n                                </ng-template>\r\n                            </column>\r\n                            <column [title]=\"'nº Processo/Status\\nComentários'\" [width]=\"400\" [template]=\"columnNumero\" [editTemplate]=\"columnNumero\">\r\n                                <ng-template let-row=\"row\" #columnNumero>\r\n                                    <documentos-badge [documento]=\"row.documento_requisicao\"></documentos-badge>\r\n                                    <span class=\"d-block\">\r\n                                        <badge *ngFor=\"let status of atividadeService.getStatus(row, entity)\" [data]=\"status\" [color]=\"status.color\" [icon]=\"status.icon\" [label]=\"status.label\"></badge>\r\n                                    </span>\r\n                                    <comentarios-widget *ngIf=\"!gridAtividade.editing\" [entity]=\"row\" [selectable]=\"false\" origem=\"ATIVIDADE\" [grid]=\"gridAtividade\"></comentarios-widget>\r\n                                </ng-template>\r\n                            </column>\r\n                            <column type=\"options\" [metadata]=\"atividadeOptionsMetadata\" [dynamicOptions]=\"atividadeService.dynamicOptions.bind(this)\" [dynamicButtons]=\"atividadeService.dynamicButtons.bind(this)\"></column>\r\n                        </columns>\r\n                    </grid>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"Origem\" [template]=\"columnOrigem\" [width]=\"200\">\r\n                <ng-template let-row=\"row\" #columnOrigem>\r\n                    <badge [label]=\"row.badge.titulo\" [color]=\"row.badge.cor\"></badge>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"Entrega\" [template]=\"columnEntrega\">\r\n                <ng-template let-row=\"row\" #columnEntrega>\r\n                    {{row.badge.descricao || row.entrega.descricao}}\r\n                    <reaction [entity]=\"row.entrega\" origem=\"PLANO_TRABALHO_ENTREGA\"></reaction>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"% CHD Planejado\" [template]=\"columnForcaTrabalho\" [width]=\"100\" [titleHint]=\"'% Carga Horária Disponível Planejada'\">\r\n                <ng-template let-row=\"row\" #columnForcaTrabalho>\r\n                    <badge color=\"light\" [label]=\"row.entrega.forca_trabalho + '%'\"></badge>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"'Meta'\" [template]=\"columnMetaRealizado\" [width]=\"100\">\r\n                <ng-template let-row=\"row\" #columnMetaRealizado>\r\n                    <badge icon=\"bi bi-graph-up-arrow\" [textValue]=\"row.meta\" color=\"light\" hint=\"Meta\"></badge><br>\r\n                    <badge icon=\"bi bi-check-lg\" [textValue]=\"row.metaRealizado\" color=\"light\" hint=\"Realizado\"></badge>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"Progresso\" [template]=\"columnProgresso\" [width]=\"150\">\r\n                <ng-template let-row=\"row\" #columnProgresso>\r\n                    <progress-bar [value]=\"row.progresso_realizado\" color=\"success\"></progress-bar>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"'Objetivos/Processos'\" [template]=\"columnObjProc\" [editTemplate]=\"columnObjProc\" [width]=\"200\">\r\n                <ng-template let-row=\"row\" #columnObjProc>\r\n                    <separator [title]=\"lex.translate('Objetivos')\" *ngIf=\"row.objetivos?.length\" collapse [collapsed]=\"true\">\r\n                        <div *ngFor=\"let pObjetivo of row.objetivos\" class=\"objetivo d-flex align-items-center\">\r\n                            <button class=\"btn btn-sm btn-outline-info me-2\" (click)=\"showPlanejamento(pObjetivo.objetivo.planejamento_id)\"><i class=\"bi bi-eye\"></i></button>\r\n                            <small>{{pObjetivo.objetivo.nome}}</small>\r\n                        </div>\r\n                    </separator>\r\n                    <separator [title]=\"lex.translate('Processos')\" *ngIf=\"row.processos?.length\" collapse [collapsed]=\"true\">\r\n                        <div *ngFor=\"let pProcesso of row.processos\" class=\"objetivo d-flex align-items-center\">\r\n                            <button class=\"btn btn-sm btn-outline-info me-2\" (click)=\"showCadeiaValor(pProcesso.processo.cadeia_valor_id)\"><i class=\"bi bi-eye\"></i></button>\r\n                            <small>{{pProcesso.processo.nome}}</small>\r\n                        </div>\r\n                    </separator>\r\n                </ng-template>\r\n            </column>\r\n        </columns>\r\n    </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Ocorrências')\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\">\r\n    <grid [items]=\"itemsOcorrencias\" [minHeight]=\"0\" #gridOcorrencia [form]=\"formOcorrencia\" \r\n        [hasDelete]=\"!disabled\" [hasAdd]=\"!disabled\" [hasEdit]=\"!disabled\"\r\n        [add]=\"addOcorrencia.bind(this)\" [load]=\"loadOcorrencia.bind(this)\" \r\n        [remove]=\"removeOcorrencia.bind(this)\" [save]=\"saveOcorrencia.bind(this)\" editable>\r\n        <columns>\r\n            <column title=\"Início\" [width]=\"300\" type=\"datetime\" field=\"data_inicio\"></column>\r\n            <column title=\"Fim\" [width]=\"300\" type=\"datetime\" field=\"data_fim\"></column>\r\n            <column title=\"Descrição\" type=\"textarea\" field=\"descricao\"></column>\r\n            <column type=\"options\" [dynamicButtons]=\"ocorrenciaDynamicButtons.bind(this)\"></column>\r\n        </columns>\r\n    </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Afastamentos')\" [icon]=\"entityService.getIcon('Afastamento')\">\r\n    <grid [items]=\"itemsAfastamentos\" [minHeight]=\"0\" #gridAfastamento [add]=\"addAfastamento.bind(this)\" [hasEdit]=\"false\" [hasDelete]=\"false\" [hasAdd]=\"!disabled\" editable>\r\n        <columns>\r\n            <column title=\"Início\" [width]=\"300\" type=\"datetime\" field=\"data_inicio\"></column>\r\n            <column title=\"Fim\" [width]=\"300\" type=\"datetime\" field=\"data_fim\"></column>\r\n            <column title=\"Motivo/Observação\" [template]=\"columnMotivoObservacao\">\r\n                <ng-template let-row=\"row\" #columnMotivoObservacao>\r\n                    <badge [color]=\"row.tipo_motivo_afastamento.cor\" [icon]=\"row.tipo_motivo_afastamento.icone\" [label]=\"row.tipo_motivo_afastamento.nome\"></badge>\r\n                    {{row.observacao}}\r\n                </ng-template>\r\n            </column>\r\n            <column type=\"options\" [dynamicButtons]=\"afastamentoDynamicButtons.bind(this)\"></column>\r\n        </columns>\r\n    </grid>\r\n</separator>\r\n<separator collapse [collapsed]=\"false\" [title]=\"lex.translate('Comparecimentos')\" [icon]=\"entityService.getIcon('Comparecimento')\">\r\n    <grid [items]=\"itemsComparecimentos\" [minHeight]=\"0\" #gridComparecimento [form]=\"formComparecimento\" \r\n        [hasDelete]=\"!disabled\" [hasAdd]=\"!disabled\" [hasEdit]=\"!disabled\"\r\n        [add]=\"addComparecimento.bind(this)\" [load]=\"loadComparecimento.bind(this)\" \r\n        [remove]=\"removeComparecimento.bind(this)\" [save]=\"saveComparecimento.bind(this)\" editable>\r\n        <columns>\r\n            <column title=\"Data\" [width]=\"300\" type=\"date\" field=\"data_comparecimento\"></column>\r\n            <column title=\"Unidade\" [template]=\"columnUnidade\" [editTemplate]=\"editUnidade\">\r\n                <ng-template let-row=\"row\" #columnUnidade>\r\n                    <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"row.unidade.sigla\" [textValue]=\"row.unidade.nome\" color=\"success\"></badge>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidade>\r\n                    <input-search label icon [size]=\"6\" #unidade controlName=\"unidade_id\" [dao]=\"unidadeDao\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column title=\"Detalhamento\" type=\"text\" field=\"detalhamento\"></column>\r\n            <column type=\"options\" [dynamicButtons]=\"comparecimentoDynamicButtons.bind(this)\"></column>\r\n        </columns>\r\n    </grid>\r\n</separator>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { ChangeDetectorRef, Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { ConsolidacaoDados, PlanoTrabalhoConsolidacaoDaoService } from 'src/app/dao/plano-trabalho-consolidacao-dao.service';\r\nimport { PlanoTrabalhoConsolidacao, PlanoTrabalhoConsolidacaoStatus } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { PlanoTrabalhoConsolidacaoFormComponent } from '../plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { Avaliacao } from 'src/app/models/avaliacao.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { AvaliacaoDaoService } from 'src/app/dao/avaliacao-dao.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-consolidacao-list',\r\n  templateUrl: './plano-trabalho-consolidacao-list.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao-list.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoListComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n\r\n  public get items(): PlanoTrabalhoConsolidacao[] {\r\n    return this.entity?.consolidacoes || [];\r\n  }\r\n\r\n  public dao?: PlanoTrabalhoConsolidacaoDaoService;\r\n  public avaliacaoDao: AvaliacaoDaoService;\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    /* Inicializações */\r\n    this.dao = injector.get<PlanoTrabalhoConsolidacaoDaoService>(PlanoTrabalhoConsolidacaoDaoService);\r\n    this.avaliacaoDao = injector.get<AvaliacaoDaoService>(AvaliacaoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.title = this.lex.translate(\"Consolidações\");\r\n    this.code = \"MOD_PTR_CSLD\";\r\n    this.modalWidth = 1200;\r\n    this.form = this.fh.FormBuilder({\r\n      'data_inicio': {default: new Date()},\r\n      'data_fim': {default: new Date()}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      if (this.urlParams?.has(\"usuarioId\") && this.urlParams?.has(\"planoTrabalhoId\")) {\r\n        let dados = await this.planoTrabalhoDao!.getByUsuario(this.urlParams!.get(\"usuarioId\")!, true, this.urlParams!.get(\"planoTrabalhoId\")!);\r\n        if (dados.planos.length == 1) this.entity = dados.planos[0];\r\n      }\r\n      let agora = (new Date()).getTime();\r\n      this.items.forEach(v => {\r\n        if(!v.plano_trabalho) v.plano_trabalho = this.entity;\r\n        if(this.util.asTimestamp(v.data_inicio) <= agora && agora <= this.util.asTimestamp(v.data_fim)) this.grid!.expand(v.id);\r\n      });\r\n    })();\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    // TODO: Validar data\r\n    return result;\r\n  }\r\n\r\n  public async addConsolidacao() {\r\n    return new PlanoTrabalhoConsolidacao({\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity!.id\r\n    });\r\n  }\r\n\r\n  public async loadConsolidacao(form: FormGroup, row: any) {\r\n    this.form!.patchValue({\r\n      data_inicio: row.data_inicio,\r\n      data_fim: row.data_fim\r\n    });    \r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async removeConsolidacao(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir o item ?\");\r\n    if (confirm) {\r\n      try {\r\n        let consolidacao = row as PlanoTrabalhoConsolidacao;\r\n        await this.dao?.delete(consolidacao);\r\n        this.items.splice(this.items.findIndex(x => x.id == consolidacao.id), 1);\r\n        return true;\r\n      } catch {\r\n        return false;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveConsolidacao(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    this.form!.markAllAsTouched();\r\n    if (this.form!.valid) {\r\n      row.id = row.id == \"NEW\" ? this.dao!.generateUuid() : row.id;\r\n      row.data_inicio = form.controls.data_inicio.value;\r\n      row.data_fim = form.controls.data_fim.value;\r\n      result = await this.dao?.save(row);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public refreshConsolidacao(consolidacao: PlanoTrabalhoConsolidacao, dados?: ConsolidacaoDados) {\r\n    if(dados && consolidacao._metadata?.planoTrabalhoConsolidacaoFormComponent) {\r\n      let consolidacaoForm = consolidacao._metadata?.planoTrabalhoConsolidacaoFormComponent as PlanoTrabalhoConsolidacaoFormComponent;\r\n      consolidacaoForm.loadConsolidacao(dados);\r\n    } else {\r\n      this.grid!.refreshExpanded(consolidacao.id);\r\n    }\r\n    this.grid!.refreshRows();\r\n  }\r\n\r\n  public async concluir(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.submitting = true;\r\n    try {\r\n      let response = await this.dao!.concluir(consolidacao.id);\r\n      consolidacao.status = response.status as PlanoTrabalhoConsolidacaoStatus;\r\n      this.refreshConsolidacao(consolidacao, response);\r\n    } catch (error: any) {\r\n      this.error(error.message || error);\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  public async cancelarConclusao(consolidacao: PlanoTrabalhoConsolidacao) {\r\n    this.submitting = true;\r\n    try {\r\n      let response = await this.dao!.cancelarConclusao(consolidacao.id);\r\n      consolidacao.status = response.status as PlanoTrabalhoConsolidacaoStatus;\r\n      this.refreshConsolidacao(consolidacao, response);\r\n    } catch (error: any) {\r\n      this.error(error.message || error);\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  public anterior(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return this.entity!.consolidacoes.reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_inicio) < this.util.asTimestamp(consolidacao.data_inicio) && (!a || this.util.asTimestamp(a.data_inicio) < this.util.asTimestamp(v.data_inicio)) ? v : a, undefined);\r\n  }\r\n\r\n  public proximo(consolidacao: PlanoTrabalhoConsolidacao): PlanoTrabalhoConsolidacao | undefined {\r\n    return this.entity!.consolidacoes.reduce((a: PlanoTrabalhoConsolidacao | undefined, v: PlanoTrabalhoConsolidacao) => this.util.asTimestamp(v.data_fim) > this.util.asTimestamp(consolidacao.data_fim) && (!a || this.util.asTimestamp(a.data_fim) > this.util.asTimestamp(v.data_fim)) ? v : a, undefined);\r\n  }\r\n\r\n  public isDisabled(row?: PlanoTrabalhoConsolidacao): boolean {\r\n    return (row && row.status != \"INCLUIDO\") || this.entity?.status != \"ATIVO\";\r\n  }\r\n\r\n  public dynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let consolidacao: PlanoTrabalhoConsolidacao = row as PlanoTrabalhoConsolidacao;\r\n    const usuarioId = consolidacao!.plano_trabalho?.usuario_id;\r\n    const unidadeId = this.entity!.unidade_id;\r\n    const anterior = this.anterior(row as PlanoTrabalhoConsolidacao);\r\n    const proximo = this.proximo(row as PlanoTrabalhoConsolidacao);\r\n    const isAvaliador = this.auth.hasPermissionTo(\"MOD_PTR_CSLD_AVAL\") && (this.auth.isGestorUnidade(unidadeId) || this.auth.isIntegrante('AVALIADOR_PLANO_TRABALHO', unidadeId));\r\n    const isUsuarioDoPlano = this.auth.usuario!.id == usuarioId;\r\n    const BOTAO_CONCLUIR = { hint: \"Concluir\", icon: \"bi bi-check-circle\", color: \"btn-outline-success\", onClick: this.concluir.bind(this) };\r\n    const BOTAO_CANCELAR_CONCLUSAO = { hint: \"Cancelar conclusão\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: this.cancelarConclusao.bind(this) };\r\n    const BOTAO_AVALIAR = { hint: \"Avaliar\", icon: \"bi bi-star\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, this.entity!.programa!, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_REAVALIAR = { hint: \"Reavaliar\", icon: \"bi bi-star-half\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.avaliar(row, this.entity!.programa!, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_FAZER_RECURSO = { hint: \"Fazer recurso\", id: \"RECORRIDO\", icon: \"bi bi-journal-medical\", color: \"btn-outline-warning\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.fazerRecurso(row, this.entity!.programa!, this.refreshConsolidacao.bind(this)) };\r\n    const BOTAO_CANCELAR_AVALIACAO = { hint: \"Cancelar avaliação\", id: \"INCLUIDO\", icon: \"bi bi-backspace\", color: \"btn-outline-danger\", onClick: (row: PlanoTrabalhoConsolidacao) => this.planoTrabalhoService.cancelarAvaliacao(row, this, this.refreshConsolidacao.bind(this)) };\r\n    /* (RN_CSLD_11) Não pode concluir a consolidação antes que a anterior não esteja concluida, e não pode retornar status da consolidação se a posterior estiver a frente (em status); */\r\n    const canConcluir = !anterior || [\"CONCLUIDO\", \"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarConclusao = !proximo || [\"INCLUIDO\"].includes(proximo!.status);\r\n    const canAvaliar = !anterior || [\"AVALIADO\"].includes(anterior!.status);\r\n    const canCancelarAvaliacao = !proximo || [\"INCLUIDO\", \"CONCLUIDO\"].includes(proximo!.status);\r\n    if(!this.isDisabled()) {\r\n      if(consolidacao.status == \"INCLUIDO\" && canConcluir && (isUsuarioDoPlano || this.auth.hasPermissionTo(\"MOD_PTR_CSLD_CONCL\"))) {\r\n        result.push(BOTAO_CONCLUIR);\r\n      }\r\n      if(consolidacao.status == \"CONCLUIDO\" && canCancelarConclusao && this.planoTrabalhoService.diasParaConcluirConsolidacao(row, this.entity!.programa) >= 0 && (isUsuarioDoPlano || this.auth.hasPermissionTo(\"MOD_PTR_CSLD_DES_CONCL\"))) {\r\n        result.push(BOTAO_CANCELAR_CONCLUSAO);\r\n      }\r\n      if(consolidacao.status == \"CONCLUIDO\" && canAvaliar && isAvaliador) {\r\n        result.push(BOTAO_AVALIAR);\r\n      }\r\n      if(consolidacao.status == \"AVALIADO\" && consolidacao!.avaliacao) {\r\n        /* (RN_AVL_2) [PT] O usuário do plano de trabalho que possuir o acesso MOD_PTR_CSLD_REC_AVAL poderá recorrer da nota atribuida dentro do limites estabelecido pelo programa; */\r\n        if(isUsuarioDoPlano && this.auth.hasPermissionTo('MOD_PTR_CSLD_REC_AVAL') && consolidacao!.avaliacao?.data_avaliacao && \r\n          (!this.entity!.programa!.dias_tolerancia_recurso_avaliacao || \r\n          (this.util.daystamp(consolidacao!.avaliacao!.data_avaliacao) + this.entity!.programa!.dias_tolerancia_recurso_avaliacao > this.util.daystamp(this.auth.hora)))) {\r\n          result.push(BOTAO_FAZER_RECURSO);\r\n        }\r\n        /* (RN_AVL_3) [PT] Após o recurso será realizado nova avaliação, podendo essa ser novamente recorrida dentro do mesmo prazo estabelecido no programa; */\r\n        /* (RN_AVL_6) [PT] Qualquer usuário capaz de avaliar tambem terá a capacidade de cancelar a avaliação; */\r\n        if(canAvaliar && isAvaliador) {\r\n          result.push(BOTAO_REAVALIAR);\r\n          if(canCancelarAvaliacao) result.push(BOTAO_CANCELAR_AVALIACAO);\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n}\r\n","<grid [items]=\"items\" #grid [form]=\"form!\" [hasDelete]=\"true\" [minHeight]=\"0\"\r\n    [add]=\"addConsolidacao.bind(this)\" [hasAdd]=\"!isDisabled()\" [hasEdit]=\"false\" [hasDelete]=\"false\" editable>\r\n    <columns>\r\n        <column type=\"expand\" [icon]=\"entityService.getIcon('PlanoTrabalhoConsolidacao')\" [align]=\"'center'\" [hint]=\"lex.translate('Consolidação')\" [template]=\"columnConsolidacao\" [expandTemplate]=\"columnExpandedConsolidacao\">\r\n            <ng-template let-row=\"row\" #columnConsolidacao>\r\n                <!--span *ngIf=\"row?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row?.length}}</span//-->\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnExpandedConsolidacao>\r\n                <plano-trabalho-consolidacao-form #consolidacao [disabled]=\"isDisabled(row)\" [entity]=\"row\" [planoTrabalho]=\"entity\" [cdRef]=\"cdRef\"></plano-trabalho-consolidacao-form>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Data início\" [template]=\"columnDataInicio\">\r\n            <ng-template let-row=\"row\" #columnDataInicio>\r\n                {{util.getDateFormatted(row.data_inicio)}}\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Data fim\" [template]=\"columnDataFim\">\r\n            <ng-template let-row=\"row\" #columnDataFim>\r\n                {{util.getDateFormatted(row.data_fim)}}\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Estatísticas/Avaliações\" [template]=\"columnEstatisticas\" [width]=\"300\">\r\n            <ng-template let-row=\"row\" #columnEstatisticas>\r\n                <avaliar-nota-badge *ngIf=\"row.avaliacao\" [align]=\"'left'\" [tipoAvaliacao]=\"row.avaliacao.tipo_avaliacao || this.entity!.programa!.tipo_avaliacao_plano_trabalho\" [nota]=\"row.avaliacao.nota\"></avaliar-nota-badge>\r\n                <separator *ngIf=\"row.avaliacao?.recurso?.length\" title=\"Recurso da avaliação\" collapse [collapsed]=\"false\">\r\n                    <small>{{row.avaliacao.recurso}}</small>\r\n                </separator>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Status\" [template]=\"columnStatus\">\r\n            <ng-template let-row=\"row\" #columnStatus>\r\n                <div class=\"one-per-line\">\r\n                    <badge [color]=\"lookup.getColor(lookup.CONSOLIDACAO_STATUS, row.status)\" [icon]=\"lookup.getIcon(lookup.CONSOLIDACAO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.CONSOLIDACAO_STATUS, row.status)\"></badge>\r\n                    <badge *ngIf=\"row.avaliacao?.recurso?.length\" icon=\"bi bi-journal-medical\" color=\"warning\" label=\"Recorrido\"></badge>\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\" [dynamicButtons]=\"dynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n</grid>","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageBase } from 'src/app/modules/base/page-base';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\n@Component({\r\n  selector: 'app-plano-trabalho-consolidacao',\r\n  templateUrl: './plano-trabalho-consolidacao.component.html',\r\n  styleUrls: ['./plano-trabalho-consolidacao.component.scss']\r\n})\r\nexport class PlanoTrabalhoConsolidacaoComponent extends PageFrameBase {\r\n  @ViewChild(TabsComponent, { static: false }) public tabs?: TabsComponent;\r\n\r\n  public usuarios: Usuario[] = [];\r\n  public unidade?: Unidade;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public loadingUnidade: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      arquivados: { default: false }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    this.tabs!.active = this.queryParams?.tab || \"USUARIO\";\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.unidade = this.auth.unidadeGestor();\r\n    if(this.unidade) {\r\n      this.usuarios = [];\r\n      this.loadingUnidade = true;\r\n      this.cdRef.detectChanges()\r\n      try {\r\n        this.usuarios = await this.unidadeDao.lotados(this.unidade.id);\r\n      } finally {\r\n        this.loadingUnidade = false;\r\n        this.cdRef.detectChanges()\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","<tabs right #tabs [title]=\"isModal ? '' : title\">\r\n    <tab key=\"UNIDADE\" *ngIf=\"unidade\" [icon]=\"entityService.getIcon('Unidade')\" [label]=\"lex.translate('Unidade')\" [template]=\"tabUnidade\">\r\n        <ng-template #tabUnidade>\r\n            <h5>{{unidade.sigla}} - {{unidade.nome}}</h5>\r\n            <div *ngIf=\"loading\" class=\"d-flex justify-content-center my-2\">\r\n                <div class=\"spinner-border\" role=\"status\">\r\n                    <span class=\"visually-hidden\"></span>\r\n                </div>\r\n            </div>\r\n            <collapse-card *ngFor=\"let usuario of usuarios\" [data]=\"usuario\" [titleTemplate]=\"usuarioCardTitle\" [template]=\"usuarioCard\">\r\n                <ng-template let-data=\"data\" #usuarioCardTitle>\r\n                    <div class=\"d-flex\">\r\n                        <div class=\"ms-3\">\r\n                            <profile-picture [url]=\"data.url_foto\" [size]=\"40\" [hint]=\"data.nome\"></profile-picture>\r\n                        </div>\r\n                        <div class=\"flex-fill ms-3\">\r\n                            <strong>{{data.nome || \"\"}}</strong><br>\r\n                            <small>{{data.apelido || \"\"}}</small>\r\n                        </div>\r\n                    </div>\r\n                </ng-template>\r\n                <ng-template let-data=\"data\" #usuarioCard>\r\n                    <plano-trabalho-list-accordeon [usuarioId]=\"data.id\"></plano-trabalho-list-accordeon>\r\n                </ng-template>\r\n            </collapse-card>\r\n        </ng-template>\r\n    </tab>\r\n    <tab key=\"USUARIO\" [icon]=\"entityService.getIcon('Usuario')\" [label]=\"lex.translate('Usuário')\" [template]=\"tabUsuario\">\r\n        <ng-template #tabUsuario>\r\n            <separator [control]=\"form!.controls.arquivados\" [title]=\"'Mostrar ' + lex.translate('Planos de trabalho') + ' arquivados?'\"></separator>\r\n            <plano-trabalho-list-accordeon [usuarioId]=\"auth.usuario!.id\" [arquivados]=\"form!.controls.arquivados.value\"></plano-trabalho-list-accordeon>\r\n        </ng-template>\r\n    </tab>\r\n</tabs>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoDocumentoDaoService } from 'src/app/dao/tipo-documento-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { SeiKeys } from 'src/app/listeners/procedimento-trabalhar/procedimento-trabalhar.component';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoDocumento } from 'src/app/models/tipo-documento.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NavigateResult } from 'src/app/services/navigate.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form-termo',\r\n  templateUrl: './plano-trabalho-form-termo.component.html',\r\n  styleUrls: ['./plano-trabalho-form-termo.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormTermoComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('tipoDocumento', { static: false }) public tipoDocumento?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n\r\n  public unidadeDao: UnidadeDaoService;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public tipoDocumentoDao: TipoDocumentoDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public processo?: SeiKeys;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\"unidade\", \"usuario\", \"programa.template_tcr\", \"tipo_modalidade\", \"documento\", \"documentos\", \"atividades.atividade\"];\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.tipoDocumentoDao = injector.get<TipoDocumentoDaoService>(TipoDocumentoDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: {default: \"\"},\r\n      tempo_total: {default: \"\"},\r\n      tempo_proporcional: {default: \"\"},\r\n      data_inicio: {default: new Date()},\r\n      data_fim: {default: new Date()},\r\n      programa_id: {default: \"\"},\r\n      usuario_id: {default: \"\"},\r\n      unidade_id: {default: \"\"},\r\n      documento_id: {default: \"\"},\r\n      documentos: {default: []},\r\n      tipo_documento_id: {default: \"\"},\r\n      numero_processo: {default: \"\"},\r\n      vinculadas: {default: true},\r\n      tipo_modalidade_id: {default: \"\"},\r\n      forma_contagem_carga_horaria: {default: \"DIA\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == \"tipo_documento_id\" && !control?.value?.length && this.form?.controls?.numero_processo?.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    if(!this.tipoDocumento?.selectedEntity && form?.controls.tipo_documento_id.value?.length) {\r\n      return \"Aguarde o carregamento do tipo de documento\";\r\n    }\r\n    return undefined;\r\n  } \r\n\r\n  public onVinculadasChange(event: Event) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    await Promise.all ([\r\n      this.unidade!.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.usuario!.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.programa!.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade!.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    if(this.processo) {\r\n      formValue.id_processo = this.processo.id_processo;\r\n      formValue.numero_processo = this.processo.numero_processo;\r\n    }\r\n    formValue.data_inicio = this.auth.hora;\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getById(this.metadata.plano_trabalho.id, this.join))!;\r\n    this.processo = this.metadata?.processo;\r\n    await this.loadData(this.entity!, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<NavigateResult | undefined> {\r\n    return new Promise<NavigateResult | undefined>((resolve, reject) => {\r\n      //if(this.processo) {\r\n      resolve(new NavigateResult(Object.assign(this.form!.value, {\r\n        /* TODO Gerar documento do TCR\r\n        termo: this.termo!.conteudo,\r\n        atividades_termo_adesao: this.termo!.atividades.map((x: { nome: string; }) => this.util.removeAcentos(x.nome.toLowerCase())),*/\r\n        codigo_tipo_documento: (this.tipoDocumento?.selectedEntity as TipoDocumento)?.codigo\r\n      })));\r\n      /*} else {\r\n        const documento = Object.assign(new Documento(), {\r\n          especie: \"TERMO_ADESAO\",\r\n          conteudo: this.termo!.conteudo,\r\n          plano_id: this.entity!.id,\r\n          status: \"GERADO\"\r\n        });\r\n        this.documentoDao.save(documento).then(doc => resolve(undefined)).catch(reject);\r\n      }*/\r\n    });\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria?.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"TCR\") + ' ' + this.lex.translate(\"do Plano de Trabalho\") + ': ' + (entity?.usuario?.nome || \"\");\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [title]=\"isModal ? '' : title\" initialFocus=\"programa_id\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <separator [title]=\"lex.translate('Plano de trabalho')\" collapse [collapsed]=\"false\">\r\n        <div class=\"row\">\r\n            <input-search #programa [size]=\"6\" disabled controlName=\"programa_id\" [dao]=\"programaDao\"></input-search>\r\n            <input-search #usuario [size]=\"6\" disabled  controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-search #unidade [size]=\"5\" disabled controlName=\"unidade_id\" [dao]=\"unidadeDao\" ></input-search>\r\n            <input-search #tipoModalidade disabled [size]=\"3\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\"></input-search>\r\n            <input-text numbers disabled [size]=\"2\" label=\"% prod.\" icon=\"bi bi-hourglass-split\" controlName=\"ganho_produtividade\" [control]=\"form!.controls.ganho_produtividade\" [labelInfo]=\"'Percentual de ganho de produtividade (Será descontado do ' + lex.translate('tempo pactuado')+')'\" [attr.maxlength]=250></input-text>\r\n            <input-display [size]=\"2\" label=\"H. Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-display>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-datetime [size]=\"3\" disabled label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Início da Vigência do Programa\"></input-datetime>\r\n            <input-datetime [size]=\"3\" disabled label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim\" [control]=\"form!.controls.data_fim\" labelInfo=\"Final da Vigência do Programa\"></input-datetime>\r\n            <input-workload [size]=\"3\" disabled [unit]=\"formaContagemCargaHoraria\" label=\"C. Horária\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" [labelInfo]=\"'Carga horária' + lex.translate('do usuário')\"></input-workload>\r\n            <input-display [size]=\"3\" label=\"H. Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas úteis de trabalho no período de vigência considerando a carga horária, feriados e fins de semana\"></input-display>\r\n        </div>\r\n    </separator>\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"3\" disabled label=\"Data e hora\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Data de cadastro do termo\"></input-datetime>\r\n        <input-text [label]=\"'Número ' + lex.translate('Processo')\" [size]=\"3\" controlName=\"numero_processo\" [control]=\"form!.controls.numero_processo\" disabled labelInfo=\"Número do processo, com a formatação de origem\" [attr.maxlength]=250></input-text>\r\n        <input-search [size]=\"4\" #tipoDocumento [disabled]=\"!form!.controls.numero_processo.value?.length ? 'true' : undefined\" controlName=\"tipo_documento_id\" [dao]=\"tipoDocumentoDao\" required></input-search>\r\n        <input-switch label=\"Vinculadas\" [disabled]=\"entity?.atividades?.length ? 'true' : undefined\" [size]=\"2\" controlName=\"vinculadas\" [control]=\"form!.controls.vinculadas\" (change)=\"onVinculadasChange($event)\" labelInfo=\"Se inclui as atividades das unidades vinculadas a unidade do plano\"></input-switch>\r\n    </div>\r\n    <!--separator title=\"Pré-visualização do termo de adesão\" collapse [collapsed]=\"true\">\r\n        <plano-termo-adesao #termo [plano]=\"entity\" [vinculadas]=\"!!form?.controls?.vinculadas?.value\"></plano-termo-adesao>\r\n    </separator/-->\r\n</editable-form>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Documento } from 'src/app/models/documento.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { TipoModalidade } from 'src/app/models/tipo-modalidade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { DocumentoService } from 'src/app/modules/uteis/documentos/documento.service';\r\nimport { DocumentosComponent } from 'src/app/modules/uteis/documentos/documentos.component';\r\nimport { CalendarService, Efemerides } from 'src/app/services/calendar.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { TemplateDataset, TemplateService } from 'src/app/modules/uteis/templates/template.service';\r\nimport { Template } from 'src/app/models/template.model';\r\nimport { UtilService } from 'src/app/services/util.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form',\r\n  templateUrl: './plano-trabalho-form.component.html',\r\n  styleUrls: ['./plano-trabalho-form.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('gridDocumentos', { static: false }) public gridDocumentos?: GridComponent;\r\n  @ViewChild('tabs', { static: false }) public tabs?: TabsComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('atividade', { static: false }) public atividade?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @ViewChild('documentos', { static: false }) public documentos?: DocumentosComponent;\r\n\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public documentoService: DocumentoService;\r\n  public templateService: TemplateService;\r\n  public utilService: UtilService;\r\n  public allPages: ListenerAllPagesService;\r\n  public calendar: CalendarService;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public horasTotais?: Efemerides;\r\n  public horasParciais?: Efemerides;\r\n  public planoDataset: TemplateDataset[];\r\n  public joinPrograma: string[];\r\n  public entregas: LookupItem[] = [];\r\n  public planoTrabalho?: PlanoTrabalho;\r\n  public datasource: any;\r\n  public template?: Template;\r\n  public editingId?: string;\r\n  public gestoresUnidadeExecutora: string[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\r\n      \"unidade.entidade\", \r\n      \"entregas.entrega\", \r\n      \"entregas.plano_entrega_entrega:id,plano_entrega_id\", \r\n      \"usuario\", \r\n      \"programa.template_tcr\", \r\n      \"tipo_modalidade\", \r\n      \"documento\", \r\n      \"documentos.assinaturas.usuario:id,nome,apelido\", \r\n      \"entregas.plano_entrega_entrega.entrega\",\r\n      \"entregas.plano_entrega_entrega.plano_entrega.unidade:id,nome,sigla\",\r\n      'entregas.reacoes.usuario:id,nome,apelido'\r\n    ];\r\n    this.joinPrograma = [\"template_tcr\"];\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.documentoService = injector.get<DocumentoService>(DocumentoService);\r\n    this.templateService = injector.get<TemplateService>(TemplateService);\r\n    this.utilService = injector.get<UtilService>(UtilService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.modalWidth = 1300;\r\n    this.planoDataset = this.dao!.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: { default: \"\" },\r\n      tempo_total: { default: \"\" },\r\n      tempo_proporcional: { default: \"\" },\r\n      data_inicio: { default: new Date() },\r\n      data_fim: { default: new Date() },\r\n      usuario_id: { default: \"\" },\r\n      unidade_id: { default: \"\" },\r\n      programa_id: { default: \"\" },\r\n      documento_id: { default: null },\r\n      documentos: { default: [] },\r\n      atividades: { default: [] },\r\n      entregas: { default: [] },\r\n      tipo_modalidade_id: { default: \"\" },\r\n      forma_contagem_carga_horaria: { default: \"DIA\" },\r\n      editar_texto_complementar_unidade: { default: false },\r\n      editar_texto_complementar_usuario: { default: false },\r\n      unidade_texto_complementar: { default: \"\" },\r\n      usuario_texto_complementar: { default: \"\" },\r\n      criterios_avaliacao: { default: [] },\r\n      criterio_avaliacao: { default: \"\" }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public ngOnInit() {\r\n    super.ngOnInit();\r\n    const segment = (this.url ? this.url[this.url.length - 1]?.path : \"\") || \"\";\r\n    this.action = [\"termos\"].includes(segment) ? segment : this.action;\r\n    this.buscaGestoresUnidadeExecutora(this.entity?.unidade ?? null);\r\n  }\r\n\r\n  public atualizarTcr() {\r\n    this.entity = this.loadEntity();\r\n    let textoUsuario = this.form!.controls.usuario_texto_complementar.value;\r\n    let textoUnidade = this.form!.controls.unidade_texto_complementar.value;\r\n    let documento = this.planoTrabalhoService.atualizarTcr(this.planoTrabalho!, this.entity!, textoUsuario, textoUnidade);\r\n    this.form?.controls.documento_id.setValue(documento?.id);\r\n    this.form?.controls.documentos.setValue(this.entity!.documentos);\r\n    this.datasource = documento?.datasource || {};\r\n    this.template = this.entity.programa?.template_tcr;\r\n    this.editingId = [\"ADD\", \"EDIT\"].includes(documento?._status || \"\") ? documento!.id : undefined;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public get isTermos(): boolean {\r\n    return this.action == \"termos\";\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['unidade_id', 'programa_id', 'usuario_id', 'tipo_modalidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if (['carga_horaria'].indexOf(controlName) >= 0 && !control.value) {\r\n      result = \"Valor não pode ser zero.\";\r\n    } else if (['data_inicio', 'data_fim'].includes(controlName) && !this.util.isDataValid(control.value)) {\r\n      result = \"Inválido\";\r\n    } else if (controlName == 'data_fim' && this.util.isDataValid(this.form?.controls.data_inicio.value) && this.util.asTimestamp(control.value) < this.util.asTimestamp(this.form!.controls.data_inicio.value)) {\r\n      result = \"Menor que o início\";\r\n    } else if (this.programa && controlName == 'data_inicio' && (control.value as Date).getTime() < this.programa!.selectedEntity?.data_inicio.getTime()) {\r\n      result = \"Menor que programa\";\r\n    } else if (this.programa && controlName == 'data_fim' && (control.value as Date).getTime() > this.programa!.selectedEntity?.data_fim.getTime()) {\r\n      result = \"Maior que programa\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = async (form?: FormGroup) => {\r\n    let result = \"\";\r\n    return result;\r\n    // TODO:\r\n    // Validar se as entregas pertencem ao plano de entregas da unidade\r\n  };\r\n\r\n  public onUnidadeSelect(selected: SelectItem) {\r\n    let unidade = this.unidade?.selectedEntity as Unidade;\r\n    this.entity!.unidade = unidade;\r\n    this.entity!.unidade_id = unidade.id;\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\");\r\n    this.form!.controls.unidade_texto_complementar.setValue(unidade?.texto_complementar_plano || \"\");\r\n    this.unidadeDao.getById(unidade.id, ['gestor:id,usuario_id','gestor_substituto:id,usuario_id','gestor_delegado:id,usuario_id']).then( unidade => {\r\n      this.buscaGestoresUnidadeExecutora(unidade);\r\n    });\r\n  }\r\n\r\n  public onProgramaSelect(selected: SelectItem) {\r\n    let programa = selected.entity as Programa;\r\n    this.entity!.programa_id = programa.id;\r\n    this.entity!.programa = programa;\r\n    this.form?.controls.criterios_avaliacao.setValue(programa.plano_trabalho_criterios_avaliacao || []);\r\n    this.form?.controls.data_inicio.updateValueAndValidity();\r\n    this.form?.controls.data_fim.updateValueAndValidity();\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onUsuarioSelect(selected: SelectItem) {\r\n    this.form!.controls.usuario_texto_complementar.setValue((selected.entity as Usuario)?.texto_complementar_plano || \"\");\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onDataInicioChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onDataFimChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onCargaHorariaChenge(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public calculaTempos() {\r\n    const inicio = this.form?.controls.data_inicio.value;\r\n    const fim = this.form?.controls.data_fim.value;\r\n    const carga = this.form?.controls.carga_horaria.value || 8;\r\n    const usuario = this.usuario?.selectedEntity as Usuario;\r\n    const unidade = this.unidade?.selectedEntity as Unidade;\r\n    if (usuario && unidade && this.util.isDataValid(inicio) && this.util.isDataValid(fim) && this.util.asTimestamp(inicio) < this.util.asTimestamp(fim)) {\r\n      this.calendar.loadFeriadosCadastrados(unidade.id).then((feriados) => {\r\n        this.horasTotais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, unidade, \"ENTREGA\", [], []);\r\n        this.horasParciais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, unidade, \"ENTREGA\", [], usuario.afastamentos);\r\n        this.form?.controls.tempo_total.setValue(this.horasTotais.tempoUtil);\r\n        this.form?.controls.tempo_proporcional.setValue(this.horasParciais.tempoUtil);\r\n      });\r\n    }\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    this.planoTrabalho = new PlanoTrabalho(entity);\r\n    await Promise.all([\r\n      this.calendar.loadFeriadosCadastrados(entity.unidade_id),\r\n      this.usuario?.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.unidade?.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.programa?.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade?.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    let formValue = Object.assign({}, form.value);\r\n    form.patchValue(this.util.fillForm(formValue, entity));\r\n    /*let documento = entity.documentos.find(x => x.id == entity.documento_id);\r\n    if(documento) this._datasource = documento.datasource;*/\r\n    this.calculaTempos();\r\n    this.atualizarTcr();\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    if (this.isTermos) {\r\n      this.entity = (await this.dao!.getById(this.urlParams!.get(\"id\")!, this.join))!;\r\n    } else {\r\n      this.entity = new PlanoTrabalho();\r\n      this.entity.carga_horaria = this.auth.entidade?.carga_horaria_padrao || 8;\r\n      this.entity.forma_contagem_carga_horaria = this.auth.entidade?.forma_contagem_carga_horaria || \"DIA\";\r\n    }\r\n    await this.loadData(this.entity, this.form!);\r\n  }\r\n\r\n  /* Cria um objeto Plano baseado nos dados do formulário */\r\n  public loadEntity(): PlanoTrabalho {\r\n    let plano: PlanoTrabalho = this.util.fill(new PlanoTrabalho(), this.entity!);\r\n    plano = this.util.fillForm(plano, this.form!.value);\r\n    plano.usuario = (this.usuario!.selectedEntity || this.entity?.usuario) as Usuario;\r\n    plano.unidade = (this.unidade?.selectedEntity || this.entity?.unidade) as Unidade;\r\n    plano.programa = (this.programa?.selectedEntity || this.entity?.programa) as Programa;\r\n    plano.tipo_modalidade = (this.tipoModalidade!.selectedEntity || this.entity?.tipo_modalidade) as TipoModalidade;\r\n    return plano;\r\n  }\r\n\r\n  public async saveData(form: IIndexable): Promise<PlanoTrabalho | boolean> {\r\n    //let plano = this.loadEntity();\r\n    /* Atualiza o documento */\r\n    this.atualizarTcr();\r\n    /* Confirma dados do documento */\r\n    this.documentos?.saveData();\r\n    this.entity!.documentos = this.entity!.documentos.filter((documento: Documento) => {\r\n      return [\"ADD\", \"EDIT\", \"DELETE\"].includes(documento._status || \"\");\r\n    });\r\n    /* Salva separadamente as informações do plano */\r\n    this.submitting = true;\r\n    try {\r\n      let requests: Promise<any>[] = [this.dao!.save(this.entity!, this.join)];\r\n      if (this.form!.controls.editar_texto_complementar_unidade.value) requests.push(this.unidadeDao.update(this.entity!.unidade_id, { texto_complementar_plano: this.form!.controls.unidade_texto_complementar.value }));\r\n      if (this.form!.controls.editar_texto_complementar_usuario.value) requests.push(this.usuarioDao.update(this.entity!.usuario_id, { texto_complementar_plano: this.form!.controls.usuario_texto_complementar.value }));\r\n      let responses = await Promise.all(requests);\r\n      this.entity = responses[0] as PlanoTrabalho;\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public onTabSelect(tab: LookupItem) {\r\n    if (tab.key == \"TERMO\") this.atualizarTcr();\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" + this.lex.translate(\"Plano de Trabalho\") + ': ' + (entity?.usuario?.apelido || \"\");\r\n  }\r\n\r\n  public documentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let documento: Documento = row as Documento;\r\n\r\n    if (this.isTermos && this.planoTrabalhoService.needSign(this.entity, documento)) {\r\n      result.push({ hint: \"Assinar\", icon: \"bi bi-pen\", onClick: this.signDocumento.bind(this) });\r\n    }\r\n    result.push({ hint: \"Preview\", icon: \"bi bi-zoom-in\", onClick: ((documento: Documento) => { this.dialog.html({ title: \"Termo de adesão\", modalWidth: 1000 }, documento.conteudo || \"\"); }).bind(this) });\r\n\r\n    return result;\r\n  }\r\n\r\n  public addItemHandleCriteriosAvaliacao(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form!.controls.criterio_avaliacao.value;\r\n    const key = this.util.textHash(value);\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.criterios_avaliacao.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form!.controls.criterio_avaliacao.value\r\n      };\r\n      this.form!.controls.criterio_avaliacao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public async signDocumento(documento: Documento) {\r\n    await this.documentoService.sign([documento]);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public onFormaContagemCargaHorariaChange(unit: UnitWorkload) {\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unit == \"day\" ? \"DIA\" : unit == \"week\" ? \"SEMANA\" : \"MES\");\r\n  }\r\n\r\n  public isVigente(documento: Documento): boolean {\r\n    return this.form!.controls.documento_id.value == documento.id;\r\n  }\r\n\r\n  public buscaGestoresUnidadeExecutora(unidade: Unidade | null){\r\n    if (unidade) [unidade.gestor?.usuario_id, unidade.gestor_substituto?.usuario_id, unidade!.gestor_delegado?.usuario_id].forEach(gestor => {\r\n      if (gestor) this.gestoresUnidadeExecutora.push(gestor);\r\n    });\r\n    return this.gestoresUnidadeExecutora;\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [noButtons]=\"isTermos ? 'true' : undefined\" initialFocus=\"plano_entrega_id\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <tabs #tabs display right [hidden]=\"isTermos ? 'true' : undefined\" [title]=\"!isModal ? title : ''\" [select]=\"onTabSelect.bind(this)\">\r\n        <tab key=\"DADOS\" label=\"Dados\">\r\n            <div class=\"row\">\r\n                <div class=\"col-md-10\">\r\n                    <div class=\"row\">\r\n                        <!-- (RI_PTR_1) No formulário de inclusão/edição de um plano de trabalho, o input-search de unidade, programa e usuario devem ficar desabilitados nas edições e habilitado apenas nas inclusões; -->\r\n                        <input-search #unidade [size]=\"4\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"unidade_id\" [dao]=\"unidadeDao\" (select)=\"onUnidadeSelect($event)\"></input-search>\r\n                        <input-search #programa [size]=\"4\" required [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"programa_id\" [join]=\"joinPrograma\" [dao]=\"programaDao\" (select)=\"onProgramaSelect($event)\"></input-search>\r\n                        <input-search #usuario [size]=\"4\" required controlName=\"usuario_id\" [dao]=\"usuarioDao\" [join]=\"['afastamentos']\" (select)=\"onUsuarioSelect($event)\"></input-search>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <input-datetime [size]=\"3\" label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" (change)=\"onDataInicioChange($event)\" labelInfo=\"'Início da Vigência do '+ lex.translate('Plano de trabalho')\" required></input-datetime>\r\n                        <input-datetime [size]=\"3\" label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim\" [control]=\"form!.controls.data_fim\" (change)=\"onDataFimChange($event)\" labelInfo=\"'Final da Vigência do ' +lex.translate('Plano de trabalho')\" required></input-datetime>\r\n                        <input-search #tipoModalidade [size]=\"6\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\" required></input-search>\r\n                    </div>\r\n                    <ng-container *ngIf=\"tipoModalidade!.selectedEntity?.plano_trabalho_calcula_horas\">\r\n                        <div class=\"row\">\r\n                            <input-workload [size]=\"4\" [unit]=\"formaContagemCargaHoraria\" label=\"Carga Horária\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" [unitChange]=\"onFormaContagemCargaHorariaChange.bind(this)\" (change)=\"onCargaHorariaChenge($event)\" labelInfo=\"Carga horária do usuário (Máx.: diária 24 horas; semana 24*5=240 horas; mensal 24*20=480 horas)\" required></input-workload>\r\n                            <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas úteis de trabalho no período de vigência considerando a carga horária, feriados e fins de semana\"></input-timer>\r\n                            <input-timer onlyHours disabled [size]=\"4\" label=\"Horas Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-timer>\r\n                        </div>\r\n                        <separator *ngIf=\"horasTotais\" title=\"Cálculos das horas totais\" collapse>\r\n                            <calendar-efemerides [efemerides]=\"horasTotais\" [partial]=\"false\"></calendar-efemerides>\r\n                        </separator>\r\n                        <separator *ngIf=\"horasParciais\" title=\"Cálculos das horas parciais\" collapse>\r\n                            <calendar-efemerides [efemerides]=\"horasParciais\"></calendar-efemerides>\r\n                        </separator>\r\n                    </ng-container>\r\n                </div>\r\n                <div class=\"col-md-2\">\r\n                    <input-multiselect label=\"Critérios de avaliação\" noBox [maxListHeight]=\"100\" controlName=\"criterios_avaliacao\" [size]=\"12\" [addItemHandle]=\"addItemHandleCriteriosAvaliacao.bind(this)\">\r\n                        <input-text [size]=\"12\" controlName=\"criterio_avaliacao\" [attr.maxlength]=250></input-text>\r\n                    </input-multiselect>\r\n                </div>\r\n            </div>\r\n            <separator [title]=\"lex.translate('Entregas') + lex.translate(' do plano de trabalho')\">\r\n                <top-alert *ngIf=\"!form!.controls.programa_id.value?.length || !form!.controls.unidade_id.value?.length\" type=\"warning\" [message]=\"'Antes de incluir ' + lex.translate('entrega') + ' neste ' + lex.translate('Plano de Trabalho') + ', é necessário selecionar ' + lex.translate('a Unidade') + ' e ' + lex.translate('o Programa') + '!'\"></top-alert>\r\n                <div *ngIf=\"form!.controls.programa_id.value?.length && form!.controls.unidade_id.value?.length\">\r\n                    <plano-trabalho-list-entrega noPersist [disabled]=\"formDisabled\" [entity]=\"entity\"></plano-trabalho-list-entrega>\r\n                </div>\r\n            </separator>\r\n        </tab>\r\n        <!--tab key=\"ENTREGAS\" [label]=\"lex.translate('Entrega', true)\">\r\n            <top-alert *ngIf=\"!form!.controls.plano_entrega_id.value?.length\" type=\"warning\" [message]=\"'Antes de incluir ' + lex.translate('entrega',true) + ' neste ' + lex.translate('Plano de Trabalho') + ', é necessário selecionar um ' + lex.translate('Plano de Entregas') + '!'\"></top-alert>\r\n            <div *ngIf=\"form!.controls.plano_entrega_id.value?.length\">\r\n                <editable-form [form]=\"formEntregas!\"  [noButtons]=\"'true'\">\r\n                    <plano-trabalho-list-entrega noPersist [entity]=\"entity\" [entregasDoPlanoEntrega]=\"entregas\"></plano-trabalho-list-entrega>\r\n                </editable-form>\r\n            </div>\r\n        </tab//-->\r\n        <tab *ngIf=\"checkFilled(['usuario_id'])\" key=\"MENSAGENS\" label=\"Texto Complementar\">\r\n            <separator [title]=\"'Texto complementar da '+ lex.translate('unidade')\">\r\n                <input-switch controlName=\"editar_texto_complementar_unidade\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar na '+ lex.translate('unidade')\"></input-switch>\r\n                <input-editor controlName=\"unidade_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_unidade.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n            </separator>\r\n            <separator title=\"Texto complementar do usuario\">\r\n                <input-switch controlName=\"editar_texto_complementar_usuario\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar do '+ lex.translate('usuário')\"></input-switch>\r\n                <input-editor controlName=\"usuario_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_usuario.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n            </separator>\r\n        </tab>\r\n        <tab *ngIf=\"checkFilled(['usuario_id', 'programa_id', 'tipo_modalidade_id'])\" key=\"TERMO\" label=\"Termo\">\r\n            <!--top-alert *ngIf=\"!isTermos\" type=\"warning\" message=\"Para [INSERIR] ou [ASSINAR] termos escolha opção Termos de adesão na tela de listagem, ou utilize o Sei\"></top-alert/-->\r\n            <div clss=\"row\">\r\n                <documentos #documentos [entity]=\"entity\" [disabled]=\"formDisabled\" noPersist [cdRef]=\"cdRef\" [needSign]=\"planoTrabalhoService.needSign\" [extraTags]=\"planoTrabalhoService.extraTags\" especie=\"TCR\" [editingId]=\"formDisabled ? undefined : editingId\" [datasource]=\"datasource\" [template]=\"programa?.selectedEntity?.template_tcr\"></documentos>\r\n            </div>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>","import { Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { AccordionComponent } from 'src/app/components/accordion/accordion.component';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-accordeon',\r\n  templateUrl: './plano-trabalho-list-accordeon.component.html',\r\n  styleUrls: ['./plano-trabalho-list-accordeon.component.scss']\r\n})\r\nexport class PlanoTrabalhoListAccordeonComponent extends PageFrameBase {\r\n  @ViewChild('accordion', { static: false }) public accordion?: AccordionComponent;\r\n  @Input() usuarioId?: string;\r\n  @Input() set arquivados(value: boolean) {\r\n    if(this._arquivados != value) {\r\n      this._arquivados = value;\r\n      if(this.viewInit) this.loadData(this.entity!, this.form);\r\n    }\r\n  }\r\n  get arquivados(): boolean {\r\n    return this._arquivados;\r\n  }\r\n\r\n  public selectedIndex: number = -1;\r\n  public dao?: PlanoTrabalhoDaoService;\r\n  public planos: PlanoTrabalho[] = [];\r\n\r\n  private _arquivados: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    (async () => {\r\n      await this.loadData(this.entity!, this.form);\r\n    })();\r\n  }\r\n\r\n  public async loadData(entity: IIndexable, form?: FormGroup) {\r\n    this.accordion!.loading = true;\r\n    try {\r\n      let dados = await this.dao!.getByUsuario(this.usuarioId!, this.arquivados);\r\n      let agora = (new Date()).getTime();\r\n      let self = this;\r\n      this.planos = dados.planos;\r\n      for(var i = 0; i < this.planos.length; i++) {\r\n        if(this.util.asTimestamp(this.planos[i].data_inicio) <= agora && agora <= this.util.asTimestamp(this.planos[i].data_fim) && [\"ATIVO\", \"CONCLUIDO\"].includes(this.planos[i].status)) {\r\n          this.selectedIndex = i;\r\n        }\r\n      }\r\n    } finally {\r\n      this.accordion!.loading = false;\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public getPlanoBadges(plano: PlanoTrabalho): BadgeButton[] {\r\n    let result: BadgeButton[] = [];\r\n    let concluidos = plano.consolidacoes.filter(x => x.status == \"CONCLUIDO\");\r\n    let avaliados = plano.consolidacoes.filter(x => x.status == \"AVALIADO\");\r\n    if(concluidos.length) {\r\n      const concluido = this.lookup.getLookup(this.lookup.CONSOLIDACAO_STATUS, \"CONCLUIDO\");\r\n      result.push({\r\n        icon: concluido?.icon,\r\n        label: concluido?.value,\r\n        color: concluido?.color,\r\n        textValue: concluidos.length.toString()\r\n      });\r\n    }\r\n    if(avaliados.length) {\r\n      const avaliado = this.lookup.getLookup(this.lookup.CONSOLIDACAO_STATUS, \"AVALIADO\");\r\n      result.push({\r\n        icon: avaliado?.icon,\r\n        label: avaliado?.value,\r\n        color: avaliado?.color,\r\n        textValue: avaliados.length.toString()\r\n      });\r\n    }\r\n    if(JSON.stringify(plano._metadata?.badges) != this.JSON.stringify(result)) {\r\n      plano._metadata = Object.assign(plano._metadata || {}, { badges: result });\r\n    }\r\n    return plano._metadata.badges;\r\n  }\r\n\r\n}\r\n","<accordion #accordion [items]=\"planos\" [selectedIndex]=\"selectedIndex\" [titleTemplate]=\"planoTrabalhoSectionTitle\" [template]=\"planoTrabalhoSection\">\r\n    <ng-template let-item=\"item\" #planoTrabalhoSectionTitle>\r\n        <div class=\"row w-100\">\r\n            <div class=\"col-md-1\">{{'#' + item.numero}}</div>\r\n            <div class=\"col-md-4\">\r\n                <badge [icon]=\"entityService.getIcon('Unidade')\" [label]=\"item.unidade?.sigla\" color=\"light\" [hint]=\"lex.translate('Unidade') + ': ' + item.unidade?.nome\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('Programa')\" [label]=\"item.programa?.nome\" color=\"light\" [hint]=\"lex.translate('Programa')\"></badge>\r\n                <badge [icon]=\"entityService.getIcon('TipoModalidade')\" [label]=\"item.tipo_modalidade?.nome\" color=\"light\" [hint]=\"lex.translate('Tipo de modalidade')\"></badge>\r\n            </div>\r\n            <div class=\"col-md-3\">\r\n                {{dao!.getDateFormatted(item.data_inicio)+\" até \"+dao!.getDateFormatted(item.data_fim)}}\r\n            </div>\r\n            <div class=\"col-md-2\">\r\n                <badge *ngFor=\"let badge of getPlanoBadges(item)\" [badge]=\"badge\"></badge>\r\n            </div>\r\n            <div class=\"col-md-2\">\r\n                <badge [label]=\"lookup.getValue(lookup.PLANO_TRABALHO_STATUS, item.status)\" [icon]=\"lookup.getIcon(lookup.PLANO_TRABALHO_STATUS, item.status)\" [color]=\"lookup.getColor(lookup.PLANO_TRABALHO_STATUS, item.status)\"></badge>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n    <ng-template let-item=\"item\" #planoTrabalhoSection>\r\n        <plano-trabalho-consolidacao-list [entity]=\"item\"></plano-trabalho-consolidacao-list>\r\n    </ng-template>\r\n</accordion>","import { ChangeDetectorRef, Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { PlanoTrabalhoEntregaDaoService } from 'src/app/dao/plano-trabalho-entrega-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { PlanoEntregaDaoService } from 'src/app/dao/plano-entrega-dao.service';\r\nimport { PlanoEntregaEntregaDaoService } from 'src/app/dao/plano-entrega-entrega-dao.service';\r\nimport { PlanoEntrega } from 'src/app/models/plano-entrega.model';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { PlanoEntregaEntrega } from 'src/app/models/plano-entrega-entrega.model';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-entrega',\r\n  templateUrl: './plano-trabalho-list-entrega.component.html',\r\n  styleUrls: ['./plano-trabalho-list-entrega.component.scss']\r\n})\r\nexport class PlanoTrabalhoListEntregaComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('origem', { static: false }) public origem?: InputSelectComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) { if (this._disabled != value) this._disabled = value; } get disabled(): boolean { return this._disabled; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() cdRef: ChangeDetectorRef;\r\n\r\n  public get items(): PlanoTrabalhoEntrega[] {\r\n    if (!this.gridControl.value) this.gridControl.setValue(new PlanoTrabalho());\r\n    if (!this.gridControl.value.entregas) this.gridControl.value.entregas = [];\r\n    return this.gridControl.value.entregas;\r\n  }\r\n  public options: ToolbarButton[] = [];\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoEntregaDao?: PlanoEntregaDaoService;\r\n  public peeDao?: PlanoEntregaEntregaDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public totalForcaTrabalho: number = 0;\r\n  public entregas: LookupItem[] = [];\r\n\r\n  private _disabled: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoEntregaDaoService>(PlanoTrabalhoEntregaDaoService);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.planoEntregaDao = injector.get<PlanoEntregaDaoService>(PlanoEntregaDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.peeDao = injector.get<PlanoEntregaEntregaDaoService>(PlanoEntregaEntregaDaoService);\r\n    this.join = [\"entrega\", \"plano_entrega_entrega.entrega\", \"plano_entrega_entrega.plano_entrega:id,unidade_id\", \"plano_entrega_entrega.plano_entrega.unidade:id,sigla\"];\r\n    this.form = this.fh.FormBuilder({\r\n      origem: { default: null },\r\n      orgao: { default: null },\r\n      descricao: { default: \"\" },\r\n      forca_trabalho: { default: 1 },\r\n      plano_trabalho_id: { default: null },\r\n      plano_entrega_id: { default: null },\r\n      plano_entrega_entrega_id: { default: null }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a validação dos campos do formulário, por ocasião da edição ou inserção de itens.\r\n   * @param control \r\n   * @param controlName \r\n   * @returns \r\n   */\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && control.value == 1) return result;\r\n    if (['descricao', 'forca_trabalho'].indexOf(controlName) >= 0 && !control.value?.length) result = \"Obrigatório!\";\r\n    if (['forca_trabalho'].indexOf(controlName) >= 0 && (control.value < 1 || control.value > 100)) result = \"Deve estar entre 1 e 100\";\r\n    if (['plano_entrega_entrega_id'].indexOf(controlName) >= 0) {\r\n      if (['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(this.form?.controls.origem.value) && !control.value) result = \"Obrigatório!\";\r\n      if (!!this.entity?.entregas?.filter(e => !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).find(x => x.plano_entrega_entrega_id == control.value)) result = \"Esta entrega está em duplicidade!\"; /* (*2) */\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validateEntregas(): string | undefined {\r\n    let planoInterval = {start: this.entity!.data_inicio, end: this.entity!.data_fim};\r\n    for(let entrega of this.items) {\r\n      let entregaPlano = entrega.plano_entrega_entrega;\r\n      // valida as datas das entregas quando vinculado a uma entrega do plano de entrega\r\n      if(entregaPlano) {\r\n        let entregaDataFim = entregaPlano!.data_fim ? entregaPlano!.data_fim : (entregaPlano!.data_inicio.getTime() <= this.entity!.data_fim.getTime() ? this.entity!.data_fim : undefined);\r\n        let entregaInterval = {start: entregaPlano!.data_inicio, end: entregaPlano!.data_fim || entregaPlano!.data_inicio};\r\n        if(!entregaDataFim || !this.util.intersection([entregaInterval, planoInterval])) {\r\n          return this.lex.translate(\"Entrega\") + \" \" + entregaPlano!.descricao + \" possui datas incompatíveis (início \" + \r\n            this.util.getDateFormatted(entregaPlano!.data_inicio) + (entregaPlano!.data_fim ? \"e fim \" + this.util.getDateFormatted(entregaPlano!.data_fim) : \"\") + \")\";\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente. Neste momento são carregadas as entregas do catálogo e as entregas da mesma unidade do plano de trabalho,\r\n   * visto que esses itens não se alteram durante a vida do componente e poderão ser utilizados durante sua utilização.\r\n   */\r\n  async ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity = this.metadata?.entity || this.entity;\r\n    this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n    this.entity!._metadata = this.entity!._metadata || {};\r\n    this.entity!._metadata.novaEntrega = undefined;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para inserir uma entrega de plano de trabalho no grid, seja este componente persistente ou não.\r\n   * @returns \r\n   */\r\n  public async addEntrega() {\r\n    return Object.assign(new PlanoTrabalhoEntrega(), {\r\n      _status: \"ADD\",\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity?.id\r\n    }) as IIndexable;\r\n  }\r\n\r\n  /**\r\n   * Método utilizado durante a inclusão/alteração de uma entrega de plano de trabalho no grid, seja este componente persistente ou não\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadEntrega(form: FormGroup, row: any) {\r\n    let entrega: PlanoTrabalhoEntrega = row;\r\n    form.controls.descricao.setValue(row.descricao);\r\n    form.controls.forca_trabalho.setValue(row.forca_trabalho);\r\n    form.controls.plano_trabalho_id.setValue(row.plano_trabalho_id);\r\n    form.controls.plano_entrega_entrega_id.setValue(null);\r\n    form.controls.orgao.setValue(null);\r\n    if (entrega._status == \"ADD\") { // É uma nova entrega\r\n      form.controls.origem.setValue('PROPRIA_UNIDADE');\r\n    } else if (entrega.plano_entrega_entrega?.plano_entrega?.unidade_id == this.entity!.unidade_id) {\r\n      form.controls.origem.setValue('PROPRIA_UNIDADE');\r\n      await this.carregarEntregas(entrega.plano_entrega_entrega.plano_entrega_id!);\r\n      form.controls.plano_entrega_entrega_id.setValue(entrega.plano_entrega_entrega_id);\r\n    } else if (entrega.plano_entrega_entrega) {\r\n      form.controls.origem.setValue('OUTRA_UNIDADE');\r\n      await this.carregarEntregas(entrega.plano_entrega_entrega.plano_entrega_id!);\r\n      form.controls.plano_entrega_entrega_id.setValue(entrega.plano_entrega_entrega_id);\r\n    } else if (!!entrega.orgao?.length) { \r\n      form.controls.origem.setValue('OUTRO_ORGAO');\r\n      form.controls.orgao.setValue(entrega.orgao);\r\n    } else {\r\n      form.controls.origem.setValue('SEM_ENTREGA');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a exclusão de uma entrega de plano de trabalho do grid, seja este componente persistente ou não. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeEntrega(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\");\r\n    if (confirm) {\r\n      this.loading = true;\r\n      try {\r\n        this.isNoPersist ? Object.assign(row, { _status: \"DELETE\" }) : await this.dao?.delete(row.id);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      this.totalForcaTrabalho = Math.round((this.totalForcaTrabalho - ((row as PlanoTrabalhoEntrega).forca_trabalho * 1)) * 100) / 100;\r\n      return this.isNoPersist ? false : true; // (*3)\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Método chamado no salvamento de uma entrega do plano de trabalho do grid, seja este componente persistente ou não.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveEntrega(form: FormGroup, row: any) {\r\n\r\n    this.entity!._metadata = this.entity!._metadata || {};\r\n    this.entity!._metadata.novaEntrega = row as PlanoTrabalhoEntrega;\r\n    this.entity!._metadata.novaEntrega.plano_entrega_entrega_id = this.form?.controls.plano_entrega_entrega_id.value;\r\n    this.entity!._metadata.novaEntrega.orgao = this.form?.controls.orgao.value;\r\n    this.entity!._metadata.novaEntrega.descricao = this.form?.controls.descricao.value;\r\n    this.entity!._metadata.novaEntrega.forca_trabalho = this.form?.controls.forca_trabalho.value;\r\n    this.loading = true;\r\n    try {\r\n      if (!this.isNoPersist) {\r\n        this.entity!._metadata.novaEntrega = await (this.dao as PlanoTrabalhoEntregaDaoService).save(this.entity!._metadata.novaEntrega, this.join);\r\n        // TODO: Verificar isso (Foi feito uma modificação no grid para isso não ser mais necessário)\r\n        // if (this.grid?.adding) this.grid!.items[this.grid!.items.length - 1].id = '';  // (*4)\r\n      }\r\n    } catch (e: any) {\r\n      this.error(e.message ? e.message : e.toString() || e);\r\n    } finally {\r\n      this.entity!._metadata.novaEntrega.plano_entrega_entrega = this.entrega?.selectedItem?.data || null;\r\n      row.forca_trabalho = this.form?.controls.forca_trabalho.value * 1;\r\n      this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100) / 100;\r\n      this.loading = false;\r\n    }\r\n    return this.entity!._metadata.novaEntrega;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para somar os percentuais das forças de trabalho do array de entregas passado como parâmetro.\r\n   * @param entregas Array de entregas do plano de trabalho\r\n   * @returns \r\n   */\r\n  public somaForcaTrabalho(entregas: PlanoTrabalhoEntrega[] = []): number {\r\n    return entregas.map(x => x.forca_trabalho * 1).reduce((a, b) => a + b, 0);\r\n  }\r\n\r\n  /**\r\n   * Método chamado para carregar as entregas da unidade\r\n   * @param idPlanoOuPlano ID do plano de entregas ou o seu objeto completo.\r\n   */\r\n  public async carregarEntregas(idPlanoOuPlano: string | PlanoEntrega): Promise<void> {\r\n    let planoEntrega = typeof idPlanoOuPlano == 'string' ? await this.planoEntregaDao!.getById(idPlanoOuPlano, [\"entregas.entrega:id,nome\", \"unidade\"]) : idPlanoOuPlano;\r\n    let planoEntregaComUnidade = {id: planoEntrega?.id, unidade_id: planoEntrega?.unidade_id, unidade: planoEntrega?.unidade};\r\n    this.entregas = planoEntrega?.entregas.map(epe => Object.assign({}, { key: epe.id, value: epe.descricao || epe.entrega?.nome || \"Deconhecido\", data: Object.assign(epe, {plano_entrega: planoEntregaComUnidade}) })) || [];\r\n    if(!this.entregas.find(x => x.key == this.form!.controls.plano_entrega_entrega_id.value)) this.form!.controls.plano_entrega_entrega_id.setValue(null);\r\n  }\r\n\r\n  /* ---------  TRATAMENTO DOS EVENTOS ----------- */\r\n\r\n  public async onOrigemChange(row: any) {\r\n    let value = this.form!.controls.origem.value;\r\n    this.cdRef.detectChanges();\r\n    if (value == 'OUTRO_ORGAO') {\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if(value == 'SEM_ENTREGA') {\r\n      this.form?.controls.orgao.setValue(null);\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    } if (value == 'PROPRIA_UNIDADE') {\r\n      this.form?.controls.orgao.setValue(null);\r\n      this.loading = true;\r\n      try {\r\n        let planosEntregas = await this.planoEntregaDao!.query({where: [[\"unidade_id\", \"==\", this.entity!.unidade_id], [\"status\", \"==\", \"ATIVO\"], [\"data_inicio\", \"<=\", this.entity!.data_fim], [\"data_fim\", \">=\", this.entity!.data_inicio]]}).asPromise();\r\n        if(planosEntregas.length == 1) {\r\n          this.form?.controls.plano_entrega_id.setValue(planosEntregas[0].id);\r\n        } else if(this.planoEntrega?.selectedEntity?.unidade_id != this.entity!.unidade_id) {\r\n          this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    } if (value == 'OUTRA_UNIDADE') {\r\n      this.form?.controls.orgao.setValue(null);\r\n      this.planoEntrega?.onSelectClick(new Event(\"SELECT\"));\r\n    }\r\n  }\r\n\r\n  public onPlanoEntregaChange(event: Event) {\r\n    let planoEntrega = this.planoEntrega?.selectedEntity as PlanoEntrega;\r\n    this.carregarEntregas(planoEntrega);\r\n  }\r\n\r\n  public onEntregaChange(event: Event) {\r\n    let entrega = this.entrega!.selectedItem?.data as PlanoEntregaEntrega;\r\n    if(!this.form!.controls.descricao.value?.length) {\r\n      this.form!.controls.descricao.setValue(entrega?.descricao || \"\");\r\n    }\r\n  }\r\n\r\n  public onForcaTrabalhoChange(row: any) {\r\n    let index = this.items.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n    this.totalForcaTrabalho = Math.round((this.somaForcaTrabalho(this.grid?.items as PlanoTrabalhoEntrega[]) - (this.items[index].forca_trabalho * 1) + (this.form?.controls.forca_trabalho.value * 1)) * 100) / 100;\r\n  }\r\n}\r\n\r\n/*\r\nTESTES\r\n\r\n                                                  GRID PERSISTENTE                      GRID NÃO-PERSISTENTE\r\n                                              Fluxo Feliz    Validações                Fluxo Feliz    Validações\r\nInclusão Entrega Catálogo                          \r\nInclusão Entrega Mesma Unidade                     \r\nInclusão Entrega Outra Unidade                     \r\nAlteração Entrega Catálogo                         \r\nAlteração Entrega Mesma Unidade                    \r\nAlteração Entrega Outra Unidade                    \r\nCancelamento Entrega Catálogo                      \r\nCancelamento Entrega Mesma Unidade                 \r\nCancelamento Entrega Outra Unidade                 \r\nExclusão Entrega Catálogo                          \r\nExclusão Entrega Mesma Unidade                     \r\nExclusão Entrega Outra Unidade                     \r\n\r\n*/\r\n\r\n/*\r\nOBSERVAÇÕES:\r\n\r\n(*2)  this.entity?.entregas?.filter(e => !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).find(x => x.plano_entrega_entrega_id == control.value)\r\nFiltra as entregas da mesma unidade do plano de trabalho excluindo a entrega que está sendo editada. Em seguida conta aquelas que possuem o mesmo ID da que está sendo editada e dessa forma o resultado deve ser igual a 0, caso contrário a entrega editada\r\njá existe no grid.\r\n\r\n(*3)  return this.isNoPersist ? false : true;\r\nApós confirmada a remoção pelo usuário, a entrega é setada com _status = \"DELETE\" e é excluída da tela e sua confirmação é retornada para o método onDeleteItem() do gridComponent, que a excluirá também dos items do grid.\r\nEntretanto, quando se trata de um grid não persistente, ela não deve ser excluída dos items do grid, pois sua exclusão só se efetivará quando entity for salva, levando\r\ntodas as suas entregas para o back-end, que finalmente excluirá as que possuírem _status = \"DELETE\".\r\n\r\n(*4)  if(this.grid?.adding) this.grid!.items[this.grid!.items.length-1].id = '';\r\nNo caso de o componente ser 'persistente', essa linha apaga o ID que foi criado pelo banco de dados permitindo ao método saveItem do grid.component localizá-lo na sua lista de items para atualizar suas informações na tela.\r\n\r\n(*5)  if(!this.entity?.id?.length) return this.entregasPlanoEntrega;\r\nQuando o componente for chamado por um plano de trabalho (entity) que já existe, não poderá haver alteração no seu plano de entregas, portanto as entregas da mesma unidade do plano de trabalho serão lidas\r\nna própria entity. No entanto, quando o plano de trabalho (entity) ainda não existir (!this.entity?.id?.length), essas entregas vão variar de acordo com o plano de entregas\r\nselecionado no inputSelectComponent, e portanto elas serão lidas na variável que reflete essa escolha (this.entregasPlanoEntrega), e essa reflexão ocorre por causa do bind @Input() set/get entregasPlanoEntrega.\r\n\r\n\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\nID do Plano           |       Pode ser que a 'row'           |  Características           | inputs | entrega_id \r\nde Trabalho           |                                      |                            | search | plano_entrega_entrega_id\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Já tenha vindo do banco (TIPO I)   |                            | nenhum | um dos dois\r\n                      |   (foi carregada junto com o Plano)  |                            |        |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------\r\n  EXISTE              | - Tenho sido salva agora no banco    |                            | um dos | um dos dois\r\n  - Então o Grid é    |   (TIPO II)                          |                            | três   |\r\n    Persistente       |--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Esteja sendo criada agora          | addEntrega loadEntrega     | um dos | nenhum\r\n                      |                                      |                            | três   |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------     \r\n                      | - Seja do TIPO I e esteja sendo      | loadEntrega                | um dos | um dos dois\r\n                      |   editada agora                      |                            | três   |\r\n                      +--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Seja do TIPO II e esteja sendo     | loadEntrega                | um dos | um dos dois\r\n                      |   editada agora                      |                            | três   |\r\n----------------------+--------------------------------------+----------------------------+--------+------------------------------------\r\n  NÃO                 | - Já exista nos itens do grid        |                            | nenhum | um dos dois\r\n  EXISTE              |   (foi salva agora, não no banco)    | Possui _status == \"ADD\"    |        |\r\n  - Então o Grid é    |--------------------------------------+----------------------------+--------+------------------------------------\r\n    Não-persistente   | - Esteja sendo criada agora          | Possui _status == \"ADD\"    | um dos | nenhum\r\n                      |                                      | addEntrega loadEntrega     | três   |\r\n                      |--------------------------------------+----------------------------+--------+------------------------------------\r\n                      | - Tenha acabado de ser criada e      | Possui _status == \"ADD\"    | um dos | um dos dois\r\n                      |   já está sendo editada              | loadEntrega                | três   |\r\n------------------------------------------------------------------------------------------+--------+------------------------------------\r\n(*) O ADD é inserido pelo método addEntrega e só sai quando persiste no banco e volta\r\n\r\n*/","<grid [items]=\"items\" [form]=\"form!\" noMargin #gridEntregas editable [selectable]=\"false\" [minHeight]=\"items.length > 2 ? 0 : 220\" [join]=\"join\" [groupBy]=\"groupBy\"\r\n    [add]=\"addEntrega.bind(this)\" [remove]=\"removeEntrega.bind(this)\" [save]=\"saveEntrega.bind(this)\" [load]=\"loadEntrega.bind(this)\"\r\n    [hasDelete]=\"!disabled\" [hasEdit]=\"!disabled\" [hasAdd]=\"!disabled\">\r\n    <columns>\r\n        <column [titleTemplate]=\"titleOrigem\" [template]=\"columnOrigem\" [editTemplate]=\"editOrigem\" [verticalAlign]=\"'middle'\" [width]=\"300\" [align]=\"'center'\">\r\n            <ng-template let-header=\"header\" #titleOrigem><div class=\"text-center\"><span><strong>Origem</strong></span></div></ng-template>\r\n            <ng-template let-row=\"row\" #columnOrigem>\r\n                <div class=\"w-100 d-flex justify-content-center\">\r\n                    <div class=\"one-per-line\">\r\n                        <badge [label]=\"planoTrabalhoService.tipoEntrega(row, entity).titulo\" [color]=\"planoTrabalhoService.tipoEntrega(row, entity).cor\"></badge>\r\n                        <badge *ngIf=\"row.plano_entrega_entrega_id?.length\" [label]=\"row.plano_entrega_entrega?.plano_entrega?.unidade?.sigla || 'Desconhecido'\" [icon]=\"entityService.getIcon('Unidade')\" color=\"primary\"></badge>\r\n                        <badge *ngIf=\"row.orgao?.length\" [label]=\"row.orgao\" icon=\"bi bi-box-arrow-down-left\" color=\"warning\"></badge>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editOrigem>\r\n                <input-select #origem controlName=\"origem\" controlName=\"origem\" [control]=\"form!.controls.origem\" [items]=\"lookup.ORIGENS_ENTREGAS_PLANO_TRABALHO\" (change)=\"onOrigemChange(row)\"></input-select>\r\n                <input-search *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" label #planoEntrega [placeholder]=\"'Selecione o ' + lex.translate('Plano de entrega')\" [join]=\"['entregas.entrega:id,nome', 'unidade']\" [where]=\"origem?.value == 'PROPRIA_UNIDADE' ? [['unidade_id', '==', entity?.unidade_id]] : undefined\" [selectParams]=\"origem?.value == 'PROPRIA_UNIDADE' ? {filter: {unidade_id: entity?.unidade_id}} : undefined\" controlName=\"plano_entrega_id\" [dao]=\"planoEntregaDao\" (change)=\"onPlanoEntregaChange($event)\"></input-search>\r\n                <input-text *ngIf=\"origem?.value == 'OUTRO_ORGAO'\" #orgao controlName=\"orgao\" placeholder=\"Órgão\" [attr.maxlength]=250></input-text>\r\n            </ng-template>\r\n        </column>\r\n        <column [maxWidth]=\"350\" [titleTemplate]=\"titleEntrega\" [template]=\"columnEntrega\" [editTemplate]=\"editEntrega\" [verticalAlign]=\"'middle'\">\r\n            <ng-template let-header=\"header\" #titleEntrega><span><strong>Entrega</strong></span></ng-template>\r\n            <ng-template let-row=\"row\" #columnEntrega>\r\n                <small>{{ planoTrabalhoService.tipoEntrega(row, entity).descricao }}</small>\r\n                <div *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(planoTrabalhoService.tipoEntrega(row, entity).tipo)\" class=\"w-100\">\r\n                    <badge color=\"light\" icon=\"bi bi-box-arrow-in-right\" [label]=\"util.getDateFormatted(row.plano_entrega_entrega?.data_inicio)\" hint=\"Data de início\"></badge>\r\n                    <badge color=\"light\" icon=\"bi bi-box-arrow-right\" [label]=\"util.getDateFormatted(row.plano_entrega_entrega?.data_fim)\" hint=\"Data de término\"></badge>\r\n                </div>\r\n                <reaction [entity]=\"row\" origem=\"PLANO_TRABALHO_ENTREGA\"></reaction>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editEntrega>\r\n                <input-select *ngIf=\"['PROPRIA_UNIDADE', 'OUTRA_UNIDADE'].includes(origem?.value)\" #entrega nullable itemNull=\"- Selecione -\" controlName=\"plano_entrega_entrega_id\" [control]=\"form!.controls.plano_entrega_entrega_id\" [items]=\"entregas\" (change)=\"onEntregaChange($event)\"></input-select>\r\n                <div *ngIf=\"entrega?.selectedItem\" class=\"w-100\">\r\n                    <badge color=\"light\" icon=\"bi bi-box-arrow-in-right\" [label]=\"util.getDateFormatted(entrega!.selectedItem!.data!.data_inicio)\" hint=\"Data de início\"></badge>\r\n                    <badge color=\"light\" icon=\"bi bi-box-arrow-right\" [label]=\"util.getDateFormatted(entrega!.selectedItem!.data!.data_fim)\" hint=\"Data de término\"></badge>\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column [titleTemplate]=\"titleForcaTrabalho\" [title]=\"'% CHD'\" [template]=\"columnForcaTrabalho\" [editTemplate]=\"editForcaTrabalho\" [width]=\"125\" [align]=\"'center'\" [titleHint]=\"'% Carga Horária Disponível'\">\r\n            <ng-template let-header=\"header\" #titleForcaTrabalho>\r\n                <div class=\"text-center\">\r\n                    <!--<small><strong>% CHD</strong></small><br>-->\r\n                    <small><badge icon=\"bi bi-calculator\" [color]=\"totalForcaTrabalho == 100 ? 'success' : 'warning'\" [label]=\"totalForcaTrabalho + '%'\"></badge></small>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnForcaTrabalho><small>{{  row.forca_trabalho + '%' }}</small></ng-template>\r\n            <ng-template let-row=\"row\" #editForcaTrabalho><input-text number sufix=\"%\" controlName=\"forca_trabalho\" [control]=\"form!.controls.forca_trabalho\" (change)=\"onForcaTrabalhoChange(row)\" [attr.maxlength]=250></input-text></ng-template>\r\n        </column>\r\n        <column [maxWidth]=\"250\" [titleTemplate]=\"titleDescricao\" [template]=\"columnDescricao\" [editTemplate]=\"editDescricao\" [verticalAlign]=\"'middle'\" [align]=\"'center'\">\r\n            <ng-template let-header=\"header\" #titleDescricao><div class=\"text-center\"><span><strong>Detalhamento/Descrição dos Trabalhos</strong></span></div></ng-template>\r\n            <ng-template let-row=\"row\" #columnDescricao>\r\n                <div *ngIf=\"row.descricao != planoTrabalhoService.tipoEntrega(row, entity).descricao; else solicitarDescricao\"><small>{{ row.descricao }}</small></div>\r\n            </ng-template>\r\n            <ng-template #solicitarDescricao><small>Detalhe/Descreva os trabalhos</small></ng-template>\r\n            <!--<ng-template let-row=\"row\" #columnDescricao><small>{{ row.descricao }}</small></ng-template>-->\r\n            <ng-template let-row=\"row\" #editDescricao><input-text controlName=\"descricao\" [control]=\"form!.controls.descricao\" [attr.maxlength]=250></input-text></ng-template>\r\n        </column>\r\n        <column type=\"options\"></column>\r\n    </columns>\r\n</grid>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\nimport { PlanoTrabalhoConsolidacaoComponent } from './plano-trabalho-consolidacao/plano-trabalho-consolidacao.component';\r\nimport { PlanoTrabalhoConsolidacaoListComponent } from './plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component';\r\nimport { AvaliarComponent } from '../../uteis/avaliar/avaliar.component';\r\nimport { PlanoTrabalhoConsolidacaoAvaliacaoComponent } from './plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: PlanoTrabalhoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Planos de Trabalho\" } },\r\n  { path: 'new', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão de Plano de Trabalho\", modal: true } },\r\n  { path: 'termo', component: PlanoTrabalhoFormTermoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Termo de adesão\", modal: true } },\r\n  { path: 'consolidacao/avaliacao', component: PlanoTrabalhoConsolidacaoAvaliacaoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Avaliação das Consolidações do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:consolidacaoId/avaliar', component: AvaliarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Avaliar Consolidação do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:consolidacaoId/recurso', component: AvaliarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Recurso da Avaliação da Consolidação do Plano de Trabalho\" } },\r\n  { path: 'consolidacao/:usuarioId/:planoTrabalhoId', component: PlanoTrabalhoConsolidacaoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consolidações do Plano de Trabalho\" } },\r\n  { path: 'consolidacao', component: PlanoTrabalhoConsolidacaoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consolidações\" } },\r\n  { path: ':id/edit', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição de Plano de Trabalho\", modal: true } },\r\n  { path: ':id/consult', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Plano de Trabalho\", modal: true } },\r\n  { path: 'entregaList', component: PlanoTrabalhoListEntregaComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Lista de Entregas do Plano de Trabalho\", modal: true } },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PlanoTrabalhoRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PlanoTrabalhoRoutingModule } from './plano-trabalho-routing.module';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\nimport { PlanoTrabalhoConsolidacaoComponent } from './plano-trabalho-consolidacao/plano-trabalho-consolidacao.component';\r\nimport { PlanoTrabalhoConsolidacaoListComponent } from './plano-trabalho-consolidacao-list/plano-trabalho-consolidacao-list.component';\r\nimport { PlanoTrabalhoListAccordeonComponent } from './plano-trabalho-list-accordeon/plano-trabalho-list-accordeon.component';\r\nimport { PlanoTrabalhoConsolidacaoFormComponent } from './plano-trabalho-consolidacao-form/plano-trabalho-consolidacao-form.component';\r\nimport { PlanoTrabalhoConsolidacaoAvaliacaoComponent } from './plano-trabalho-consolidacao-avaliacao/plano-trabalho-consolidacao-avaliacao.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PlanoTrabalhoFormComponent,\r\n    PlanoTrabalhoListComponent,\r\n    PlanoTrabalhoListEntregaComponent,\r\n    PlanoTrabalhoFormTermoComponent,\r\n    PlanoTrabalhoConsolidacaoComponent,\r\n    PlanoTrabalhoConsolidacaoListComponent,\r\n    PlanoTrabalhoConsolidacaoFormComponent,\r\n    PlanoTrabalhoListAccordeonComponent,\r\n    PlanoTrabalhoConsolidacaoAvaliacaoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    ReactiveFormsModule,\r\n    PlanoTrabalhoRoutingModule,\r\n    UteisModule\r\n  ]\r\n})\r\nexport class PlanoTrabalhoModule { }\r\n"],"names":["DaoBaseService","ComparecimentoDaoService","constructor","injector","inputSearchConfig","searchFields","i0","ɵɵinject","Injector","factory","ɵfac","providedIn","PlanoTrabalhoConsolidacaoOcorrenciaDaoService","dataset","deeps","deepsFilter","Base","PlanoTrabalhoConsolidacao","data","data_inicio","Date","data_fim","status","avaliacoes","status_historico","plano_trabalho_id","avaliacao_id","initialization","GridComponent","PageListBase","UsuarioDaoService","PlanoTrabalhoConsolidacaoDaoService","UnidadeDaoService","AvaliacaoDaoService","PlanoTrabalhoService","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵproperty","tmp_0_0","ctx_r1","usuarioSeparator","separator_r21","url_foto","tmp_2_0","nome","ɵɵtextInterpolate","tmp_3_0","entityService","getIcon","tmp_5_0","unidadeSeparator","sigla","row_r23","plano_trabalho","ctx_r10","cdRef","ɵɵtextInterpolate1","row_r25","usuario","ctx_r12","util","getDateFormatted","unidade","lex","translate","programa","tipo_modalidade","ctx_r14","row_r26","ctx_r16","row_r27","row_r28","avaliacao","tipo_avaliacao","nota","recurso","ɵɵtemplate","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_30_avaliar_nota_badge_0_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_30_separator_1_Template","length","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_33_badge_2_Template","ctx_r20","lookup","getColor","CONSOLIDACAO_STATUS","row_r33","getValue","PlanoTrabalhoConsolidacaoAvaliacaoComponent","filterWhere","filter","result","form","value","push","usuario_id","unidade_id","unidades_subordinadas","incluir_arquivados","join","extraJoin","groupBy","field","label","usuarioDao","get","unidadeDao","avaliacaoDao","planoTrabalhoService","title","code","fh","FormBuilder","default","addOption","OPTION_INFORMACOES","OPTION_LOGS","ngOnInit","controls","setValue","auth","unidadeGestor","id","lotacao","canFilterSubordinadas","isGestorUnidade","undefined","separator","usuarioId","group","metadata","extra","planos_trabalhos","find","x","unidadeId","onUnidadeChange","event","onGridLoad","rows","grid","query","planosTrabalhos","forEach","p","plano","programas","programa_id","v","consolidacao","tipos_avaliacoes","tipo_avaliacao_id","refreshConsolidacao","_this","_asyncToGenerator","refreshId","refreshRows","anterior","items","reduce","a","asTimestamp","proximo","dynamicButtons","row","isAvaliador","hasPermissionTo","isIntegrante","isUsuarioDoPlano","BOTAO_AVALIAR","hint","icon","color","onClick","avaliar","bind","BOTAO_REAVALIAR","BOTAO_FAZER_RECURSO","fazerRecurso","BOTAO_CANCELAR_AVALIACAO","cancelarAvaliacao","canAvaliar","includes","canCancelarAvaliacao","data_avaliacao","dias_tolerancia_recurso_avaliacao","daystamp","hora","ɵɵdirectiveInject","selectors","viewQuery","PlanoTrabalhoConsolidacaoAvaliacaoComponent_Query","rf","ctx","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_1_Template","ɵɵtemplateRefExtractor","PlanoTrabalhoConsolidacaoAvaliacaoComponent_toolbar_3_Template","ɵɵlistener","PlanoTrabalhoConsolidacaoAvaliacaoComponent_Template_input_search_change_8_listener","$event","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_16_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_18_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_21_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_24_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_27_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_30_Template","PlanoTrabalhoConsolidacaoAvaliacaoComponent_ng_template_33_Template","dao","isModal","orderBy","_r0","selectable","filterSubmit","filterCollapseChange","filterCollapsed","_r7","_r9","_r11","_r13","_r15","_r17","_r19","rowsLimit","ChangeDetectorRef","EditableFormComponent","PageFrameBase","Atividade","PlanoTrabalhoConsolidacaoOcorrencia","TipoAtividadeDaoService","PlanoEntregaService","AtividadeDaoService","AtividadeService","CalendarService","Comparecimento","ctx_r44","row_r43","tipo_atividade","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_4_badge_2_Template","numero","ctx_r30","atividadeService","onIdClick","descricao","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_6_Template_input_search_select_0_listener","ɵɵrestoreView","_r48","ctx_r47","ɵɵnextContext","ɵɵresetView","onTipoAtividadeSelect","ctx_r32","formAtividade","tipo_atividade_id","tipoAtividadeDao","tempo_r51","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_9_badge_1_Template","ctx_r34","temposAtividade","row_r49","ctx_r36","data_distribuicao","data_estipulada_entrega","data_entrega","etiqueta_r57","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_table_3_tr_1_i_2_Template","check_r59","checked","texto","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_table_3_tr_1_Template","row_r53","checklist","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_badge_1_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_separator_2_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_table_3_Template","progresso","etiquetas","ctx_r66","i_r68","check_r67","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_table_5_tr_1_Template","ctx_r65","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_Template_input_select_details_2_listener","_r70","ctx_r69","onEtiquetaConfigClick","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_separator_4_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_table_5_Template","ctx_r40","formEdit","addItemHandleEtiquetas","etiqueta","row_r62","status_r74","row_r71","_r28","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_badge_2_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_comentarios_widget_3_Template","documento_requisicao","ctx_r42","getStatus","entity","editing","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_4_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_6_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_9_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_11_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_14_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_16_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_ng_template_19_Template","atividades","ctx_r4","disabled","addAtividade","entrega","loadAtividade","removeAtividade","saveAtividade","_r29","_r31","_r33","_r35","_r37","_r39","onColumnProgressoEtiquetasChecklistEdit","onColumnProgressoEtiquetasChecklistSave","_r41","atividadeOptionsMetadata","dynamicOptions","row_r76","badge","titulo","cor","row_r77","row_r78","forca_trabalho","row_r79","meta","metaRealizado","row_r80","progresso_realizado","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_0_div_1_Template_button_click_1_listener","restoredCtx","_r87","pObjetivo_r85","$implicit","ctx_r86","showPlanejamento","objetivo","planejamento_id","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_0_div_1_Template","ctx_r82","row_r81","objetivos","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_1_div_1_Template_button_click_1_listener","_r92","pProcesso_r90","ctx_r91","showCadeiaValor","processo","cadeia_valor_id","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_1_div_1_Template","ctx_r83","processos","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_0_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_separator_1_Template","row_r94","tipo_motivo_afastamento","icone","observacao","ctx_r23","row_r95","ctx_r25","PlanoTrabalhoConsolidacaoFormComponent","noPersist","control","bindEntity","_disabled","detectChanges","joinAtividade","itemsEntregas","itemsOcorrencias","itemsComparecimentos","itemsAfastamentos","validateAtividade","controlName","indexOf","isDataValid","getTime","validateOcorrencia","formOcorrencia","validateComparecimento","between","start","end","consolidacaoOcorrenciaDao","comparecimentoDao","atividadeDao","calendar","ocorrenciaDao","planoEntregaService","comentarios","esforco","tempo_planejado","formComparecimento","data_comparecimento","detalhamento","atividadeRefreshId","removeId","atividadeRemoveId","refresh","loadData","_metadata","planoTrabalhoConsolidacaoFormComponent","atividade","foundIndex","findIndex","getById","then","splice","ngAfterViewInit","loadConsolidacao","dados","entregas","map","plano_entrega_entrega","plano_entrega","planosEntregas","pe","plano_entrega_id","y","plano_trabalho_entrega_id","tipoEntrega","planoTrabalho","getValorMeta","getValorRealizado","ocorrencias","comparecimentos","afastamentos","_this2","gridEntregas","loading","dadosConsolidacao","_this3","efemerides","calculaDataTempoUnidade","carga_horaria","tempoPlanejado","horasUteis","dataInicio","setTime","dataFim","generateUuid","plano_trabalho_entrega","plano_trabalho_consolidacao","demandante","tempo_despendido","tempoUtil","plano_trabalho_consolidacao_id","demandante_id","metadados","atrasado","tempo_atraso","pausado","iniciado","concluido","avaliado","arquivado","produtividade","_status","_this4","patchValue","_this5","confirm","dialog","delete","_this6","markAllAsTouched","valid","fillForm","submitting","save","atividadeDynamicButtons","Object","assign","BUTTON_EDIT","BUTTON_DELETE","_this7","merge","b","key","config","clone","_this8","saved","update","error","go","navigate","route","params","modal","modalClose","modalResult","selectedItem","item","textHash","validateLookupItem","loadTipoAtividade","tipoAtividade","buildEtiquetas","buildChecklist","comentarioAtividade","addOcorrencia","_this9","loadOcorrencia","_this10","removeOcorrencia","_this11","ocorrencia","saveOcorrencia","_this12","ocorrenciaDynamicButtons","addComparecimento","_this13","loadComparecimento","_this14","removeComparecimento","_this15","comparecimento","saveComparecimento","_this16","comparecimentoDynamicButtons","addAfastamento","_this17","filterSnapshot","querySnapshot","afastamentoDynamicButtons","doc","_this18","cadeia_valor_id_id","_this19","PlanoTrabalhoConsolidacaoFormComponent_Query","PlanoTrabalhoConsolidacaoFormComponent_ng_template_5_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_7_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_10_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_13_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_16_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_19_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_22_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_25_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_42_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_51_Template","PlanoTrabalhoConsolidacaoFormComponent_ng_template_53_Template","_r1","_r3","_r5","_r22","_r24","PlanoTrabalhoDaoService","isDisabled","row_r14","ctx_r6","row_r16","ctx_r8","row_r17","row_r18","ctx_r19","tipo_avaliacao_plano_trabalho","PlanoTrabalhoConsolidacaoListComponent_ng_template_15_avaliar_nota_badge_0_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_15_separator_1_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_18_badge_2_Template","PlanoTrabalhoConsolidacaoListComponent","consolidacoes","validate","planoTrabalhoDao","modalWidth","urlParams","has","getByUsuario","planos","agora","expand","addConsolidacao","removeConsolidacao","saveConsolidacao","consolidacaoForm","refreshExpanded","concluir","response","message","cancelarConclusao","BOTAO_CONCLUIR","BOTAO_CANCELAR_CONCLUSAO","canConcluir","canCancelarConclusao","diasParaConcluirConsolidacao","PlanoTrabalhoConsolidacaoListComponent_Query","PlanoTrabalhoConsolidacaoListComponent_ng_template_4_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_6_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_9_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_12_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_15_Template","PlanoTrabalhoConsolidacaoListComponent_ng_template_18_Template","TabsComponent","data_r13","apelido","data_r14","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_3_ng_template_1_Template","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_3_ng_template_3_Template","usuario_r8","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_div_2_Template","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_collapse_card_3_Template","ɵɵtextInterpolate2","ctx_r5","usuarios","PlanoTrabalhoConsolidacaoComponent_tab_2_ng_template_1_Template","_r4","ctx_r3","arquivados","PlanoTrabalhoConsolidacaoComponent","loadingUnidade","tabs","active","queryParams","tab","lotados","PlanoTrabalhoConsolidacaoComponent_Query","PlanoTrabalhoConsolidacaoComponent_tab_2_Template","PlanoTrabalhoConsolidacaoComponent_ng_template_4_Template","_r2","DocumentoDaoService","ProgramaDaoService","TipoDocumentoDaoService","TipoModalidadeDaoService","ListenerAllPagesService","PlanoTrabalho","PageFormBase","NavigateResult","PlanoTrabalhoFormTermoComponent","numero_processo","formValidation","tipoDocumento","selectedEntity","tipo_documento_id","titleEdit","programaDao","tipoDocumentoDao","allPages","tipoModalidadeDao","documentoDao","tempo_total","tempo_proporcional","documento_id","documentos","vinculadas","tipo_modalidade_id","forma_contagem_carga_horaria","onVinculadasChange","formValue","Promise","all","loadSearch","tipoModalidade","id_processo","initializeData","saveData","resolve","reject","codigo_tipo_documento","codigo","formaContagemCargaHoraria","forma","PlanoTrabalhoFormTermoComponent_Query","PlanoTrabalhoFormTermoComponent_Template_editable_form_submit_0_listener","onSaveData","PlanoTrabalhoFormTermoComponent_Template_editable_form_cancel_0_listener","onCancel","PlanoTrabalhoFormTermoComponent_Template_input_switch_change_24_listener","formDisabled","ganho_produtividade","ɵɵattribute","DocumentoService","TemplateService","UtilService","horasTotais","ctx_r11","horasParciais","ɵɵelementContainerStart","PlanoTrabalhoFormComponent_ng_container_18_Template_input_workload_change_2_listener","onCargaHorariaChenge","PlanoTrabalhoFormComponent_ng_container_18_separator_5_Template","PlanoTrabalhoFormComponent_ng_container_18_separator_6_Template","ɵɵelementContainerEnd","onFormaContagemCargaHorariaChange","ctx_r7","editar_texto_complementar_unidade","planoDataset","editar_texto_complementar_usuario","ctx_r9","needSign","extraTags","editingId","datasource","template_tcr","PlanoTrabalhoFormComponent","gestoresUnidadeExecutora","_ref","_x","apply","arguments","joinPrograma","documentoService","templateService","utilService","unidade_texto_complementar","usuario_texto_complementar","criterios_avaliacao","criterio_avaliacao","segment","url","path","action","buscaGestoresUnidadeExecutora","atualizarTcr","loadEntity","textoUsuario","textoUnidade","documento","template","isTermos","onUnidadeSelect","selected","entidade","texto_complementar_plano","onProgramaSelect","plano_trabalho_criterios_avaliacao","updateValueAndValidity","calculaTempos","onUsuarioSelect","onDataInicioChange","onDataFimChange","inicio","fim","carga","loadFeriadosCadastrados","feriados","carga_horaria_padrao","fill","requests","responses","onTabSelect","documentoDynamicButtons","signDocumento","html","conteudo","addItemHandleCriteriosAvaliacao","sign","unit","isVigente","gestor","gestor_substituto","gestor_delegado","PlanoTrabalhoFormComponent_Query","PlanoTrabalhoFormComponent_Template_editable_form_submit_0_listener","PlanoTrabalhoFormComponent_Template_editable_form_cancel_0_listener","PlanoTrabalhoFormComponent_Template_input_search_select_7_listener","PlanoTrabalhoFormComponent_Template_input_search_select_9_listener","PlanoTrabalhoFormComponent_Template_input_search_select_11_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_14_listener","PlanoTrabalhoFormComponent_Template_input_datetime_change_15_listener","PlanoTrabalhoFormComponent_ng_container_18_Template","PlanoTrabalhoFormComponent_top_alert_23_Template","PlanoTrabalhoFormComponent_div_24_Template","PlanoTrabalhoFormComponent_tab_25_Template","PlanoTrabalhoFormComponent_tab_26_Template","ɵɵpureFunction0","_c11","plano_trabalho_calcula_horas","checkFilled","_c12","_c13","badge_r7","PlanoTrabalhoListAccordeonComponent_ng_template_2_badge_10_Template","item_r5","ctx_r2","getPlanoBadges","PLANO_TRABALHO_STATUS","item_r8","PlanoTrabalhoListAccordeonComponent","_arquivados","viewInit","selectedIndex","accordion","self","i","concluidos","avaliados","getLookup","textValue","toString","JSON","stringify","badges","PlanoTrabalhoListAccordeonComponent_Query","PlanoTrabalhoListAccordeonComponent_ng_template_2_Template","PlanoTrabalhoListAccordeonComponent_ng_template_4_Template","PlanoTrabalhoEntrega","PlanoTrabalhoEntregaDaoService","PlanoEntregaDaoService","PlanoEntregaEntregaDaoService","ctx_r29","orgao","PlanoTrabalhoListEntregaComponent_ng_template_6_badge_3_Template","PlanoTrabalhoListEntregaComponent_ng_template_6_badge_4_Template","plano_entrega_entrega_id","PlanoTrabalhoListEntregaComponent_ng_template_8_input_search_2_Template_input_search_change_0_listener","ctx_r38","onPlanoEntregaChange","ctx_r35","_c3","_r34","ɵɵpureFunction1","_c5","_c4","_c7","_c6","planoEntregaDao","PlanoTrabalhoListEntregaComponent_ng_template_8_Template_input_select_change_0_listener","_r42","ctx_r41","onOrigemChange","PlanoTrabalhoListEntregaComponent_ng_template_8_input_search_2_Template","PlanoTrabalhoListEntregaComponent_ng_template_8_input_text_3_Template","origem","ORIGENS_ENTREGAS_PLANO_TRABALHO","_c8","ctx_r45","row_r44","PlanoTrabalhoListEntregaComponent_ng_template_13_div_2_Template","tipo","PlanoTrabalhoListEntregaComponent_ng_template_15_input_select_0_Template_input_select_change_0_listener","_r52","ctx_r51","onEntregaChange","ctx_r48","ctx_r49","PlanoTrabalhoListEntregaComponent_ng_template_15_input_select_0_Template","PlanoTrabalhoListEntregaComponent_ng_template_15_div_1_Template","totalForcaTrabalho","row_r54","PlanoTrabalhoListEntregaComponent_ng_template_22_Template_input_text_change_0_listener","_r57","row_r55","ctx_r56","onForcaTrabalhoChange","ctx_r18","row_r59","PlanoTrabalhoListEntregaComponent_ng_template_27_div_0_Template","ctx_r22","_r23","ctx_r26","PlanoTrabalhoListEntregaComponent","gridControl","options","e","peeDao","validateEntregas","planoInterval","entregaPlano","entregaDataFim","entregaInterval","intersection","_superprop_getNgOnInit","call","Math","round","somaForcaTrabalho","novaEntrega","addEntrega","loadEntrega","carregarEntregas","removeEntrega","isNoPersist","saveEntrega","idPlanoOuPlano","planoEntrega","planoEntregaComUnidade","epe","where","asPromise","onSelectClick","Event","index","PlanoTrabalhoListEntregaComponent_Query","PlanoTrabalhoListEntregaComponent_ng_template_4_Template","PlanoTrabalhoListEntregaComponent_ng_template_6_Template","PlanoTrabalhoListEntregaComponent_ng_template_8_Template","PlanoTrabalhoListEntregaComponent_ng_template_11_Template","PlanoTrabalhoListEntregaComponent_ng_template_13_Template","PlanoTrabalhoListEntregaComponent_ng_template_15_Template","PlanoTrabalhoListEntregaComponent_ng_template_18_Template","PlanoTrabalhoListEntregaComponent_ng_template_20_Template","PlanoTrabalhoListEntregaComponent_ng_template_22_Template","PlanoTrabalhoListEntregaComponent_ng_template_25_Template","PlanoTrabalhoListEntregaComponent_ng_template_27_Template","PlanoTrabalhoListEntregaComponent_ng_template_29_Template","PlanoTrabalhoListEntregaComponent_ng_template_31_Template","_r21","_r25","RouterModule","AuthGuard","ConfigResolver","PlanoTrabalhoListComponent","AvaliarComponent","routes","component","canActivate","runGuardsAndResolvers","PlanoTrabalhoRoutingModule","forChild","imports","i1","exports","CommonModule","ComponentsModule","ReactiveFormsModule","UteisModule","PlanoTrabalhoModule","declarations","NgIf","i2","i3","ColumnsComponent","i4","ColumnComponent","i5","FilterComponent","i6","ToolbarComponent","i7","PaginationComponent","i8","InputSwitchComponent","i9","InputSearchComponent","i10","InputTextComponent","i11","InputDatetimeComponent","i12","InputSelectComponent","i13","ReportComponent","i14","OrderComponent","i15","BadgeComponent","i16","DocumentosBadgeComponent"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}