{"version":3,"sources":["./src/app/modules/cadastros/entrega/entrega-routing.module.ts","./src/app/modules/cadastros/entrega/entrega.module.ts","./src/app/modules/cadastros/entrega/entrega-list/entrega-list.component.ts","./src/app/modules/cadastros/entrega/entrega-list/entrega-list.component.html","./src/app/models/entrega.model.ts","./src/app/modules/cadastros/entrega/entrega-form/entrega-form.component.ts","./src/app/modules/cadastros/entrega/entrega-form/entrega-form.component.html"],"names":[],"mappings":"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","file":"modules-cadastros-entrega-entrega-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { EntregaFormComponent } from './entrega-form/entrega-form.component';\r\nimport { EntregaListComponent } from './entrega-list/entrega-list.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: EntregaListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Entrega\" } },\r\n  { path: 'new', component: EntregaFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão\", modal: true } },\r\n  { path: ':id/edit', component: EntregaFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição\", modal: true } },\r\n  { path: ':id/consult', component: EntregaFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consultar\", modal: true } }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class EntregaRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { EntregaRoutingModule } from './entrega-routing.module';\r\nimport { EntregaFormComponent } from './entrega-form/entrega-form.component';\r\nimport { EntregaListComponent } from './entrega-list/entrega-list.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EntregaFormComponent,\r\n    EntregaListComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    ReactiveFormsModule,\r\n    EntregaRoutingModule\r\n  ]\r\n})\r\nexport class EntregaModule { }\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { EntregaDaoService } from 'src/app/dao/entrega-dao.service';\r\nimport { Entrega } from 'src/app/models/entrega.model';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\n\r\n@Component({\r\n  selector: 'app-entrega-list',\r\n  templateUrl: './entrega-list.component.html',\r\n  styleUrls: ['./entrega-list.component.scss']\r\n})\r\nexport class EntregaListComponent extends PageListBase<Entrega, EntregaDaoService> {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Entrega, EntregaDaoService);\r\n    /* Inicializações */\r\n    this.title = this.lex.noun('Entrega',true);\r\n    this.filter = this.fh.FormBuilder({\r\n      nome: {default: \"\"}\r\n     });\r\n    // Testa se o usuário possui permissão para exibir dados de entrega\r\n    if (this.auth.hasPermissionTo(\"MOD_ENTRG_CONS\")) {\r\n      this.options.push({\r\n        icon: \"bi bi-info-circle\",\r\n        label: \"Informações\",\r\n        onClick: this.consult.bind(this)\r\n      });\r\n    }\r\n    // Testa se o usuário possui permissão para excluir a entrega\r\n    if (this.auth.hasPermissionTo(\"MOD_ENTRG_EXCL\")) {\r\n      this.options.push({\r\n        icon: \"bi bi-trash\",\r\n        label: \"Excluir\",\r\n        onClick: this.delete.bind(this)\r\n      });\r\n    }\r\n  }\r\n\r\n  public filterClear(filter: FormGroup) {\r\n    filter.controls.nome.setValue(\"\");\r\n    super.filterClear(filter);\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let result: any[] = [];\r\n    let form: any = filter.value;\r\n\r\n    if(form.nome?.length) {\r\n      result.push([\"nome\", \"like\", \"%\" + form.nome + \"%\"]);\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\n","<grid [dao]=\"dao\" [add]=\"add\" [title]=\"isModal ? '' : title\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\"\r\n    [selectable]=\"selectable\" (select)=\"onSelect($event)\"\r\n    [hasAdd]=\"auth.hasPermissionTo('MOD_ENTRG_INCL')\"\r\n    [hasEdit]=\"auth.hasPermissionTo('MOD_ENTRG_EDT')\">\r\n    <toolbar *ngIf=\"!selectable\"></toolbar>\r\n    <filter [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && filterCollapsed\">\r\n        <div class=\"row\">\r\n            <input-text [size]=\"12\" [label]=\"lex.noun('Entrega')\" controlName=\"nome\"\r\n                [control]=\"filter!.controls.nome\" [placeholder]=\"'Nome ' + lex.noun('entrega',false,true) + '...'\"></input-text>\r\n        </div>\r\n    </filter>\r\n    <columns>\r\n        <column title=\"Nome\" field=\"nome\" orderBy=\"nome\"></column>\r\n        <column title=\"Descrição\" field=\"descricao\" orderBy=\"descricao\"></column>\r\n        <column [title]=\"lex.noun('Tipo do indicador')\" type=\"select\" field=\"tipo_indicador\" [items]=\"lookup.TIPO_INDICADOR\"></column>\r\n        <column  title=\"Qualitativos\" field=\"form!.controls.lista_qualitativos.key\"></column>\r\n        <column type=\"options\" [onEdit]=\"edit\" [options]=\"options\"></column>\r\n    </columns>\r\n    <pagination [rows]=\"rowsLimit\"></pagination>\r\n</grid>\r\n","import { LookupItem } from '../services/lookup.service';\r\nimport { Base } from './base.model';\r\n\r\nexport type EntregaTipoIndicador = \"QUANTIDADE\" | \"VALOR\" | \"PORCENTAGEM\" | \"QUALITATIVO\";\r\nexport type EntregaValor = {\r\n    porcentagem?: number,\r\n    quantitativo?: number,\r\n    valor?: number,\r\n    qualitativo?: string\r\n};\r\n\r\nexport class Entrega extends Base {\r\n    public nome: string = \"\"; //Nome da entrega;\r\n    public descricao: string = \"\"; //Descrição da entrega;\r\n    public tipo_indicador: EntregaTipoIndicador = \"PORCENTAGEM\"; //Tipo_indicador: \"QUANTIDADE\", \"VALOR\", \"PORCENTAGEM\", \"QUALITATIVO\");\r\n    public lista_qualitativos: LookupItem[] = [];\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputTextComponent } from 'src/app/components/input/input-text/input-text.component';\r\nimport { EntregaDaoService } from 'src/app/dao/entrega-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Entrega } from 'src/app/models/entrega.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport {LookupItem} from \"../../../../services/lookup.service\";\r\n\r\n@Component({\r\n  selector: 'app-entrega-form',\r\n  templateUrl: './entrega-form.component.html',\r\n  styleUrls: ['./entrega-form.component.scss']\r\n})\r\nexport class EntregaFormComponent extends PageFormBase<Entrega, EntregaDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('itemQualitativo', { static: false }) public itemQualitativo?: InputTextComponent;\r\n\r\n  public listaQualitativos: string[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Entrega, EntregaDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      nome: {default: \"\"},\r\n      descricao: {default: \"\"},\r\n      tipo_indicador: {default: \"\"},\r\n      qualitativo: {default: \"\"},\r\n      lista_qualitativos: {default: []},\r\n      itemQualitativo: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(['nome','tipo_indicador','descricao'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) =>{\r\n    let result = null;\r\n    if(this.form?.controls.tipo_indicador.value == 'QUALITATIVO' && !this.form?.controls.lista_qualitativos.value.length){\r\n      result = \"Quando o tipo da entrega for Qualitativo, é necessária a inclusão de ao menos um item de qualitativo!\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public loadData(entity: Entrega, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    form.patchValue(this.util.fillForm(formValue, entity));\r\n    this.loadListaQualitativos();\r\n  }\r\n\r\n  public initializeData(form: FormGroup) {\r\n    form.patchValue(new Entrega());\r\n  }\r\n\r\n  public async saveData(form: IIndexable): Promise<Entrega> {\r\n    return new Promise<Entrega>((resolve, reject) => {\r\n      const entrega = this.util.fill(new Entrega(), this.entity!);\r\n      resolve(this.util.fillForm(entrega, this.form!.value));\r\n    });\r\n  }\r\n\r\n  public titleEdit = (entity: Entrega): string => {\r\n    return \"Editando \"+ (entity?.nome || \"\");\r\n  }\r\n\r\n  public incluirQualitativo(qualitativo: string) {\r\n    let item = qualitativo.trim();\r\n    let listaQualitativos: string[] = this.form!.controls.lista_qualitativos.value;\r\n    if(!listaQualitativos.find(x => x == item) && item.length){\r\n      this.clearErros();\r\n      listaQualitativos.push(item);\r\n      this.form!.controls.lista_qualitativos.setValue(listaQualitativos);\r\n      this.form?.controls.qualitativo.setValue('');\r\n      this.loadListaQualitativos();\r\n    }\r\n  }\r\n\r\n  public excluirQualitativo(qualitativo: string) {\r\n    let listaQualitativos: string[] = this.form!.controls.lista_qualitativos.value;\r\n    if(listaQualitativos.find(x => x == qualitativo)){\r\n      this.form!.controls.lista_qualitativos.setValue(listaQualitativos.filter(x => x != qualitativo));\r\n      this.loadListaQualitativos();\r\n    }\r\n  }\r\n\r\n  public loadListaQualitativos() {\r\n    this.listaQualitativos = this.form!.controls.lista_qualitativos.value || [];\r\n  }\r\n\r\n  public addItemHandleItemQualitativo(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form!.controls.itemQualitativo.value;\r\n    const key = this.util.textHash(value);\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.lista_qualitativos.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form!.controls.itemQualitativo.value\r\n      };\r\n      this.form!.controls.itemQualitativo.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [title]=\"isModal ? '' : title\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <div class=\"row\">\r\n        <div class=\"row\">\r\n            <input-text [size]=\"12\" [label]=\"'Nome ' + lex.noun('entrega',false,true)\" controlName=\"nome\"></input-text>\r\n            <input-text [size]=\"12\" [label]=\"'Descrição ' + lex.noun('entrega',false,true)\" controlName=\"descricao\"></input-text>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-select [size]=\"6\" [label]=\"lex.noun('Tipo de indicador')\" icon=\"bi bi-arrow-up-right-circle\" controlName=\"tipo_indicador\" [items]=\"lookup.TIPO_INDICADOR\"></input-select>\r\n            <div *ngIf=\"form?.controls!.tipo_indicador.value == 'QUALITATIVO' || null\" class=\"row col-6\">\r\n                <div class=\"col-12\">\r\n                    <label for=\"itemQualitativo\" class=\"radio control-label\">&nbsp;</label>\r\n                    <input-multiselect label=\"Itens Qualitativos\" controlName=\"lista_qualitativos\" [addItemHandle]=\"addItemHandleItemQualitativo.bind(this)\">\r\n                        <input-text icon=\"far fa-edit\" controlName=\"itemQualitativo\"></input-text>\r\n                    </input-multiselect>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</editable-form>"],"sourceRoot":"webpack:///"}