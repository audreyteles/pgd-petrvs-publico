"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[7472],{57472:(w,h,o)=>{o.r(h),o.d(h,{CapacidadeModule:()=>p});var m=o(76733),C=o(55579),f=o(1391),u=o(2314),y=o(8239),g=o(74040),v=o(86994),d=o(93164),O=o(1184),Z=o(96150),T=o(65298),a=o(20755),Q=o(32802),D=o(64603);const F=["tipo_capacidade"];function J(s,i){if(1&s&&(a.TgZ(0,"h3",6),a._uU(1),a.qZA()),2&s){const e=a.oxw();a.xp6(1),a.Oqu(e.title)}}class l extends O.F{constructor(i){super(i,d.O,v.W),this.injector=i,this.validate=(e,t)=>{let n=null;return["perfil_id"].indexOf(t)>=0&&!e.value?.length&&(n="Obrigat\xf3rio"),n},this.titleEdit=e=>"Editando "+this.lex.translate("Capacidade")+": "+(e?.perfil?.nome||"")+": "+(e?.tipo_capacidade?.codigo||""),this.tipoCapacidadeDao=i.get(Z.r),this.perfilDao=i.get(T.r),this.form=this.fh.FormBuilder({perfil_id:{default:""},tipo_capacidade_id:{default:""}},this.cdRef,this.validate),this.join=["tipo_capacidade"]}loadData(i,e){var t=this;return(0,y.Z)(function*(){let n=Object.assign({},e.value);yield Promise.all([t.tipoCapacidade.loadSearch(i.tipo_capacidade||i.tipo_capacidade_id)]),e.patchValue(t.util.fillForm(n,i))})()}initializeData(i){i.patchValue(new d.O)}saveData(i){return new Promise((e,t)=>{const n=this.util.fill(new d.O,this.entity);e(this.util.fillForm(n,this.form.value))})}static#a=this.\u0275fac=function(e){return new(e||l)(a.Y36(a.zs3))};static#t=this.\u0275cmp=a.Xpm({type:l,selectors:[["app-capacidade-form"]],viewQuery:function(e,t){if(1&e&&(a.Gf(g.Q,5),a.Gf(F,5)),2&e){let n;a.iGM(n=a.CRH())&&(t.editableForm=n.first),a.iGM(n=a.CRH())&&(t.tipoCapacidade=n.first)}},features:[a.qOj],decls:7,vars:7,consts:[["class","my-2",4,"ngIf"],["initialFocus","tipo_capacidade_id",3,"form","submit","cancel"],[1,"row"],["controlName","tipo_capacidade_id",3,"size","dao"],["tipo_capacidade",""],["controlName","perfil_id","required","",3,"size","label","dao"],[1,"my-2"]],template:function(e,t){1&e&&(a.YNc(0,J,2,1,"h3",0),a.TgZ(1,"editable-form",1),a.NdJ("submit",function(){return t.onSaveData()})("cancel",function(){return t.onCancel()}),a.TgZ(2,"div",2),a._UZ(3,"input-search",3,4),a.qZA(),a.TgZ(5,"div",2),a._UZ(6,"input-select",5),a.qZA()()),2&e&&(a.Q6J("ngIf",!t.isModal),a.xp6(1),a.Q6J("form",t.form),a.xp6(2),a.Q6J("size",12)("dao",t.tipoCapacidadeDao),a.xp6(3),a.Q6J("size",6)("label",t.lex.translate("Perfil"))("dao",t.perfilDao))},dependencies:[m.O5,g.Q,Q.V,D.p]})}var A=o(73150),P=o(78509),M=o(57224),I=o(83351),z=o(57765),B=o(45512),U=o(42704),b=o(92392);function j(s,i){if(1&s&&(a.TgZ(0,"h3",12),a._uU(1),a.qZA()),2&s){const e=a.oxw();a.xp6(1),a.Oqu(e.title)}}function G(s,i){if(1&s&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&s){const e=i.row;a.xp6(1),a.hij(" ",e.perfil.nome,"")}}function E(s,i){if(1&s&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&s){const e=i.row;a.xp6(1),a.hij(" ",e.tipo_capacidade.codigo,"")}}function L(s,i){if(1&s&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&s){const e=i.row;a.xp6(1),a.hij(" ",e.tipo_capacidade.descricao,"")}}class r extends P.E{constructor(i){super(i,d.O,v.W),this.injector=i,this.filterWhere=e=>{let t=[];return e.value.descricao?.length&&t.push(["perfil_id","=",this.urlParams?.get("perfil_id")]),t},this.join=["tipo_capacidade","perfil"],this.tipoCapacidadeDao=i.get(Z.r),this.perfilDao=i.get(T.r),this.title=this.lex.translate("Capacidades"),this.code="MOD_TIPO_CAP",this.filter=this.fh.FormBuilder({descricao:{default:""}}),this.auth.hasPermissionTo("MOD_TIPO_CAP")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_TIPO_CAP_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)})}ngOnInit(){super.ngOnInit(),this.perfilDao.getById(this.urlParams.get("perfil_id")).then(i=>{this.title=this.lex.translate("Capacidades")+" do perfil "+i?.nome,this.cdRef.detectChanges()})}filterClear(i){i.controls.descricao.setValue(""),super.filterClear(i)}static#a=this.\u0275fac=function(e){return new(e||r)(a.Y36(a.zs3))};static#t=this.\u0275cmp=a.Xpm({type:r,selectors:[["app-capacidade-list"]],viewQuery:function(e,t){if(1&e&&a.Gf(A.M,5),2&e){let n;a.iGM(n=a.CRH())&&(t.grid=n.first)}},features:[a.qOj],decls:18,vars:25,consts:[["class","my-2",4,"ngIf"],[3,"dao","add","orderBy","groupBy","join"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","descricao",3,"size","label","control"],[3,"title","template"],["columnPerfil",""],["title","C\xf3digo",3,"template"],["columnCodCapacidade",""],["columnTipoCapacidade",""],["type","options",3,"onEdit","onDelete"],[3,"rows"],[1,"my-2"]],template:function(e,t){if(1&e&&(a.YNc(0,j,2,1,"h3",0),a.TgZ(1,"grid",1),a._UZ(2,"toolbar"),a.TgZ(3,"filter",2)(4,"div",3),a._UZ(5,"input-text",4),a.qZA()(),a.TgZ(6,"columns")(7,"column",5),a.YNc(8,G,2,1,"ng-template",null,6,a.W1O),a.qZA(),a.TgZ(10,"column",7),a.YNc(11,E,2,1,"ng-template",null,8,a.W1O),a.qZA(),a.TgZ(13,"column",5),a.YNc(14,L,2,1,"ng-template",null,9,a.W1O),a.qZA(),a._UZ(16,"column",10),a.qZA(),a._UZ(17,"pagination",11),a.qZA()),2&e){const n=a.MAs(9),Y=a.MAs(12),x=a.MAs(15);a.Q6J("ngIf",!t.isModal),a.xp6(1),a.Q6J("dao",t.dao)("add",t.add)("orderBy",t.orderBy)("groupBy",t.groupBy)("join",t.join),a.xp6(2),a.Q6J("deleted",t.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",t.filter)("where",t.filterWhere)("submit",t.filterSubmit.bind(t))("clear",t.filterClear.bind(t))("collapseChange",t.filterCollapseChange.bind(t))("collapsed",t.filterCollapsed),a.xp6(2),a.Q6J("size",12)("label",t.lex.translate("Capacidade"))("control",t.filter.controls.descricao),a.uIk("maxlength",250),a.xp6(2),a.Q6J("title",t.lex.translate("Perfil"))("template",n),a.xp6(3),a.Q6J("template",Y),a.xp6(3),a.Q6J("title",t.lex.translate("Capacidade"))("template",x),a.xp6(3),a.Q6J("onEdit",t.edit)("onDelete",t.delete),a.xp6(1),a.Q6J("rows",t.rowsLimit)}},dependencies:[m.O5,A.M,M.a,I.b,z.z,B.n,U.Q,b.m]})}const N=[{path:"",component:r,canActivate:[f.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Capacidades"}},{path:"new",component:l,canActivate:[f.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Capacidade",modal:!0}},{path:":id/edit",component:l,canActivate:[f.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Capacidade",modal:!0}}];class c{static#a=this.\u0275fac=function(e){return new(e||c)};static#t=this.\u0275mod=a.oAB({type:c});static#e=this.\u0275inj=a.cJS({imports:[C.Bz.forChild(N),C.Bz]})}var R=o(58568),W=o(72133);class p{static#a=this.\u0275fac=function(e){return new(e||p)};static#t=this.\u0275mod=a.oAB({type:p});static#e=this.\u0275inj=a.cJS({imports:[m.ez,R.K,W.UX,c]})}}}]);