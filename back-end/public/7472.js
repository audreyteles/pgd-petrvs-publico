"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[7472],{57472:(_,C,i)=>{i.r(C),i.d(C,{CapacidadeModule:()=>D});var r,m=i(76733),g=i(55579),f=i(1391),u=i(2314),F=i(8239),v=i(74040),Z=i(86994),c=i(93164),M=i(1184),T=i(96150),A=i(65298),a=i(20755),J=i(32802),P=i(64603);const I=["tipo_capacidade"];function z(o,t){if(1&o&&(a.TgZ(0,"h3",6),a._uU(1),a.qZA()),2&o){const e=a.oxw();a.xp6(1),a.Oqu(e.title)}}class h extends M.F{constructor(t){super(t,c.O,Z.W),this.injector=t,this.validate=(e,n)=>{let l=null;return["perfil_id"].indexOf(n)>=0&&!e.value?.length&&(l="Obrigat\xf3rio"),l},this.titleEdit=e=>"Editando "+this.lex.translate("Capacidade")+": "+(e?.perfil?.nome||"")+": "+(e?.tipo_capacidade?.codigo||""),this.tipoCapacidadeDao=t.get(T.r),this.perfilDao=t.get(A.r),this.form=this.fh.FormBuilder({perfil_id:{default:""},tipo_capacidade_id:{default:""}},this.cdRef,this.validate),this.join=["tipo_capacidade"]}loadData(t,e){var n=this;return(0,F.Z)(function*(){let l=Object.assign({},e.value);yield Promise.all([n.tipoCapacidade.loadSearch(t.tipo_capacidade||t.tipo_capacidade_id)]),e.patchValue(n.util.fillForm(l,t))})()}initializeData(t){t.patchValue(new c.O)}saveData(t){return new Promise((e,n)=>{const l=this.util.fill(new c.O,this.entity);e(this.util.fillForm(l,this.form.value))})}}(r=h).\u0275fac=function(t){return new(t||r)(a.Y36(a.zs3))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-capacidade-form"]],viewQuery:function(t,e){if(1&t&&(a.Gf(v.Q,5),a.Gf(I,5)),2&t){let n;a.iGM(n=a.CRH())&&(e.editableForm=n.first),a.iGM(n=a.CRH())&&(e.tipoCapacidade=n.first)}},features:[a.qOj],decls:7,vars:7,consts:[["class","my-2",4,"ngIf"],["initialFocus","tipo_capacidade_id",3,"form","submit","cancel"],[1,"row"],["controlName","tipo_capacidade_id",3,"size","dao"],["tipo_capacidade",""],["controlName","perfil_id","required","",3,"size","label","dao"],[1,"my-2"]],template:function(t,e){1&t&&(a.YNc(0,z,2,1,"h3",0),a.TgZ(1,"editable-form",1),a.NdJ("submit",function(){return e.onSaveData()})("cancel",function(){return e.onCancel()}),a.TgZ(2,"div",2),a._UZ(3,"input-search",3,4),a.qZA(),a.TgZ(5,"div",2),a._UZ(6,"input-select",5),a.qZA()()),2&t&&(a.Q6J("ngIf",!e.isModal),a.xp6(1),a.Q6J("form",e.form),a.xp6(2),a.Q6J("size",12)("dao",e.tipoCapacidadeDao),a.xp6(3),a.Q6J("size",6)("label",e.lex.translate("Perfil"))("dao",e.perfilDao))},dependencies:[m.O5,v.Q,J.V,P.p]});var p,d,y=i(73150),B=i(78509),U=i(57224),L=i(83351),b=i(57765),j=i(45512),G=i(42704),R=i(92392);function E(o,t){if(1&o&&(a.TgZ(0,"h3",12),a._uU(1),a.qZA()),2&o){const e=a.oxw();a.xp6(1),a.Oqu(e.title)}}function N(o,t){if(1&o&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&o){const e=t.row;a.xp6(1),a.hij(" ",e.perfil.nome,"")}}function W(o,t){if(1&o&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&o){const e=t.row;a.xp6(1),a.hij(" ",e.tipo_capacidade.codigo,"")}}function Y(o,t){if(1&o&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&o){const e=t.row;a.xp6(1),a.hij(" ",e.tipo_capacidade.descricao,"")}}class O extends B.E{constructor(t){super(t,c.O,Z.W),this.injector=t,this.filterWhere=e=>{let n=[];return e.value.descricao?.length&&n.push(["perfil_id","=",this.urlParams?.get("perfil_id")]),n},this.join=["tipo_capacidade","perfil"],this.tipoCapacidadeDao=t.get(T.r),this.perfilDao=t.get(A.r),this.title=this.lex.translate("Capacidades"),this.code="MOD_TIPO_CAP",this.filter=this.fh.FormBuilder({descricao:{default:""}}),this.auth.hasPermissionTo("MOD_TIPO_CAP")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_TIPO_CAP_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)})}ngOnInit(){super.ngOnInit(),this.perfilDao.getById(this.urlParams.get("perfil_id")).then(t=>{this.title=this.lex.translate("Capacidades")+" do perfil "+t?.nome,this.cdRef.detectChanges()})}filterClear(t){t.controls.descricao.setValue(""),super.filterClear(t)}}(p=O).\u0275fac=function(t){return new(t||p)(a.Y36(a.zs3))},p.\u0275cmp=a.Xpm({type:p,selectors:[["app-capacidade-list"]],viewQuery:function(t,e){if(1&t&&a.Gf(y.M,5),2&t){let n;a.iGM(n=a.CRH())&&(e.grid=n.first)}},features:[a.qOj],decls:18,vars:25,consts:[["class","my-2",4,"ngIf"],[3,"dao","add","orderBy","groupBy","join"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","descricao",3,"size","label","control"],[3,"title","template"],["columnPerfil",""],["title","C\xf3digo",3,"template"],["columnCodCapacidade",""],["columnTipoCapacidade",""],["type","options",3,"onEdit","onDelete"],[3,"rows"],[1,"my-2"]],template:function(t,e){if(1&t&&(a.YNc(0,E,2,1,"h3",0),a.TgZ(1,"grid",1),a._UZ(2,"toolbar"),a.TgZ(3,"filter",2)(4,"div",3),a._UZ(5,"input-text",4),a.qZA()(),a.TgZ(6,"columns")(7,"column",5),a.YNc(8,N,2,1,"ng-template",null,6,a.W1O),a.qZA(),a.TgZ(10,"column",7),a.YNc(11,W,2,1,"ng-template",null,8,a.W1O),a.qZA(),a.TgZ(13,"column",5),a.YNc(14,Y,2,1,"ng-template",null,9,a.W1O),a.qZA(),a._UZ(16,"column",10),a.qZA(),a._UZ(17,"pagination",11),a.qZA()),2&t){const n=a.MAs(9),l=a.MAs(12),V=a.MAs(15);a.Q6J("ngIf",!e.isModal),a.xp6(1),a.Q6J("dao",e.dao)("add",e.add)("orderBy",e.orderBy)("groupBy",e.groupBy)("join",e.join),a.xp6(2),a.Q6J("deleted",e.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",e.filter)("where",e.filterWhere)("submit",e.filterSubmit.bind(e))("clear",e.filterClear.bind(e))("collapseChange",e.filterCollapseChange.bind(e))("collapsed",e.filterCollapsed),a.xp6(2),a.Q6J("size",12)("label",e.lex.translate("Capacidade"))("control",e.filter.controls.descricao),a.uIk("maxlength",250),a.xp6(2),a.Q6J("title",e.lex.translate("Perfil"))("template",n),a.xp6(3),a.Q6J("template",l),a.xp6(3),a.Q6J("title",e.lex.translate("Capacidade"))("template",V),a.xp6(3),a.Q6J("onEdit",e.edit)("onDelete",e.delete),a.xp6(1),a.Q6J("rows",e.rowsLimit)}},dependencies:[m.O5,y.M,U.a,L.b,b.z,j.n,G.Q,R.m]});const x=[{path:"",component:O,canActivate:[f.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Capacidades"}},{path:"new",component:h,canActivate:[f.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Capacidade",modal:!0}},{path:":id/edit",component:h,canActivate:[f.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Capacidade",modal:!0}}];class Q{}(d=Q).\u0275fac=function(t){return new(t||d)},d.\u0275mod=a.oAB({type:d}),d.\u0275inj=a.cJS({imports:[g.Bz.forChild(x),g.Bz]});var s,w=i(58568),S=i(72133);class D{}(s=D).\u0275fac=function(t){return new(t||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[m.ez,w.K,S.UX,Q]})}}]);