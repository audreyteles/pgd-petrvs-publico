{"version":3,"file":"9502.js","mappings":"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","sources":["./src/app/dao/unidade-integrante-atribuicao-dao.service.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.html","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.ts","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.html","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.html","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.html","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.ts","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.html","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.ts","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.html","./src/app/modules/configuracoes/unidade/unidade-routing.module.ts","./src/app/modules/configuracoes/unidade/unidade.module.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\r\nimport { DaoBaseService } from './dao-base.service';\r\nimport { IntegranteConsolidado } from '../models/unidade-integrante.model';\r\nimport { Unidade } from '../models/unidade.model';\r\nimport { Usuario } from '../models/usuario.model';\r\nimport { UnidadeIntegranteAtribuicao } from '../models/unidade-integrante-atribuicao.model';\r\n\r\nexport type LoadIntegrantesResult = {\r\n  integrantes: IntegranteConsolidado[],\r\n  unidade?: Unidade,\r\n  usuario?: Usuario\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UnidadeIntegranteAtribuicaoDaoService extends DaoBaseService<UnidadeIntegranteAtribuicao> {\r\n\r\n  constructor(protected injector: Injector) { \r\n    super(\"UnidadeIntegranteAtribuicao\", injector);\r\n    this.inputSearchConfig.searchFields = [];\r\n  }  \r\n}\r\n\r\n","import { Component, Injector, ViewChild, OnChanges, ChangeDetectorRef } from '@angular/core';\r\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\r\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UnidadeIntegranteAtribuicaoDaoService } from 'src/app/dao/unidade-integrante-atribuicao-dao.service';\r\nimport { UnidadeIntegranteDaoService } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Expediente } from 'src/app/models/expediente.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NotificacaoService } from 'src/app/modules/uteis/notificacoes/notificacao.service';\r\nimport { NotificacoesConfigComponent } from 'src/app/modules/uteis/notificacoes/notificacoes-config/notificacoes-config.component';\r\nimport { TemplateDataset } from 'src/app/modules/uteis/templates/template.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { UnidadeIntegranteComponent } from '../unidade-integrante/unidade-integrante.component';\r\nimport { IntegranteConsolidado } from 'src/app/models/unidade-integrante.model';\r\n\r\n@Component({\r\n  selector: 'app-unidade-form',\r\n  templateUrl: './unidade-form.component.html',\r\n  styleUrls: ['./unidade-form.component.scss']\r\n})\r\n\r\nexport class UnidadeFormComponent extends PageFormBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(UnidadeIntegranteComponent, { static: false }) public usuariosIntegrantes?: UnidadeIntegranteComponent;\r\n  @ViewChild('unidade_pai', { static: false }) public unidadePai?: InputSearchComponent;\r\n  @ViewChild('cidade', { static: false }) public cidade?: InputSearchComponent;\r\n  @ViewChild('gestor', { static: false }) public gestor?: InputSearchComponent;\r\n  @ViewChild('gestorSubstituto', { static: false }) public gestorSubstituto?: InputSearchComponent;\r\n  @ViewChild('entidade', { static: false }) public entidade?: InputSearchComponent;\r\n  @ViewChild('notificacoes', { static: false }) public notificacoes?: NotificacoesConfigComponent;\r\n\r\n  public formGestor: FormGroup;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public cidadeDao: CidadeDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public planoTrabalhoDao: PlanoTrabalhoDaoService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public integranteAtribuicaoDao: UnidadeIntegranteAtribuicaoDaoService;\r\n  public notificacao: NotificacaoService;\r\n  public planoDataset: TemplateDataset[];\r\n  public unidade_raiz: boolean = false;\r\n  public informal: boolean = true;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.integranteAtribuicaoDao = injector.get<UnidadeIntegranteAtribuicaoDaoService>(UnidadeIntegranteAtribuicaoDaoService);\r\n    this.notificacao = injector.get<NotificacaoService>(NotificacaoService);\r\n    this.modalWidth = 1200;\r\n    this.planoDataset = this.planoTrabalhoDao.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      codigo: { default: \"\" },\r\n      sigla: { default: \"\" },\r\n      nome: { default: \"\" },\r\n      path: { default: \"\" },\r\n      cidade_id: { default: \"\" },\r\n      uf: { default: \"\" },\r\n      instituidora: { default: false },\r\n      informal: { default: false },\r\n      atividades_arquivamento_automatico: { default: 1 },\r\n      distribuicao_forma_contagem_prazos: { default: \"DIAS_UTEIS\" },\r\n      entrega_forma_contagem_prazos: { default: \"HORAS_UTEIS\" },\r\n      notificacoes: { default: {} },\r\n      etiquetas: { default: [] },\r\n      unidade_pai_id: { default: \"\" },\r\n      entidade_id: { default: this.auth.unidade?.entidade_id },\r\n      etiqueta_texto: { default: \"\" },\r\n      etiqueta_icone: { default: null },\r\n      etiqueta_cor: { default: null },\r\n      expediente24: { default: true },\r\n      expediente: { default: null },\r\n      usar_expediente_entidade: { default: false },\r\n      texto_complementar_plano: { default: \"\" }\r\n    }, this.cdRef, this.validate);\r\n    this.formGestor = this.fh.FormBuilder({\r\n      gestor_id: { default: \"\" },\r\n      gestor_substituto_id: { default: \"\" }\r\n    }, this.cdRef);\r\n    this.join = [\"cidade\", \"entidade\", \"unidade_pai\", \"gestor.usuario:id,nome\", \"gestor_substituto.usuario:id,nome\", \"notificacoes_templates\", \"gestor.gestor:id\", \"gestor_substituto.gestor_substituto:id\"];\r\n  }\r\n\r\n  public async loadData(entity: Unidade, form: FormGroup) {\r\n    this.informal = !!entity.informal;\r\n    this.cdRef.detectChanges();\r\n    let formValue = Object.assign({}, form.value);\r\n    this.form!.patchValue(this.util.fillForm(formValue, entity));\r\n    await Promise.all([\r\n      this.unidadePai!.loadSearch(entity.unidade_pai || entity.unidade_pai_id),\r\n      this.cidade!.loadSearch(entity.cidade || entity.cidade_id),\r\n      this.gestor!.loadSearch(entity?.gestor?.usuario || entity.gestor?.usuario!.id),\r\n      this.gestorSubstituto!.loadSearch(entity?.gestor_substituto?.usuario || entity.gestor_substituto?.usuario!.id),\r\n      this.entidade!.loadSearch(entity.entidade || entity.entidade_id)\r\n    ]);\r\n    entity.etiquetas = entity.etiquetas || [];\r\n    this.form!.controls.informal.setValue(entity.informal);\r\n    this.unidade_raiz = this.action == 'edit' && !entity.unidade_pai_id;\r\n    this.fh.revalidate(this.form!);\r\n    await this.usuariosIntegrantes?.loadData(entity);\r\n  }\r\n\r\n  public initializeData(form: FormGroup): void {\r\n    this.entity = new Unidade({ entidade_id: this.auth.unidade?.entidade_id, entidade: this.auth.unidade?.entidade });\r\n    this.loadData(this.entity, form);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if ((['sigla', 'nome', 'cidade_id', 'entidade_id'].indexOf(controlName) >= 0) && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if (controlName == 'unidade_pai_id' && !control.value?.length && !this.unidade_raiz) {\r\n      result = \"Obrigatório\";\r\n    } else if (controlName == 'codigo' && !parseInt(control.value)) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    const erros_integrantes = [];\r\n    this.usuariosIntegrantes?.grid?.items.forEach((usuarioIntegrante) => {\r\n      if (usuarioIntegrante.usuario_id == '') erros_integrantes.push({ integrante: usuarioIntegrante, erro: 'Falta o usuario' })\r\n    });\r\n    if (erros_integrantes.length) return \"Na aba 'Integrantes' há usuário não salvo. Salve-o antes de salvar a unidade!\"\r\n    return undefined;\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form!.controls.etiqueta_texto.value;\r\n    const key = this.util.textHash(value);\r\n    if (value?.length && this.util.validateLookupItem(this.form!.controls.etiquetas.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form!.controls.etiqueta_texto.value,\r\n        color: this.form!.controls.etiqueta_cor.value,\r\n        icon: this.form!.controls.etiqueta_icone.value\r\n      };\r\n      this.form!.controls.etiqueta_texto.setValue(\"\");\r\n      this.form!.controls.etiqueta_icone.setValue(null);\r\n      this.form!.controls.etiqueta_cor.setValue(null);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public saveData(form: IIndexable): Promise<boolean> {\r\n    return new Promise<boolean>(async (resolve, reject) => {\r\n      this.notificacoes!.saveData();\r\n      this.usuariosIntegrantes!.grid!.confirm();\r\n      let unidade: Unidade = this.util.fill(new Unidade(), this.entity!);\r\n      unidade = this.util.fillForm(unidade, this.form!.value);\r\n      unidade.notificacoes = this.entity!.notificacoes;\r\n      let salvarGestor = !!this.formGestor!.controls.gestor_id?.value && (!this.entity?.gestor?.id.length || (!!this.entity?.gestor?.id.length && this.entity?.gestor?.usuario?.id != this.formGestor!.controls.gestor_id?.value));\r\n      let salvarGestorSubstituto = !!this.formGestor!.controls.gestor_substituto_id?.value && (!this.entity?.gestor_substituto?.id.length || (!!this.entity?.gestor_substituto?.id.length && this.entity?.gestor_substituto?.usuario?.id != this.formGestor!.controls.gestor_substituto_id?.value));\r\n      let salvarGestorDelegado = !!this.formGestor!.controls.gestor_delegado_id?.value && (!this.entity?.gestor_delegado?.id.length || (!!this.entity?.gestor_delegado?.id.length && this.entity?.gestor_delegado?.usuario?.id != this.formGestor!.controls.gestor_delegado_id?.value));\r\n      let apagarGestor = !this.formGestor!.controls.gestor_id?.value && !!this.entity?.gestor?.id.length;\r\n      let apagarGestorSubstituto = !this.formGestor!.controls.gestor_substituto_id?.value && !!this.entity?.gestor_substituto?.id.length;\r\n      let apagarGestorDelegado = !this.formGestor!.controls.gestor_delegado_id?.value && !!this.entity?.gestor_delegado?.id.length;\r\n      let integrantesConsolidados: IntegranteConsolidado[] = this.usuariosIntegrantes?.items || [];\r\n      try {\r\n        await this.dao?.save(unidade, [\"gestor.gestor:id\", \"gestor_substituto.gestor_substituto:id\", \"gestor_delegado.gestor_delegado:id\"]).then(async unidadeBanco => {\r\n          //this.entity = unidadeBanco;\r\n          if (salvarGestor) await this.integranteDao.saveIntegrante([Object.assign(new IntegranteConsolidado, { 'unidade_id': unidadeBanco.id, 'usuario_id': this.formGestor!.controls.gestor_id!.value, 'atribuicoes': [\"GESTOR\"] })]);\r\n          if (salvarGestorSubstituto) await this.integranteDao.saveIntegrante([Object.assign(new IntegranteConsolidado, { 'unidade_id': unidadeBanco.id, 'usuario_id': this.formGestor!.controls.gestor_substituto_id!.value, 'atribuicoes': [\"GESTOR_SUBSTITUTO\"] })]);\r\n          if (salvarGestorDelegado) await this.integranteDao.saveIntegrante([Object.assign(new IntegranteConsolidado, { 'unidade_id': unidadeBanco.id, 'usuario_id': this.formGestor!.controls.gestor_delegado_id!.value, 'atribuicoes': [\"GESTOR_DELEGADO\"] })]);\r\n          if (apagarGestor) await this.integranteAtribuicaoDao.delete(this.entity?.gestor!.gestor!.id!);\r\n          if (apagarGestorSubstituto) await this.integranteAtribuicaoDao.delete(this.entity?.gestor_substituto!.gestor_substituto!.id!);\r\n          if (apagarGestorDelegado) await this.integranteAtribuicaoDao.delete(this.entity?.gestor_delegado!.gestor_delegado!.id!);\r\n          integrantesConsolidados.forEach(v => v.unidade_id = unidadeBanco.id);\r\n          await this.integranteDao.saveIntegrante(integrantesConsolidados as IntegranteConsolidado[]);\r\n        });\r\n        resolve(true);\r\n      } catch (error: any) {\r\n        if (this.editableForm) this.editableForm.error = error;\r\n      }\r\n    });\r\n  }\r\n\r\n  public titleEdit = (entity: Unidade): string => {\r\n    return \"Editando \" + this.lex.translate(\"Unidade\") + ': ' + (entity?.sigla || \"\");\r\n  }\r\n\r\n  public onInformalChange(event: Event) {\r\n    this.informal = this.form!.controls.informal.value;\r\n    this.form!.controls.codigo.setValue(\"\");\r\n    this.form!.controls.instituidora.setValue(false);\r\n    this.form!.controls.codigo.updateValueAndValidity();\r\n  }\r\n\r\n  public onUsarExpedienteEntidadeChange() {\r\n    this.form!.controls.expediente.setValue(this.form!.controls.usar_expediente_entidade.value ? null : this.form!.controls.expediente.value || new Expediente());\r\n  }\r\n\r\n  public get informalIsDisabled() {\r\n    return this.action != 'new' ? 'true' : undefined;\r\n  }\r\n\r\n  public get instituidoraIsDisabled() {\r\n    return this.informal ? 'true' : undefined;\r\n  }\r\n\r\n  public get codigoIsDisabled(){\r\n    return !this.informal && this.action == 'new' ? undefined : 'true';\r\n  }\r\n\r\n  public get unidadePaiIsDisabled(){\r\n    return this.unidade_raiz || (!this.informal && this.action == 'edit') ? 'true' : undefined\r\n  }\r\n\r\n  public get isDisabled(){\r\n    return !this.informal && this.action == 'edit' ? 'true' : undefined;\r\n  }\r\n\r\n  public teste() {\r\n    this.form!.controls.unidade_pai_id.updateValueAndValidity();\r\n  }\r\n\r\n}\r\n","<editable-form [title]=\"isModal ? '' : title\" [form]=\"form!\" [disabled]=\"formDisabled\" initialFocus=\"sigla\"\r\n    (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <tabs display right>\r\n        <tab key=\"PRINCIPAL\" label=\"Principal\">\r\n            <div class=\"row\">\r\n                <input-switch [disabled]=\"informalIsDisabled\" [size]=\"1\" label=\"Informal\"\r\n                    labelClass=\"text-nowrap\" controlName=\"informal\" (change)=\"onInformalChange($event)\"\r\n                    [labelInfo]=\"'Definir se ' + lex.translate('a unidade') + ' é informal ou não.' + lex.translate(' Unidades') + ' informais são, por exemplo: times volantes, comissões, grupos de trabalho, etc.' + lex.translate(' Unidades') + ' informais não podem mudar para formais, ou vice-versa.'\"></input-switch>\r\n                <input-switch [disabled]=\"instituidoraIsDisabled\" [size]=\"1\" label=\"Instit.\" labelClass=\"text-nowrap\" controlName=\"instituidora\" (change)=\"teste()\"\r\n                    [labelInfo]=\"'Se a ' + lex.translate('unidade') + ' é instituidora de Programas. Unidade administrativa prevista no art. 4º do Decreto nº 11.072, de 2022.'\"></input-switch>\r\n                <input-text [disabled]=\"codigoIsDisabled\" [size]=\"2\" label=\"Código\"\r\n                    controlName=\"codigo\"></input-text>\r\n                <input-text [disabled]=\"isDisabled\" [size]=\"2\" label=\"Sigla\" controlName=\"sigla\" required></input-text>\r\n                <input-text [disabled]=\"isDisabled\" [size]=\"6\" label=\"Nome\" controlName=\"nome\" required></input-text>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search [disabled]=\"isDisabled\" #gestor label=\"Gestor\" [size]=\"6\" [emptyValue]=\"null\"\r\n                    [control]=\"formGestor!.controls.gestor_id\" controlName=\"gestor_id\" [dao]=\"usuarioDao\"\r\n                    labelInfo=\"Responsável pela unidade\"></input-search>\r\n                <input-search [disabled]=\"isDisabled\" #gestorSubstituto label=\"Gestor Substituto\" [size]=\"6\" [emptyValue]=\"null\"\r\n                    [control]=\"formGestor!.controls.gestor_substituto_id\" controlName=\"gestor_substituto_id\"\r\n                    [dao]=\"usuarioDao\" labelInfo=\"Responsável substituto pela unidade\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search [disabled]=\"isDisabled\" #cidade [size]=\"4\" controlName=\"cidade_id\" [dao]=\"cidadeDao\" required></input-search>\r\n                <input-search [disabled]=\"unidadePaiIsDisabled\" #unidade_pai [size]=\"4\"\r\n                    [label]=\"lex.translate('Unidade') + ' pai'\" controlName=\"unidade_pai_id\"\r\n                    [where]=\"[['entidade_id', '==', form!.controls.entidade_id.value]]\" [dao]=\"dao!\"></input-search>\r\n                <input-search #entidade [size]=\"4\" disabled controlName=\"entidade_id\" [dao]=\"entidadeDao\"\r\n                    required></input-search>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"CONFIGURACOES\" label=\"Configurações\">\r\n            <div class=\"row\">\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Distribuição')\"\r\n                    controlName=\"distribuicao_forma_contagem_prazos\" [items]=\"lookup.DIA_HORA_CORRIDOS_OU_UTEIS\"\r\n                    labelInfo=\"A forma da contagem dos prazos para a distribuição (lançamento da demanda).\"></input-select>\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Entrega')\"\r\n                    controlName=\"entrega_forma_contagem_prazos\" [items]=\"lookup.HORAS_CORRIDAS_OU_UTEIS\"\r\n                    labelInfo=\"A forma da contagem dos prazos na entrega da demanda (data da entrega e tempo despendido)\"></input-select>\r\n                <input-radio [size]=\"4\" label=\"Arquivamento automático\" controlName=\"atividades_arquivamento_automatico\"\r\n                    [items]=\"lookup.SIMNAO\"\r\n                    labelInfo=\"Se após a avaliação, arquivará automaticamente a atividade.\"></input-radio>\r\n            </div>\r\n            <separator></separator>\r\n            <div clss=\"row\">\r\n                <input-multiselect label=\"Etiquetas\" multiselectStyle=\"inline\" [maxItemWidth]=\"250\"\r\n                    controlName=\"etiquetas\" [size]=\"12\" [addItemHandle]=\"addItemHandle.bind(this)\">\r\n                    <input-text [size]=\"6\" label=\"Texto\" controlName=\"etiqueta_texto\" [attr.maxlength]=250></input-text>\r\n                    <input-select [size]=\"3\" label=\"Ícone\" controlName=\"etiqueta_icone\"\r\n                        [items]=\"lookup.ICONES\"></input-select>\r\n                    <input-color [size]=\"3\" label=\"Cor\" controlName=\"etiqueta_cor\"></input-color>\r\n                </input-multiselect>\r\n            </div>\r\n            <separator></separator>\r\n            <div class=\"row\">\r\n                <input-editor [label]=\"'Texto complementar ' + lex.translate('Plano de Trabalho')\"\r\n                    controlName=\"texto_complementar_plano\" [dataset]=\"planoDataset\"></input-editor>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"EXPEDIENTE\" label=\"Expediente\">\r\n            <div class=\"row\">\r\n                <input-switch #usarExpedienteEntidade [label]=\"'Usar o calendário ' + lex.translate('entidade')\"\r\n                    labelPosition=\"right\" icon=\"bi bi-check2\" [size]=\"12\" (change)=\"onUsarExpedienteEntidadeChange()\"\r\n                    controlName=\"usar_expediente_entidade\"\r\n                    labelInfo=\"Se utiliza o expediente configurado na entidade ao invés de especificar na unidade\"></input-switch>\r\n            </div>\r\n            <calendar-expediente #expediente\r\n                [disabled]=\"form!.controls.usar_expediente_entidade.value ? undefined : 'true'\"\r\n                [expedienteDisabled]=\"entity?.entidade?.expediente\"\r\n                [control]=\"form!.controls.expediente\"></calendar-expediente>\r\n        </tab>\r\n        <tab *ngIf=\"entity\" key=\"NOTIFICACOES\" label=\"Notificações\">\r\n            <notificacoes-config #notificacoes [unidadeId]=\"entity.id.length ? entity!.id : 'ADD'\" [entity]=\"entity!\"\r\n                [disabled]=\"formDisabled\"></notificacoes-config>\r\n        </tab>\r\n        <tab key=\"INTEGRANTES\" [label]=\"lex.translate('Integrantes')\">\r\n            <unidade-integrante #usuariosIntegrantes noPersist [entity]=\"entity\"></unidade-integrante>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>","import { Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnidadeIntegranteDaoService } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable, IntegranteAtribuicao } from 'src/app/models/base.model';\r\nimport { IntegranteConsolidado } from 'src/app/models/unidade-integrante.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { IntegranteService } from 'src/app/services/integrante.service';\r\n\r\n@Component({\r\n  selector: 'unidade-integrante',\r\n  templateUrl: './unidade-integrante.component.html',\r\n  styleUrls: ['./unidade-integrante.component.scss']\r\n})\r\nexport class UnidadeIntegranteComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: Unidade | undefined) { super.entity = value; } get entity(): Unidade | undefined { return super.entity; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n\r\n  public items: IntegranteConsolidado[] = [];\r\n  //public _items?: any[];\r\n  public integranteService: IntegranteService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  //public unidade?: Unidade;\r\n  public tiposAtribuicao: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.integranteService = injector.get<IntegranteService>(IntegranteService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      usuario_id: { default: \"\" },\r\n      atribuicoes: { default: undefined },\r\n      atribuicao: { default: \"\" }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity_id = this.metadata?.entity_id || this.entity?.id;\r\n    this.tiposAtribuicao = this.isNoPersist ? this.lookup.UNIDADE_INTEGRANTE_TIPO.filter((atribuicao) => ![\"GESTOR\",\"GESTOR_SUBSTITUTO\"].includes(atribuicao.key)) : this.lookup.UNIDADE_INTEGRANTE_TIPO;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    (async () => {\r\n      await this.loadData({ id: this.entity_id }, this.form);\r\n    })();\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente para carregar todos os integrantes da unidade.\r\n   * @param entity \r\n   * @param form \r\n   */\r\n  public async loadData(entity: IIndexable, form?: FormGroup | undefined) {\r\n    if (entity.id) {\r\n      let integrantes: IntegranteConsolidado[] = [];\r\n      try {\r\n        await this.integranteDao!.loadIntegrantes(entity.id, \"\").then( resposta =>  integrantes = resposta.integrantes.filter(x => x.atribuicoes?.length > 0)); \r\n      } finally {\r\n        integrantes.forEach(i => this.items?.push(this.integranteService.completarIntegrante(i, entity.id, i.id, i.atribuicoes)));\r\n        this.items = this.integranteService.ordenar(this.items);\r\n        this.cdRef.detectChanges();\r\n        this.grid!.loading = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if ([\"usuario_id\", \"atribuicoes\"].includes(controlName) && !control.value?.length) result = \"Obrigatório\";\r\n    if ((controlName == \"usuario_id\") && this.grid?.adding && this.items.map(i => i.id).includes(control.value)) result = \"O usuário já é integrante desta unidade. Edite-o, ao invés de incluí-lo novamente!\";\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    let atribuicoes: LookupItem[] = form!.controls.atribuicoes.value;\r\n    //if() result = \"\"; CONSTRUIR A CONDIÇÃO PARA CHECAR SE HÁ A ATRIBUIÇÃO DE MAIS DE UM GESTOR PARA O MESMO SERVIDOR NA MESMA UNIDADE\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para inserir um integrante no grid, seja este componente persistente ou não.\r\n   * @returns \r\n   */\r\n  public async addIntegrante() {\r\n    let novo = {\r\n      id: this.integranteDao!.generateUuid(),\r\n      usuario_id: \"\",\r\n      atribuicoes: []\r\n    } as IIndexable;\r\n    return novo;\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n    const key = this.form!.controls.atribuicao.value;\r\n    if (value?.length && this.util.validateLookupItem(this.form!.controls.atribuicoes.value, key)) {\r\n      const icon = this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      const color = this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      result = {\r\n        key: key,\r\n        value: value,\r\n        icon: icon,\r\n        color: color\r\n      };\r\n      this.form!.controls.atribuicao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  /**\r\n   * Método chamado na edição de um integrante da Unidade.\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadIntegrante(form: FormGroup, row: any) {\r\n    form.controls.usuario_id.setValue(this.grid?.adding ? row.usuario_id : row.id);\r\n    form.controls.atribuicoes.setValue(this.integranteService.converterAtribuicoes(row.atribuicoes));\r\n    form.controls.atribuicao.setValue(\"\");\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a exclusão de um integrante do grid, seja este componente persistente ou não. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeIntegrante(row: IntegranteConsolidado) {\r\n    let nomeServidor = row.usuario_nome;\r\n    let nomeUnidade = this.entity!.nome;\r\n    if(this.isNoPersist && row.atribuicoes.length == 1 && row.atribuicoes[0] == \"LOTADO\") {\r\n      await this.dialog.alert(\"IMPOSSÍVEL EXCLUIR !\", \"Um vínculo não pode ser excluído quando sua única atribuição é a lotação do servidor. Se quiser alterar sua lotação, defina-a em outra Unidade.\");\r\n    } else {\r\n      let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir todas as atribuições do servidor '\" + nomeServidor + \"' na unidade '\" + nomeUnidade + \"' ?\");\r\n      if (confirm) {\r\n        let msg: string | undefined;\r\n        try {\r\n          if (!this.isNoPersist) {    // se persistente\r\n            this.loading = true;\r\n            await this.integranteDao.saveIntegrante([this.integranteService.completarIntegrante(row, this.entity!.id, row.id, [])]).then(resposta => {\r\n              if (msg = resposta.find(v => v._metadata.msg?.length)?._metadata.msg) { if (this.grid) this.grid.error = msg; };\r\n            });\r\n            await this.loadData({ id: this.entity!.id }, this.form);\r\n          } else {                    // se não persistente\r\n            Object.assign(row, { '_status': \"DELETE\", 'atribuicoes': [] });\r\n            return false;\r\n          }\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n        //return msg ? false : true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Garante que não será possível excluir atribuições que possam gerar inconsistências\r\n   * @param row Atribuição do servidor na unidade\r\n   * @returns \r\n   */\r\n  public deleteItemHandle(row: LookupItem): boolean | undefined | void {\r\n    return this.integranteService.permitidoApagar(row.key, this.isNoPersist);\r\n  };\r\n\r\n  /**\r\n   * Método chamado no salvamento de um usuário-integrante (new/edit), seja este componente persistente ou não.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveIntegrante(form: FormGroup, row: IntegranteConsolidado) {\r\n    form.controls.atribuicoes.setValue(this.lookup.uniqueLookupItem(form.controls.atribuicoes.value));\r\n    /*     if (this.grid) this.grid!.error = \"\";\r\n    this.cdRef.detectChanges(); */\r\n    let error: any = undefined;\r\n    //error = this.formValidation(form);\r\n    if (!error) {\r\n      let confirm = true;\r\n      let n = this.integranteService.alterandoGestor(form, row.atribuicoes || []);\r\n      if (n.length) confirm = await this.dialog.confirm(\"Confirma a Alteração de Gestor ?\", n.length == 1 ? \"O \" + n[0] + \" será alterado.\" : \"Serão alterados: \" + n.join(', ') + \".\");\r\n      if (form!.controls.atribuicoes.value.length && confirm) {\r\n        this.loading = true;\r\n        try {\r\n          let novasAtribuicoes: IntegranteAtribuicao[] = form!.controls.atribuicoes.value.map((x: LookupItem) => x.key);\r\n          if (!this.isNoPersist) { // se persistente\r\n            await this.integranteDao.saveIntegrante([this.integranteService.completarIntegrante(row, this.entity!.id, form!.controls.usuario_id.value, novasAtribuicoes)]).then(resposta => {\r\n              let msg: string | undefined;\r\n              if (msg = resposta?.find(v => v._metadata.msg?.length)?._metadata.msg) { if (this.grid) this.grid.error = msg; };\r\n            });\r\n            await this.loadData({ id: this.entity!.id }, this.form);\r\n            if (this.grid) this.grid!.error = \"\";\r\n          } else {                // se não persistente\r\n            this.substituirItem(row, novasAtribuicoes);\r\n//            await this.loadData({ id: this.entity!.id }, this.form);\r\n          }\r\n        } catch (error: any) {\r\n          if (this.grid) this.grid.error = error;\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      }\r\n    } else {\r\n      if (this.grid) this.grid.error = \"ATENÇÃO\" + \"&\" + error;\r\n      this.substituirItem(row, form.controls.atribuicoes.value.map((x: LookupItem) => x.key));\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  public substituirItem(row: IntegranteConsolidado, atribuicoes: IntegranteAtribuicao[]){\r\n    let index = this.items!.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n    this.items![index!] = this.integranteService.completarIntegrante(\r\n      { id: row.id, usuario_apelido: this.usuario?.selectedItem?.entity.apelido, usuario_nome: this.usuario?.selectedItem?.entity.nome },\r\n      this.entity!.id, this.form!.controls.usuario_id.value, atribuicoes\r\n    );\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","<grid #grid [items]=\"items\" [minHeight]=\"500\" [form]=\"form!\" [hasDelete]=\"true\" editable\r\n    [add]=\"addIntegrante.bind(this)\" [load]=\"loadIntegrante.bind(this)\" [remove]=\"removeIntegrante.bind(this)\" [save]=\"saveIntegrante.bind(this)\">\r\n    <span *ngIf=\"!isNoPersist\"><strong>{{ 'Unidade: ' + entity?.nome }}</strong></span>\r\n    <columns>\r\n        <column [title]=\"lex.translate('Usuários')\" [template]=\"columnUsuario\" [editTemplate]=\"editUsuario\">\r\n            <ng-template let-row=\"row\" #columnUsuario>\r\n                <div class=\"d-flex\">\r\n                    <div class=\"ms-3\">\r\n                        <profile-picture [url]=\"row.usuario_url_foto || ''\" [size]=\"40\" [hint]=\"row.usuario_nome || ''\"></profile-picture>\r\n                    </div>\r\n                    <div class=\"flex-fill ms-3\">\r\n                        <strong>{{row.usuario_nome || \"\"}}</strong><br>\r\n                        <small>{{row.usuario_apelido || \"\"}}</small>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editUsuario>\r\n                <input-search #usuario [size]=\"12\" label icon controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n            </ng-template>\r\n        </column>\r\n        <column [title]=\"lex.translate('Atribuições')\" [template]=\"columnAtribuicoes\" [editTemplate]=\"editAtribuicoes\">\r\n            <ng-template let-row=\"row\" #columnAtribuicoes>\r\n                <div *ngFor=\"let atribuicao of row.atribuicoes\">\r\n                    <badge [color]=\"lookup.getColor(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [icon]=\"lookup.getIcon(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [label]=\"lookup.getValue(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\"></badge><br>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editAtribuicoes>\r\n                <input-multiselect controlName=\"atribuicoes\" [size]=\"8\" [addItemHandle]=\"addItemHandle.bind(this)\" [deleteItemHandle]=\"deleteItemHandle.bind(this)\">\r\n                    <input-select [size]=\"12\" label=\"\" icon=\"fas fa-sign-out-alt\" controlName=\"atribuicao\" [items]=\"tiposAtribuicao\"></input-select>\r\n                </input-multiselect>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\"></column>\r\n    </columns>\r\n</grid>\r\n","import { Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { ActivatedRouteSnapshot } from '@angular/router';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\n\r\n@Component({\r\n  selector: 'unidade-list-grid',\r\n  templateUrl: './unidade-list-grid.component.html',\r\n  styleUrls: ['./unidade-list-grid.component.scss']\r\n})\r\nexport class UnidadeListGridComponent extends PageListBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @Input() selectable: boolean = false;\r\n  @Input() snapshot?: ActivatedRouteSnapshot;\r\n  @ViewChild('instituidora', { static: false }) public instituidora?: InputSwitchComponent;\r\n\r\n  public cidadeDao: CidadeDaoService;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public buttons: ToolbarButton[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.join = [\"cidade\", \"unidade_pai:id,sigla\", \"entidade:id,sigla\", \"gestor.usuario:id\", \"gestor_substituto.usuario:id\"];\r\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n\r\n    /* Inicializações */\r\n    this.code = \"MOD_CFG_UND\";\r\n    this.filter = this.fh.FormBuilder({\r\n      entidade_id: { default: this.auth.unidade?.entidade_id },\r\n      inativos: { default: false },\r\n      instituidora: { default: false },\r\n      nome: { default: \"\" }\r\n    });\r\n    this.groupBy = [{ field: \"entidade.sigla\", label: \"Entidade\" }];\r\n    // Testa se o usuário possui permissão unificar unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_UNIR\")) {\r\n      this.buttons.push({\r\n        icon: \"bi bi-arrows-collapse\",\r\n        color: \"btn-outline-danger\",\r\n        label: \"Unificar\",\r\n        onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', 'merge'] }, this.modalRefresh())\r\n      });\r\n    }\r\n    this.addOption(this.OPTION_INFORMACOES, \"MOD_UND\");\r\n    this.addOption(this.OPTION_EXCLUIR, \"MOD_UND_EXCL\");\r\n  }\r\n\r\n  public dynamicOptions(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let unidade: Unidade = row as Unidade;\r\n    // Testa se o usuário logado possui permissão de inativar a unidade do grid\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_INATV\")) result.push({icon: unidade.data_inativacao ? \"bi bi-check-circle\" : \"bi bi-x-circle\", label: unidade.data_inativacao ? 'Reativar' : 'Inativar', onClick: async (unidade: Unidade) => await this.inativo(unidade, !unidade.data_inativacao)});\r\n    // Testa se o usuário logado possui permissão para gerenciar integrantes da unidade do grid\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_INTG\")) result.push({ label: \"Integrantes\", icon: \"bi bi-people\", onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', '', unidade.id, 'integrante'] }, { metadata: { entity_id: row.id } })});\r\n    return result;\r\n  }\r\n\r\n  public async inativo(unidade: Unidade, inativo: boolean) {\r\n    if (await this.dialog.confirm(inativo ? \"Inativar\" : \"Reativar\", inativo ? \"Deseja realmente inativar a unidade?\" : \"Deseja reativar a unidade?\")) {\r\n      try {\r\n        this.submitting = true;\r\n        await this.dao!.inativo(unidade.id, inativo);\r\n        await this.modalRefreshId(unidade).modalClose!(undefined);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public filterClear(filter: FormGroup) {\r\n    super.filterClear(filter);\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let form: any = filter.value;\r\n    let result: any[] = [];\r\n    /* Se for selectable trás somente os inativos ou os não inativos, se não for então trás juntamente os inativos se form.inativos */\r\n    result.push(this.selectable ? [\"data_inativacao\", form.inativos ? \"!=\" : \"==\", null] : [\"inativos\", \"==\", form.inativos]);\r\n    if (form.entidade_id?.length) result.push([\"entidade_id\", \"==\", form.entidade_id]);\r\n    if (form.nome?.length) result.push([\"or\", [\"nome\", \"like\", \"%\" + form.nome.trim().replace(\" \", \"%\") + \"%\"], [\"sigla\", \"like\", \"%\" + form.nome.trim().replace(\" \", \"%\") + \"%\"]]);\r\n    if (form.instituidora) result.push([\"instituidora\", \"==\", 1]);\r\n    return result;\r\n  }\r\n}","<h3 *ngIf=\"isModal\" class=\"my-2\">{{title}}</h3>\r\n<grid [dao]=\"dao\" [add]=\"add\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [selectable]=\"selectable\"\r\n    (select)=\"onSelect($event)\" [hasAdd]=\"auth.hasPermissionTo('MOD_UND_INCL')\"\r\n    [hasEdit]=\"auth.hasPermissionTo('MOD_UND_EDT')\">\r\n    <toolbar *ngIf=\"!selectable\" [buttons]=\"buttons\"></toolbar>\r\n    <filter [deleted]=\"this.auth.hasPermissionTo('MOD_AUDIT_DEL')\" [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\"\r\n        [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && filterCollapsed\">\r\n        <div class=\"row\">\r\n            <!-- <input-search #entidade [size]=\"5\" [control]=\"filter!.controls.entidade_id\" controlName=\"entidade_id\" [control]=\"filter!.controls.entidade_id\" [dao]=\"entidadeDao\"></input-search> -->\r\n            <input-text [size]=\"5\" label=\"Nome\" controlName=\"nome\" [control]=\"filter!.controls.nome\" placeholder=\"Nome ou sigla...\" [attr.maxlength]=250></input-text>\r\n            <input-switch #instituidora [size]=\"1\" label=\"Instit.\" labelClass=\"text-nowrap\" controlName=\"instituidora\" [control]=\"filter!.controls.instituidora\" [labelInfo]=\"'Se lista SOMENTE as ' + lex.translate('unidades') + ' instituidoras de ' + lex.translate('programas')\"></input-switch>\r\n            <input-switch [size]=\"1\" label=\"Inativos\" controlName=\"inativos\" [control]=\"filter!.controls.inativos\" labelInfo=\"Se lista também as unidade inativas\"></input-switch>\r\n        </div>\r\n    </filter>\r\n    <columns>\r\n        <column title=\"Sigla\" field=\"sigla\"></column>\r\n        <column title=\"Nome\" [template]=\"columnNome\" orderBy=\"nome\">\r\n            <ng-template let-row=\"row\" #columnNome>\r\n                <span class=\"d-block\">{{row.nome}}</span>\r\n                <span *ngIf=\"row.unidade\" class=\"badge bg-light text-dark\">\r\n                    <i class=\"bi bi-arrow-return-right\"></i>\r\n                    {{row.unidade.sigla}}\r\n                </span>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Código\" field=\"codigo\"></column>\r\n        <column [title]=\"lex.translate('Cidade')\" [template]=\"columnCidade\">\r\n            <ng-template let-row=\"row\" #columnCidade>\r\n                <span>{{(row.cidade?.nome || \"\") + \"/\" + (row.cidade?.uf || \"\")}}</span>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Situação\" [template]=\"columnSituacao\">\r\n            <ng-template let-row=\"row\" #columnSituacao>\r\n                <div class=\"one-per-line\">\r\n                    <badge *ngIf=\"row.instituidora\" color=\"primary\" icon=\"bi bi-star\" label=\"Instituidora\"></badge>\r\n                    <badge [color]=\"!row.data_inativacao ? 'success' : 'danger'\"\r\n                        [icon]=\"!row.data_inativacao ? 'bi bi-check-circle' : 'bi bi-x-circle'\"\r\n                        [label]=\"!row.data_inativacao ? 'Ativo' : 'Inativo'\"></badge>\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\" [onEdit]=\"edit\" [options]=\"options\" [dynamicOptions]=\"dynamicOptions.bind(this)\"></column>\r\n    </columns>\r\n    <pagination [rows]=\"rowsLimit\"></pagination>\r\n</grid>\r\n","import { Component, Injector } from '@angular/core';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { TreeNode } from 'primeng/api';\r\nimport { QueryContext } from 'src/app/dao/query-context';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\nimport { OrganizationChartNodeExpandEvent } from 'primeng/organizationchart';\r\n\r\n@Component({\r\n  selector: 'unidade-mapa',\r\n  templateUrl: './unidade-list-map.component.html',\r\n  styleUrls: ['./unidade-list-map.component.scss']\r\n})\r\nexport class UnidadeListMapComponent extends PageListBase<Unidade, UnidadeDaoService>{\r\n  public query?: QueryContext<Unidade>;\r\n  public data: TreeNode[] = []\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    super.ngAfterViewInit();\r\n    this.carregaUnidades()\r\n  }\r\n\r\n  public async carregaUnidades(){\r\n    let minhaUnidade = this.auth.usuario?.lotacao?.unidade_id\r\n    let unidades = await this.dao!.hierarquiaUnidades(minhaUnidade);\r\n\r\n    let caminhoAteARaiz: string[] = [];\r\n    let unidadeAtualId = minhaUnidade;\r\n\r\n    while (unidadeAtualId) {\r\n        let unidadeAtual = unidades.find(x => x.id === unidadeAtualId);\r\n        if (unidadeAtual) {\r\n            caminhoAteARaiz.unshift(unidadeAtualId);\r\n            unidadeAtualId = unidadeAtual.unidade_pai_id || undefined;\r\n        } else {\r\n            break;\r\n        }\r\n    }\r\n\r\n    let filhos = (unidadeId: string | null): any => {\r\n        return unidades\r\n            .filter(x => x.unidade_pai_id === unidadeId)\r\n            .map(x => ({\r\n                type: 'unidade',\r\n                label: x.sigla,                \r\n                expanded: minhaUnidade === x.id ? false : caminhoAteARaiz.includes(x.id),\r\n                styleClass: minhaUnidade == x.id ? 'text-bg-primary' : '',                \r\n                data: {\r\n                  hint: x.nome,\r\n                  unidade: x,\r\n                },\r\n                children: temFilhos(x.id) ? filhos(x.id) : [{ type: 'fake', expanded: false, label: 'Carregando...' }]\r\n            }));\r\n    };\r\n    let temFilhos = (unidadeId: string) => {\r\n      return unidades.some(x => x.unidade_pai_id === unidadeId);\r\n    };    \r\n    \r\n    this.data = filhos(null);\r\n  }\r\n\r\n  expandeUnidade(event: OrganizationChartNodeExpandEvent){   \r\n    this.carregaFilhas(event.node.data.unidade.id, event.node)   \r\n  }\r\n\r\n\r\n  async carregaFilhas(unidade_id: string, node: TreeNode){\r\n    let unidades = await this.dao!.unidadesFilhas(unidade_id);\r\n    node.children = unidades.map(x => ({\r\n      type: 'unidade',\r\n      label: x.sigla,\r\n      expanded: false,\r\n      data: {\r\n        unidade: x,\r\n        hint: x.nome\r\n      },\r\n      children: [{ type: 'fake', expanded: false, label: 'Carregando...' }]\r\n    }));\r\n  }\r\n\r\n}\r\n","<ng-scrollbar autoHeightDisabled=\"false\" track=\"all\">\r\n  <div class=\"my-3\">\r\n    <p-organizationChart [value]=\"data\" (onNodeExpand)=\"expandeUnidade($event)\">\r\n      <ng-template let-node pTemplate=\"unidade\">\r\n        <div class=\"font-bold\">{{ node.label }}</div>\r\n      </ng-template>\r\n    </p-organizationChart>\r\n  </div>\r\n</ng-scrollbar>","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\n\r\n@Component({\r\n  selector: 'app-unidade-list',\r\n  templateUrl: './unidade-list.component.html',\r\n  styleUrls: ['./unidade-list.component.scss']\r\n})\r\nexport class UnidadeListComponent extends PageListBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild(TabsComponent, { static: false }) public tabs?: TabsComponent;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.title = this.lex.translate(\"Unidades\");\r\n    this.code = \"MOD_CFG_UND\";\r\n    this.filter = this.fh.FormBuilder({});\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    super.ngAfterViewInit();\r\n    this.tabs!.active = [\"TABELA\", \"MAPA\"].includes(this.usuarioConfig.active_tab) ? this.usuarioConfig.active_tab : \"TABELA\";\r\n  }\r\n\r\n  public async onSelectTab(tab: LookupItem) {\r\n    if(this.viewInit) this.saveUsuarioConfig({active_tab: tab.key});\r\n  }\r\n\r\n  public filterClear(filter: FormGroup) {\r\n    filter.controls.nome.setValue(\"\");\r\n    super.filterClear(filter);\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let result: any[] = [];\r\n    let form: any = filter.value;\r\n    return result;\r\n  }\r\n\r\n}","<tabs right [title]=\"isModal ? '' : title\" [select]=\"onSelectTab.bind(this)\">\r\n    <tab key=\"TABELA\" icon=\"bi bi-table\" label=\"Lista\" [template]=\"grid\">\r\n        <ng-template #grid>\r\n            <unidade-list-grid [selectable]=\"selectable\" [snapshot]=\"snapshot || modalRoute || route.snapshot\"></unidade-list-grid>\r\n        </ng-template>\r\n    </tab>\r\n    <tab *ngIf=\"!selectable\" key=\"MAPA\" icon=\"bi bi-card-heading\" label=\"Mapa\" [template]=\"mapa\">\r\n        <ng-template #mapa>\r\n            <unidade-mapa></unidade-mapa>\r\n        </ng-template>\r\n    </tab>\r\n</tabs>","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\nexport type UnidadeMerge = {\r\n  id: string,\r\n  unidade_origem_id: string,\r\n  unidade_destino_id: string,\r\n  unidade_origem?: Unidade,\r\n  unidade_destino?: Unidade\r\n}\r\n\r\n@Component({\r\n  selector: 'app-unidade-merge',\r\n  templateUrl: './unidade-merge.component.html',\r\n  styleUrls: ['./unidade-merge.component.scss']\r\n})\r\nexport class UnidadeMergeComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('unidadeOrigem', { static: false }) public unidadeOrigem?: InputSearchComponent;\r\n  @ViewChild('unidadeDestino', { static: false }) public unidadeDestino?: InputSearchComponent;\r\n\r\n  public items: UnidadeMerge[] = [];\r\n  public toolbarButtons: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-yin-yang\",\r\n      label: \"Mesma sigla\",\r\n      hint: \"Unificar todos que tenham a mesma sigla. Sendo a inativa considerada como origem.\",\r\n      onClick: this.onMesmaSiglaClick.bind(this)\r\n    }\r\n  ];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      exclui_origem: {default: false},\r\n      origem_inativo: {default: true},\r\n      unidade_origem_id: {default: \"\"},\r\n      unidade_destino_id: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    return result;\r\n  }\r\n\r\n  public onMesmaSiglaClick() {\r\n    this.loading = true;\r\n    (this.dao as UnidadeDaoService).mesmaSigla().then(unidades => {\r\n      let destinos: Unidade[] = [];\r\n      destinos = unidades.reduce((acumulador, valor) => {\r\n        if(!valor.data_inativacao && !acumulador.find(x => x.sigla == valor.sigla)) acumulador.push(valor);\r\n        return acumulador; \r\n      }, destinos);\r\n      let destinosIds = destinos.map(x => x.id);\r\n      let origens = unidades.filter(x => !destinosIds.includes(x.id) && !!x.data_inativacao);\r\n      let origensIds = origens.map(x => x.id);\r\n      this.items = [];\r\n      for(let origem of origens) {\r\n        let destino = destinos.find(x => x.sigla == origem.sigla);\r\n        if(destino) {\r\n          this.items.push({\r\n            id: this.dao!.generateUuid(),\r\n            unidade_origem_id: origem.id,\r\n            unidade_destino_id: destino.id,\r\n            unidade_origem: origem,\r\n            unidade_destino: destino\r\n          });\r\n        }\r\n      }\r\n      /* Pegas as unidade que tem a Sigla repetida mas que não estão inativas */\r\n      let error: string[] = [];\r\n      for(let unidade of unidades) {\r\n        if(!destinosIds.includes(unidade.id) && !origensIds.includes(unidade.id)) error.push(unidade.codigo + \" - \" + unidade.sigla + \" - \" + unidade.nome);\r\n      }\r\n      if(error.length) this.editableForm!.error = (error.length == 1 ? \"A unidade abaixo possui duplicidade de SIGLA, mas não está inativa:\" : \"As unidades abaixo possuem duplicidade de SIGLA, mas não estão inativas:\") + \"\\n\" + error.join(\"\\n\");\r\n    }).finally(() => {\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  public async addMerge() {\r\n    return {\r\n      id: this.dao!.generateUuid(),\r\n      unidade_origem_id: \"\",\r\n      unidade_destino_id: \"\",\r\n      unidade_origem: undefined,\r\n      unidade_destino: undefined\r\n    } as IIndexable;\r\n  }\r\n\r\n  public async loadMerge(form: FormGroup, row: any) {\r\n    form.controls.unidade_origem_id.setValue(row.unidade_origem_id);\r\n    form.controls.unidade_destino_id.setValue(row.unidade_destino_id);\r\n  }\r\n\r\n  public async removeMerge(row: any) {\r\n    return true;\r\n  }\r\n\r\n  public async saveMerge(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    if(this.form!.controls.unidade_origem_id.value?.length || this.form!.controls.unidade_destino_id.value?.length) {\r\n      row.unidade_origem_id = form.controls.unidade_origem_id.value;\r\n      row.unidade_origem = this.unidadeOrigem?.selectedEntity || await this.dao?.getById(row.unidade_origem_id);\r\n      row.unidade_destino_id = form.controls.unidade_destino_id.value;\r\n      row.unidade_destino = this.unidadeDestino?.selectedEntity || await this.dao?.getById(row.unidade_destino_id);\r\n      result = row;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public onMerge() {\r\n    let error: string | undefined = undefined;\r\n    for(let row of this.items) error = error || (!row.unidade_origem_id?.length || !row.unidade_destino_id?.length ? \"A origem e o destino precisam estar preenchidos em todos\" : undefined);\r\n    this.editableForm!.error = error;\r\n    if(!error?.length) {\r\n      this.loading = true;\r\n      (this.dao as UnidadeDaoService).unificar(this.items.map(x => Object.assign({}, {unidade_origem_id: x.unidade_origem_id, unidade_destino_id: x.unidade_destino_id})), this.form!.controls.exclui_origem.value).then(result => {\r\n        if(result) this.close();\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<editable-form [form]=\"form!\" [title]=\"isModal ? '' : title\" confirmLabel=\"Unificar\" (submit)=\"onMerge()\" (cancel)=\"onCancel()\">\r\n    <top-alert type=\"warning\" message=\"Por motivos de segurança será permitido somente unificar unidades inativas para unidade ativas. E caso [Exclui origem] não esteja habilitado, a unidade de origem continuará na lista (como inativa).\"></top-alert>\r\n    <toolbar [buttons]=\"toolbarButtons\">\r\n        <input-switch [size]=\"4\" labelPosition=\"left\" label=\"Exclui origem\" controlName=\"exclui_origem\"></input-switch>\r\n    </toolbar>\r\n    <grid [items]=\"items\" [form]=\"form!\" [add]=\"addMerge.bind(this)\" [load]=\"loadMerge.bind(this)\" [remove]=\"removeMerge.bind(this)\" [save]=\"saveMerge.bind(this)\" editable>\r\n        <columns>\r\n            <column [title]=\"lex.translate('Unidade') + ' origem'\" titleHint=\"Unidade que será substituída pela outra\" [template]=\"columnUnidadeOrigem\" [editTemplate]=\"editUnidadeOrigem\">\r\n                <ng-template let-row=\"row\" #columnUnidadeOrigem>\r\n                    <span>{{row.unidade_origem?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_origem?.codigo || \"\"}} - {{row.unidade_origem?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeOrigem>\r\n                    <input-search #unidade_origem [size]=\"12\" label icon controlName=\"unidade_origem_id\" [dao]=\"dao\" [where]=\"[['inativo', '!=', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: true}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"lex.translate('Unidade') + ' destino'\" titleHint=\"Unidade que sobrará após a unificação\" [template]=\"columnUnidadeDestino\" [editTemplate]=\"editUnidadeDestino\">\r\n                <ng-template let-row=\"row\" #columnUnidadeDestino>\r\n                    <span>{{row.unidade_destino?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_destino?.codigo || \"\"}} - {{row.unidade_destino?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeDestino>\r\n                    <input-search #unidade_destino [size]=\"12\" label icon controlName=\"unidade_destino_id\" [dao]=\"dao\" [where]=\"[['inativo', '==', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: false}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column type=\"options\"></column>\r\n        </columns>\r\n    </grid>\r\n</editable-form>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades\" } },\r\n  { path: 'new', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão de Unidade\", modal: true } },\r\n  { path: ':id/edit', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição de Unidade\", modal: true } },\r\n  { path: ':id/consult', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Unidade\", modal: true } },\r\n  { path: ':id/:idUnidade/integrante', component: UnidadeIntegranteComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Integrantes da Unidade\", modal: true } },\r\n  { path: ':id/subordinadas', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades subordinadas\" } },\r\n  { path: 'merge', component: UnidadeMergeComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unificação\", modal: true } }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UnidadeRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { UnidadeRoutingModule } from './unidade-routing.module';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { OrganizationChartModule } from 'primeng/organizationchart';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { NgScrollbarModule } from 'ngx-scrollbar';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\nimport { UnidadeListGridComponent } from './unidade-list-grid/unidade-list-grid.component';\r\nimport { UnidadeListMapComponent } from './unidade-list-map/unidade-list-map.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UnidadeFormComponent,\r\n    UnidadeListComponent,\r\n    UnidadeMergeComponent,\r\n    UnidadeIntegranteComponent,\r\n    UnidadeListGridComponent,\r\n    UnidadeListMapComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    UteisModule,\r\n    ReactiveFormsModule,\r\n    UnidadeRoutingModule,\r\n    OrganizationChartModule,\r\n    NgScrollbarModule\r\n  ]\r\n})\r\nexport class UnidadeModule { }\r\n"],"names":["DaoBaseService","UnidadeIntegranteAtribuicaoDaoService","constructor","injector","inputSearchConfig","searchFields","i0","ɵɵinject","Injector","factory","ɵfac","providedIn","EditableFormComponent","CidadeDaoService","EntidadeDaoService","PlanoTrabalhoDaoService","UnidadeDaoService","UnidadeIntegranteDaoService","UsuarioDaoService","Expediente","Unidade","PageFormBase","NotificacaoService","UnidadeIntegranteComponent","IntegranteConsolidado","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r7","entity","id","length","formDisabled","UnidadeFormComponent","unidade_raiz","informal","validate","control","controlName","result","indexOf","value","parseInt","formValidation","form","erros_integrantes","usuariosIntegrantes","grid","items","forEach","usuarioIntegrante","usuario_id","push","integrante","erro","undefined","titleEdit","lex","translate","sigla","entidadeDao","get","cidadeDao","usuarioDao","planoTrabalhoDao","integranteDao","integranteAtribuicaoDao","notificacao","modalWidth","planoDataset","dataset","fh","FormBuilder","codigo","default","nome","path","cidade_id","uf","instituidora","atividades_arquivamento_automatico","distribuicao_forma_contagem_prazos","entrega_forma_contagem_prazos","notificacoes","etiquetas","unidade_pai_id","entidade_id","auth","unidade","etiqueta_texto","etiqueta_icone","etiqueta_cor","expediente24","expediente","usar_expediente_entidade","texto_complementar_plano","cdRef","formGestor","gestor_id","gestor_substituto_id","join","loadData","_this","_asyncToGenerator","detectChanges","formValue","Object","assign","patchValue","util","fillForm","Promise","all","unidadePai","loadSearch","unidade_pai","cidade","gestor","usuario","gestorSubstituto","gestor_substituto","entidade","controls","setValue","action","revalidate","initializeData","addItemHandle","key","textHash","validateLookupItem","color","icon","saveData","_this2","_ref","resolve","reject","confirm","fill","salvarGestor","salvarGestorSubstituto","salvarGestorDelegado","gestor_delegado_id","gestor_delegado","apagarGestor","apagarGestorSubstituto","apagarGestorDelegado","integrantesConsolidados","dao","save","then","_ref2","unidadeBanco","saveIntegrante","delete","v","unidade_id","_x3","apply","arguments","error","editableForm","_x","_x2","onInformalChange","event","updateValueAndValidity","onUsarExpedienteEntidadeChange","informalIsDisabled","instituidoraIsDisabled","codigoIsDisabled","unidadePaiIsDisabled","isDisabled","teste","ɵɵdirectiveInject","selectors","viewQuery","UnidadeFormComponent_Query","rf","ctx","ɵɵlistener","UnidadeFormComponent_Template_editable_form_submit_0_listener","onSaveData","UnidadeFormComponent_Template_editable_form_cancel_0_listener","onCancel","UnidadeFormComponent_Template_input_switch_change_4_listener","$event","UnidadeFormComponent_Template_input_switch_change_5_listener","UnidadeFormComponent_Template_input_switch_change_37_listener","ɵɵtemplate","UnidadeFormComponent_tab_41_Template","isModal","title","ɵɵpureFunction1","_c7","_c6","lookup","DIA_HORA_CORRIDOS_OU_UTEIS","HORAS_CORRIDAS_OU_UTEIS","SIMNAO","bind","ɵɵattribute","ICONES","GridComponent","PageFrameBase","IntegranteService","ɵɵtext","ɵɵtextInterpolate","ctx_r1","row_r10","usuario_url_foto","usuario_nome","usuario_apelido","ctx_r5","ctx_r14","getColor","UNIDADE_INTEGRANTE_TIPO","atribuicao_r15","getIcon","getValue","UnidadeIntegranteComponent_ng_template_10_div_0_Template","row_r13","atribuicoes","ctx_r9","deleteItemHandle","tiposAtribuicao","noPersist","includes","adding","map","i","integranteService","atribuicao","ngOnInit","entity_id","metadata","isNoPersist","filter","ngAfterViewInit","integrantes","loadIntegrantes","resposta","x","completarIntegrante","ordenar","loading","addIntegrante","_this3","novo","generateUuid","loadIntegrante","row","_this4","converterAtribuicoes","removeIntegrante","_this5","nomeServidor","nomeUnidade","dialog","alert","msg","find","_metadata","permitidoApagar","_this6","uniqueLookupItem","n","alterandoGestor","novasAtribuicoes","substituirItem","index","findIndex","selectedItem","apelido","UnidadeIntegranteComponent_Query","UnidadeIntegranteComponent_span_2_Template","UnidadeIntegranteComponent_ng_template_5_Template","ɵɵtemplateRefExtractor","UnidadeIntegranteComponent_ng_template_7_Template","UnidadeIntegranteComponent_ng_template_10_Template","UnidadeIntegranteComponent_ng_template_12_Template","_r2","_r4","_r6","_r8","PageListBase","ctx_r0","buttons","ɵɵtextInterpolate1","row_r9","UnidadeListGridComponent_ng_template_12_span_2_Template","row_r12","UnidadeListGridComponent_ng_template_19_badge_1_Template","data_inativacao","UnidadeListGridComponent","selectable","filterWhere","inativos","trim","replace","code","groupBy","field","label","hasPermissionTo","onClick","go","navigate","route","modalRefresh","addOption","OPTION_INFORMACOES","OPTION_EXCLUIR","dynamicOptions","inativo","submitting","modalRefreshId","modalClose","filterClear","UnidadeListGridComponent_Query","UnidadeListGridComponent_h3_0_Template","UnidadeListGridComponent_Template_grid_select_1_listener","onSelect","UnidadeListGridComponent_toolbar_2_Template","UnidadeListGridComponent_ng_template_12_Template","UnidadeListGridComponent_ng_template_16_Template","UnidadeListGridComponent_ng_template_19_Template","add","orderBy","filterSubmit","filterCollapseChange","filterCollapsed","_r3","_r5","_r7","edit","options","rowsLimit","node_r1","UnidadeListMapComponent","data","carregaUnidades","minhaUnidade","lotacao","unidades","hierarquiaUnidades","caminhoAteARaiz","unidadeAtualId","unidadeAtual","unshift","filhos","unidadeId","type","expanded","styleClass","hint","children","temFilhos","some","expandeUnidade","carregaFilhas","node","unidadesFilhas","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","UnidadeListMapComponent_Template","UnidadeListMapComponent_Template_p_organizationChart_onNodeExpand_2_listener","UnidadeListMapComponent_ng_template_3_Template","TabsComponent","snapshot","modalRoute","UnidadeListComponent_tab_4_ng_template_1_Template","UnidadeListComponent","tabs","active","usuarioConfig","active_tab","onSelectTab","tab","viewInit","saveUsuarioConfig","UnidadeListComponent_Query","UnidadeListComponent_ng_template_2_Template","UnidadeListComponent_tab_4_Template","_r0","row_r8","unidade_origem","ɵɵtextInterpolate2","ctx_r3","_c3","ɵɵpureFunction0","_c2","ɵɵpureFunction2","_c4","_c5","row_r11","unidade_destino","_c8","_c9","UnidadeMergeComponent","toolbarButtons","onMesmaSiglaClick","exclui_origem","origem_inativo","unidade_origem_id","unidade_destino_id","mesmaSigla","destinos","reduce","acumulador","valor","destinosIds","origens","origensIds","origem","destino","finally","addMerge","loadMerge","removeMerge","saveMerge","unidadeOrigem","selectedEntity","getById","unidadeDestino","onMerge","unificar","close","UnidadeMergeComponent_Query","UnidadeMergeComponent_Template_editable_form_submit_0_listener","UnidadeMergeComponent_Template_editable_form_cancel_0_listener","UnidadeMergeComponent_ng_template_7_Template","UnidadeMergeComponent_ng_template_9_Template","UnidadeMergeComponent_ng_template_12_Template","UnidadeMergeComponent_ng_template_14_Template","RouterModule","AuthGuard","ConfigResolver","routes","component","canActivate","config","runGuardsAndResolvers","modal","UnidadeRoutingModule","forChild","imports","i1","exports","CommonModule","ComponentsModule","OrganizationChartModule","ReactiveFormsModule","UteisModule","NgScrollbarModule","UnidadeModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}