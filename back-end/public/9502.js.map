<<<<<<< HEAD
{"version":3,"file":"9502.js","mappings":"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","sources":["./src/app/dao/unidade-integrante-atribuicao-dao.service.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.html","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.ts","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.html","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.html","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.html","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.ts","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.html","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.ts","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.html","./src/app/modules/configuracoes/unidade/unidade-routing.module.ts","./src/app/modules/configuracoes/unidade/unidade.module.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\nimport { DaoBaseService } from './dao-base.service';\nimport { IntegranteConsolidado } from '../models/unidade-integrante.model';\nimport { Unidade } from '../models/unidade.model';\nimport { Usuario } from '../models/usuario.model';\nimport { UnidadeIntegranteAtribuicao } from '../models/unidade-integrante-atribuicao.model';\n\nexport type LoadIntegrantesResult = {\n  integrantes: IntegranteConsolidado[],\n  unidade?: Unidade,\n  usuario?: Usuario\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UnidadeIntegranteAtribuicaoDaoService extends DaoBaseService<UnidadeIntegranteAtribuicao> {\n\n  constructor(protected injector: Injector) { \n    super(\"UnidadeIntegranteAtribuicao\", injector);\n    this.inputSearchConfig.searchFields = [];\n  }  \n}\n\n","import { Component, Injector, ViewChild, OnChanges, ChangeDetectorRef} from '@angular/core';\r\nimport { AbstractControl, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\r\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UnidadeIntegranteAtribuicaoDaoService } from 'src/app/dao/unidade-integrante-atribuicao-dao.service';\r\nimport { UnidadeIntegranteDaoService, Vinculo } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Expediente } from 'src/app/models/expediente.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NotificacaoService } from 'src/app/modules/uteis/notificacoes/notificacao.service';\r\nimport { NotificacoesConfigComponent } from 'src/app/modules/uteis/notificacoes/notificacoes-config/notificacoes-config.component';\r\nimport { TemplateDataset } from 'src/app/modules/uteis/templates/template.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { UnidadeIntegranteComponent } from '../unidade-integrante/unidade-integrante.component';\r\n\r\n@Component({\r\n  selector: 'app-unidade-form',\r\n  templateUrl: './unidade-form.component.html',\r\n  styleUrls: ['./unidade-form.component.scss']\r\n})\r\n\r\nexport class UnidadeFormComponent extends PageFormBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(UnidadeIntegranteComponent, { static: false }) public usuariosIntegrantes?: UnidadeIntegranteComponent;\r\n  @ViewChild('unidade_pai', { static: false }) public unidadePai?: InputSearchComponent;\r\n  @ViewChild('cidade', { static: false }) public cidade?: InputSearchComponent;\r\n  @ViewChild('gestor', { static: false }) public gestor?: InputSearchComponent;\r\n  @ViewChild('gestorSubstituto', { static: false }) public gestorSubstituto?: InputSearchComponent;\r\n  @ViewChild('entidade', { static: false }) public entidade?: InputSearchComponent;\r\n  @ViewChild('notificacoes', { static: false }) public notificacoes?: NotificacoesConfigComponent;\r\n  @ViewChild('instituidora', { static: false }) public instituidora?: InputSwitchComponent;\r\n\r\n  public form: FormGroup;\r\n  public formGestor: FormGroup;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public cidadeDao: CidadeDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public planoTrabalhoDao: PlanoTrabalhoDaoService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public integranteAtribuicaoDao: UnidadeIntegranteAtribuicaoDaoService;\r\n  public notificacao: NotificacaoService;\r\n  public planoDataset: TemplateDataset[];\r\n  public raiz: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.integranteAtribuicaoDao = injector.get<UnidadeIntegranteAtribuicaoDaoService>(UnidadeIntegranteAtribuicaoDaoService);\r\n    this.notificacao = injector.get<NotificacaoService>(NotificacaoService);\r\n    this.modalWidth = 1200;\r\n    this.planoDataset = this.planoTrabalhoDao.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      codigo: {default: \"\"},\r\n      sigla: {default: \"\"},\r\n      nome: {default: \"\"},\r\n      path: {default: \"\"},\r\n      cidade_id: {default: \"\"},\r\n      uf: {default: \"\"},\r\n      instituidora: {default: false},\r\n      informal: {default: false},\r\n      atividades_arquivamento_automatico: {default: 1},\r\n      distribuicao_forma_contagem_prazos: {default: \"DIAS_UTEIS\"},\r\n      entrega_forma_contagem_prazos: {default: \"HORAS_UTEIS\"},\r\n      notificacoes: {default: {}},\r\n      etiquetas: {default: []},\r\n      unidade_pai_id: {default: \"\"},\r\n      entidade_id: {default: this.auth.unidade?.entidade_id},\r\n      etiqueta_texto: {default: \"\"},\r\n      etiqueta_icone: {default: null},\r\n      etiqueta_cor: {default: null},\r\n      expediente24: {default: true},\r\n      expediente: {default: null},\r\n      usar_expediente_entidade: {default: false},\r\n      texto_complementar_plano: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n    this.formGestor = this.fh.FormBuilder({\r\n      gestor_id: {default: \"\"},\r\n      gestor_substituto_id: {default: \"\"}\r\n    }, this.cdRef);\r\n    this.join =  [\"cidade\", \"entidade\", \"gestor.usuario:id,nome\", \"gestor_substituto.usuario:id,nome\", \"notificacoes_templates\", \"gestor.gestor:id\", \"gestor_substituto.gestor_substituto:id\"];\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(((['sigla', 'nome', 'cidade_id', 'entidade_id'].indexOf(controlName) >= 0) || (controlName == 'unidade_pai_id' && !this.raiz)) && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if(controlName == 'codigo' && this.form?.controls.informal?.value == !!control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    const erros_integrantes = [];\r\n    this.usuariosIntegrantes?.grid?.items.forEach((usuarioIntegrante) => {\r\n      if(usuarioIntegrante.usuario_id == '') erros_integrantes.push({ integrante: usuarioIntegrante, erro: 'Falta usuario_id'})\r\n    });\r\n    if(erros_integrantes.length) return \"Na aba 'Integrantes' há usuário não salvo. Salve-o antes de salvar a unidade!\"\r\n    return undefined;\r\n  }\r\n\r\n  public async loadData(entity: Unidade, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    await Promise.all ([\r\n      this.unidadePai!.loadSearch(entity.unidade_pai || entity.unidade_pai_id),\r\n      this.cidade!.loadSearch(entity.cidade || entity.cidade_id),\r\n      this.gestor!.loadSearch(entity?.gestor?.usuario || entity.gestor?.usuario!.id),\r\n      this.gestorSubstituto!.loadSearch(entity?.gestor_substituto?.usuario || entity.gestor_substituto?.usuario!.id),\r\n      this.entidade!.loadSearch(entity.entidade || entity.entidade_id)\r\n    ]);\r\n    entity.etiquetas = entity.etiquetas || [];\r\n    this.raiz = this.action == 'edit' && !this.entity?.unidade_pai_id;\r\n    this.form.patchValue(this.util.fillForm(formValue, entity));\r\n    this.formGestor.controls.gestor_id.setValue(entity.gestor?.usuario_id);\r\n    this.formGestor.controls.gestor_substituto_id.setValue(entity.gestor_substituto?.usuario_id);\r\n    this.usuariosIntegrantes?.loadData(entity);\r\n  }\r\n\r\n  public initializeData(form: FormGroup): void {\r\n    this.entity = new Unidade({ entidade_id: this.auth.unidade?.entidade_id, entidade: this.auth.unidade?.entidade });\r\n    this.loadData(this.entity, form);\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form.controls.etiqueta_texto.value;\r\n    const key = this.util.textHash(value);\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.etiquetas.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form.controls.etiqueta_texto.value,\r\n        color: this.form.controls.etiqueta_cor.value,\r\n        icon: this.form.controls.etiqueta_icone.value\r\n      };\r\n      this.form.controls.etiqueta_texto.setValue(\"\");\r\n      this.form.controls.etiqueta_icone.setValue(null);\r\n      this.form.controls.etiqueta_cor.setValue(null);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public saveData(form: IIndexable): Promise<boolean> {\r\n    return new Promise<boolean>(async (resolve, reject) => {\r\n      this.notificacoes!.saveData();\r\n      this.usuariosIntegrantes!.grid!.confirm();\r\n      let unidade: Unidade = this.util.fill(new Unidade(), this.entity!);\r\n      unidade = this.util.fillForm(unidade, this.form!.value);\r\n      unidade.notificacoes = this.entity!.notificacoes;\r\n      let salvarGestor = !!this.formGestor!.controls.gestor_id?.value && (!this.entity?.gestor?.id.length || (!!this.entity?.gestor?.id.length && this.entity?.gestor?.usuario?.id != this.formGestor!.controls.gestor_id?.value));\r\n      let salvarGestorSubstituto = !!this.formGestor!.controls.gestor_substituto_id?.value && (!this.entity?.gestor_substituto?.id.length || (!!this.entity?.gestor_substituto?.id.length && this.entity?.gestor_substituto?.usuario?.id != this.formGestor!.controls.gestor_substituto_id?.value));\r\n      let salvarGestorDelegado = !!this.formGestor!.controls.gestor_delegado_id?.value && (!this.entity?.gestor_delegado?.id.length || (!!this.entity?.gestor_delegado?.id.length && this.entity?.gestor_delegado?.usuario?.id != this.formGestor!.controls.gestor_delegado_id?.value));\r\n      let apagarGestor = !this.formGestor!.controls.gestor_id?.value && !!this.entity?.gestor?.id.length;\r\n      let apagarGestorSubstituto = !this.formGestor!.controls.gestor_substituto_id?.value && !!this.entity?.gestor_substituto?.id.length;\r\n      let apagarGestorDelegado = !this.formGestor!.controls.gestor_delegado_id?.value && !!this.entity?.gestor_delegado?.id.length;\r\n      let vinculos = this.usuariosIntegrantes?._items || [];\r\n      try {\r\n        await this.dao?.save(unidade, [\"gestor.gestor:id\",\"gestor_substituto.gestor_substituto:id\",\"gestor_delegado.gestor_delegado:id\"]).then(async unidade => {\r\n          this.entity = unidade;\r\n          if(salvarGestor) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_id!.value, 'atribuicoes': [\"GESTOR\"]}]);\r\n          if(salvarGestorSubstituto) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_substituto_id!.value, 'atribuicoes': [\"GESTOR_SUBSTITUTO\"]}]);\r\n          if(salvarGestorDelegado) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_delegado_id!.value, 'atribuicoes': [\"GESTOR_DELEGADO\"]}]);\r\n          if(apagarGestor) await this.integranteAtribuicaoDao.delete(this.entity?.gestor!.gestor!.id);\r\n          if(apagarGestorSubstituto) await this.integranteAtribuicaoDao.delete(this.entity?.gestor_substituto!.gestor_substituto!.id);\r\n          if(apagarGestorDelegado) await this.integranteAtribuicaoDao.delete(this.entity?.gestor_delegado!.gestor_delegado!.id);\r\n          if(vinculos.length) {\r\n            vinculos.forEach(v => v.unidade_id = unidade.id);\r\n            await this.integranteDao.saveIntegrante(vinculos as Vinculo[]);\r\n          }\r\n        });\r\n        resolve(true);\r\n      } catch (error: any) {\r\n        if (this.editableForm) this.editableForm.error = error;\r\n      }\r\n    });\r\n  }\r\n\r\n  public titleEdit = (entity: Unidade): string => {\r\n    return \"Editando \" + this.lex.translate(\"Unidade\") + ': ' + (entity?.sigla || \"\");\r\n  }\r\n\r\n  public onInformalChange(event: Event) {\r\n    if(this.form!.controls.informal.value) {\r\n      this.form!.controls.codigo.setValue(\"\");\r\n      this.form!.controls.codigo.updateValueAndValidity();\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onUsarExpedienteEntidadeChange() {\r\n    this.form.controls.expediente.setValue( this.form.controls.usar_expediente_entidade.value ? null : this.form.controls.expediente.value || new Expediente());\r\n  }\r\n\r\n}\r\n","<editable-form [title]=\"isModal ? '' : title\" [form]=\"form!\" [disabled]=\"formDisabled\" initialFocus=\"sigla\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <tabs display right>\r\n        <tab key=\"PRINCIPAL\" label=\"Principal\">\r\n            <div class=\"row\">\r\n              <input-switch [size]=\"1\" label=\"Instit.\" labelClass=\"text-nowrap\" controlName=\"instituidora\" [labelInfo]=\"'Se a ' + lex.noun('unidade') + ' é instituidora de Programas. Unidade administrativa prevista no art. 4º do Decreto nº 11.072, de 2022.'\"></input-switch>\r\n              <input-switch [disabled]=\"raiz ? 'true' : undefined\" [size]=\"1\" label=\"Informal\" labelClass=\"text-nowrap\" controlName=\"informal\" (change)=\"onInformalChange($event)\" [labelInfo]=\"'Se a ' + lex.noun('unidade') + ' é informal. É possível ser utilizada para a composição de times volantes.'\"></input-switch>\r\n              <input-text [disabled]=\"form!.controls.informal.value ? 'true': undefined\" [size]=\"2\" label=\"Código\" controlName=\"codigo\"></input-text>\r\n              <input-text [size]=\"2\" label=\"Sigla\" controlName=\"sigla\" required></input-text>\r\n              <input-text [size]=\"6\" label=\"Nome\" controlName=\"nome\" required></input-text>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #gestor label=\"Gestor\" [size]=\"6\" [emptyValue]=\"null\" [control]=\"formGestor!.controls.gestor_id\" controlName=\"gestor_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável pela unidade\"></input-search>\r\n                <input-search #gestorSubstituto label=\"Gestor Substituto\" [size]=\"6\" [emptyValue]=\"null\" [control]=\"formGestor!.controls.gestor_substituto_id\" controlName=\"gestor_substituto_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável substituto pela unidade\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #cidade [size]=\"4\" controlName=\"cidade_id\" [dao]=\"cidadeDao\" required></input-search>\r\n                <input-search #unidade_pai [size]=\"4\" [label]=\"lex.translate('Unidade') + ' pai'\" controlName=\"unidade_pai_id\" [where]=\"[['entidade_id', '==', form.controls.entidade_id.value]]\" [dao]=\"dao!\" [required]=\"form.controls.unidade_pai_id.value ? 'true': undefined\" [disabled]=\"!form.controls.unidade_pai_id.value ? 'true': undefined\"></input-search>\r\n                <input-search #entidade [size]=\"4\" disabled controlName=\"entidade_id\" [dao]=\"entidadeDao\" required></input-search>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"CONFIGURACOES\" label=\"Configurações\">\r\n            <div class=\"row\">\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Distribuição')\" controlName=\"distribuicao_forma_contagem_prazos\" [items]=\"lookup.DIA_HORA_CORRIDOS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos para a distribuição (lançamento da demanda).\"></input-select>\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Entrega')\" controlName=\"entrega_forma_contagem_prazos\" [items]=\"lookup.HORAS_CORRIDAS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos na entrega da demanda (data da entrega e tempo despendido)\"></input-select>\r\n                <input-radio [size]=\"4\" label=\"Arquivamento automático\" controlName=\"atividades_arquivamento_automatico\" [items]=\"lookup.SIMNAO\" labelInfo=\"Se após a avaliação, arquivará automaticamente a atividade.\"></input-radio>\r\n            </div>\r\n            <separator></separator>\r\n            <div clss=\"row\">\r\n                <input-multiselect label=\"Etiquetas\" multiselectStyle=\"inline\" [maxItemWidth]=\"250\" controlName=\"etiquetas\" [size]=\"12\" [addItemHandle]=\"addItemHandle.bind(this)\">\r\n                    <input-text [size]=\"6\" label=\"Texto\" controlName=\"etiqueta_texto\" [attr.maxlength]=250></input-text>\r\n                    <input-select [size]=\"3\" label=\"Ícone\" controlName=\"etiqueta_icone\" [items]=\"lookup.ICONES\"></input-select>\r\n                    <input-color [size]=\"3\" label=\"Cor\" controlName=\"etiqueta_cor\"></input-color>\r\n                </input-multiselect>\r\n            </div>\r\n            <separator></separator>\r\n            <div class=\"row\">\r\n                <input-editor [label]=\"'Texto complementar ' + lex.translate('Plano de Trabalho')\" controlName=\"texto_complementar_plano\" [dataset]=\"planoDataset\"></input-editor>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"EXPEDIENTE\" label=\"Expediente\">\r\n            <div class=\"row\">\r\n                <input-switch #usarExpedienteEntidade [label]=\"'Usar o calendário ' + lex.translate('entidade')\" labelPosition=\"right\" icon=\"bi bi-check2\" [size]=\"12\" (change)=\"onUsarExpedienteEntidadeChange()\" controlName=\"usar_expediente_entidade\" labelInfo=\"Se utiliza o expediente configurado na entidade ao invés de especificar na unidade\"></input-switch>\r\n            </div>\r\n            <calendar-expediente #expediente [disabled]=\"form!.controls.usar_expediente_entidade.value ? undefined : 'true'\" [expedienteDisabled]=\"entity?.entidade?.expediente\" [control]=\"form!.controls.expediente\"></calendar-expediente>\r\n        </tab>\r\n        <tab *ngIf=\"entity\" key=\"NOTIFICACOES\" label=\"Notificações\">\r\n            <notificacoes-config #notificacoes [unidadeId]=\"entity.id.length ? entity!.id : 'ADD'\" [entity]=\"entity!\" [disabled]=\"formDisabled\"></notificacoes-config>\r\n        </tab>\r\n        <tab key=\"INTEGRANTES\" [label]=\"lex.translate('Integrantes')\">\r\n            <unidade-integrante #usuariosIntegrantes noPersist [entity]=\"entity\"></unidade-integrante>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnidadeIntegranteDaoService } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable, IntegranteAtribuicao } from 'src/app/models/base.model';\r\nimport { IntegranteConsolidado } from 'src/app/models/unidade-integrante.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { IntegranteService } from 'src/app/services/integrante.service';\r\n\r\n@Component({\r\n  selector: 'unidade-integrante',\r\n  templateUrl: './unidade-integrante.component.html',\r\n  styleUrls: ['./unidade-integrante.component.scss']\r\n})\r\nexport class UnidadeIntegranteComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: Unidade | undefined) { super.entity = value; } get entity(): Unidade | undefined { return super.entity; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n\r\n  public items: IntegranteConsolidado[] = [];\r\n  public _items?: any[];\r\n  public integranteService: IntegranteService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidade?: Unidade;\r\n  public tiposAtribuicao: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.integranteService = injector.get<IntegranteService>(IntegranteService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      usuario_id: { default: \"\" },\r\n      atribuicoes: { default: undefined },\r\n      atribuicao: { default: \"\" }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity_id = this.metadata?.entity_id || this.entity?.id;\r\n    this.tiposAtribuicao = this.isNoPersist ? this.lookup.UNIDADE_INTEGRANTE_TIPO.filter((atribuicao) => ![\"GESTOR\",\"GESTOR_SUBSTITUTO\"].includes(atribuicao.key)) : this.lookup.UNIDADE_INTEGRANTE_TIPO;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    (async () => {\r\n      await this.loadData({ id: this.entity_id }, this.form);\r\n    })();\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente para carregar todos os integrantes da unidade.\r\n   * @param entity \r\n   * @param form \r\n   */\r\n  public async loadData(entity: IIndexable, form?: FormGroup | undefined) {\r\n    if (entity.id) {\r\n      try {\r\n          this.grid!.loading = true;\r\n          this.items = this._items == undefined ? await this.integranteDao!.loadIntegrantes(entity.id, \"\").then( resposta => {\r\n            this.entity = resposta.unidade;\r\n            if(this.isNoPersist) {\r\n              this._items = [];\r\n              resposta.integrantes.forEach(i => this._items?.push(this.integranteService.converterEmVinculo(i, this.entity!.id, i.id, i.atribuicoes)));\r\n            }\r\n            return this.integranteService.ordenar(resposta.integrantes.filter(x => x.atribuicoes?.length > 0));\r\n          }) : this.integranteService.ordenar(this._items.filter(x => x.atribuicoes?.length > 0));\r\n      } finally {\r\n        this.cdRef.detectChanges();\r\n        this.grid!.loading = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if ([\"usuario_id\", \"atribuicoes\"].includes(controlName) && !control.value?.length) result = \"Obrigatório\";\r\n    if ((controlName == \"usuario_id\") && this.grid?.adding && this.items.map(i => i.id).includes(control.value)) result = \"O usuário já é integrante desta unidade. Edite-o, ao invés de incluí-lo novamente!\";\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para inserir um integrante no grid, seja este componente persistente ou não.\r\n   * @returns \r\n   */\r\n  public async addIntegrante() {\r\n    let novo = {\r\n      id: this.integranteDao!.generateUuid(),\r\n      usuario_id: \"\",\r\n      atribuicoes: []\r\n    } as IIndexable;\r\n    this._items?.push(novo);\r\n    return novo;\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n    const key = this.form!.controls.atribuicao.value;\r\n    if (value?.length && this.util.validateLookupItem(this.form!.controls.atribuicoes.value, key)) {\r\n      const icon = this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      const color = this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      result = {\r\n        key: key,\r\n        value: value,\r\n        icon: icon,\r\n        color: color\r\n      };\r\n      this.form!.controls.atribuicao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  /**\r\n   * Método chamado na edição de um integrante da Unidade.\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadIntegrante(form: FormGroup, row: any) {\r\n    form.controls.usuario_id.setValue(this.grid?.adding ? row.usuario_id : row.id);\r\n    form.controls.atribuicoes.setValue(this.integranteService.converterAtribuicoes(row.atribuicoes));\r\n    form.controls.atribuicao.setValue(\"\");\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a exclusão de um integrante do grid, seja este componente persistente ou não. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeIntegrante(row: IntegranteConsolidado) {\r\n    let nomeServidor = row.usuario_nome;\r\n    let nomeUnidade = this.entity!.nome;\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir todas as atribuições do servidor '\" + nomeServidor + \"' na unidade '\" + nomeUnidade + \"' ?\");\r\n    if (confirm) {\r\n      let msg: string | undefined;\r\n      try {\r\n        if (!this.isNoPersist) {    // se persistente\r\n          this.loading = true;\r\n          await this.integranteDao.saveIntegrante([this.integranteService.converterEmVinculo(row, this.entity!.id, row.id, [])]).then(resposta => {\r\n            if (msg = resposta.find(v => v.msg?.length)?.msg) { if (this.grid) this.grid.error = msg; };\r\n          });\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n        } else {                    // se não persistente\r\n          let index = this._items!.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n          this._items![index] = this.integranteService.converterEmVinculo(row, this.entity!.id, row.id, []);\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      return msg ? false : true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Garante que não será possível excluir atribuições que possam gerar inconsistências\r\n   * @param row Atribuição do servidor na unidade\r\n   * @returns \r\n   */\r\n  public deleteItemHandle(row: LookupItem): boolean | undefined | void {\r\n    return this.integranteService.permitidoApagar(row.key, this.isNoPersist);\r\n  };\r\n\r\n  /**\r\n   * Método chamado no salvamento de um usuário-integrante (new/edit), seja este componente persistente ou não.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveIntegrante(form: FormGroup, row: IntegranteConsolidado) {\r\n    let confirm = true;\r\n    let n = this.integranteService.alterandoGestor(form, row.atribuicoes || []);\r\n    if (n.length) confirm = await this.dialog.confirm(\"Confirma a Alteração de Gestor ?\", n.length == 1 ? \"O \" + n[0] + \" será alterado.\" : \"Serão alterados: \" + n.join(', ') + \".\");\r\n    if (form!.controls.atribuicoes.value.length && confirm) {\r\n      this.loading = true;\r\n      try {\r\n        let novasAtribuicoes: IntegranteAtribuicao[] = form!.controls.atribuicoes.value.map((x: LookupItem) => x.key);\r\n        if (!this.isNoPersist) { // se persistente\r\n          await this.integranteDao.saveIntegrante([this.integranteService.converterEmVinculo(row, this.entity!.id, form!.controls.usuario_id.value, novasAtribuicoes)]).then(resposta => {\r\n            let msg: string | undefined;\r\n            if (msg = resposta?.find(v => v.msg?.length)?.msg) { if (this.grid) this.grid.error = msg; };\r\n          });\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n          if (this.grid) this.grid!.error = \"\";\r\n        } else {                // se não persistente\r\n          let index = this._items!.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n          let novoIntegranteConsolidado = { id: row.id, usuario_apelido: this.usuario?.selectedItem?.entity.apelido, usuario_nome: this.usuario?.selectedItem?.entity.nome };\r\n          this._items![index!] = this.integranteService.converterEmVinculo(novoIntegranteConsolidado, this.entity!.id, form!.controls.usuario_id.value, novasAtribuicoes);\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n        }\r\n      } catch (error: any) {\r\n        if (this.grid) this.grid.error = error;\r\n        await this.loadData({ id: this.entity!.id }, this.form);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n","<grid #grid [items]=\"items\" [minHeight]=\"500\" [form]=\"form!\" [hasDelete]=\"true\" editable\r\n    [add]=\"addIntegrante.bind(this)\" [load]=\"loadIntegrante.bind(this)\" [remove]=\"removeIntegrante.bind(this)\" [save]=\"saveIntegrante.bind(this)\">\r\n    <span *ngIf=\"!isNoPersist\"><strong>{{ 'Unidade: ' + entity?.nome }}</strong></span>\r\n    <columns>\r\n        <column [title]=\"lex.translate('Usuários')\" [template]=\"columnUsuario\" [editTemplate]=\"editUsuario\">\r\n            <ng-template let-row=\"row\" #columnUsuario>\r\n                <div class=\"d-flex\">\r\n                    <div class=\"ms-3\">\r\n                        <profile-picture [url]=\"row.usuario_url_foto || ''\" [size]=\"40\" [hint]=\"row.usuario_nome || ''\"></profile-picture>\r\n                    </div>\r\n                    <div class=\"flex-fill ms-3\">\r\n                        <strong>{{row.usuario_nome || \"\"}}</strong><br>\r\n                        <small>{{row.usuario_apelido || \"\"}}</small>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editUsuario>\r\n                <input-search #usuario [size]=\"12\" label icon controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n            </ng-template>\r\n        </column>\r\n        <column [title]=\"lex.translate('Atribuições')\" [template]=\"columnAtribuicoes\" [editTemplate]=\"editAtribuicoes\">\r\n            <ng-template let-row=\"row\" #columnAtribuicoes>\r\n                <div *ngFor=\"let atribuicao of row.atribuicoes\">\r\n                    <badge [color]=\"lookup.getColor(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [icon]=\"lookup.getIcon(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [label]=\"lookup.getValue(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\"></badge><br>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editAtribuicoes>\r\n                <input-multiselect controlName=\"atribuicoes\" [size]=\"8\" [addItemHandle]=\"addItemHandle.bind(this)\" [deleteItemHandle]=\"deleteItemHandle.bind(this)\">\r\n                    <input-select [size]=\"12\" label=\"\" icon=\"fas fa-sign-out-alt\" controlName=\"atribuicao\" [items]=\"tiposAtribuicao\"></input-select>\r\n                </input-multiselect>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\"></column>\r\n    </columns>\r\n</grid>\r\n","import { Component, Injector, Input, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ActivatedRouteSnapshot } from '@angular/router';\nimport { GridComponent } from 'src/app/components/grid/grid.component';\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Unidade } from 'src/app/models/unidade.model';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\n\n@Component({\n  selector: 'unidade-list-grid',\n  templateUrl: './unidade-list-grid.component.html',\n  styleUrls: ['./unidade-list-grid.component.scss']\n})\nexport class UnidadeListGridComponent extends PageListBase<Unidade, UnidadeDaoService> {\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\n  @Input() selectable: boolean = false;\n  @Input() snapshot?: ActivatedRouteSnapshot;\n  @ViewChild('instituidora', { static: false }) public instituidora?: InputSwitchComponent;\n\n  public cidadeDao: CidadeDaoService;\n  public entidadeDao: EntidadeDaoService;\n  public buttons: ToolbarButton[] = [];\n\n  constructor(public injector: Injector) {\n    super(injector, Unidade, UnidadeDaoService);\n    this.join = [\"cidade\", \"unidade_pai:id,sigla\", \"entidade:id,sigla\", \"gestor.usuario:id\", \"gestor_substituto.usuario:id\"];\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\n\n    /* Inicializações */\n    this.code = \"MOD_CFG_UND\";\n    this.filter = this.fh.FormBuilder({\n      entidade_id: { default: this.auth.unidade?.entidade_id },\n      inativos: { default: false },\n      instituidora: { default: false },\n      nome: { default: \"\" }\n    });\n    this.groupBy = [{ field: \"entidade.sigla\", label: \"Entidade\" }];\n    // Testa se o usuário possui permissão unificar unidade\n    if (this.auth.hasPermissionTo(\"MOD_UND_UNIR\")) {\n      this.buttons.push({\n        icon: \"bi bi-arrows-collapse\",\n        color: \"btn-outline-danger\",\n        label: \"Unificar\",\n        onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', 'merge'] }, this.modalRefresh())\n      });\n    }\n    this.addOption(this.OPTION_INFORMACOES, \"MOD_UND\");\n    this.addOption(this.OPTION_EXCLUIR, \"MOD_UND_EXCL\");\n  }\n\n  public dynamicOptions(row: any): ToolbarButton[] {\n    let result: ToolbarButton[] = [];\n    let unidade: Unidade = row as Unidade;\n    // Testa se o usuário logado possui permissão de inativar a unidade do grid\n    if (this.auth.hasPermissionTo(\"MOD_UND_INATV\")) result.push({icon: unidade.data_inativacao ? \"bi bi-check-circle\" : \"bi bi-x-circle\", label: unidade.data_inativacao ? 'Reativar' : 'Inativar', onClick: async (unidade: Unidade) => await this.inativo(unidade, !unidade.data_inativacao)});\n    // Testa se o usuário logado possui permissão para gerenciar integrantes da unidade do grid\n    if (this.auth.hasPermissionTo(\"MOD_UND_INTG\")) result.push({ label: \"Integrantes\", icon: \"bi bi-people\", onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', '', unidade.id, 'integrante'] }, { metadata: { entity_id: row.id } })});\n    return result;\n  }\n\n  public async inativo(unidade: Unidade, inativo: boolean) {\n    if (await this.dialog.confirm(inativo ? \"Inativar\" : \"Reativar\", inativo ? \"Deseja realmente inativar a unidade?\" : \"Deseja reativar a unidade?\")) {\n      try {\n        this.submitting = true;\n        await this.dao!.inativo(unidade.id, inativo);\n        await this.modalRefreshId(unidade).modalClose!(undefined);\n      } finally {\n        this.submitting = false;\n      }\n    }\n  }\n\n  public filterClear(filter: FormGroup) {\n    super.filterClear(filter);\n  }\n\n  public filterWhere = (filter: FormGroup) => {\n    let form: any = filter.value;\n    let result: any[] = [];\n    /* Se for selectable trás somente os inativos ou os não inativos, se não for então trás juntamente os inativos se form.inativos */\n    result.push(this.selectable ? [\"data_inativacao\", form.inativos ? \"!=\" : \"==\", null] : [\"inativos\", \"==\", form.inativos]);\n    if (form.entidade_id?.length) result.push([\"entidade_id\", \"==\", form.entidade_id]);\n    if (form.nome?.length) result.push([\"or\", [\"nome\", \"like\", \"%\" + form.nome.trim().replace(\" \", \"%\") + \"%\"], [\"sigla\", \"like\", \"%\" + form.nome.trim().replace(\" \", \"%\") + \"%\"]]);\n    if (form.instituidora) result.push([\"instituidora\", \"==\", 1]);\n    return result;\n  }\n}","<h3 *ngIf=\"isModal\" class=\"my-2\">{{title}}</h3>\n<grid [dao]=\"dao\" [add]=\"add\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [selectable]=\"selectable\"\n    (select)=\"onSelect($event)\" [hasAdd]=\"auth.hasPermissionTo('MOD_UND_INCL')\"\n    [hasEdit]=\"auth.hasPermissionTo('MOD_UND_EDT')\">\n    <toolbar *ngIf=\"!selectable\" [buttons]=\"buttons\"></toolbar>\n    <filter [deleted]=\"this.auth.hasPermissionTo('MOD_AUDIT_DEL')\" [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\"\n        [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && filterCollapsed\">\n        <div class=\"row\">\n            <input-search #entidade [size]=\"5\" [control]=\"filter!.controls.entidade_id\" controlName=\"entidade_id\" [control]=\"filter!.controls.entidade_id\" [dao]=\"entidadeDao\"></input-search>\n            <input-switch #instituidora [size]=\"1\" label=\"Instit.\" labelClass=\"text-nowrap\" controlName=\"instituidora\" [control]=\"filter!.controls.instituidora\" [labelInfo]=\"'Se lista SOMENTE as ' + lex.noun('unidades') + ' instituidoras de ' + lex.noun('programa', true)\"></input-switch>\n            <input-text [size]=\"5\" label=\"Nome\" controlName=\"nome\" [control]=\"filter!.controls.nome\" placeholder=\"Nome ou sigla...\" [attr.maxlength]=250></input-text>\n            <input-switch [size]=\"1\" label=\"Inativos\" controlName=\"inativos\" [control]=\"filter!.controls.inativos\" labelInfo=\"Se lista também as unidade inativas\"></input-switch>\n        </div>\n    </filter>\n    <columns>\n        <column title=\"Sigla\" field=\"sigla\"></column>\n        <column title=\"Nome\" [template]=\"columnNome\" orderBy=\"nome\">\n            <ng-template let-row=\"row\" #columnNome>\n                <span class=\"d-block\">{{row.nome}}</span>\n                <span *ngIf=\"row.unidade\" class=\"badge bg-light text-dark\">\n                    <i class=\"bi bi-arrow-return-right\"></i>\n                    {{row.unidade.sigla}}\n                </span>\n            </ng-template>\n        </column>\n        <column title=\"Código\" field=\"codigo\"></column>\n        <column [title]=\"lex.translate('Cidade')\" [template]=\"columnCidade\">\n            <ng-template let-row=\"row\" #columnCidade>\n                <span>{{(row.cidade?.nome || \"\") + \"/\" + (row.cidade?.uf || \"\")}}</span>\n            </ng-template>\n        </column>\n        <column title=\"Situação\" [template]=\"columnSituacao\">\n            <ng-template let-row=\"row\" #columnSituacao>\n                <div class=\"one-per-line\">\n                    <badge *ngIf=\"row.instituidora\" color=\"primary\" icon=\"bi bi-star\" label=\"Instituidora\"></badge>\n                    <badge [color]=\"!row.data_inativacao ? 'success' : 'danger'\"\n                        [icon]=\"!row.data_inativacao ? 'bi bi-check-circle' : 'bi bi-x-circle'\"\n                        [label]=\"!row.data_inativacao ? 'Ativo' : 'Inativo'\"></badge>\n                </div>\n            </ng-template>\n        </column>\n        <column type=\"options\" [onEdit]=\"edit\" [options]=\"options\" [dynamicOptions]=\"dynamicOptions.bind(this)\"></column>\n    </columns>\n    <pagination [rows]=\"rowsLimit\"></pagination>\n</grid>\n","import { Component, Injector } from '@angular/core';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Unidade } from 'src/app/models/unidade.model';\nimport { TreeNode } from 'primeng/api';\nimport { QueryContext } from 'src/app/dao/query-context';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\nimport { OrganizationChartNodeExpandEvent } from 'primeng/organizationchart';\n\n@Component({\n  selector: 'unidade-mapa',\n  templateUrl: './unidade-list-map.component.html',\n  styleUrls: ['./unidade-list-map.component.scss']\n})\nexport class UnidadeListMapComponent extends PageListBase<Unidade, UnidadeDaoService>{\n  public query?: QueryContext<Unidade>;\n  public data: TreeNode[] = []\n\n  constructor(public injector: Injector) {\n    super(injector, Unidade, UnidadeDaoService);\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n    this.carregaUnidades()\n  }\n\n  public async carregaUnidades(){\n    let minhaUnidade = this.auth.usuario?.lotacao?.unidade_id\n    let unidades = await this.dao!.hierarquiaUnidades(minhaUnidade);\n\n    let caminhoAteARaiz: string[] = [];\n    let unidadeAtualId = minhaUnidade;\n\n    while (unidadeAtualId) {\n        let unidadeAtual = unidades.find(x => x.id === unidadeAtualId);\n        if (unidadeAtual) {\n            caminhoAteARaiz.unshift(unidadeAtualId);\n            unidadeAtualId = unidadeAtual.unidade_pai_id || undefined;\n        } else {\n            break;\n        }\n    }\n\n    let filhos = (unidadeId: string | null): any => {\n        return unidades\n            .filter(x => x.unidade_pai_id === unidadeId)\n            .map(x => ({\n                type: 'unidade',\n                label: x.sigla,                \n                expanded: minhaUnidade === x.id ? false : caminhoAteARaiz.includes(x.id),\n                styleClass: minhaUnidade == x.id ? 'text-bg-primary' : '',                \n                data: {\n                  hint: x.nome,\n                  unidade: x,\n                },\n                children: temFilhos(x.id) ? filhos(x.id) : [{ type: 'fake', expanded: false, label: 'Carregando...' }]\n            }));\n    };\n    let temFilhos = (unidadeId: string) => {\n      return unidades.some(x => x.unidade_pai_id === unidadeId);\n    };    \n    \n    this.data = filhos(null);\n  }\n\n  expandeUnidade(event: OrganizationChartNodeExpandEvent){   \n    this.carregaFilhas(event.node.data.unidade.id, event.node)   \n  }\n\n\n  async carregaFilhas(unidade_id: string, node: TreeNode){\n    let unidades = await this.dao!.unidadesFilhas(unidade_id);\n    node.children = unidades.map(x => ({\n      type: 'unidade',\n      label: x.sigla,\n      expanded: false,\n      data: {\n        unidade: x,\n        hint: x.nome\n      },\n      children: [{ type: 'fake', expanded: false, label: 'Carregando...' }]\n    }));\n  }\n\n}\n","<ng-scrollbar autoHeightDisabled=\"false\" track=\"all\">\n  <div class=\"my-3\">\n    <p-organizationChart [value]=\"data\" (onNodeExpand)=\"expandeUnidade($event)\">\n      <ng-template let-node pTemplate=\"unidade\">\n        <div class=\"font-bold\">{{ node.label }}</div>\n      </ng-template>\n    </p-organizationChart>\n  </div>\n</ng-scrollbar>","import { Component, Injector, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { GridComponent } from 'src/app/components/grid/grid.component';\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Unidade } from 'src/app/models/unidade.model';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\nimport { LookupItem } from 'src/app/services/lookup.service';\n\n@Component({\n  selector: 'app-unidade-list',\n  templateUrl: './unidade-list.component.html',\n  styleUrls: ['./unidade-list.component.scss']\n})\nexport class UnidadeListComponent extends PageListBase<Unidade, UnidadeDaoService> {\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\n  @ViewChild(TabsComponent, { static: false }) public tabs?: TabsComponent;\n\n  constructor(public injector: Injector) {\n    super(injector, Unidade, UnidadeDaoService);\n    this.title = this.lex.translate(\"Unidades\");\n    this.code = \"MOD_CFG_UND\";\n    this.filter = this.fh.FormBuilder({});\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n    this.tabs!.active = [\"TABELA\", \"MAPA\"].includes(this.usuarioConfig.active_tab) ? this.usuarioConfig.active_tab : \"TABELA\";\n  }\n\n  public async onSelectTab(tab: LookupItem) {\n    if(this.viewInit) this.saveUsuarioConfig({active_tab: tab.key});\n  }\n\n  public filterClear(filter: FormGroup) {\n    filter.controls.nome.setValue(\"\");\n    super.filterClear(filter);\n  }\n\n  public filterWhere = (filter: FormGroup) => {\n    let result: any[] = [];\n    let form: any = filter.value;\n    return result;\n  }\n\n}","<tabs right [title]=\"isModal ? '' : title\" [select]=\"onSelectTab.bind(this)\">\n    <tab key=\"TABELA\" icon=\"bi bi-table\" label=\"Lista\" [template]=\"grid\">\n        <ng-template #grid>\n            <unidade-list-grid [selectable]=\"selectable\" [snapshot]=\"snapshot || modalRoute || route.snapshot\"></unidade-list-grid>\n        </ng-template>\n    </tab>\n    <tab *ngIf=\"!selectable\" key=\"MAPA\" icon=\"bi bi-card-heading\" label=\"Mapa\" [template]=\"mapa\">\n        <ng-template #mapa>\n            <unidade-mapa></unidade-mapa>\n        </ng-template>\n    </tab>\n</tabs>","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\nexport type UnidadeMerge = {\r\n  id: string,\r\n  unidade_origem_id: string,\r\n  unidade_destino_id: string,\r\n  unidade_origem?: Unidade,\r\n  unidade_destino?: Unidade\r\n}\r\n\r\n@Component({\r\n  selector: 'app-unidade-merge',\r\n  templateUrl: './unidade-merge.component.html',\r\n  styleUrls: ['./unidade-merge.component.scss']\r\n})\r\nexport class UnidadeMergeComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('unidadeOrigem', { static: false }) public unidadeOrigem?: InputSearchComponent;\r\n  @ViewChild('unidadeDestino', { static: false }) public unidadeDestino?: InputSearchComponent;\r\n\r\n  public items: UnidadeMerge[] = [];\r\n  public toolbarButtons: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-yin-yang\",\r\n      label: \"Mesma sigla\",\r\n      hint: \"Unificar todos que tenham a mesma sigla. Sendo a inativa considerada como origem.\",\r\n      onClick: this.onMesmaSiglaClick.bind(this)\r\n    }\r\n  ];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      exclui_origem: {default: false},\r\n      origem_inativo: {default: true},\r\n      unidade_origem_id: {default: \"\"},\r\n      unidade_destino_id: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    return result;\r\n  }\r\n\r\n  public onMesmaSiglaClick() {\r\n    this.loading = true;\r\n    (this.dao as UnidadeDaoService).mesmaSigla().then(unidades => {\r\n      let destinos: Unidade[] = [];\r\n      destinos = unidades.reduce((acumulador, valor) => {\r\n        if(!valor.data_inativacao && !acumulador.find(x => x.sigla == valor.sigla)) acumulador.push(valor);\r\n        return acumulador; \r\n      }, destinos);\r\n      let destinosIds = destinos.map(x => x.id);\r\n      let origens = unidades.filter(x => !destinosIds.includes(x.id) && !!x.data_inativacao);\r\n      let origensIds = origens.map(x => x.id);\r\n      this.items = [];\r\n      for(let origem of origens) {\r\n        let destino = destinos.find(x => x.sigla == origem.sigla);\r\n        if(destino) {\r\n          this.items.push({\r\n            id: this.dao!.generateUuid(),\r\n            unidade_origem_id: origem.id,\r\n            unidade_destino_id: destino.id,\r\n            unidade_origem: origem,\r\n            unidade_destino: destino\r\n          });\r\n        }\r\n      }\r\n      /* Pegas as unidade que tem a Sigla repetida mas que não estão inativas */\r\n      let error: string[] = [];\r\n      for(let unidade of unidades) {\r\n        if(!destinosIds.includes(unidade.id) && !origensIds.includes(unidade.id)) error.push(unidade.codigo + \" - \" + unidade.sigla + \" - \" + unidade.nome);\r\n      }\r\n      if(error.length) this.editableForm!.error = (error.length == 1 ? \"A unidade abaixo possui duplicidade de SIGLA, mas não está inativa:\" : \"As unidades abaixo possuem duplicidade de SIGLA, mas não estão inativas:\") + \"\\n\" + error.join(\"\\n\");\r\n    }).finally(() => {\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  public async addMerge() {\r\n    return {\r\n      id: this.dao!.generateUuid(),\r\n      unidade_origem_id: \"\",\r\n      unidade_destino_id: \"\",\r\n      unidade_origem: undefined,\r\n      unidade_destino: undefined\r\n    } as IIndexable;\r\n  }\r\n\r\n  public async loadMerge(form: FormGroup, row: any) {\r\n    form.controls.unidade_origem_id.setValue(row.unidade_origem_id);\r\n    form.controls.unidade_destino_id.setValue(row.unidade_destino_id);\r\n  }\r\n\r\n  public async removeMerge(row: any) {\r\n    return true;\r\n  }\r\n\r\n  public async saveMerge(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    if(this.form!.controls.unidade_origem_id.value?.length || this.form!.controls.unidade_destino_id.value?.length) {\r\n      row.unidade_origem_id = form.controls.unidade_origem_id.value;\r\n      row.unidade_origem = this.unidadeOrigem?.selectedEntity || await this.dao?.getById(row.unidade_origem_id);\r\n      row.unidade_destino_id = form.controls.unidade_destino_id.value;\r\n      row.unidade_destino = this.unidadeDestino?.selectedEntity || await this.dao?.getById(row.unidade_destino_id);\r\n      result = row;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public onMerge() {\r\n    let error: string | undefined = undefined;\r\n    for(let row of this.items) error = error || (!row.unidade_origem_id?.length || !row.unidade_destino_id?.length ? \"A origem e o destino precisam estar preenchidos em todos\" : undefined);\r\n    this.editableForm!.error = error;\r\n    if(!error?.length) {\r\n      this.loading = true;\r\n      (this.dao as UnidadeDaoService).unificar(this.items.map(x => Object.assign({}, {unidade_origem_id: x.unidade_origem_id, unidade_destino_id: x.unidade_destino_id})), this.form!.controls.exclui_origem.value).then(result => {\r\n        if(result) this.close();\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<editable-form [form]=\"form!\" [title]=\"isModal ? '' : title\" confirmLabel=\"Unificar\" (submit)=\"onMerge()\" (cancel)=\"onCancel()\">\r\n    <top-alert type=\"warning\" message=\"Por motivos de segurança será permitido somente unificar unidades inativas para unidade ativas. E caso [Exclui origem] não esteja habilitado, a unidade de origem continuará na lista (como inativa).\"></top-alert>\r\n    <toolbar [buttons]=\"toolbarButtons\">\r\n        <input-switch [size]=\"4\" labelPosition=\"left\" label=\"Exclui origem\" controlName=\"exclui_origem\"></input-switch>\r\n    </toolbar>\r\n    <grid [items]=\"items\" [form]=\"form!\" [add]=\"addMerge.bind(this)\" [load]=\"loadMerge.bind(this)\" [remove]=\"removeMerge.bind(this)\" [save]=\"saveMerge.bind(this)\" editable>\r\n        <columns>\r\n            <column [title]=\"lex.translate('Unidade') + ' origem'\" titleHint=\"Unidade que será substituída pela outra\" [template]=\"columnUnidadeOrigem\" [editTemplate]=\"editUnidadeOrigem\">\r\n                <ng-template let-row=\"row\" #columnUnidadeOrigem>\r\n                    <span>{{row.unidade_origem?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_origem?.codigo || \"\"}} - {{row.unidade_origem?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeOrigem>\r\n                    <input-search #unidade_origem [size]=\"12\" label icon controlName=\"unidade_origem_id\" [dao]=\"dao\" [where]=\"[['inativo', '!=', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: true}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"lex.translate('Unidade') + ' destino'\" titleHint=\"Unidade que sobrará após a unificação\" [template]=\"columnUnidadeDestino\" [editTemplate]=\"editUnidadeDestino\">\r\n                <ng-template let-row=\"row\" #columnUnidadeDestino>\r\n                    <span>{{row.unidade_destino?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_destino?.codigo || \"\"}} - {{row.unidade_destino?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeDestino>\r\n                    <input-search #unidade_destino [size]=\"12\" label icon controlName=\"unidade_destino_id\" [dao]=\"dao\" [where]=\"[['inativo', '==', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: false}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column type=\"options\"></column>\r\n        </columns>\r\n    </grid>\r\n</editable-form>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades\" } },\r\n  { path: 'new', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão de Unidade\", modal: true } },\r\n  { path: ':id/edit', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição de Unidade\", modal: true } },\r\n  { path: ':id/consult', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Unidade\", modal: true } },\r\n  { path: ':id/:idUnidade/integrante', component: UnidadeIntegranteComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Integrantes da Unidade\", modal: true } },\r\n  { path: ':id/subordinadas', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades subordinadas\" } },\r\n  { path: 'merge', component: UnidadeMergeComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unificação\", modal: true } }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UnidadeRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { UnidadeRoutingModule } from './unidade-routing.module';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { OrganizationChartModule } from 'primeng/organizationchart';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { NgScrollbarModule } from 'ngx-scrollbar';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\nimport { UnidadeListGridComponent } from './unidade-list-grid/unidade-list-grid.component';\r\nimport { UnidadeListMapComponent } from './unidade-list-map/unidade-list-map.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UnidadeFormComponent,\r\n    UnidadeListComponent,\r\n    UnidadeMergeComponent,\r\n    UnidadeIntegranteComponent,\r\n    UnidadeListGridComponent,\r\n    UnidadeListMapComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    UteisModule,\r\n    ReactiveFormsModule,\r\n    UnidadeRoutingModule,\r\n    OrganizationChartModule,\r\n    NgScrollbarModule\r\n  ]\r\n})\r\nexport class UnidadeModule { }\r\n"],"names":["DaoBaseService","UnidadeIntegranteAtribuicaoDaoService","constructor","injector","inputSearchConfig","searchFields","_","i0","ɵɵinject","Injector","_2","factory","ɵfac","providedIn","EditableFormComponent","CidadeDaoService","EntidadeDaoService","PlanoTrabalhoDaoService","UnidadeDaoService","UnidadeIntegranteDaoService","UsuarioDaoService","Expediente","Unidade","PageFormBase","NotificacaoService","UnidadeIntegranteComponent","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r7","entity","id","length","formDisabled","UnidadeFormComponent","raiz","validate","control","controlName","result","indexOf","value","form","controls","informal","formValidation","erros_integrantes","usuariosIntegrantes","grid","items","forEach","usuarioIntegrante","usuario_id","push","integrante","erro","undefined","titleEdit","lex","translate","sigla","entidadeDao","get","cidadeDao","usuarioDao","planoTrabalhoDao","integranteDao","integranteAtribuicaoDao","notificacao","modalWidth","planoDataset","dataset","fh","FormBuilder","codigo","default","nome","path","cidade_id","uf","instituidora","atividades_arquivamento_automatico","distribuicao_forma_contagem_prazos","entrega_forma_contagem_prazos","notificacoes","etiquetas","unidade_pai_id","entidade_id","auth","unidade","etiqueta_texto","etiqueta_icone","etiqueta_cor","expediente24","expediente","usar_expediente_entidade","texto_complementar_plano","cdRef","formGestor","gestor_id","gestor_substituto_id","join","loadData","_this","_asyncToGenerator","formValue","Object","assign","Promise","all","unidadePai","loadSearch","unidade_pai","cidade","gestor","usuario","gestorSubstituto","gestor_substituto","entidade","action","patchValue","util","fillForm","setValue","initializeData","addItemHandle","key","textHash","validateLookupItem","color","icon","saveData","_this2","_ref","resolve","reject","confirm","fill","salvarGestor","salvarGestorSubstituto","salvarGestorDelegado","gestor_delegado_id","gestor_delegado","apagarGestor","apagarGestorSubstituto","apagarGestorDelegado","vinculos","_items","dao","save","then","_ref2","saveIntegrante","delete","v","unidade_id","_x3","apply","arguments","error","editableForm","_x","_x2","onInformalChange","event","updateValueAndValidity","detectChanges","onUsarExpedienteEntidadeChange","ɵɵdirectiveInject","selectors","viewQuery","UnidadeFormComponent_Query","rf","ctx","ɵɵlistener","UnidadeFormComponent_Template_editable_form_submit_0_listener","onSaveData","UnidadeFormComponent_Template_editable_form_cancel_0_listener","onCancel","UnidadeFormComponent_Template_input_switch_change_5_listener","$event","UnidadeFormComponent_Template_input_switch_change_37_listener","ɵɵtemplate","UnidadeFormComponent_tab_41_Template","isModal","title","noun","ɵɵpureFunction1","_c8","_c7","lookup","DIA_HORA_CORRIDOS_OU_UTEIS","HORAS_CORRIDAS_OU_UTEIS","SIMNAO","bind","ɵɵattribute","ICONES","GridComponent","PageFrameBase","IntegranteService","ɵɵtext","ɵɵtextInterpolate","ctx_r1","row_r10","usuario_url_foto","usuario_nome","usuario_apelido","ctx_r5","ctx_r14","getColor","UNIDADE_INTEGRANTE_TIPO","atribuicao_r15","getIcon","getValue","UnidadeIntegranteComponent_ng_template_10_div_0_Template","row_r13","atribuicoes","ctx_r9","deleteItemHandle","tiposAtribuicao","noPersist","includes","adding","map","i","integranteService","atribuicao","ngOnInit","entity_id","metadata","isNoPersist","filter","ngAfterViewInit","loading","loadIntegrantes","resposta","integrantes","converterEmVinculo","ordenar","x","addIntegrante","_this3","novo","generateUuid","loadIntegrante","row","_this4","converterAtribuicoes","removeIntegrante","_this5","nomeServidor","nomeUnidade","dialog","msg","find","index","findIndex","permitidoApagar","_this6","n","alterandoGestor","novasAtribuicoes","novoIntegranteConsolidado","selectedItem","apelido","UnidadeIntegranteComponent_Query","UnidadeIntegranteComponent_span_2_Template","UnidadeIntegranteComponent_ng_template_5_Template","ɵɵtemplateRefExtractor","UnidadeIntegranteComponent_ng_template_7_Template","UnidadeIntegranteComponent_ng_template_10_Template","UnidadeIntegranteComponent_ng_template_12_Template","_r2","_r4","_r6","_r8","PageListBase","ctx_r0","buttons","ɵɵtextInterpolate1","UnidadeListGridComponent_ng_template_14_span_2_Template","UnidadeListGridComponent_ng_template_21_badge_1_Template","row_r14","data_inativacao","UnidadeListGridComponent","selectable","filterWhere","inativos","trim","replace","code","groupBy","field","label","hasPermissionTo","onClick","go","navigate","route","modalRefresh","addOption","OPTION_INFORMACOES","OPTION_EXCLUIR","dynamicOptions","inativo","submitting","modalRefreshId","modalClose","filterClear","UnidadeListGridComponent_Query","UnidadeListGridComponent_h3_0_Template","UnidadeListGridComponent_Template_grid_select_1_listener","onSelect","UnidadeListGridComponent_toolbar_2_Template","UnidadeListGridComponent_ng_template_14_Template","UnidadeListGridComponent_ng_template_18_Template","UnidadeListGridComponent_ng_template_21_Template","add","orderBy","filterSubmit","filterCollapseChange","filterCollapsed","edit","options","rowsLimit","node_r1","UnidadeListMapComponent","data","carregaUnidades","minhaUnidade","lotacao","unidades","hierarquiaUnidades","caminhoAteARaiz","unidadeAtualId","unidadeAtual","unshift","filhos","unidadeId","type","expanded","styleClass","hint","children","temFilhos","some","expandeUnidade","carregaFilhas","node","unidadesFilhas","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","UnidadeListMapComponent_Template","UnidadeListMapComponent_Template_p_organizationChart_onNodeExpand_2_listener","UnidadeListMapComponent_ng_template_3_Template","TabsComponent","snapshot","modalRoute","UnidadeListComponent_tab_4_ng_template_1_Template","_r3","UnidadeListComponent","tabs","active","usuarioConfig","active_tab","onSelectTab","tab","viewInit","saveUsuarioConfig","UnidadeListComponent_Query","UnidadeListComponent_ng_template_2_Template","UnidadeListComponent_tab_4_Template","_r0","row_r8","unidade_origem","ɵɵtextInterpolate2","ctx_r3","_c3","ɵɵpureFunction0","_c2","ɵɵpureFunction2","_c4","_c6","_c5","row_r11","unidade_destino","_c9","UnidadeMergeComponent","toolbarButtons","onMesmaSiglaClick","exclui_origem","origem_inativo","unidade_origem_id","unidade_destino_id","mesmaSigla","destinos","reduce","acumulador","valor","destinosIds","origens","origensIds","origem","destino","finally","addMerge","loadMerge","removeMerge","saveMerge","unidadeOrigem","selectedEntity","getById","unidadeDestino","onMerge","unificar","close","UnidadeMergeComponent_Query","UnidadeMergeComponent_Template_editable_form_submit_0_listener","UnidadeMergeComponent_Template_editable_form_cancel_0_listener","UnidadeMergeComponent_ng_template_7_Template","UnidadeMergeComponent_ng_template_9_Template","UnidadeMergeComponent_ng_template_12_Template","UnidadeMergeComponent_ng_template_14_Template","RouterModule","AuthGuard","ConfigResolver","routes","component","canActivate","config","runGuardsAndResolvers","modal","UnidadeRoutingModule","_3","forChild","imports","i1","exports","CommonModule","ComponentsModule","OrganizationChartModule","ReactiveFormsModule","UteisModule","NgScrollbarModule","UnidadeModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
=======
<<<<<<< HEAD
{"version":3,"file":"9502.js","mappings":"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","sources":["./src/app/dao/unidade-integrante-atribuicao-dao.service.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.html","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.ts","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.html","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.html","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.html","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.ts","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.html","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.ts","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.html","./src/app/modules/configuracoes/unidade/unidade-routing.module.ts","./src/app/modules/configuracoes/unidade/unidade.module.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\nimport { DaoBaseService } from './dao-base.service';\nimport { IntegranteConsolidado } from '../models/unidade-integrante.model';\nimport { Unidade } from '../models/unidade.model';\nimport { Usuario } from '../models/usuario.model';\nimport { UnidadeIntegranteAtribuicao } from '../models/unidade-integrante-atribuicao.model';\n\nexport type LoadIntegrantesResult = {\n  integrantes: IntegranteConsolidado[],\n  unidade?: Unidade,\n  usuario?: Usuario\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UnidadeIntegranteAtribuicaoDaoService extends DaoBaseService<UnidadeIntegranteAtribuicao> {\n\n  constructor(protected injector: Injector) { \n    super(\"UnidadeIntegranteAtribuicao\", injector);\n    this.inputSearchConfig.searchFields = [];\n  }  \n}\n\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\r\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UnidadeIntegranteAtribuicaoDaoService } from 'src/app/dao/unidade-integrante-atribuicao-dao.service';\r\nimport { UnidadeIntegranteDaoService, Vinculo } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Expediente } from 'src/app/models/expediente.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NotificacaoService } from 'src/app/modules/uteis/notificacoes/notificacao.service';\r\nimport { NotificacoesConfigComponent } from 'src/app/modules/uteis/notificacoes/notificacoes-config/notificacoes-config.component';\r\nimport { TemplateDataset } from 'src/app/modules/uteis/templates/template.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { UnidadeIntegranteComponent } from '../unidade-integrante/unidade-integrante.component';\r\n\r\n@Component({\r\n  selector: 'app-unidade-form',\r\n  templateUrl: './unidade-form.component.html',\r\n  styleUrls: ['./unidade-form.component.scss']\r\n})\r\n\r\nexport class UnidadeFormComponent extends PageFormBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(UnidadeIntegranteComponent, { static: false }) public usuariosIntegrantes?: UnidadeIntegranteComponent;\r\n  @ViewChild('unidade_pai', { static: false }) public unidadePai?: InputSearchComponent;\r\n  @ViewChild('cidade', { static: false }) public cidade?: InputSearchComponent;\r\n  @ViewChild('gestor', { static: false }) public gestor?: InputSearchComponent;\r\n  @ViewChild('gestorSubstituto', { static: false }) public gestorSubstituto?: InputSearchComponent;\r\n  @ViewChild('entidade', { static: false }) public entidade?: InputSearchComponent;\r\n  @ViewChild('notificacoes', { static: false }) public notificacoes?: NotificacoesConfigComponent;\r\n  @ViewChild('instituidora', { static: false }) public instituidora?: InputSwitchComponent;\r\n\r\n  public form: FormGroup;\r\n  public formGestor: FormGroup;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public cidadeDao: CidadeDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public planoTrabalhoDao: PlanoTrabalhoDaoService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public integranteAtribuicaoDao: UnidadeIntegranteAtribuicaoDaoService;\r\n  public notificacao: NotificacaoService;\r\n  public planoDataset: TemplateDataset[];\r\n  public informal: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.integranteAtribuicaoDao = injector.get<UnidadeIntegranteAtribuicaoDaoService>(UnidadeIntegranteAtribuicaoDaoService);\r\n    this.notificacao = injector.get<NotificacaoService>(NotificacaoService);\r\n    this.modalWidth = 1200;\r\n    this.planoDataset = this.planoTrabalhoDao.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      codigo: {default: \"\"},\r\n      sigla: {default: \"\"},\r\n      nome: {default: \"\"},\r\n      path: {default: \"\"},\r\n      cidade_id: {default: \"\"},\r\n      uf: {default: \"\"},\r\n      instituidora: {default: 0},\r\n      informal: {default: 0},\r\n      atividades_arquivamento_automatico: {default: 1},\r\n      distribuicao_forma_contagem_prazos: {default: \"DIAS_UTEIS\"},\r\n      entrega_forma_contagem_prazos: {default: \"HORAS_UTEIS\"},\r\n      notificacoes: {default: {}},\r\n      etiquetas: {default: []},\r\n      unidade_pai_id: {default: \"\"},\r\n      entidade_id: {default: this.auth.unidade?.entidade_id},\r\n      etiqueta_texto: {default: \"\"},\r\n      etiqueta_icone: {default: null},\r\n      etiqueta_cor: {default: null},\r\n      expediente24: {default: true},\r\n      expediente: {default: null},\r\n      usar_expediente_entidade: {default: false},\r\n      texto_complementar_plano: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n    this.formGestor = this.fh.FormBuilder({\r\n      gestor_id: {default: \"\"},\r\n      gestor_substituto_id: {default: \"\"}\r\n    }, this.cdRef);\r\n    this.join =  [\"cidade\", \"entidade\", \"gestor.usuario:id,nome\", \"gestor_substituto.usuario:id,nome\", \"notificacoes_templates\", \"gestor.gestor:id\", \"gestor_substituto.gestor_substituto:id\"];\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(['sigla', 'nome', 'cidade_id', 'entidade_id','unidade_pai_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    const erros_integrantes = [];\r\n    this.usuariosIntegrantes?.grid?.items.forEach((usuarioIntegrante) => {\r\n      if(usuarioIntegrante.usuario_id == '') erros_integrantes.push({ integrante: usuarioIntegrante, erro: 'Falta usuario_id'})\r\n    });\r\n    if(erros_integrantes.length) return \"Na aba 'Integrantes' há usuário não salvo. Salve-o antes de salvar a unidade!\"\r\n    return undefined;\r\n  } \r\n\r\n  public async loadData(entity: Unidade, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    await Promise.all ([\r\n      this.unidadePai!.loadSearch(entity.unidade_pai || entity.unidade_pai_id),\r\n      this.cidade!.loadSearch(entity.cidade || entity.cidade_id),\r\n      this.gestor!.loadSearch(entity?.gestor?.usuario || entity.gestor?.usuario!.id),\r\n      this.gestorSubstituto!.loadSearch(entity?.gestor_substituto?.usuario || entity.gestor_substituto?.usuario!.id),\r\n      this.entidade!.loadSearch(entity.entidade || entity.entidade_id)\r\n    ]);\r\n    entity.etiquetas = entity.etiquetas || [];\r\n    this.form.patchValue(this.util.fillForm(formValue, entity));\r\n    this.formGestor.controls.gestor_id.setValue(entity.gestor?.usuario_id);\r\n    this.formGestor.controls.gestor_substituto_id.setValue(entity.gestor_substituto?.usuario_id);\r\n    this.usuariosIntegrantes?.loadData(entity);\r\n  }\r\n\r\n  public initializeData(form: FormGroup): void {\r\n    this.entity = new Unidade({ entidade_id: this.auth.unidade?.entidade_id, entidade: this.auth.unidade?.entidade });\r\n    this.loadData(this.entity, form);\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form.controls.etiqueta_texto.value;\r\n    const key = this.util.textHash(value);\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.etiquetas.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form.controls.etiqueta_texto.value,\r\n        color: this.form.controls.etiqueta_cor.value,\r\n        icon: this.form.controls.etiqueta_icone.value\r\n      };\r\n      this.form.controls.etiqueta_texto.setValue(\"\");\r\n      this.form.controls.etiqueta_icone.setValue(null);\r\n      this.form.controls.etiqueta_cor.setValue(null);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public saveData(form: IIndexable): Promise<boolean> {\r\n    return new Promise<boolean>(async (resolve, reject) => {\r\n      this.notificacoes!.saveData();\r\n      this.usuariosIntegrantes!.grid!.confirm();\r\n      let unidade: Unidade = this.util.fill(new Unidade(), this.entity!);\r\n      unidade = this.util.fillForm(unidade, this.form!.value);\r\n      unidade.notificacoes = this.entity!.notificacoes;\r\n      let salvarGestor = !!this.formGestor!.controls.gestor_id?.value && (!this.entity?.gestor?.id.length || (!!this.entity?.gestor?.id.length && this.entity?.gestor?.usuario?.id != this.formGestor!.controls.gestor_id?.value));\r\n      let salvarGestorSubstituto = !!this.formGestor!.controls.gestor_substituto_id?.value && (!this.entity?.gestor_substituto?.id.length || (!!this.entity?.gestor_substituto?.id.length && this.entity?.gestor_substituto?.usuario?.id != this.formGestor!.controls.gestor_substituto_id?.value));\r\n      let salvarGestorDelegado = !!this.formGestor!.controls.gestor_delegado_id?.value && (!this.entity?.gestor_delegado?.id.length || (!!this.entity?.gestor_delegado?.id.length && this.entity?.gestor_delegado?.usuario?.id != this.formGestor!.controls.gestor_delegado_id?.value));\r\n      let apagarGestor = !this.formGestor!.controls.gestor_id?.value && !!this.entity?.gestor?.id.length;\r\n      let apagarGestorSubstituto = !this.formGestor!.controls.gestor_substituto_id?.value && !!this.entity?.gestor_substituto?.id.length;\r\n      let apagarGestorDelegado = !this.formGestor!.controls.gestor_delegado_id?.value && !!this.entity?.gestor_delegado?.id.length;\r\n      let vinculos = this.usuariosIntegrantes?._items || [];\r\n      try {\r\n        await this.dao?.save(unidade, [\"gestor.gestor:id\",\"gestor_substituto.gestor_substituto:id\",\"gestor_delegado.gestor_delegado:id\"]).then(async unidade => {\r\n          this.entity = unidade;\r\n          if(salvarGestor) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_id!.value, 'atribuicoes': [\"GESTOR\"]}]);\r\n          if(salvarGestorSubstituto) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_substituto_id!.value, 'atribuicoes': [\"GESTOR_SUBSTITUTO\"]}]);\r\n          if(salvarGestorDelegado) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_delegado_id!.value, 'atribuicoes': [\"GESTOR_DELEGADO\"]}]);\r\n          if(apagarGestor) await this.integranteAtribuicaoDao.delete(this.entity?.gestor!.gestor!.id);\r\n          if(apagarGestorSubstituto) await this.integranteAtribuicaoDao.delete(this.entity?.gestor_substituto!.gestor_substituto!.id);\r\n          if(apagarGestorDelegado) await this.integranteAtribuicaoDao.delete(this.entity?.gestor_delegado!.gestor_delegado!.id);\r\n          if(vinculos.length) {\r\n            vinculos.forEach(v => v.unidade_id = unidade.id);\r\n            await this.integranteDao.saveIntegrante(vinculos as Vinculo[]);\r\n          }\r\n        });\r\n        resolve(true);\r\n      } catch (error: any) {\r\n        if (this.editableForm) this.editableForm.error = error;\r\n      }\r\n    });\r\n  }\r\n\r\n  public titleEdit = (entity: Unidade): string => {\r\n    return \"Editando \" + this.lex.translate(\"Unidade\") + ': ' + (entity?.sigla || \"\");\r\n  }\r\n\r\n  public get is24hrs(): string | undefined {\r\n    return this.form?.controls.expediente24.value ? \"\" : undefined;\r\n  }\r\n\r\n  public onUsarExpedienteEntidadeChange() {\r\n    this.form.controls.expediente.setValue( this.form.controls.usar_expediente_entidade.value ? null : this.form.controls.expediente.value || new Expediente());\r\n  }\r\n\r\n}\r\n","<editable-form [title]=\"isModal ? '' : title\" [form]=\"form!\" [disabled]=\"formDisabled\" initialFocus=\"codigo\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <tabs display right>\r\n        <tab key=\"PRINCIPAL\" label=\"Principal\">\r\n            <div class=\"row\">\r\n                <input-switch [size]=\"1\" label=\"Instit.\" labelClass=\"text-nowrap\" controlName=\"instituidora\" [labelInfo]=\"'Se a ' + lex.noun('unidade') + ' é instituidora de Programas.'\"></input-switch>\r\n                <input-switch *ngIf=\"informal\" [size]=\"1\" label=\"Informal\" labelClass=\"text-nowrap\" controlName=\"informal\" [labelInfo]=\"'Se a ' + lex.noun('unidade') + ' é informal.'\"></input-switch>\r\n                <input-text [size]=\"2\" label=\"Código\" controlName=\"codigo\" [attr.maxlength]=250></input-text>\r\n                <input-text [size]=\"2\" label=\"Sigla\" controlName=\"sigla\" [attr.maxlength]=250 required></input-text>\r\n                <input-text [size]=\"7\" label=\"Nome\" controlName=\"nome\" [attr.maxlength]=250 required></input-text>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #gestor label=\"Gestor\" [size]=\"6\" [emptyValue]=\"null\" [control]=\"formGestor!.controls.gestor_id\" controlName=\"gestor_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável pela unidade\"></input-search>\r\n                <input-search #gestorSubstituto label=\"Gestor Substituto\" [size]=\"6\" [emptyValue]=\"null\" [control]=\"formGestor!.controls.gestor_substituto_id\" controlName=\"gestor_substituto_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável substituto pela unidade\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #cidade [size]=\"4\" controlName=\"cidade_id\" [dao]=\"cidadeDao\" required></input-search>\r\n                <input-search #unidade_pai [size]=\"4\" [label]=\"lex.translate('Unidade') + ' pai'\" controlName=\"unidade_pai_id\" [where]=\"[['entidade_id', '==', form.controls.entidade_id.value]]\" [dao]=\"dao!\" required></input-search>\r\n                <input-search #entidade [size]=\"4\" disabled controlName=\"entidade_id\" [dao]=\"entidadeDao\" required></input-search>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"CONFIGURACOES\" label=\"Configurações\">\r\n            <div class=\"row\">\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Distribuição')\" controlName=\"distribuicao_forma_contagem_prazos\" [items]=\"lookup.DIA_HORA_CORRIDOS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos para a distribuição (lançamento da demanda).\"></input-select>\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Entrega')\" controlName=\"entrega_forma_contagem_prazos\" [items]=\"lookup.HORAS_CORRIDAS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos na entrega da demanda (data da entrega e tempo despendido)\"></input-select>\r\n                <input-radio [size]=\"4\" label=\"Arquivamento automático\" controlName=\"atividades_arquivamento_automatico\" [items]=\"lookup.SIMNAO\" labelInfo=\"Se após a avaliação, arquivará automaticamente a atividade.\"></input-radio>\r\n            </div>\r\n            <separator></separator>\r\n            <div clss=\"row\">\r\n                <input-multiselect label=\"Etiquetas\" multiselectStyle=\"inline\" [maxItemWidth]=\"250\" controlName=\"etiquetas\" [size]=\"12\" [addItemHandle]=\"addItemHandle.bind(this)\">\r\n                    <input-text [size]=\"6\" label=\"Texto\" controlName=\"etiqueta_texto\" [attr.maxlength]=250></input-text>\r\n                    <input-select [size]=\"3\" label=\"Ícone\" controlName=\"etiqueta_icone\" [items]=\"lookup.ICONES\"></input-select>\r\n                    <input-color [size]=\"3\" label=\"Cor\" controlName=\"etiqueta_cor\"></input-color>\r\n                </input-multiselect>\r\n            </div>\r\n            <separator></separator>\r\n            <div class=\"row\">\r\n                <input-editor [label]=\"'Texto complementar ' + lex.translate('Plano de Trabalho')\" controlName=\"texto_complementar_plano\" [dataset]=\"planoDataset\"></input-editor>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"EXPEDIENTE\" label=\"Expediente\">\r\n            <div class=\"row\">\r\n                <input-switch #usarExpedienteEntidade [label]=\"'Usar o calendário ' + lex.translate('entidade')\" labelPosition=\"right\" icon=\"bi bi-check2\" [size]=\"12\" (change)=\"onUsarExpedienteEntidadeChange()\" controlName=\"usar_expediente_entidade\" labelInfo=\"Se utiliza o expediente configurado na entidade ao invés de especificar na unidade\"></input-switch>\r\n            </div>\r\n            <calendar-expediente #expediente [disabled]=\"form!.controls.usar_expediente_entidade.value ? undefined : 'true'\" [expedienteDisabled]=\"entity?.entidade?.expediente\" [control]=\"form!.controls.expediente\"></calendar-expediente>\r\n        </tab>\r\n        <tab *ngIf=\"entity\" key=\"NOTIFICACOES\" label=\"Notificações\">\r\n            <notificacoes-config #notificacoes [unidadeId]=\"entity.id.length ? entity!.id : 'ADD'\" [entity]=\"entity!\" [disabled]=\"formDisabled\"></notificacoes-config>\r\n        </tab>\r\n        <tab key=\"INTEGRANTES\" [label]=\"lex.translate('Integrantes')\">\r\n            <unidade-integrante #usuariosIntegrantes noPersist [entity]=\"entity\"></unidade-integrante>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnidadeIntegranteDaoService } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable, IntegranteAtribuicao } from 'src/app/models/base.model';\r\nimport { IntegranteConsolidado } from 'src/app/models/unidade-integrante.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { IntegranteService } from 'src/app/services/integrante.service';\r\n\r\n@Component({\r\n  selector: 'unidade-integrante',\r\n  templateUrl: './unidade-integrante.component.html',\r\n  styleUrls: ['./unidade-integrante.component.scss']\r\n})\r\nexport class UnidadeIntegranteComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: Unidade | undefined) { super.entity = value; } get entity(): Unidade | undefined { return super.entity; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n\r\n  public items: IntegranteConsolidado[] = [];\r\n  public _items?: any[];\r\n  public integranteService: IntegranteService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidade?: Unidade;\r\n  public tiposAtribuicao: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.integranteService = injector.get<IntegranteService>(IntegranteService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      usuario_id: { default: \"\" },\r\n      atribuicoes: { default: undefined },\r\n      atribuicao: { default: \"\" }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity_id = this.metadata?.entity_id || this.entity?.id;\r\n    this.tiposAtribuicao = this.isNoPersist ? this.lookup.UNIDADE_INTEGRANTE_TIPO.filter((atribuicao) => ![\"GESTOR\",\"GESTOR_SUBSTITUTO\"].includes(atribuicao.key)) : this.lookup.UNIDADE_INTEGRANTE_TIPO;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    (async () => {\r\n      await this.loadData({ id: this.entity_id }, this.form);\r\n    })();\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente para carregar todos os integrantes da unidade.\r\n   * @param entity \r\n   * @param form \r\n   */\r\n  public async loadData(entity: IIndexable, form?: FormGroup | undefined) {\r\n    if (entity.id) {\r\n      try {\r\n          this.grid!.loading = true;\r\n          this.items = this._items == undefined ? await this.integranteDao!.loadIntegrantes(entity.id, \"\").then( resposta => {\r\n            this.entity = resposta.unidade;\r\n            if(this.isNoPersist) {\r\n              this._items = [];\r\n              resposta.integrantes.forEach(i => this._items?.push(this.integranteService.converterEmVinculo(i, this.entity!.id, i.id, i.atribuicoes)));\r\n            }\r\n            return this.integranteService.ordenar(resposta.integrantes.filter(x => x.atribuicoes?.length > 0));\r\n          }) : this.integranteService.ordenar(this._items.filter(x => x.atribuicoes?.length > 0));\r\n      } finally {\r\n        this.cdRef.detectChanges();\r\n        this.grid!.loading = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if ([\"usuario_id\", \"atribuicoes\"].includes(controlName) && !control.value?.length) result = \"Obrigatório\";\r\n    if ((controlName == \"usuario_id\") && this.grid?.adding && this.items.map(i => i.id).includes(control.value)) result = \"O usuário já é integrante desta unidade. Edite-o, ao invés de incluí-lo novamente!\";\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para inserir um integrante no grid, seja este componente persistente ou não.\r\n   * @returns \r\n   */\r\n  public async addIntegrante() {\r\n    let novo = {\r\n      id: this.integranteDao!.generateUuid(),\r\n      usuario_id: \"\",\r\n      atribuicoes: []\r\n    } as IIndexable;\r\n    this._items?.push(novo);\r\n    return novo;\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n    const key = this.form!.controls.atribuicao.value;\r\n    if (value?.length && this.util.validateLookupItem(this.form!.controls.atribuicoes.value, key)) {\r\n      const icon = this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      const color = this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      result = {\r\n        key: key,\r\n        value: value,\r\n        icon: icon,\r\n        color: color\r\n      };\r\n      this.form!.controls.atribuicao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  /**\r\n   * Método chamado na edição de um integrante da Unidade.\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadIntegrante(form: FormGroup, row: any) {\r\n    form.controls.usuario_id.setValue(this.grid?.adding ? row.usuario_id : row.id);\r\n    form.controls.atribuicoes.setValue(this.integranteService.converterAtribuicoes(row.atribuicoes));\r\n    form.controls.atribuicao.setValue(\"\");\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a exclusão de um integrante do grid, seja este componente persistente ou não. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeIntegrante(row: IntegranteConsolidado) {\r\n    let nomeServidor = row.usuario_nome;\r\n    let nomeUnidade = this.entity!.nome;\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir todas as atribuições do servidor '\" + nomeServidor + \"' na unidade '\" + nomeUnidade + \"' ?\");\r\n    if (confirm) {\r\n      let msg: string | undefined;\r\n      try {\r\n        if (!this.isNoPersist) {    // se persistente\r\n          this.loading = true;\r\n          await this.integranteDao.saveIntegrante([this.integranteService.converterEmVinculo(row, this.entity!.id, row.id, [])]).then(resposta => {\r\n            if (msg = resposta.find(v => v.msg?.length)?.msg) { if (this.grid) this.grid.error = msg; };\r\n          });\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n        } else {                    // se não persistente\r\n          let index = this._items!.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n          this._items![index] = this.integranteService.converterEmVinculo(row, this.entity!.id, row.id, []);\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      return msg ? false : true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Garante que não será possível excluir atribuições que possam gerar inconsistências\r\n   * @param row Atribuição do servidor na unidade\r\n   * @returns \r\n   */\r\n  public deleteItemHandle(row: LookupItem): boolean | undefined | void {\r\n    return this.integranteService.permitidoApagar(row.key, this.isNoPersist);\r\n  };\r\n\r\n  /**\r\n   * Método chamado no salvamento de um usuário-integrante (new/edit), seja este componente persistente ou não.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveIntegrante(form: FormGroup, row: IntegranteConsolidado) {\r\n    let confirm = true;\r\n    let n = this.integranteService.alterandoGestor(form, row.atribuicoes || []);\r\n    if (n.length) confirm = await this.dialog.confirm(\"Confirma a Alteração de Gestor ?\", n.length == 1 ? \"O \" + n[0] + \" será alterado.\" : \"Serão alterados: \" + n.join(', ') + \".\");\r\n    if (form!.controls.atribuicoes.value.length && confirm) {\r\n      this.loading = true;\r\n      try {\r\n        let novasAtribuicoes: IntegranteAtribuicao[] = form!.controls.atribuicoes.value.map((x: LookupItem) => x.key);\r\n        if (!this.isNoPersist) { // se persistente\r\n          await this.integranteDao.saveIntegrante([this.integranteService.converterEmVinculo(row, this.entity!.id, form!.controls.usuario_id.value, novasAtribuicoes)]).then(resposta => {\r\n            let msg: string | undefined;\r\n            if (msg = resposta?.find(v => v.msg?.length)?.msg) { if (this.grid) this.grid.error = msg; };\r\n          });\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n          if (this.grid) this.grid!.error = \"\";\r\n        } else {                // se não persistente\r\n          let index = this._items!.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n          let novoIntegranteConsolidado = { id: row.id, usuario_apelido: this.usuario?.selectedItem?.entity.apelido, usuario_nome: this.usuario?.selectedItem?.entity.nome };\r\n          this._items![index!] = this.integranteService.converterEmVinculo(novoIntegranteConsolidado, this.entity!.id, form!.controls.usuario_id.value, novasAtribuicoes);\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n        }\r\n      } catch (error: any) {\r\n        if (this.grid) this.grid.error = error;\r\n        await this.loadData({ id: this.entity!.id }, this.form);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n","<grid #grid [items]=\"items\" [minHeight]=\"500\" [form]=\"form!\" [hasDelete]=\"true\" editable\r\n    [add]=\"addIntegrante.bind(this)\" [load]=\"loadIntegrante.bind(this)\" [remove]=\"removeIntegrante.bind(this)\" [save]=\"saveIntegrante.bind(this)\">\r\n    <span *ngIf=\"!isNoPersist\"><strong>{{ 'Unidade: ' + entity?.nome }}</strong></span>\r\n    <columns>\r\n        <column [title]=\"lex.translate('Usuários')\" [template]=\"columnUsuario\" [editTemplate]=\"editUsuario\">\r\n            <ng-template let-row=\"row\" #columnUsuario>\r\n                <div class=\"d-flex\">\r\n                    <div class=\"ms-3\">\r\n                        <profile-picture [url]=\"row.usuario_url_foto || ''\" [size]=\"40\" [hint]=\"row.usuario_nome || ''\"></profile-picture>\r\n                    </div>\r\n                    <div class=\"flex-fill ms-3\">\r\n                        <strong>{{row.usuario_nome || \"\"}}</strong><br>\r\n                        <small>{{row.usuario_apelido || \"\"}}</small>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editUsuario>\r\n                <input-search #usuario [size]=\"12\" label icon controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n            </ng-template>\r\n        </column>\r\n        <column [title]=\"lex.translate('Atribuições')\" [template]=\"columnAtribuicoes\" [editTemplate]=\"editAtribuicoes\">\r\n            <ng-template let-row=\"row\" #columnAtribuicoes>\r\n                <div *ngFor=\"let atribuicao of row.atribuicoes\">\r\n                    <badge [color]=\"lookup.getColor(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [icon]=\"lookup.getIcon(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [label]=\"lookup.getValue(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\"></badge><br>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editAtribuicoes>\r\n                <input-multiselect controlName=\"atribuicoes\" [size]=\"8\" [addItemHandle]=\"addItemHandle.bind(this)\" [deleteItemHandle]=\"deleteItemHandle.bind(this)\">\r\n                    <input-select [size]=\"12\" label=\"\" icon=\"fas fa-sign-out-alt\" controlName=\"atribuicao\" [items]=\"tiposAtribuicao\"></input-select>\r\n                </input-multiselect>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\"></column>\r\n    </columns>\r\n</grid>\r\n","import { Component, Injector, Input, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ActivatedRouteSnapshot } from '@angular/router';\nimport { GridComponent } from 'src/app/components/grid/grid.component';\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Unidade } from 'src/app/models/unidade.model';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\n\n@Component({\n  selector: 'unidade-list-grid',\n  templateUrl: './unidade-list-grid.component.html',\n  styleUrls: ['./unidade-list-grid.component.scss']\n})\nexport class UnidadeListGridComponent extends PageListBase<Unidade, UnidadeDaoService> {\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\n  @Input() selectable: boolean = false;\n  @Input() snapshot?: ActivatedRouteSnapshot;\n  @ViewChild('instituidora', { static: false }) public instituidora?: InputSwitchComponent;\n\n  public cidadeDao: CidadeDaoService;\n  public entidadeDao: EntidadeDaoService;\n  public buttons: ToolbarButton[] = [];\n\n  constructor(public injector: Injector) {\n    super(injector, Unidade, UnidadeDaoService);\n    this.join = [\"cidade\", \"unidade_pai:id,sigla\", \"entidade:id,sigla\", \"gestor.usuario:id\", \"gestor_substituto.usuario:id\"];\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\n\n    /* Inicializações */\n    this.code = \"MOD_CFG_UND\";\n    this.filter = this.fh.FormBuilder({\n      entidade_id: { default: this.auth.unidade?.entidade_id },\n      inativos: { default: false },\n      instituidora: { default: false },\n      nome: { default: \"\" }\n    });\n    this.groupBy = [{ field: \"entidade.sigla\", label: \"Entidade\" }];\n    // Testa se o usuário possui permissão unificar unidade\n    if (this.auth.hasPermissionTo(\"MOD_UND_UNIR\")) {\n      this.buttons.push({\n        icon: \"bi bi-arrows-collapse\",\n        color: \"btn-outline-danger\",\n        label: \"Unificar\",\n        onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', 'merge'] }, this.modalRefresh())\n      });\n    }\n    this.addOption(this.OPTION_INFORMACOES, \"MOD_UND\");\n    this.addOption(this.OPTION_EXCLUIR, \"MOD_UND_EXCL\");\n  }\n\n  public dynamicOptions(row: any): ToolbarButton[] {\n    let result: ToolbarButton[] = [];\n    let unidade: Unidade = row as Unidade;\n    // Testa se o usuário logado possui permissão de inativar a unidade do grid\n    if (this.auth.hasPermissionTo(\"MOD_UND_INATV\")) result.push({icon: unidade.data_inativacao ? \"bi bi-check-circle\" : \"bi bi-x-circle\", label: unidade.data_inativacao ? 'Reativar' : 'Inativar', onClick: async (unidade: Unidade) => await this.inativo(unidade, !unidade.data_inativacao)});\n    // Testa se o usuário logado possui permissão para gerenciar integrantes da unidade do grid\n    if (this.auth.hasPermissionTo(\"MOD_UND_INTG\")) result.push({ label: \"Integrantes\", icon: \"bi bi-people\", onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', '', unidade.id, 'integrante'] }, { metadata: { entity_id: row.id } })});\n    return result;\n  }\n\n  public async inativo(unidade: Unidade, inativo: boolean) {\n    if (await this.dialog.confirm(inativo ? \"Inativar\" : \"Reativar\", inativo ? \"Deseja realmente inativar a unidade?\" : \"Deseja reativar a unidade?\")) {\n      try {\n        this.submitting = true;\n        await this.dao!.inativo(unidade.id, inativo);\n        await this.modalRefreshId(unidade).modalClose!(undefined);\n      } finally {\n        this.submitting = false;\n      }\n    }\n  }\n\n  public filterClear(filter: FormGroup) {\n    super.filterClear(filter);\n  }\n\n  public filterWhere = (filter: FormGroup) => {\n    let form: any = filter.value;\n    let result: any[] = [];\n    /* Se for selectable trás somente os inativos ou os não inativos, se não for então trás juntamente os inativos se form.inativos */\n    result.push(this.selectable ? [\"data_inativacao\", form.inativos ? \"!=\" : \"==\", null] : [\"inativos\", \"==\", form.inativos]);\n    if (form.entidade_id?.length) result.push([\"entidade_id\", \"==\", form.entidade_id]);\n    if (form.nome?.length) result.push([\"or\", [\"nome\", \"like\", \"%\" + form.nome.trim().replace(\" \", \"%\") + \"%\"], [\"sigla\", \"like\", \"%\" + form.nome.trim().replace(\" \", \"%\") + \"%\"]]);\n    if (form.instituidora) result.push([\"instituidora\", \"==\", 1]);\n    return result;\n  }\n}","<h3 *ngIf=\"isModal\" class=\"my-2\">{{title}}</h3>\n<grid [dao]=\"dao\" [add]=\"add\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [selectable]=\"selectable\"\n    (select)=\"onSelect($event)\" [hasAdd]=\"auth.hasPermissionTo('MOD_UND_INCL')\"\n    [hasEdit]=\"auth.hasPermissionTo('MOD_UND_EDT')\">\n    <toolbar *ngIf=\"!selectable\" [buttons]=\"buttons\"></toolbar>\n    <filter [deleted]=\"this.auth.hasPermissionTo('MOD_AUDIT_DEL')\" [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\"\n        [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && filterCollapsed\">\n        <div class=\"row\">\n            <input-search #entidade [size]=\"5\" [control]=\"filter!.controls.entidade_id\" controlName=\"entidade_id\" [control]=\"filter!.controls.entidade_id\" [dao]=\"entidadeDao\"></input-search>\n            <input-switch #instituidora [size]=\"1\" label=\"Instit.\" labelClass=\"text-nowrap\" controlName=\"instituidora\" [control]=\"filter!.controls.instituidora\" [labelInfo]=\"'Se lista SOMENTE as ' + lex.noun('unidades') + ' instituidoras de ' + lex.noun('programa', true)\"></input-switch>\n            <input-text [size]=\"5\" label=\"Nome\" controlName=\"nome\" [control]=\"filter!.controls.nome\" placeholder=\"Nome ou sigla...\" [attr.maxlength]=250></input-text>\n            <input-switch [size]=\"1\" label=\"Inativos\" controlName=\"inativos\" [control]=\"filter!.controls.inativos\" labelInfo=\"Se lista também as unidade inativas\"></input-switch>\n        </div>\n    </filter>\n    <columns>\n        <column title=\"Sigla\" field=\"sigla\"></column>\n        <column title=\"Nome\" [template]=\"columnNome\" orderBy=\"nome\">\n            <ng-template let-row=\"row\" #columnNome>\n                <span class=\"d-block\">{{row.nome}}</span>\n                <span *ngIf=\"row.unidade\" class=\"badge bg-light text-dark\">\n                    <i class=\"bi bi-arrow-return-right\"></i>\n                    {{row.unidade.sigla}}\n                </span>\n            </ng-template>\n        </column>\n        <column title=\"Código\" field=\"codigo\"></column>\n        <column [title]=\"lex.translate('Cidade')\" [template]=\"columnCidade\">\n            <ng-template let-row=\"row\" #columnCidade>\n                <span>{{(row.cidade?.nome || \"\") + \"/\" + (row.cidade?.uf || \"\")}}</span>\n            </ng-template>\n        </column>\n        <column title=\"Situação\" [template]=\"columnSituacao\">\n            <ng-template let-row=\"row\" #columnSituacao>\n                <div class=\"one-per-line\">\n                    <badge *ngIf=\"row.instituidora\" color=\"primary\" icon=\"bi bi-star\" label=\"Instituidora\"></badge>\n                    <badge [color]=\"!row.data_inativacao ? 'success' : 'danger'\"\n                        [icon]=\"!row.data_inativacao ? 'bi bi-check-circle' : 'bi bi-x-circle'\"\n                        [label]=\"!row.data_inativacao ? 'Ativo' : 'Inativo'\"></badge>\n                </div>\n            </ng-template>\n        </column>\n        <column type=\"options\" [onEdit]=\"edit\" [options]=\"options\" [dynamicOptions]=\"dynamicOptions.bind(this)\"></column>\n    </columns>\n    <pagination [rows]=\"rowsLimit\"></pagination>\n</grid>\n","import { Component, Injector } from '@angular/core';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Unidade } from 'src/app/models/unidade.model';\nimport { TreeNode } from 'primeng/api';\nimport { QueryContext } from 'src/app/dao/query-context';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\nimport { OrganizationChartNodeExpandEvent } from 'primeng/organizationchart';\n\n@Component({\n  selector: 'unidade-mapa',\n  templateUrl: './unidade-list-map.component.html',\n  styleUrls: ['./unidade-list-map.component.scss']\n})\nexport class UnidadeListMapComponent extends PageListBase<Unidade, UnidadeDaoService>{\n  public query?: QueryContext<Unidade>;\n  public data: TreeNode[] = []\n\n  constructor(public injector: Injector) {\n    super(injector, Unidade, UnidadeDaoService);\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n    this.carregaUnidades()\n  }\n\n  public async carregaUnidades(){\n    let minhaUnidade = this.auth.usuario?.lotacao?.unidade_id\n    let unidades = await this.dao!.hierarquiaUnidades(minhaUnidade);\n\n    let caminhoAteARaiz: string[] = [];\n    let unidadeAtualId = minhaUnidade;\n\n    while (unidadeAtualId) {\n        let unidadeAtual = unidades.find(x => x.id === unidadeAtualId);\n        if (unidadeAtual) {\n            caminhoAteARaiz.unshift(unidadeAtualId);\n            unidadeAtualId = unidadeAtual.unidade_pai_id || undefined;\n        } else {\n            break;\n        }\n    }\n\n    let filhos = (unidadeId: string | null): any => {\n        return unidades\n            .filter(x => x.unidade_pai_id === unidadeId)\n            .map(x => ({\n                type: 'unidade',\n                label: x.sigla,                \n                expanded: minhaUnidade === x.id ? false : caminhoAteARaiz.includes(x.id),\n                styleClass: minhaUnidade == x.id ? 'text-bg-primary' : '',                \n                data: {\n                  hint: x.nome,\n                  unidade: x,\n                },\n                children: temFilhos(x.id) ? filhos(x.id) : [{ type: 'fake', expanded: false, label: 'Carregando...' }]\n            }));\n    };\n    let temFilhos = (unidadeId: string) => {\n      return unidades.some(x => x.unidade_pai_id === unidadeId);\n    };    \n    \n    this.data = filhos(null);\n  }\n\n  expandeUnidade(event: OrganizationChartNodeExpandEvent){   \n    this.carregaFilhas(event.node.data.unidade.id, event.node)   \n  }\n\n\n  async carregaFilhas(unidade_id: string, node: TreeNode){\n    let unidades = await this.dao!.unidadesFilhas(unidade_id);\n    node.children = unidades.map(x => ({\n      type: 'unidade',\n      label: x.sigla,\n      expanded: false,\n      data: {\n        unidade: x,\n        hint: x.nome\n      },\n      children: [{ type: 'fake', expanded: false, label: 'Carregando...' }]\n    }));\n  }\n\n}\n","<ng-scrollbar autoHeightDisabled=\"false\" track=\"all\">\n  <div class=\"my-3\">\n    <p-organizationChart [value]=\"data\" (onNodeExpand)=\"expandeUnidade($event)\">\n      <ng-template let-node pTemplate=\"unidade\">\n        <div class=\"font-bold\">{{ node.label }}</div>\n      </ng-template>\n    </p-organizationChart>\n  </div>\n</ng-scrollbar>","import { Component, Injector, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { GridComponent } from 'src/app/components/grid/grid.component';\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Unidade } from 'src/app/models/unidade.model';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\nimport { LookupItem } from 'src/app/services/lookup.service';\n\n@Component({\n  selector: 'app-unidade-list',\n  templateUrl: './unidade-list.component.html',\n  styleUrls: ['./unidade-list.component.scss']\n})\nexport class UnidadeListComponent extends PageListBase<Unidade, UnidadeDaoService> {\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\n  @ViewChild(TabsComponent, { static: false }) public tabs?: TabsComponent;\n\n  constructor(public injector: Injector) {\n    super(injector, Unidade, UnidadeDaoService);\n    this.title = this.lex.translate(\"Unidades\");\n    this.code = \"MOD_CFG_UND\";\n    this.filter = this.fh.FormBuilder({});\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n    this.tabs!.active = [\"TABELA\", \"MAPA\"].includes(this.usuarioConfig.active_tab) ? this.usuarioConfig.active_tab : \"TABELA\";\n  }\n\n  public async onSelectTab(tab: LookupItem) {\n    if(this.viewInit) this.saveUsuarioConfig({active_tab: tab.key});\n  }\n\n  public filterClear(filter: FormGroup) {\n    filter.controls.nome.setValue(\"\");\n    super.filterClear(filter);\n  }\n\n  public filterWhere = (filter: FormGroup) => {\n    let result: any[] = [];\n    let form: any = filter.value;\n    return result;\n  }\n\n}","<tabs right [title]=\"isModal ? '' : title\" [select]=\"onSelectTab.bind(this)\">\n    <tab key=\"TABELA\" icon=\"bi bi-table\" label=\"Lista\" [template]=\"grid\">\n        <ng-template #grid>\n            <unidade-list-grid [selectable]=\"selectable\" [snapshot]=\"snapshot || modalRoute || route.snapshot\"></unidade-list-grid>\n        </ng-template>\n    </tab>\n    <tab *ngIf=\"!selectable\" key=\"MAPA\" icon=\"bi bi-card-heading\" label=\"Mapa\" [template]=\"mapa\">\n        <ng-template #mapa>\n            <unidade-mapa></unidade-mapa>\n        </ng-template>\n    </tab>\n</tabs>","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\nexport type UnidadeMerge = {\r\n  id: string,\r\n  unidade_origem_id: string,\r\n  unidade_destino_id: string,\r\n  unidade_origem?: Unidade,\r\n  unidade_destino?: Unidade\r\n}\r\n\r\n@Component({\r\n  selector: 'app-unidade-merge',\r\n  templateUrl: './unidade-merge.component.html',\r\n  styleUrls: ['./unidade-merge.component.scss']\r\n})\r\nexport class UnidadeMergeComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('unidadeOrigem', { static: false }) public unidadeOrigem?: InputSearchComponent;\r\n  @ViewChild('unidadeDestino', { static: false }) public unidadeDestino?: InputSearchComponent;\r\n\r\n  public items: UnidadeMerge[] = [];\r\n  public toolbarButtons: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-yin-yang\",\r\n      label: \"Mesma sigla\",\r\n      hint: \"Unificar todos que tenham a mesma sigla. Sendo a inativa considerada como origem.\",\r\n      onClick: this.onMesmaSiglaClick.bind(this)\r\n    }\r\n  ];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      exclui_origem: {default: false},\r\n      origem_inativo: {default: true},\r\n      unidade_origem_id: {default: \"\"},\r\n      unidade_destino_id: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    return result;\r\n  }\r\n\r\n  public onMesmaSiglaClick() {\r\n    this.loading = true;\r\n    (this.dao as UnidadeDaoService).mesmaSigla().then(unidades => {\r\n      let destinos: Unidade[] = [];\r\n      destinos = unidades.reduce((acumulador, valor) => {\r\n        if(!valor.data_inativacao && !acumulador.find(x => x.sigla == valor.sigla)) acumulador.push(valor);\r\n        return acumulador; \r\n      }, destinos);\r\n      let destinosIds = destinos.map(x => x.id);\r\n      let origens = unidades.filter(x => !destinosIds.includes(x.id) && !!x.data_inativacao);\r\n      let origensIds = origens.map(x => x.id);\r\n      this.items = [];\r\n      for(let origem of origens) {\r\n        let destino = destinos.find(x => x.sigla == origem.sigla);\r\n        if(destino) {\r\n          this.items.push({\r\n            id: this.dao!.generateUuid(),\r\n            unidade_origem_id: origem.id,\r\n            unidade_destino_id: destino.id,\r\n            unidade_origem: origem,\r\n            unidade_destino: destino\r\n          });\r\n        }\r\n      }\r\n      /* Pegas as unidade que tem a Sigla repetida mas que não estão inativas */\r\n      let error: string[] = [];\r\n      for(let unidade of unidades) {\r\n        if(!destinosIds.includes(unidade.id) && !origensIds.includes(unidade.id)) error.push(unidade.codigo + \" - \" + unidade.sigla + \" - \" + unidade.nome);\r\n      }\r\n      if(error.length) this.editableForm!.error = (error.length == 1 ? \"A unidade abaixo possui duplicidade de SIGLA, mas não está inativa:\" : \"As unidades abaixo possuem duplicidade de SIGLA, mas não estão inativas:\") + \"\\n\" + error.join(\"\\n\");\r\n    }).finally(() => {\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  public async addMerge() {\r\n    return {\r\n      id: this.dao!.generateUuid(),\r\n      unidade_origem_id: \"\",\r\n      unidade_destino_id: \"\",\r\n      unidade_origem: undefined,\r\n      unidade_destino: undefined\r\n    } as IIndexable;\r\n  }\r\n\r\n  public async loadMerge(form: FormGroup, row: any) {\r\n    form.controls.unidade_origem_id.setValue(row.unidade_origem_id);\r\n    form.controls.unidade_destino_id.setValue(row.unidade_destino_id);\r\n  }\r\n\r\n  public async removeMerge(row: any) {\r\n    return true;\r\n  }\r\n\r\n  public async saveMerge(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    if(this.form!.controls.unidade_origem_id.value?.length || this.form!.controls.unidade_destino_id.value?.length) {\r\n      row.unidade_origem_id = form.controls.unidade_origem_id.value;\r\n      row.unidade_origem = this.unidadeOrigem?.selectedEntity || await this.dao?.getById(row.unidade_origem_id);\r\n      row.unidade_destino_id = form.controls.unidade_destino_id.value;\r\n      row.unidade_destino = this.unidadeDestino?.selectedEntity || await this.dao?.getById(row.unidade_destino_id);\r\n      result = row;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public onMerge() {\r\n    let error: string | undefined = undefined;\r\n    for(let row of this.items) error = error || (!row.unidade_origem_id?.length || !row.unidade_destino_id?.length ? \"A origem e o destino precisam estar preenchidos em todos\" : undefined);\r\n    this.editableForm!.error = error;\r\n    if(!error?.length) {\r\n      this.loading = true;\r\n      (this.dao as UnidadeDaoService).unificar(this.items.map(x => Object.assign({}, {unidade_origem_id: x.unidade_origem_id, unidade_destino_id: x.unidade_destino_id})), this.form!.controls.exclui_origem.value).then(result => {\r\n        if(result) this.close();\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<editable-form [form]=\"form!\" [title]=\"isModal ? '' : title\" confirmLabel=\"Unificar\" (submit)=\"onMerge()\" (cancel)=\"onCancel()\">\r\n    <top-alert type=\"warning\" message=\"Por motivos de segurança será permitido somente unificar unidades inativas para unidade ativas. E caso [Exclui origem] não esteja habilitado, a unidade de origem continuará na lista (como inativa).\"></top-alert>\r\n    <toolbar [buttons]=\"toolbarButtons\">\r\n        <input-switch [size]=\"4\" labelPosition=\"left\" label=\"Exclui origem\" controlName=\"exclui_origem\"></input-switch>\r\n    </toolbar>\r\n    <grid [items]=\"items\" [form]=\"form!\" [add]=\"addMerge.bind(this)\" [load]=\"loadMerge.bind(this)\" [remove]=\"removeMerge.bind(this)\" [save]=\"saveMerge.bind(this)\" editable>\r\n        <columns>\r\n            <column [title]=\"lex.translate('Unidade') + ' origem'\" titleHint=\"Unidade que será substituída pela outra\" [template]=\"columnUnidadeOrigem\" [editTemplate]=\"editUnidadeOrigem\">\r\n                <ng-template let-row=\"row\" #columnUnidadeOrigem>\r\n                    <span>{{row.unidade_origem?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_origem?.codigo || \"\"}} - {{row.unidade_origem?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeOrigem>\r\n                    <input-search #unidade_origem [size]=\"12\" label icon controlName=\"unidade_origem_id\" [dao]=\"dao\" [where]=\"[['inativo', '!=', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: true}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"lex.translate('Unidade') + ' destino'\" titleHint=\"Unidade que sobrará após a unificação\" [template]=\"columnUnidadeDestino\" [editTemplate]=\"editUnidadeDestino\">\r\n                <ng-template let-row=\"row\" #columnUnidadeDestino>\r\n                    <span>{{row.unidade_destino?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_destino?.codigo || \"\"}} - {{row.unidade_destino?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeDestino>\r\n                    <input-search #unidade_destino [size]=\"12\" label icon controlName=\"unidade_destino_id\" [dao]=\"dao\" [where]=\"[['inativo', '==', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: false}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column type=\"options\"></column>\r\n        </columns>\r\n    </grid>\r\n</editable-form>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades\" } },\r\n  { path: 'new', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão de Unidade\", modal: true } },\r\n  { path: ':id/edit', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição de Unidade\", modal: true } },\r\n  { path: ':id/consult', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Unidade\", modal: true } },\r\n  { path: ':id/:idUnidade/integrante', component: UnidadeIntegranteComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Integrantes da Unidade\", modal: true } },\r\n  { path: ':id/subordinadas', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades subordinadas\" } },\r\n  { path: 'merge', component: UnidadeMergeComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unificação\", modal: true } }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UnidadeRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { UnidadeRoutingModule } from './unidade-routing.module';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { OrganizationChartModule } from 'primeng/organizationchart';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { NgScrollbarModule } from 'ngx-scrollbar';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\nimport { UnidadeListGridComponent } from './unidade-list-grid/unidade-list-grid.component';\r\nimport { UnidadeListMapComponent } from './unidade-list-map/unidade-list-map.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UnidadeFormComponent,\r\n    UnidadeListComponent,\r\n    UnidadeMergeComponent,\r\n    UnidadeIntegranteComponent,\r\n    UnidadeListGridComponent,\r\n    UnidadeListMapComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    UteisModule,\r\n    ReactiveFormsModule,\r\n    UnidadeRoutingModule,\r\n    OrganizationChartModule,\r\n    NgScrollbarModule\r\n  ]\r\n})\r\nexport class UnidadeModule { }\r\n"],"names":["DaoBaseService","UnidadeIntegranteAtribuicaoDaoService","constructor","injector","inputSearchConfig","searchFields","_","i0","ɵɵinject","Injector","_2","factory","ɵfac","providedIn","EditableFormComponent","CidadeDaoService","EntidadeDaoService","PlanoTrabalhoDaoService","UnidadeDaoService","UnidadeIntegranteDaoService","UsuarioDaoService","Expediente","Unidade","PageFormBase","NotificacaoService","UnidadeIntegranteComponent","ɵɵelement","ɵɵproperty","ctx_r0","lex","noun","ɵɵelementStart","ɵɵelementEnd","ɵɵadvance","ctx_r8","entity","id","length","formDisabled","UnidadeFormComponent","informal","validate","control","controlName","result","indexOf","value","formValidation","form","erros_integrantes","usuariosIntegrantes","grid","items","forEach","usuarioIntegrante","usuario_id","push","integrante","erro","undefined","titleEdit","translate","sigla","entidadeDao","get","cidadeDao","usuarioDao","planoTrabalhoDao","integranteDao","integranteAtribuicaoDao","notificacao","modalWidth","planoDataset","dataset","fh","FormBuilder","codigo","default","nome","path","cidade_id","uf","instituidora","atividades_arquivamento_automatico","distribuicao_forma_contagem_prazos","entrega_forma_contagem_prazos","notificacoes","etiquetas","unidade_pai_id","entidade_id","auth","unidade","etiqueta_texto","etiqueta_icone","etiqueta_cor","expediente24","expediente","usar_expediente_entidade","texto_complementar_plano","cdRef","formGestor","gestor_id","gestor_substituto_id","join","loadData","_this","_asyncToGenerator","formValue","Object","assign","Promise","all","unidadePai","loadSearch","unidade_pai","cidade","gestor","usuario","gestorSubstituto","gestor_substituto","entidade","patchValue","util","fillForm","controls","setValue","initializeData","addItemHandle","key","textHash","validateLookupItem","color","icon","saveData","_this2","_ref","resolve","reject","confirm","fill","salvarGestor","salvarGestorSubstituto","salvarGestorDelegado","gestor_delegado_id","gestor_delegado","apagarGestor","apagarGestorSubstituto","apagarGestorDelegado","vinculos","_items","dao","save","then","_ref2","saveIntegrante","delete","v","unidade_id","_x3","apply","arguments","error","editableForm","_x","_x2","is24hrs","onUsarExpedienteEntidadeChange","ɵɵdirectiveInject","selectors","viewQuery","UnidadeFormComponent_Query","rf","ctx","ɵɵlistener","UnidadeFormComponent_Template_editable_form_submit_0_listener","onSaveData","UnidadeFormComponent_Template_editable_form_cancel_0_listener","onCancel","ɵɵtemplate","UnidadeFormComponent_input_switch_5_Template","UnidadeFormComponent_Template_input_switch_change_37_listener","UnidadeFormComponent_tab_41_Template","isModal","title","ɵɵattribute","ɵɵpureFunction1","_c8","_c7","lookup","DIA_HORA_CORRIDOS_OU_UTEIS","HORAS_CORRIDAS_OU_UTEIS","SIMNAO","bind","ICONES","GridComponent","PageFrameBase","IntegranteService","ɵɵtext","ɵɵtextInterpolate","ctx_r1","row_r10","usuario_url_foto","usuario_nome","usuario_apelido","ctx_r5","ctx_r14","getColor","UNIDADE_INTEGRANTE_TIPO","atribuicao_r15","getIcon","getValue","UnidadeIntegranteComponent_ng_template_10_div_0_Template","row_r13","atribuicoes","ctx_r9","deleteItemHandle","tiposAtribuicao","noPersist","includes","adding","map","i","integranteService","atribuicao","ngOnInit","entity_id","metadata","isNoPersist","filter","ngAfterViewInit","loading","loadIntegrantes","resposta","integrantes","converterEmVinculo","ordenar","x","detectChanges","addIntegrante","_this3","novo","generateUuid","loadIntegrante","row","_this4","converterAtribuicoes","removeIntegrante","_this5","nomeServidor","nomeUnidade","dialog","msg","find","index","findIndex","permitidoApagar","_this6","n","alterandoGestor","novasAtribuicoes","novoIntegranteConsolidado","selectedItem","apelido","UnidadeIntegranteComponent_Query","UnidadeIntegranteComponent_span_2_Template","UnidadeIntegranteComponent_ng_template_5_Template","ɵɵtemplateRefExtractor","UnidadeIntegranteComponent_ng_template_7_Template","UnidadeIntegranteComponent_ng_template_10_Template","UnidadeIntegranteComponent_ng_template_12_Template","_r2","_r4","_r6","_r8","PageListBase","buttons","ɵɵtextInterpolate1","UnidadeListGridComponent_ng_template_14_span_2_Template","UnidadeListGridComponent_ng_template_21_badge_1_Template","row_r14","data_inativacao","UnidadeListGridComponent","selectable","filterWhere","inativos","trim","replace","code","groupBy","field","label","hasPermissionTo","onClick","go","navigate","route","modalRefresh","addOption","OPTION_INFORMACOES","OPTION_EXCLUIR","dynamicOptions","inativo","submitting","modalRefreshId","modalClose","filterClear","UnidadeListGridComponent_Query","UnidadeListGridComponent_h3_0_Template","UnidadeListGridComponent_Template_grid_select_1_listener","$event","onSelect","UnidadeListGridComponent_toolbar_2_Template","UnidadeListGridComponent_ng_template_14_Template","UnidadeListGridComponent_ng_template_18_Template","UnidadeListGridComponent_ng_template_21_Template","add","orderBy","filterSubmit","filterCollapseChange","filterCollapsed","edit","options","rowsLimit","node_r1","UnidadeListMapComponent","data","carregaUnidades","minhaUnidade","lotacao","unidades","hierarquiaUnidades","caminhoAteARaiz","unidadeAtualId","unidadeAtual","unshift","filhos","unidadeId","type","expanded","styleClass","hint","children","temFilhos","some","expandeUnidade","event","carregaFilhas","node","unidadesFilhas","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","UnidadeListMapComponent_Template","UnidadeListMapComponent_Template_p_organizationChart_onNodeExpand_2_listener","UnidadeListMapComponent_ng_template_3_Template","TabsComponent","snapshot","modalRoute","UnidadeListComponent_tab_4_ng_template_1_Template","_r3","UnidadeListComponent","tabs","active","usuarioConfig","active_tab","onSelectTab","tab","viewInit","saveUsuarioConfig","UnidadeListComponent_Query","UnidadeListComponent_ng_template_2_Template","UnidadeListComponent_tab_4_Template","_r0","row_r8","unidade_origem","ɵɵtextInterpolate2","ctx_r3","_c3","ɵɵpureFunction0","_c2","ɵɵpureFunction2","_c4","_c6","_c5","row_r11","unidade_destino","ctx_r7","_c9","UnidadeMergeComponent","toolbarButtons","onMesmaSiglaClick","exclui_origem","origem_inativo","unidade_origem_id","unidade_destino_id","mesmaSigla","destinos","reduce","acumulador","valor","destinosIds","origens","origensIds","origem","destino","finally","addMerge","loadMerge","removeMerge","saveMerge","unidadeOrigem","selectedEntity","getById","unidadeDestino","onMerge","unificar","close","UnidadeMergeComponent_Query","UnidadeMergeComponent_Template_editable_form_submit_0_listener","UnidadeMergeComponent_Template_editable_form_cancel_0_listener","UnidadeMergeComponent_ng_template_7_Template","UnidadeMergeComponent_ng_template_9_Template","UnidadeMergeComponent_ng_template_12_Template","UnidadeMergeComponent_ng_template_14_Template","RouterModule","AuthGuard","ConfigResolver","routes","component","canActivate","config","runGuardsAndResolvers","modal","UnidadeRoutingModule","_3","forChild","imports","i1","exports","CommonModule","ComponentsModule","OrganizationChartModule","ReactiveFormsModule","UteisModule","NgScrollbarModule","UnidadeModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
=======
{"version":3,"file":"9502.js","mappings":"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","sources":["./src/app/dao/unidade-integrante-atribuicao-dao.service.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.html","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.ts","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.html","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.html","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.html","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.ts","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.html","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.ts","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.html","./src/app/modules/configuracoes/unidade/unidade-routing.module.ts","./src/app/modules/configuracoes/unidade/unidade.module.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\nimport { DaoBaseService } from './dao-base.service';\nimport { IntegranteConsolidado } from '../models/unidade-integrante.model';\nimport { Unidade } from '../models/unidade.model';\nimport { Usuario } from '../models/usuario.model';\nimport { UnidadeIntegranteAtribuicao } from '../models/unidade-integrante-atribuicao.model';\n\nexport type LoadIntegrantesResult = {\n  integrantes: IntegranteConsolidado[],\n  unidade?: Unidade,\n  usuario?: Usuario\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UnidadeIntegranteAtribuicaoDaoService extends DaoBaseService<UnidadeIntegranteAtribuicao> {\n\n  constructor(protected injector: Injector) { \n    super(\"UnidadeIntegranteAtribuicao\", injector);\n    this.inputSearchConfig.searchFields = [];\n  }  \n}\n\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\r\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UnidadeIntegranteAtribuicaoDaoService } from 'src/app/dao/unidade-integrante-atribuicao-dao.service';\r\nimport { UnidadeIntegranteDaoService, Vinculo } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Expediente } from 'src/app/models/expediente.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NotificacaoService } from 'src/app/modules/uteis/notificacoes/notificacao.service';\r\nimport { NotificacoesConfigComponent } from 'src/app/modules/uteis/notificacoes/notificacoes-config/notificacoes-config.component';\r\nimport { TemplateDataset } from 'src/app/modules/uteis/templates/template.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { UnidadeIntegranteComponent } from '../unidade-integrante/unidade-integrante.component';\r\n\r\n@Component({\r\n  selector: 'app-unidade-form',\r\n  templateUrl: './unidade-form.component.html',\r\n  styleUrls: ['./unidade-form.component.scss']\r\n})\r\n\r\nexport class UnidadeFormComponent extends PageFormBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(UnidadeIntegranteComponent, { static: false }) public usuariosIntegrantes?: UnidadeIntegranteComponent;\r\n  @ViewChild('unidade_pai', { static: false }) public unidadePai?: InputSearchComponent;\r\n  @ViewChild('cidade', { static: false }) public cidade?: InputSearchComponent;\r\n  @ViewChild('gestor', { static: false }) public gestor?: InputSearchComponent;\r\n  @ViewChild('gestorSubstituto', { static: false }) public gestorSubstituto?: InputSearchComponent;\r\n  @ViewChild('entidade', { static: false }) public entidade?: InputSearchComponent;\r\n  @ViewChild('notificacoes', { static: false }) public notificacoes?: NotificacoesConfigComponent;\r\n  @ViewChild('instituidora', { static: false }) public instituidora?: InputSwitchComponent;\r\n\r\n  public form: FormGroup;\r\n  public formGestor: FormGroup;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public cidadeDao: CidadeDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public planoTrabalhoDao: PlanoTrabalhoDaoService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public integranteAtribuicaoDao: UnidadeIntegranteAtribuicaoDaoService;\r\n  public notificacao: NotificacaoService;\r\n  public planoDataset: TemplateDataset[];\r\n  public informal: boolean = false;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.integranteAtribuicaoDao = injector.get<UnidadeIntegranteAtribuicaoDaoService>(UnidadeIntegranteAtribuicaoDaoService);\r\n    this.notificacao = injector.get<NotificacaoService>(NotificacaoService);\r\n    this.modalWidth = 1200;\r\n    this.planoDataset = this.planoTrabalhoDao.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      codigo: {default: \"\"},\r\n      sigla: {default: \"\"},\r\n      nome: {default: \"\"},\r\n      path: {default: \"\"},\r\n      cidade_id: {default: \"\"},\r\n      uf: {default: \"\"},\r\n      instituidora: {default: 0},\r\n      informal: {default: 0},\r\n      atividades_arquivamento_automatico: {default: 1},\r\n      distribuicao_forma_contagem_prazos: {default: \"DIAS_UTEIS\"},\r\n      entrega_forma_contagem_prazos: {default: \"HORAS_UTEIS\"},\r\n      notificacoes: {default: {}},\r\n      etiquetas: {default: []},\r\n      unidade_pai_id: {default: \"\"},\r\n      entidade_id: {default: this.auth.unidade?.entidade_id},\r\n      etiqueta_texto: {default: \"\"},\r\n      etiqueta_icone: {default: null},\r\n      etiqueta_cor: {default: null},\r\n      expediente24: {default: true},\r\n      expediente: {default: null},\r\n      usar_expediente_entidade: {default: false},\r\n      texto_complementar_plano: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n    this.formGestor = this.fh.FormBuilder({\r\n      gestor_id: {default: \"\"},\r\n      gestor_substituto_id: {default: \"\"}\r\n    }, this.cdRef);\r\n    this.join =  [\"cidade\", \"entidade\", \"gestor.usuario:id,nome\", \"gestor_substituto.usuario:id,nome\", \"notificacoes_templates\", \"gestor.gestor:id\", \"gestor_substituto.gestor_substituto:id\"];\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(['sigla', 'nome', 'cidade_id', 'entidade_id','unidade_pai_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    const erros_integrantes = [];\r\n    this.usuariosIntegrantes?.grid?.items.forEach((usuarioIntegrante) => {\r\n      if(usuarioIntegrante.usuario_id == '') erros_integrantes.push({ integrante: usuarioIntegrante, erro: 'Falta usuario_id'})\r\n    });\r\n    if(erros_integrantes.length) return \"Na aba 'Integrantes' há usuário não salvo. Salve-o antes de salvar a unidade!\"\r\n    return undefined;\r\n  } \r\n\r\n  public async loadData(entity: Unidade, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    await Promise.all ([\r\n      this.unidadePai!.loadSearch(entity.unidade_pai || entity.unidade_pai_id),\r\n      this.cidade!.loadSearch(entity.cidade || entity.cidade_id),\r\n      this.gestor!.loadSearch(entity?.gestor?.usuario || entity.gestor?.usuario!.id),\r\n      this.gestorSubstituto!.loadSearch(entity?.gestor_substituto?.usuario || entity.gestor_substituto?.usuario!.id),\r\n      this.entidade!.loadSearch(entity.entidade || entity.entidade_id)\r\n    ]);\r\n    entity.etiquetas = entity.etiquetas || [];\r\n    this.form.patchValue(this.util.fillForm(formValue, entity));\r\n    this.formGestor.controls.gestor_id.setValue(entity.gestor?.usuario_id);\r\n    this.formGestor.controls.gestor_substituto_id.setValue(entity.gestor_substituto?.usuario_id);\r\n    this.usuariosIntegrantes?.loadData(entity);\r\n  }\r\n\r\n  public initializeData(form: FormGroup): void {\r\n    this.entity = new Unidade({ entidade_id: this.auth.unidade?.entidade_id, entidade: this.auth.unidade?.entidade });\r\n    this.loadData(this.entity, form);\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form.controls.etiqueta_texto.value;\r\n    const key = this.util.textHash(value);\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.etiquetas.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form.controls.etiqueta_texto.value,\r\n        color: this.form.controls.etiqueta_cor.value,\r\n        icon: this.form.controls.etiqueta_icone.value\r\n      };\r\n      this.form.controls.etiqueta_texto.setValue(\"\");\r\n      this.form.controls.etiqueta_icone.setValue(null);\r\n      this.form.controls.etiqueta_cor.setValue(null);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public saveData(form: IIndexable): Promise<boolean> {\r\n    return new Promise<boolean>(async (resolve, reject) => {\r\n      this.notificacoes!.saveData();\r\n      this.usuariosIntegrantes!.grid!.confirm();\r\n      let unidade: Unidade = this.util.fill(new Unidade(), this.entity!);\r\n      unidade = this.util.fillForm(unidade, this.form!.value);\r\n      unidade.notificacoes = this.entity!.notificacoes;\r\n      let salvarGestor = !!this.formGestor!.controls.gestor_id?.value && (!this.entity?.gestor?.id.length || (!!this.entity?.gestor?.id.length && this.entity?.gestor?.usuario?.id != this.formGestor!.controls.gestor_id?.value));\r\n      let salvarGestorSubstituto = !!this.formGestor!.controls.gestor_substituto_id?.value && (!this.entity?.gestor_substituto?.id.length || (!!this.entity?.gestor_substituto?.id.length && this.entity?.gestor_substituto?.usuario?.id != this.formGestor!.controls.gestor_substituto_id?.value));\r\n      let salvarGestorDelegado = !!this.formGestor!.controls.gestor_delegado_id?.value && (!this.entity?.gestor_delegado?.id.length || (!!this.entity?.gestor_delegado?.id.length && this.entity?.gestor_delegado?.usuario?.id != this.formGestor!.controls.gestor_delegado_id?.value));\r\n      let apagarGestor = !this.formGestor!.controls.gestor_id?.value && !!this.entity?.gestor?.id.length;\r\n      let apagarGestorSubstituto = !this.formGestor!.controls.gestor_substituto_id?.value && !!this.entity?.gestor_substituto?.id.length;\r\n      let apagarGestorDelegado = !this.formGestor!.controls.gestor_delegado_id?.value && !!this.entity?.gestor_delegado?.id.length;\r\n      let vinculos = this.usuariosIntegrantes?._items || [];\r\n      try {\r\n        await this.dao?.save(unidade, [\"gestor.gestor:id\",\"gestor_substituto.gestor_substituto:id\",\"gestor_delegado.gestor_delegado:id\"]).then(async unidade => {\r\n          this.entity = unidade;\r\n          if(salvarGestor) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_id!.value, 'atribuicoes': [\"GESTOR\"]}]);\r\n          if(salvarGestorSubstituto) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_substituto_id!.value, 'atribuicoes': [\"GESTOR_SUBSTITUTO\"]}]);\r\n          if(salvarGestorDelegado) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_delegado_id!.value, 'atribuicoes': [\"GESTOR_DELEGADO\"]}]);\r\n          if(apagarGestor) await this.integranteAtribuicaoDao.delete(this.entity?.gestor!.gestor!.id);\r\n          if(apagarGestorSubstituto) await this.integranteAtribuicaoDao.delete(this.entity?.gestor_substituto!.gestor_substituto!.id);\r\n          if(apagarGestorDelegado) await this.integranteAtribuicaoDao.delete(this.entity?.gestor_delegado!.gestor_delegado!.id);\r\n          if(vinculos.length) {\r\n            vinculos.forEach(v => v.unidade_id = unidade.id);\r\n            await this.integranteDao.saveIntegrante(vinculos as Vinculo[]);\r\n          }\r\n        });\r\n        resolve(true);\r\n      } catch (error: any) {\r\n        if (this.editableForm) this.editableForm.error = error;\r\n      }\r\n    });\r\n  }\r\n\r\n  public titleEdit = (entity: Unidade): string => {\r\n    return \"Editando \" + this.lex.translate(\"Unidade\") + ': ' + (entity?.sigla || \"\");\r\n  }\r\n\r\n  public get is24hrs(): string | undefined {\r\n    return this.form?.controls.expediente24.value ? \"\" : undefined;\r\n  }\r\n\r\n  public onUsarExpedienteEntidadeChange() {\r\n    this.form.controls.expediente.setValue( this.form.controls.usar_expediente_entidade.value ? null : this.form.controls.expediente.value || new Expediente());\r\n  }\r\n\r\n}\r\n","<editable-form [title]=\"isModal ? '' : title\" [form]=\"form!\" [disabled]=\"formDisabled\" initialFocus=\"codigo\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <tabs display right>\r\n        <tab key=\"PRINCIPAL\" label=\"Principal\">\r\n            <div class=\"row\">\r\n                <input-switch [size]=\"1\" label=\"Instit.\" labelClass=\"text-nowrap\" controlName=\"instituidora\" [labelInfo]=\"'Se a ' + lex.noun('unidade') + ' é instituidora de Programas.'\"></input-switch>\r\n                <input-switch *ngIf=\"informal\" [size]=\"1\" label=\"Informal\" labelClass=\"text-nowrap\" controlName=\"informal\" [labelInfo]=\"'Se a ' + lex.noun('unidade') + ' é informal.'\"></input-switch>\r\n                <input-text [size]=\"2\" label=\"Código\" controlName=\"codigo\" [attr.maxlength]=250></input-text>\r\n                <input-text [size]=\"2\" label=\"Sigla\" controlName=\"sigla\" [attr.maxlength]=250 required></input-text>\r\n                <input-text [size]=\"7\" label=\"Nome\" controlName=\"nome\" [attr.maxlength]=250 required></input-text>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #gestor label=\"Gestor\" [size]=\"6\" [emptyValue]=\"null\" [control]=\"formGestor!.controls.gestor_id\" controlName=\"gestor_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável pela unidade\"></input-search>\r\n                <input-search #gestorSubstituto label=\"Gestor Substituto\" [size]=\"6\" [emptyValue]=\"null\" [control]=\"formGestor!.controls.gestor_substituto_id\" controlName=\"gestor_substituto_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável substituto pela unidade\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #cidade [size]=\"4\" controlName=\"cidade_id\" [dao]=\"cidadeDao\" required></input-search>\r\n                <input-search #unidade_pai [size]=\"4\" [label]=\"lex.translate('Unidade') + ' pai'\" controlName=\"unidade_pai_id\" [where]=\"[['entidade_id', '==', form.controls.entidade_id.value]]\" [dao]=\"dao!\" required></input-search>\r\n                <input-search #entidade [size]=\"4\" disabled controlName=\"entidade_id\" [dao]=\"entidadeDao\" required></input-search>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"CONFIGURACOES\" label=\"Configurações\">\r\n            <div class=\"row\">\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Distribuição')\" controlName=\"distribuicao_forma_contagem_prazos\" [items]=\"lookup.DIA_HORA_CORRIDOS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos para a distribuição (lançamento da demanda).\"></input-select>\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Entrega')\" controlName=\"entrega_forma_contagem_prazos\" [items]=\"lookup.HORAS_CORRIDAS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos na entrega da demanda (data da entrega e tempo despendido)\"></input-select>\r\n                <input-radio [size]=\"4\" label=\"Arquivamento automático\" controlName=\"atividades_arquivamento_automatico\" [items]=\"lookup.SIMNAO\" labelInfo=\"Se após a avaliação, arquivará automaticamente a atividade.\"></input-radio>\r\n            </div>\r\n            <separator></separator>\r\n            <div clss=\"row\">\r\n                <input-multiselect label=\"Etiquetas\" multiselectStyle=\"inline\" [maxItemWidth]=\"250\" controlName=\"etiquetas\" [size]=\"12\" [addItemHandle]=\"addItemHandle.bind(this)\">\r\n                    <input-text [size]=\"6\" label=\"Texto\" controlName=\"etiqueta_texto\" [attr.maxlength]=250></input-text>\r\n                    <input-select [size]=\"3\" label=\"Ícone\" controlName=\"etiqueta_icone\" [items]=\"lookup.ICONES\"></input-select>\r\n                    <input-color [size]=\"3\" label=\"Cor\" controlName=\"etiqueta_cor\"></input-color>\r\n                </input-multiselect>\r\n            </div>\r\n            <separator></separator>\r\n            <div class=\"row\">\r\n                <input-editor [label]=\"'Texto complementar ' + lex.translate('Plano de Trabalho')\" controlName=\"texto_complementar_plano\" [dataset]=\"planoDataset\"></input-editor>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"EXPEDIENTE\" label=\"Expediente\">\r\n            <div class=\"row\">\r\n                <input-switch #usarExpedienteEntidade [label]=\"'Usar o calendário ' + lex.translate('entidade')\" labelPosition=\"right\" icon=\"bi bi-check2\" [size]=\"12\" (change)=\"onUsarExpedienteEntidadeChange()\" controlName=\"usar_expediente_entidade\" labelInfo=\"Se utiliza o expediente configurado na entidade ao invés de especificar na unidade\"></input-switch>\r\n            </div>\r\n            <calendar-expediente #expediente [disabled]=\"form!.controls.usar_expediente_entidade.value ? undefined : 'true'\" [expedienteDisabled]=\"entity?.entidade?.expediente\" [control]=\"form!.controls.expediente\"></calendar-expediente>\r\n        </tab>\r\n        <tab *ngIf=\"entity\" key=\"NOTIFICACOES\" label=\"Notificações\">\r\n            <notificacoes-config #notificacoes [unidadeId]=\"entity.id.length ? entity!.id : 'ADD'\" [entity]=\"entity!\" [disabled]=\"formDisabled\"></notificacoes-config>\r\n        </tab>\r\n        <tab key=\"INTEGRANTES\" [label]=\"lex.translate('Integrantes')\">\r\n            <unidade-integrante #usuariosIntegrantes noPersist [entity]=\"entity\"></unidade-integrante>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnidadeIntegranteDaoService } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable, IntegranteAtribuicao } from 'src/app/models/base.model';\r\nimport { IntegranteConsolidado } from 'src/app/models/unidade-integrante.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { IntegranteService } from 'src/app/services/integrante.service';\r\n\r\n@Component({\r\n  selector: 'unidade-integrante',\r\n  templateUrl: './unidade-integrante.component.html',\r\n  styleUrls: ['./unidade-integrante.component.scss']\r\n})\r\nexport class UnidadeIntegranteComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: Unidade | undefined) { super.entity = value; } get entity(): Unidade | undefined { return super.entity; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n\r\n  public items: IntegranteConsolidado[] = [];\r\n  public _items?: any[];\r\n  public integranteService: IntegranteService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidade?: Unidade;\r\n  public tiposAtribuicao: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.integranteService = injector.get<IntegranteService>(IntegranteService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      usuario_id: { default: \"\" },\r\n      atribuicoes: { default: undefined },\r\n      atribuicao: { default: \"\" }\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity_id = this.metadata?.entity_id || this.entity?.id;\r\n    this.tiposAtribuicao = this.isNoPersist ? this.lookup.UNIDADE_INTEGRANTE_TIPO.filter((atribuicao) => ![\"GESTOR\",\"GESTOR_SUBSTITUTO\"].includes(atribuicao.key)) : this.lookup.UNIDADE_INTEGRANTE_TIPO;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    (async () => {\r\n      await this.loadData({ id: this.entity_id }, this.form);\r\n    })();\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente para carregar todos os integrantes da unidade.\r\n   * @param entity \r\n   * @param form \r\n   */\r\n  public async loadData(entity: IIndexable, form?: FormGroup | undefined) {\r\n    if (entity.id) {\r\n      try {\r\n          this.grid!.loading = true;\r\n          this.items = this._items == undefined ? await this.integranteDao!.loadIntegrantes(entity.id, \"\").then( resposta => {\r\n            this.entity = resposta.unidade;\r\n            if(this.isNoPersist) {\r\n              this._items = [];\r\n              resposta.integrantes.forEach(i => this._items?.push(this.integranteService.converterEmVinculo(i, this.entity!.id, i.id, i.atribuicoes)));\r\n            }\r\n            return this.integranteService.ordenar(resposta.integrantes.filter(x => x.atribuicoes?.length > 0));\r\n          }) : this.integranteService.ordenar(this._items.filter(x => x.atribuicoes?.length > 0));\r\n      } finally {\r\n        this.cdRef.detectChanges();\r\n        this.grid!.loading = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if ([\"usuario_id\", \"atribuicoes\"].includes(controlName) && !control.value?.length) result = \"Obrigatório\";\r\n    if ((controlName == \"usuario_id\") && this.grid?.adding && this.items.map(i => i.id).includes(control.value)) result = \"O usuário já é integrante desta unidade. Edite-o, ao invés de incluí-lo novamente!\";\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para inserir um integrante no grid, seja este componente persistente ou não.\r\n   * @returns \r\n   */\r\n  public async addIntegrante() {\r\n    let novo = {\r\n      id: this.integranteDao!.generateUuid(),\r\n      usuario_id: \"\",\r\n      atribuicoes: []\r\n    } as IIndexable;\r\n    this._items?.push(novo);\r\n    return novo;\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n    const key = this.form!.controls.atribuicao.value;\r\n    if (value?.length && this.util.validateLookupItem(this.form!.controls.atribuicoes.value, key)) {\r\n      const icon = this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      const color = this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      result = {\r\n        key: key,\r\n        value: value,\r\n        icon: icon,\r\n        color: color\r\n      };\r\n      this.form!.controls.atribuicao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  /**\r\n   * Método chamado na edição de um integrante da Unidade.\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadIntegrante(form: FormGroup, row: any) {\r\n    form.controls.usuario_id.setValue(this.grid?.adding ? row.usuario_id : row.id);\r\n    form.controls.atribuicoes.setValue(this.integranteService.converterAtribuicoes(row.atribuicoes));\r\n    form.controls.atribuicao.setValue(\"\");\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a exclusão de um integrante do grid, seja este componente persistente ou não. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeIntegrante(row: IntegranteConsolidado) {\r\n    let nomeServidor = row.usuario_nome;\r\n    let nomeUnidade = this.entity!.nome;\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir todas as atribuições do servidor '\" + nomeServidor + \"' na unidade '\" + nomeUnidade + \"' ?\");\r\n    if (confirm) {\r\n      let msg: string | undefined;\r\n      try {\r\n        if (!this.isNoPersist) {    // se persistente\r\n          this.loading = true;\r\n          await this.integranteDao.saveIntegrante([this.integranteService.converterEmVinculo(row, this.entity!.id, row.id, [])]).then(resposta => {\r\n            if (msg = resposta.find(v => v.msg?.length)?.msg) { if (this.grid) this.grid.error = msg; };\r\n          });\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n        } else {                    // se não persistente\r\n          let index = this._items!.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n          this._items![index] = this.integranteService.converterEmVinculo(row, this.entity!.id, row.id, []);\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      return msg ? false : true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Garante que não será possível excluir atribuições que possam gerar inconsistências\r\n   * @param row Atribuição do servidor na unidade\r\n   * @returns \r\n   */\r\n  public deleteItemHandle(row: LookupItem): boolean | undefined | void {\r\n    return this.integranteService.permitidoApagar(row.key, this.isNoPersist);\r\n  };\r\n\r\n  /**\r\n   * Método chamado no salvamento de um usuário-integrante (new/edit), seja este componente persistente ou não.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveIntegrante(form: FormGroup, row: IntegranteConsolidado) {\r\n    let confirm = true;\r\n    let n = this.integranteService.alterandoGestor(form, row.atribuicoes || []);\r\n    if (n.length) confirm = await this.dialog.confirm(\"Confirma a Alteração de Gestor ?\", n.length == 1 ? \"O \" + n[0] + \" será alterado.\" : \"Serão alterados: \" + n.join(', ') + \".\");\r\n    if (form!.controls.atribuicoes.value.length && confirm) {\r\n      this.loading = true;\r\n      try {\r\n        let novasAtribuicoes: IntegranteAtribuicao[] = form!.controls.atribuicoes.value.map((x: LookupItem) => x.key);\r\n        if (!this.isNoPersist) { // se persistente\r\n          await this.integranteDao.saveIntegrante([this.integranteService.converterEmVinculo(row, this.entity!.id, form!.controls.usuario_id.value, novasAtribuicoes)]).then(resposta => {\r\n            let msg: string | undefined;\r\n            if (msg = resposta?.find(v => v.msg?.length)?.msg) { if (this.grid) this.grid.error = msg; };\r\n          });\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n          if (this.grid) this.grid!.error = \"\";\r\n        } else {                // se não persistente\r\n          let index = this._items!.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n          let novoIntegranteConsolidado = { id: row.id, usuario_apelido: this.usuario?.selectedItem?.entity.apelido, usuario_nome: this.usuario?.selectedItem?.entity.nome };\r\n          this._items![index!] = this.integranteService.converterEmVinculo(novoIntegranteConsolidado, this.entity!.id, form!.controls.usuario_id.value, novasAtribuicoes);\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n        }\r\n      } catch (error: any) {\r\n        if (this.grid) this.grid.error = error;\r\n        await this.loadData({ id: this.entity!.id }, this.form);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n","<grid #grid [items]=\"items\" [minHeight]=\"500\" [form]=\"form!\" [hasDelete]=\"true\" editable\r\n    [add]=\"addIntegrante.bind(this)\" [load]=\"loadIntegrante.bind(this)\" [remove]=\"removeIntegrante.bind(this)\" [save]=\"saveIntegrante.bind(this)\">\r\n    <span *ngIf=\"!isNoPersist\"><strong>{{ 'Unidade: ' + entity?.nome }}</strong></span>\r\n    <columns>\r\n        <column [title]=\"lex.translate('Usuários')\" [template]=\"columnUsuario\" [editTemplate]=\"editUsuario\">\r\n            <ng-template let-row=\"row\" #columnUsuario>\r\n                <div class=\"d-flex\">\r\n                    <div class=\"ms-3\">\r\n                        <profile-picture [url]=\"row.usuario_url_foto || ''\" [size]=\"40\" [hint]=\"row.usuario_nome || ''\"></profile-picture>\r\n                    </div>\r\n                    <div class=\"flex-fill ms-3\">\r\n                        <strong>{{row.usuario_nome || \"\"}}</strong><br>\r\n                        <small>{{row.usuario_apelido || \"\"}}</small>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editUsuario>\r\n                <input-search #usuario [size]=\"12\" label icon controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n            </ng-template>\r\n        </column>\r\n        <column [title]=\"lex.translate('Atribuições')\" [template]=\"columnAtribuicoes\" [editTemplate]=\"editAtribuicoes\">\r\n            <ng-template let-row=\"row\" #columnAtribuicoes>\r\n                <div *ngFor=\"let atribuicao of row.atribuicoes\">\r\n                    <badge [color]=\"lookup.getColor(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [icon]=\"lookup.getIcon(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [label]=\"lookup.getValue(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\"></badge><br>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editAtribuicoes>\r\n                <input-multiselect controlName=\"atribuicoes\" [size]=\"8\" [addItemHandle]=\"addItemHandle.bind(this)\" [deleteItemHandle]=\"deleteItemHandle.bind(this)\">\r\n                    <input-select [size]=\"12\" label=\"\" icon=\"fas fa-sign-out-alt\" controlName=\"atribuicao\" [items]=\"tiposAtribuicao\"></input-select>\r\n                </input-multiselect>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\"></column>\r\n    </columns>\r\n</grid>\r\n","import { Component, Injector, Input, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ActivatedRouteSnapshot } from '@angular/router';\nimport { GridComponent } from 'src/app/components/grid/grid.component';\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Unidade } from 'src/app/models/unidade.model';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\n\n@Component({\n  selector: 'unidade-list-grid',\n  templateUrl: './unidade-list-grid.component.html',\n  styleUrls: ['./unidade-list-grid.component.scss']\n})\nexport class UnidadeListGridComponent extends PageListBase<Unidade, UnidadeDaoService> {\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\n  @Input() selectable: boolean = false;\n  @Input() snapshot?: ActivatedRouteSnapshot;\n  @ViewChild('instituidora', { static: false }) public instituidora?: InputSwitchComponent;\n\n  public cidadeDao: CidadeDaoService;\n  public entidadeDao: EntidadeDaoService;\n  public buttons: ToolbarButton[] = [];\n\n  constructor(public injector: Injector) {\n    super(injector, Unidade, UnidadeDaoService);\n    this.join = [\"cidade\", \"unidade_pai:id,sigla\", \"entidade:id,sigla\", \"gestor.usuario:id\", \"gestor_substituto.usuario:id\"];\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\n\n    /* Inicializações */\n    this.code = \"MOD_CFG_UND\";\n    this.filter = this.fh.FormBuilder({\n      entidade_id: { default: this.auth.unidade?.entidade_id },\n      inativos: { default: false },\n      instituidora: { default: false },\n      nome: { default: \"\" }\n    });\n    this.groupBy = [{ field: \"entidade.sigla\", label: \"Entidade\" }];\n    // Testa se o usuário possui permissão unificar unidade\n    if (this.auth.hasPermissionTo(\"MOD_UND_UNIR\")) {\n      this.buttons.push({\n        icon: \"bi bi-arrows-collapse\",\n        color: \"btn-outline-danger\",\n        label: \"Unificar\",\n        onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', 'merge'] }, this.modalRefresh())\n      });\n    }\n    this.addOption(this.OPTION_INFORMACOES, \"MOD_UND\");\n    this.addOption(this.OPTION_EXCLUIR, \"MOD_UND_EXCL\");\n  }\n\n  public dynamicOptions(row: any): ToolbarButton[] {\n    let result: ToolbarButton[] = [];\n    let unidade: Unidade = row as Unidade;\n    // Testa se o usuário logado possui permissão de inativar a unidade do grid\n    if (this.auth.hasPermissionTo(\"MOD_UND_INATV\")) result.push({icon: unidade.data_inativacao ? \"bi bi-check-circle\" : \"bi bi-x-circle\", label: unidade.data_inativacao ? 'Reativar' : 'Inativar', onClick: async (unidade: Unidade) => await this.inativo(unidade, !unidade.data_inativacao)});\n    // Testa se o usuário logado possui permissão para gerenciar integrantes da unidade do grid\n    if (this.auth.hasPermissionTo(\"MOD_UND_INTG\")) result.push({ label: \"Integrantes\", icon: \"bi bi-people\", onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', '', unidade.id, 'integrante'] }, { metadata: { entity_id: row.id } })});\n    return result;\n  }\n\n  public async inativo(unidade: Unidade, inativo: boolean) {\n    if (await this.dialog.confirm(inativo ? \"Inativar\" : \"Reativar\", inativo ? \"Deseja realmente inativar a unidade?\" : \"Deseja reativar a unidade?\")) {\n      try {\n        this.submitting = true;\n        await this.dao!.inativo(unidade.id, inativo);\n        await this.modalRefreshId(unidade).modalClose!(undefined);\n      } finally {\n        this.submitting = false;\n      }\n    }\n  }\n\n  public filterClear(filter: FormGroup) {\n    super.filterClear(filter);\n  }\n\n  public filterWhere = (filter: FormGroup) => {\n    let form: any = filter.value;\n    let result: any[] = [];\n    /* Se for selectable trás somente os inativos ou os não inativos, se não for então trás juntamente os inativos se form.inativos */\n    result.push(this.selectable ? [\"data_inativacao\", form.inativos ? \"!=\" : \"==\", null] : [\"inativos\", \"==\", form.inativos]);\n    if (form.entidade_id?.length) result.push([\"entidade_id\", \"==\", form.entidade_id]);\n    if (form.nome?.length) result.push([\"or\", [\"nome\", \"like\", \"%\" + form.nome.trim().replace(\" \", \"%\") + \"%\"], [\"sigla\", \"like\", \"%\" + form.nome.trim().replace(\" \", \"%\") + \"%\"]]);\n    if (form.instituidora) result.push([\"instituidora\", \"==\", 1]);\n    return result;\n  }\n}","<h3 *ngIf=\"isModal\" class=\"my-2\">{{title}}</h3>\n<grid [dao]=\"dao\" [add]=\"add\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [selectable]=\"selectable\"\n    (select)=\"onSelect($event)\" [hasAdd]=\"auth.hasPermissionTo('MOD_UND_INCL')\"\n    [hasEdit]=\"auth.hasPermissionTo('MOD_UND_EDT')\">\n    <toolbar *ngIf=\"!selectable\" [buttons]=\"buttons\"></toolbar>\n    <filter [deleted]=\"this.auth.hasPermissionTo('MOD_AUDIT_DEL')\" [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\"\n        [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && filterCollapsed\">\n        <div class=\"row\">\n            <!-- <input-search #entidade [size]=\"5\" [control]=\"filter!.controls.entidade_id\" controlName=\"entidade_id\" [control]=\"filter!.controls.entidade_id\" [dao]=\"entidadeDao\"></input-search> -->\n            <input-text [size]=\"5\" label=\"Nome\" controlName=\"nome\" [control]=\"filter!.controls.nome\" placeholder=\"Nome ou sigla...\" [attr.maxlength]=250></input-text>\n            <input-switch #instituidora [size]=\"1\" label=\"Instit.\" labelClass=\"text-nowrap\" controlName=\"instituidora\" [control]=\"filter!.controls.instituidora\" [labelInfo]=\"'Se lista SOMENTE as ' + lex.noun('unidades') + ' instituidoras de ' + lex.noun('programa', true)\"></input-switch>\n            <input-switch [size]=\"1\" label=\"Inativos\" controlName=\"inativos\" [control]=\"filter!.controls.inativos\" labelInfo=\"Se lista também as unidade inativas\"></input-switch>\n        </div>\n    </filter>\n    <columns>\n        <column title=\"Sigla\" field=\"sigla\"></column>\n        <column title=\"Nome\" [template]=\"columnNome\" orderBy=\"nome\">\n            <ng-template let-row=\"row\" #columnNome>\n                <span class=\"d-block\">{{row.nome}}</span>\n                <span *ngIf=\"row.unidade\" class=\"badge bg-light text-dark\">\n                    <i class=\"bi bi-arrow-return-right\"></i>\n                    {{row.unidade.sigla}}\n                </span>\n            </ng-template>\n        </column>\n        <column title=\"Código\" field=\"codigo\"></column>\n        <column [title]=\"lex.translate('Cidade')\" [template]=\"columnCidade\">\n            <ng-template let-row=\"row\" #columnCidade>\n                <span>{{(row.cidade?.nome || \"\") + \"/\" + (row.cidade?.uf || \"\")}}</span>\n            </ng-template>\n        </column>\n        <column title=\"Situação\" [template]=\"columnSituacao\">\n            <ng-template let-row=\"row\" #columnSituacao>\n                <div class=\"one-per-line\">\n                    <badge *ngIf=\"row.instituidora\" color=\"primary\" icon=\"bi bi-star\" label=\"Instituidora\"></badge>\n                    <badge [color]=\"!row.data_inativacao ? 'success' : 'danger'\"\n                        [icon]=\"!row.data_inativacao ? 'bi bi-check-circle' : 'bi bi-x-circle'\"\n                        [label]=\"!row.data_inativacao ? 'Ativo' : 'Inativo'\"></badge>\n                </div>\n            </ng-template>\n        </column>\n        <column type=\"options\" [onEdit]=\"edit\" [options]=\"options\" [dynamicOptions]=\"dynamicOptions.bind(this)\"></column>\n    </columns>\n    <pagination [rows]=\"rowsLimit\"></pagination>\n</grid>\n","import { Component, Injector } from '@angular/core';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Unidade } from 'src/app/models/unidade.model';\nimport { TreeNode } from 'primeng/api';\nimport { QueryContext } from 'src/app/dao/query-context';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\nimport { OrganizationChartNodeExpandEvent } from 'primeng/organizationchart';\n\n@Component({\n  selector: 'unidade-mapa',\n  templateUrl: './unidade-list-map.component.html',\n  styleUrls: ['./unidade-list-map.component.scss']\n})\nexport class UnidadeListMapComponent extends PageListBase<Unidade, UnidadeDaoService>{\n  public query?: QueryContext<Unidade>;\n  public data: TreeNode[] = []\n\n  constructor(public injector: Injector) {\n    super(injector, Unidade, UnidadeDaoService);\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n    this.carregaUnidades()\n  }\n\n  public async carregaUnidades(){\n    let minhaUnidade = this.auth.usuario?.lotacao?.unidade_id\n    let unidades = await this.dao!.hierarquiaUnidades(minhaUnidade);\n\n    let caminhoAteARaiz: string[] = [];\n    let unidadeAtualId = minhaUnidade;\n\n    while (unidadeAtualId) {\n        let unidadeAtual = unidades.find(x => x.id === unidadeAtualId);\n        if (unidadeAtual) {\n            caminhoAteARaiz.unshift(unidadeAtualId);\n            unidadeAtualId = unidadeAtual.unidade_pai_id || undefined;\n        } else {\n            break;\n        }\n    }\n\n    let filhos = (unidadeId: string | null): any => {\n        return unidades\n            .filter(x => x.unidade_pai_id === unidadeId)\n            .map(x => ({\n                type: 'unidade',\n                label: x.sigla,                \n                expanded: minhaUnidade === x.id ? false : caminhoAteARaiz.includes(x.id),\n                styleClass: minhaUnidade == x.id ? 'text-bg-primary' : '',                \n                data: {\n                  hint: x.nome,\n                  unidade: x,\n                },\n                children: temFilhos(x.id) ? filhos(x.id) : [{ type: 'fake', expanded: false, label: 'Carregando...' }]\n            }));\n    };\n    let temFilhos = (unidadeId: string) => {\n      return unidades.some(x => x.unidade_pai_id === unidadeId);\n    };    \n    \n    this.data = filhos(null);\n  }\n\n  expandeUnidade(event: OrganizationChartNodeExpandEvent){   \n    this.carregaFilhas(event.node.data.unidade.id, event.node)   \n  }\n\n\n  async carregaFilhas(unidade_id: string, node: TreeNode){\n    let unidades = await this.dao!.unidadesFilhas(unidade_id);\n    node.children = unidades.map(x => ({\n      type: 'unidade',\n      label: x.sigla,\n      expanded: false,\n      data: {\n        unidade: x,\n        hint: x.nome\n      },\n      children: [{ type: 'fake', expanded: false, label: 'Carregando...' }]\n    }));\n  }\n\n}\n","<ng-scrollbar autoHeightDisabled=\"false\" track=\"all\">\n  <div class=\"my-3\">\n    <p-organizationChart [value]=\"data\" (onNodeExpand)=\"expandeUnidade($event)\">\n      <ng-template let-node pTemplate=\"unidade\">\n        <div class=\"font-bold\">{{ node.label }}</div>\n      </ng-template>\n    </p-organizationChart>\n  </div>\n</ng-scrollbar>","import { Component, Injector, ViewChild } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { GridComponent } from 'src/app/components/grid/grid.component';\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Unidade } from 'src/app/models/unidade.model';\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\nimport { LookupItem } from 'src/app/services/lookup.service';\n\n@Component({\n  selector: 'app-unidade-list',\n  templateUrl: './unidade-list.component.html',\n  styleUrls: ['./unidade-list.component.scss']\n})\nexport class UnidadeListComponent extends PageListBase<Unidade, UnidadeDaoService> {\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\n  @ViewChild(TabsComponent, { static: false }) public tabs?: TabsComponent;\n\n  constructor(public injector: Injector) {\n    super(injector, Unidade, UnidadeDaoService);\n    this.title = this.lex.translate(\"Unidades\");\n    this.code = \"MOD_CFG_UND\";\n    this.filter = this.fh.FormBuilder({});\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n    this.tabs!.active = [\"TABELA\", \"MAPA\"].includes(this.usuarioConfig.active_tab) ? this.usuarioConfig.active_tab : \"TABELA\";\n  }\n\n  public async onSelectTab(tab: LookupItem) {\n    if(this.viewInit) this.saveUsuarioConfig({active_tab: tab.key});\n  }\n\n  public filterClear(filter: FormGroup) {\n    filter.controls.nome.setValue(\"\");\n    super.filterClear(filter);\n  }\n\n  public filterWhere = (filter: FormGroup) => {\n    let result: any[] = [];\n    let form: any = filter.value;\n    return result;\n  }\n\n}","<tabs right [title]=\"isModal ? '' : title\" [select]=\"onSelectTab.bind(this)\">\n    <tab key=\"TABELA\" icon=\"bi bi-table\" label=\"Lista\" [template]=\"grid\">\n        <ng-template #grid>\n            <unidade-list-grid [selectable]=\"selectable\" [snapshot]=\"snapshot || modalRoute || route.snapshot\"></unidade-list-grid>\n        </ng-template>\n    </tab>\n    <tab *ngIf=\"!selectable\" key=\"MAPA\" icon=\"bi bi-card-heading\" label=\"Mapa\" [template]=\"mapa\">\n        <ng-template #mapa>\n            <unidade-mapa></unidade-mapa>\n        </ng-template>\n    </tab>\n</tabs>","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\nexport type UnidadeMerge = {\r\n  id: string,\r\n  unidade_origem_id: string,\r\n  unidade_destino_id: string,\r\n  unidade_origem?: Unidade,\r\n  unidade_destino?: Unidade\r\n}\r\n\r\n@Component({\r\n  selector: 'app-unidade-merge',\r\n  templateUrl: './unidade-merge.component.html',\r\n  styleUrls: ['./unidade-merge.component.scss']\r\n})\r\nexport class UnidadeMergeComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('unidadeOrigem', { static: false }) public unidadeOrigem?: InputSearchComponent;\r\n  @ViewChild('unidadeDestino', { static: false }) public unidadeDestino?: InputSearchComponent;\r\n\r\n  public items: UnidadeMerge[] = [];\r\n  public toolbarButtons: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-yin-yang\",\r\n      label: \"Mesma sigla\",\r\n      hint: \"Unificar todos que tenham a mesma sigla. Sendo a inativa considerada como origem.\",\r\n      onClick: this.onMesmaSiglaClick.bind(this)\r\n    }\r\n  ];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      exclui_origem: {default: false},\r\n      origem_inativo: {default: true},\r\n      unidade_origem_id: {default: \"\"},\r\n      unidade_destino_id: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    return result;\r\n  }\r\n\r\n  public onMesmaSiglaClick() {\r\n    this.loading = true;\r\n    (this.dao as UnidadeDaoService).mesmaSigla().then(unidades => {\r\n      let destinos: Unidade[] = [];\r\n      destinos = unidades.reduce((acumulador, valor) => {\r\n        if(!valor.data_inativacao && !acumulador.find(x => x.sigla == valor.sigla)) acumulador.push(valor);\r\n        return acumulador; \r\n      }, destinos);\r\n      let destinosIds = destinos.map(x => x.id);\r\n      let origens = unidades.filter(x => !destinosIds.includes(x.id) && !!x.data_inativacao);\r\n      let origensIds = origens.map(x => x.id);\r\n      this.items = [];\r\n      for(let origem of origens) {\r\n        let destino = destinos.find(x => x.sigla == origem.sigla);\r\n        if(destino) {\r\n          this.items.push({\r\n            id: this.dao!.generateUuid(),\r\n            unidade_origem_id: origem.id,\r\n            unidade_destino_id: destino.id,\r\n            unidade_origem: origem,\r\n            unidade_destino: destino\r\n          });\r\n        }\r\n      }\r\n      /* Pegas as unidade que tem a Sigla repetida mas que não estão inativas */\r\n      let error: string[] = [];\r\n      for(let unidade of unidades) {\r\n        if(!destinosIds.includes(unidade.id) && !origensIds.includes(unidade.id)) error.push(unidade.codigo + \" - \" + unidade.sigla + \" - \" + unidade.nome);\r\n      }\r\n      if(error.length) this.editableForm!.error = (error.length == 1 ? \"A unidade abaixo possui duplicidade de SIGLA, mas não está inativa:\" : \"As unidades abaixo possuem duplicidade de SIGLA, mas não estão inativas:\") + \"\\n\" + error.join(\"\\n\");\r\n    }).finally(() => {\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  public async addMerge() {\r\n    return {\r\n      id: this.dao!.generateUuid(),\r\n      unidade_origem_id: \"\",\r\n      unidade_destino_id: \"\",\r\n      unidade_origem: undefined,\r\n      unidade_destino: undefined\r\n    } as IIndexable;\r\n  }\r\n\r\n  public async loadMerge(form: FormGroup, row: any) {\r\n    form.controls.unidade_origem_id.setValue(row.unidade_origem_id);\r\n    form.controls.unidade_destino_id.setValue(row.unidade_destino_id);\r\n  }\r\n\r\n  public async removeMerge(row: any) {\r\n    return true;\r\n  }\r\n\r\n  public async saveMerge(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    if(this.form!.controls.unidade_origem_id.value?.length || this.form!.controls.unidade_destino_id.value?.length) {\r\n      row.unidade_origem_id = form.controls.unidade_origem_id.value;\r\n      row.unidade_origem = this.unidadeOrigem?.selectedEntity || await this.dao?.getById(row.unidade_origem_id);\r\n      row.unidade_destino_id = form.controls.unidade_destino_id.value;\r\n      row.unidade_destino = this.unidadeDestino?.selectedEntity || await this.dao?.getById(row.unidade_destino_id);\r\n      result = row;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public onMerge() {\r\n    let error: string | undefined = undefined;\r\n    for(let row of this.items) error = error || (!row.unidade_origem_id?.length || !row.unidade_destino_id?.length ? \"A origem e o destino precisam estar preenchidos em todos\" : undefined);\r\n    this.editableForm!.error = error;\r\n    if(!error?.length) {\r\n      this.loading = true;\r\n      (this.dao as UnidadeDaoService).unificar(this.items.map(x => Object.assign({}, {unidade_origem_id: x.unidade_origem_id, unidade_destino_id: x.unidade_destino_id})), this.form!.controls.exclui_origem.value).then(result => {\r\n        if(result) this.close();\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<editable-form [form]=\"form!\" [title]=\"isModal ? '' : title\" confirmLabel=\"Unificar\" (submit)=\"onMerge()\" (cancel)=\"onCancel()\">\r\n    <top-alert type=\"warning\" message=\"Por motivos de segurança será permitido somente unificar unidades inativas para unidade ativas. E caso [Exclui origem] não esteja habilitado, a unidade de origem continuará na lista (como inativa).\"></top-alert>\r\n    <toolbar [buttons]=\"toolbarButtons\">\r\n        <input-switch [size]=\"4\" labelPosition=\"left\" label=\"Exclui origem\" controlName=\"exclui_origem\"></input-switch>\r\n    </toolbar>\r\n    <grid [items]=\"items\" [form]=\"form!\" [add]=\"addMerge.bind(this)\" [load]=\"loadMerge.bind(this)\" [remove]=\"removeMerge.bind(this)\" [save]=\"saveMerge.bind(this)\" editable>\r\n        <columns>\r\n            <column [title]=\"lex.translate('Unidade') + ' origem'\" titleHint=\"Unidade que será substituída pela outra\" [template]=\"columnUnidadeOrigem\" [editTemplate]=\"editUnidadeOrigem\">\r\n                <ng-template let-row=\"row\" #columnUnidadeOrigem>\r\n                    <span>{{row.unidade_origem?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_origem?.codigo || \"\"}} - {{row.unidade_origem?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeOrigem>\r\n                    <input-search #unidade_origem [size]=\"12\" label icon controlName=\"unidade_origem_id\" [dao]=\"dao\" [where]=\"[['inativo', '!=', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: true}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"lex.translate('Unidade') + ' destino'\" titleHint=\"Unidade que sobrará após a unificação\" [template]=\"columnUnidadeDestino\" [editTemplate]=\"editUnidadeDestino\">\r\n                <ng-template let-row=\"row\" #columnUnidadeDestino>\r\n                    <span>{{row.unidade_destino?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_destino?.codigo || \"\"}} - {{row.unidade_destino?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeDestino>\r\n                    <input-search #unidade_destino [size]=\"12\" label icon controlName=\"unidade_destino_id\" [dao]=\"dao\" [where]=\"[['inativo', '==', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: false}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column type=\"options\"></column>\r\n        </columns>\r\n    </grid>\r\n</editable-form>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades\" } },\r\n  { path: 'new', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão de Unidade\", modal: true } },\r\n  { path: ':id/edit', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição de Unidade\", modal: true } },\r\n  { path: ':id/consult', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Unidade\", modal: true } },\r\n  { path: ':id/:idUnidade/integrante', component: UnidadeIntegranteComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Integrantes da Unidade\", modal: true } },\r\n  { path: ':id/subordinadas', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades subordinadas\" } },\r\n  { path: 'merge', component: UnidadeMergeComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unificação\", modal: true } }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UnidadeRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { UnidadeRoutingModule } from './unidade-routing.module';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { OrganizationChartModule } from 'primeng/organizationchart';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { NgScrollbarModule } from 'ngx-scrollbar';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\nimport { UnidadeListGridComponent } from './unidade-list-grid/unidade-list-grid.component';\r\nimport { UnidadeListMapComponent } from './unidade-list-map/unidade-list-map.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UnidadeFormComponent,\r\n    UnidadeListComponent,\r\n    UnidadeMergeComponent,\r\n    UnidadeIntegranteComponent,\r\n    UnidadeListGridComponent,\r\n    UnidadeListMapComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    UteisModule,\r\n    ReactiveFormsModule,\r\n    UnidadeRoutingModule,\r\n    OrganizationChartModule,\r\n    NgScrollbarModule\r\n  ]\r\n})\r\nexport class UnidadeModule { }\r\n"],"names":["DaoBaseService","UnidadeIntegranteAtribuicaoDaoService","constructor","injector","inputSearchConfig","searchFields","i0","ɵɵinject","Injector","factory","ɵfac","providedIn","EditableFormComponent","CidadeDaoService","EntidadeDaoService","PlanoTrabalhoDaoService","UnidadeDaoService","UnidadeIntegranteDaoService","UsuarioDaoService","Expediente","Unidade","PageFormBase","NotificacaoService","UnidadeIntegranteComponent","ɵɵelement","ɵɵproperty","ctx_r0","lex","noun","ɵɵelementStart","ɵɵelementEnd","ɵɵadvance","ctx_r8","entity","id","length","formDisabled","UnidadeFormComponent","informal","validate","control","controlName","result","indexOf","value","formValidation","form","erros_integrantes","usuariosIntegrantes","grid","items","forEach","usuarioIntegrante","usuario_id","push","integrante","erro","undefined","titleEdit","translate","sigla","entidadeDao","get","cidadeDao","usuarioDao","planoTrabalhoDao","integranteDao","integranteAtribuicaoDao","notificacao","modalWidth","planoDataset","dataset","fh","FormBuilder","codigo","default","nome","path","cidade_id","uf","instituidora","atividades_arquivamento_automatico","distribuicao_forma_contagem_prazos","entrega_forma_contagem_prazos","notificacoes","etiquetas","unidade_pai_id","entidade_id","auth","unidade","etiqueta_texto","etiqueta_icone","etiqueta_cor","expediente24","expediente","usar_expediente_entidade","texto_complementar_plano","cdRef","formGestor","gestor_id","gestor_substituto_id","join","loadData","_this","_asyncToGenerator","formValue","Object","assign","Promise","all","unidadePai","loadSearch","unidade_pai","cidade","gestor","usuario","gestorSubstituto","gestor_substituto","entidade","patchValue","util","fillForm","controls","setValue","initializeData","addItemHandle","key","textHash","validateLookupItem","color","icon","saveData","_this2","_ref","resolve","reject","confirm","fill","salvarGestor","salvarGestorSubstituto","salvarGestorDelegado","gestor_delegado_id","gestor_delegado","apagarGestor","apagarGestorSubstituto","apagarGestorDelegado","vinculos","_items","dao","save","then","_ref2","saveIntegrante","delete","v","unidade_id","_x3","apply","arguments","error","editableForm","_x","_x2","is24hrs","onUsarExpedienteEntidadeChange","ɵɵdirectiveInject","selectors","viewQuery","UnidadeFormComponent_Query","rf","ctx","ɵɵlistener","UnidadeFormComponent_Template_editable_form_submit_0_listener","onSaveData","UnidadeFormComponent_Template_editable_form_cancel_0_listener","onCancel","ɵɵtemplate","UnidadeFormComponent_input_switch_5_Template","UnidadeFormComponent_Template_input_switch_change_37_listener","UnidadeFormComponent_tab_41_Template","isModal","title","ɵɵattribute","ɵɵpureFunction1","_c8","_c7","lookup","DIA_HORA_CORRIDOS_OU_UTEIS","HORAS_CORRIDAS_OU_UTEIS","SIMNAO","bind","ICONES","GridComponent","PageFrameBase","IntegranteService","ɵɵtext","ɵɵtextInterpolate","ctx_r1","row_r10","usuario_url_foto","usuario_nome","usuario_apelido","ctx_r5","ctx_r14","getColor","UNIDADE_INTEGRANTE_TIPO","atribuicao_r15","getIcon","getValue","UnidadeIntegranteComponent_ng_template_10_div_0_Template","row_r13","atribuicoes","ctx_r9","deleteItemHandle","tiposAtribuicao","noPersist","includes","adding","map","i","integranteService","atribuicao","ngOnInit","entity_id","metadata","isNoPersist","filter","ngAfterViewInit","loading","loadIntegrantes","resposta","integrantes","converterEmVinculo","ordenar","x","detectChanges","addIntegrante","_this3","novo","generateUuid","loadIntegrante","row","_this4","converterAtribuicoes","removeIntegrante","_this5","nomeServidor","nomeUnidade","dialog","msg","find","index","findIndex","permitidoApagar","_this6","n","alterandoGestor","novasAtribuicoes","novoIntegranteConsolidado","selectedItem","apelido","UnidadeIntegranteComponent_Query","UnidadeIntegranteComponent_span_2_Template","UnidadeIntegranteComponent_ng_template_5_Template","ɵɵtemplateRefExtractor","UnidadeIntegranteComponent_ng_template_7_Template","UnidadeIntegranteComponent_ng_template_10_Template","UnidadeIntegranteComponent_ng_template_12_Template","_r2","_r4","_r6","_r8","PageListBase","buttons","ɵɵtextInterpolate1","row_r9","UnidadeListGridComponent_ng_template_12_span_2_Template","row_r12","UnidadeListGridComponent_ng_template_19_badge_1_Template","data_inativacao","UnidadeListGridComponent","selectable","filterWhere","inativos","trim","replace","code","groupBy","field","label","hasPermissionTo","onClick","go","navigate","route","modalRefresh","addOption","OPTION_INFORMACOES","OPTION_EXCLUIR","dynamicOptions","inativo","submitting","modalRefreshId","modalClose","filterClear","UnidadeListGridComponent_Query","UnidadeListGridComponent_h3_0_Template","UnidadeListGridComponent_Template_grid_select_1_listener","$event","onSelect","UnidadeListGridComponent_toolbar_2_Template","UnidadeListGridComponent_ng_template_12_Template","UnidadeListGridComponent_ng_template_16_Template","UnidadeListGridComponent_ng_template_19_Template","add","orderBy","filterSubmit","filterCollapseChange","filterCollapsed","_r3","_r5","_r7","edit","options","rowsLimit","node_r1","UnidadeListMapComponent","data","carregaUnidades","minhaUnidade","lotacao","unidades","hierarquiaUnidades","caminhoAteARaiz","unidadeAtualId","unidadeAtual","unshift","filhos","unidadeId","type","expanded","styleClass","hint","children","temFilhos","some","expandeUnidade","event","carregaFilhas","node","unidadesFilhas","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","UnidadeListMapComponent_Template","UnidadeListMapComponent_Template_p_organizationChart_onNodeExpand_2_listener","UnidadeListMapComponent_ng_template_3_Template","TabsComponent","snapshot","modalRoute","UnidadeListComponent_tab_4_ng_template_1_Template","UnidadeListComponent","tabs","active","usuarioConfig","active_tab","onSelectTab","tab","viewInit","saveUsuarioConfig","UnidadeListComponent_Query","UnidadeListComponent_ng_template_2_Template","UnidadeListComponent_tab_4_Template","_r0","row_r8","unidade_origem","ɵɵtextInterpolate2","ctx_r3","_c3","ɵɵpureFunction0","_c2","ɵɵpureFunction2","_c4","_c6","_c5","row_r11","unidade_destino","ctx_r7","_c9","UnidadeMergeComponent","toolbarButtons","onMesmaSiglaClick","exclui_origem","origem_inativo","unidade_origem_id","unidade_destino_id","mesmaSigla","destinos","reduce","acumulador","valor","destinosIds","origens","origensIds","origem","destino","finally","addMerge","loadMerge","removeMerge","saveMerge","unidadeOrigem","selectedEntity","getById","unidadeDestino","onMerge","unificar","close","UnidadeMergeComponent_Query","UnidadeMergeComponent_Template_editable_form_submit_0_listener","UnidadeMergeComponent_Template_editable_form_cancel_0_listener","UnidadeMergeComponent_ng_template_7_Template","UnidadeMergeComponent_ng_template_9_Template","UnidadeMergeComponent_ng_template_12_Template","UnidadeMergeComponent_ng_template_14_Template","RouterModule","AuthGuard","ConfigResolver","routes","component","canActivate","config","runGuardsAndResolvers","modal","UnidadeRoutingModule","forChild","imports","i1","exports","CommonModule","ComponentsModule","OrganizationChartModule","ReactiveFormsModule","UteisModule","NgScrollbarModule","UnidadeModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
>>>>>>> 7dc47decd359da0d8fcf67d6dd8185f53d03d034
>>>>>>> develop
