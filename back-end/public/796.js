"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[796],{5796:(st,f,l)=>{l.r(f),l.d(f,{TipoAtividadeModule:()=>K});var d=l(6733),h=l(5579),r=l(1391),m=l(2314),v=l(8239),g=l(4040),T=l(2981),C=l(4368);class c extends C.X{constructor(a){super(),this.nome="",this.esforco=8,this.dias_planejado=0,this.etiquetas=[],this.checklist=[],this.comentario="",this.initialization(a)}}var Z=l(1184),t=l(755),A=l(2392),O=l(4508),b=l(4603),Q=l(6848),q=l(7819),x=l(5560);let u=(()=>{class o extends Z.F{constructor(i){super(i,c,T.Y),this.injector=i,this.validate=(n,e)=>{let s=null;return["nome"].indexOf(e)>=0&&!n.value?.length&&(s="Obrigat\xf3rio"),s},this.titleEdit=n=>"Editando "+this.lex.translate("Tipo de Atividade")+": "+(n?.nome||""),this.title=this.lex.translate("Tipo de Atividade"),this.form=this.fh.FormBuilder({nome:{default:""},esforco:{default:48},dias_planejado:{default:""},etiquetas:{default:[]},checklist:{default:[]},comentario:{default:""},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null},checklist_texto:{default:""}},this.cdRef,this.validate)}addItemHandleChecklist(){let i;const n=this.form.controls.checklist_texto.value,e=this.util.textHash(n);return n?.length&&this.util.validateLookupItem(this.form.controls.checklist.value,e)&&(i={key:e,value:this.form.controls.checklist_texto.value},this.form.controls.checklist_texto.setValue("")),i}addItemHandleEtiquetas(){let i;const n=this.form.controls.etiqueta_texto.value,e=this.util.textHash(n);return n?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,e)&&(i={key:e,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),i}loadData(i,n){var e=this;return(0,v.Z)(function*(){let s=Object.assign({},n.value);n.patchValue(e.util.fillForm(s,i))})()}initializeData(i){this.entity=new c,this.loadData(this.entity,i)}saveData(i){var n=this;return(0,v.Z)(function*(){let e=n.util.fill(new c,n.entity);return n.util.fillForm(e,n.form.value)})()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.zs3))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-tipo-atividade-form"]],viewQuery:function(n,e){if(1&n&&t.Gf(g.Q,5),2&n){let s;t.iGM(s=t.CRH())&&(e.editableForm=s.first)}},features:[t.qOj],decls:13,vars:18,consts:[["initialFocus","nome",3,"form","disabled","title","submit","cancel"],[1,"row"],["label","Nome","controlName","nome","required","",3,"size"],["title","Etiquetas/Check-list/Coment\xe1rio"],["label","Etiquetas","controlName","etiquetas",3,"size","addItemHandle"],["label","Texto","controlName","etiqueta_texto",3,"size"],["label","\xcdcone","icon","fas fa-sign-out-alt","controlName","etiqueta_icone","liveSearch","",3,"size","items"],["label","Cor","controlName","etiqueta_cor",3,"size"],["label","Checklists","controlName","checklist",3,"size","addItemHandle"],["controlName","checklist_texto",3,"size"],["label","Coment\xe1rios","controlName","comentario","labelInfo","Coment\xe1rio que ser\xe1 adicionado automaticamente",3,"size","rows"]],template:function(n,e){1&n&&(t.TgZ(0,"editable-form",0),t.NdJ("submit",function(){return e.onSaveData()})("cancel",function(){return e.onCancel()}),t.TgZ(1,"div",1),t._UZ(2,"input-text",2),t.qZA(),t._UZ(3,"separator",3),t.TgZ(4,"div",1)(5,"input-multiselect",4),t._UZ(6,"input-text",5)(7,"input-select",6)(8,"input-color",7),t.qZA(),t.TgZ(9,"input-multiselect",8),t._UZ(10,"input-text",9),t.qZA()(),t.TgZ(11,"div",1),t._UZ(12,"input-textarea",10),t.qZA()()),2&n&&(t.Q6J("form",e.form)("disabled",e.formDisabled)("title",e.isModal?"":e.title),t.xp6(2),t.Q6J("size",12),t.uIk("maxlength",250),t.xp6(3),t.Q6J("size",8)("addItemHandle",e.addItemHandleEtiquetas.bind(e)),t.xp6(1),t.Q6J("size",5),t.uIk("maxlength",250),t.xp6(1),t.Q6J("size",3)("items",e.lookup.ICONES),t.xp6(1),t.Q6J("size",4),t.xp6(1),t.Q6J("size",4)("addItemHandle",e.addItemHandleChecklist.bind(e)),t.xp6(1),t.Q6J("size",12),t.uIk("maxlength",250),t.xp6(2),t.Q6J("size",12)("rows",3))},dependencies:[g.Q,A.m,O.Q,b.p,Q.z,q.p,x.N]})}return o})();var _=l(3150),J=l(8509),N=l(7224),E=l(3351),I=l(7765),y=l(5512),z=l(2704),L=l(8252),M=l(5489);function F(o,a){1&o&&t._UZ(0,"toolbar")}function U(o,a){if(1&o&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&o){const i=t.oxw().row;t.xp6(1),t.Oqu(i.comentario)}}function D(o,a){if(1&o&&(t.TgZ(0,"span",23),t._uU(1),t.qZA(),t.YNc(2,U,2,1,"small",1)),2&o){const i=a.row;t.xp6(1),t.Oqu(i.nome),t.xp6(1),t.Q6J("ngIf",i.comentario)}}function Y(o,a){if(1&o&&t._UZ(0,"badge",26),2&o){const i=a.$implicit;t.Q6J("icon",i.icon)("label",i.value)("color",i.color)}}function k(o,a){if(1&o&&(t.TgZ(0,"div",24),t.YNc(1,Y,1,3,"badge",25),t.qZA()),2&o){const i=a.row;t.xp6(1),t.Q6J("ngForOf",i.etiquetas)}}function w(o,a){1&o&&t._UZ(0,"badge",28),2&o&&t.Q6J("label",a.$implicit.value)}function j(o,a){if(1&o&&(t.TgZ(0,"div",24),t.YNc(1,w,1,1,"badge",27),t.qZA()),2&o){const i=a.row;t.xp6(1),t.Q6J("ngForOf",i.checklist)}}function B(o,a){1&o&&t._uU(0),2&o&&t.Oqu(a.row.nome)}function H(o,a){1&o&&t._uU(0),2&o&&t.Oqu(a.row.esforco)}function V(o,a){1&o&&t._uU(0),2&o&&t.Oqu(a.row.dias_planejado)}function P(o,a){if(1&o&&t._uU(0),2&o){const i=a.row,n=t.oxw();t.Oqu(n.getReportEtiquetas(i))}}function W(o,a){if(1&o&&t._uU(0),2&o){const i=a.row,n=t.oxw();t.Oqu(n.getReportChecklist(i))}}function R(o,a){1&o&&t._uU(0),2&o&&t.Oqu(a.row.comentario_predefinido)}const S=[{path:"",component:(()=>{class o extends J.E{constructor(i){super(i,c,T.Y),this.injector=i,this.filterWhere=n=>{let e=n.value,s=[];return e.nome?.length&&s.push(["nome","like","%"+e.nome.trim().replace(" ","%")+"%"]),s},this.title=this.lex.translate("Tipos de Atividades"),this.code="MOD_TIPO_ATV",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.auth.hasPermissionTo("MOD_TIPO_ATV")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_ATV_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(i){i.controls.nome.setValue(""),super.filterClear(i)}getReportEtiquetas(i){let n="";return i.etiquetas.forEach(e=>{n+=e.value+";\n"}),n}getReportChecklist(i){let n="";return i.checklist.forEach(e=>{n+=e.value+";\n"}),n}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.zs3))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-tipo-atividade-list"]],viewQuery:function(n,e){if(1&n&&t.Gf(_.M,5),2&n){let s;t.iGM(s=t.CRH())&&(e.grid=s.first)}},features:[t.qOj],decls:36,vars:31,consts:[[3,"dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit","select"],[4,"ngIf"],[3,"deleted","form","where","submit","clear"],[1,"row"],["label","Nome","controlName","nome",3,"size","control"],["title","Nome",3,"template"],["columnNome",""],["title","Etiquetas",3,"template"],["columnEtiquetas",""],["title","Checklist",3,"template"],["columnChecklist",""],["type","options",3,"onEdit","options"],["reportNome",""],[3,"title","template"],["reportEsforco",""],["title","Dias planejamento",3,"template"],["reportDiasPlanejado",""],["reportEtiquetas",""],["title","Check-list",3,"template"],["reportChecklist",""],["title","Coment\xe1rio",3,"template"],["reportComentario",""],[3,"rows"],[1,"d-block"],[1,"one-per-line","text-break","w-100"],[3,"icon","label","color",4,"ngFor","ngForOf"],[3,"icon","label","color"],["color","light","icon","bi bi-check2-square",3,"label",4,"ngFor","ngForOf"],["color","light","icon","bi bi-check2-square",3,"label"]],template:function(n,e){if(1&n&&(t.TgZ(0,"grid",0),t.NdJ("select",function(p){return e.onSelect(p)}),t.YNc(1,F,1,0,"toolbar",1),t.TgZ(2,"filter",2)(3,"div",3),t._UZ(4,"input-text",4),t.qZA()(),t.TgZ(5,"columns")(6,"column",5),t.YNc(7,D,3,2,"ng-template",null,6,t.W1O),t.qZA(),t.TgZ(9,"column",7),t.YNc(10,k,2,1,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(12,"column",9),t.YNc(13,j,2,1,"ng-template",null,10,t.W1O),t.qZA(),t._UZ(15,"column",11),t.qZA(),t.TgZ(16,"report")(17,"column",5),t.YNc(18,B,1,1,"ng-template",null,12,t.W1O),t.qZA(),t.TgZ(20,"column",13),t.YNc(21,H,1,1,"ng-template",null,14,t.W1O),t.qZA(),t.TgZ(23,"column",15),t.YNc(24,V,1,1,"ng-template",null,16,t.W1O),t.qZA(),t.TgZ(26,"column",7),t.YNc(27,P,1,1,"ng-template",null,17,t.W1O),t.qZA(),t.TgZ(29,"column",18),t.YNc(30,W,1,1,"ng-template",null,19,t.W1O),t.qZA(),t.TgZ(32,"column",20),t.YNc(33,R,1,1,"ng-template",null,21,t.W1O),t.qZA()(),t._UZ(35,"pagination",22),t.qZA()),2&n){const s=t.MAs(8),p=t.MAs(11),tt=t.MAs(14),et=t.MAs(19),ot=t.MAs(22),it=t.MAs(25),nt=t.MAs(28),lt=t.MAs(31),at=t.MAs(34);t.Q6J("dao",e.dao)("add",e.add)("title",e.isModal?"":e.title)("orderBy",e.orderBy)("groupBy",e.groupBy)("join",e.join)("selectable",e.selectable)("hasAdd",e.auth.hasPermissionTo("MOD_TIPO_ATV_INCL"))("hasEdit",e.auth.hasPermissionTo("MOD_TIPO_ATV_EDT")),t.xp6(1),t.Q6J("ngIf",!e.selectable),t.xp6(1),t.Q6J("deleted",e.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",e.filter)("where",e.filterWhere)("submit",e.filterSubmit.bind(e))("clear",e.filterClear.bind(e)),t.xp6(2),t.Q6J("size",12)("control",e.filter.controls.nome),t.uIk("maxlength",250),t.xp6(2),t.Q6J("template",s),t.xp6(3),t.Q6J("template",p),t.xp6(3),t.Q6J("template",tt),t.xp6(3),t.Q6J("onEdit",e.edit)("options",e.options),t.xp6(2),t.Q6J("template",et),t.xp6(3),t.Q6J("title",e.lex.translate("Esfor\xe7o"))("template",ot),t.xp6(3),t.Q6J("template",it),t.xp6(3),t.Q6J("template",nt),t.xp6(3),t.Q6J("template",lt),t.xp6(3),t.Q6J("template",at),t.xp6(3),t.Q6J("rows",e.rowsLimit)}},dependencies:[d.sg,d.O5,_.M,N.a,E.b,I.z,y.n,z.Q,A.m,L.Y,M.F]})}return o})(),canActivate:[r.a],resolve:{config:m.o},data:{title:"Atividades"}},{path:"new",component:u,canActivate:[r.a],resolve:{config:m.o},data:{title:"Inclus\xe3o de Atividade",modal:!0}},{path:":id/edit",component:u,canActivate:[r.a],resolve:{config:m.o},data:{title:"Edi\xe7\xe3o de Atividade",modal:!0}},{path:":id/consult",component:u,canActivate:[r.a],resolve:{config:m.o},data:{title:"Consulta a Atividade",modal:!0}}];let G=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(S),h.Bz]})}return o})();var X=l(2662),$=l(2133);let K=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[d.ez,X.K,$.UX,G]})}return o})()}}]);