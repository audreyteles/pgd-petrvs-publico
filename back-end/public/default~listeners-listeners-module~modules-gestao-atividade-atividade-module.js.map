{"version":3,"sources":["./src/app/models/atividade.model.ts","./src/app/modules/gestao/atividade/atividade-list-base.ts","./src/app/modules/gestao/atividade/atividade-list-grid/atividade-list-grid.component.ts","./src/app/modules/gestao/atividade/atividade-list-grid/atividade-list-grid.component.html","./src/app/models/atividade-tarefa.model.ts"],"names":[],"mappings":"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","file":"default~listeners-listeners-module~modules-gestao-atividade-atividade-module.js","sourcesContent":["import { LookupItem } from '../services/lookup.service';\r\nimport { TipoAtividade } from './tipo-atividade.model';\r\nimport { Base } from './base.model';\r\nimport { Comentario, HasComentarios } from './comentario';\r\nimport { AtividadeTarefa } from './atividade-tarefa.model';\r\nimport { PlanoTrabalhoEntrega } from './plano-trabalho-entrega.model';\r\nimport { PlanoTrabalho } from './plano-trabalho.model';\r\nimport { TipoProcesso } from './tipo-processo.model';\r\nimport { Unidade } from './unidade.model';\r\nimport { Usuario } from './usuario.model';\r\nimport { BadgeButton } from '../components/badge/badge.component';\r\nimport { Documento } from './documento.model';\r\nimport { AtividadePausa } from './atividade-pausa.model';\r\n\r\nexport type AtividadeStatus = \"CONCLUIDO\" | \"INICIADO\" | \"LANCADO\";\r\n\r\nexport type AtividadeMetadados = {\r\n    atrasado: boolean,\r\n    tempo_despendido: number,\r\n    tempo_atraso: number,\r\n    suspenso: boolean,\r\n    iniciado: boolean,\r\n    concluido: boolean,\r\n    avaliado: boolean,\r\n    arquivado: boolean,\r\n    produtividade: number,\r\n    status: string,\r\n    extra?: any\r\n    _status?: BadgeButton[],\r\n}\r\n\r\nexport type AtividadeChecklist = {\r\n    id: string,\r\n    texto: string,\r\n    checked: boolean\r\n}\r\n\r\nexport class Atividade extends Base implements HasComentarios {\r\n    public plano_trabalho?: PlanoTrabalho;\r\n    public plano_trabalho_entrega?: PlanoTrabalhoEntrega;\r\n    public tipo_atividade?: TipoAtividade;\r\n    public demandante?: Usuario;\r\n    public usuario?: Usuario;\r\n    public unidade?: Unidade;\r\n    public documento_requisicao?: Documento;\r\n    public documento_entrega?: Documento;\r\n\r\n    public numero: number = 0; /* Numero da atividade */\r\n    public descricao: string | null = null; /* Assunto da atividade */\r\n    public data_distribuicao: Date = new Date(); /* Data de cadastro da atividade */\r\n    public tempo_planejado: number = 0.0; /* Diferença entre data_distribuicao e prazo_entrega em horas (úteis ou corridas, configurada na unidade) */\r\n    public carga_horaria: number = 0.0; /* Carga horária diária (vinda do plano de trabalho) */\r\n    public prazo_entrega: Date = new Date(); /* Data estipulada para entrega da atividade */\r\n    public data_inicio: Date | null = null; /* Data em que o usuário iniciou a atividade */\r\n    public data_entrega: Date | null = null; /* Data da entrega */\r\n    public esforco: number = 0.0; /* Tempo calculado a partir da atividade e utilizando o fator_complexidade */\r\n    public tempo_despendido: number | null = null; /* Calculado no fim da atividade, sendo o tempo líquido (considerando pausas) */\r\n    public data_arquivamento: Date | null = null; /* Data de arquivamento da atividade */\r\n    public etiquetas: LookupItem[] = []; /* Etiquetas */\r\n    public checklist: AtividadeChecklist[] = []; /* Checklist */\r\n    public prioridade: number | null = null; /* Nível de prioridade */\r\n    public progresso: number = 0; /* Progresso a execução da atividade */\r\n    public metadados: AtividadeMetadados | undefined = undefined; /* Campo virtual contendo informações calculadas pelo servidor */\r\n    public comentarios: Comentario[] = []; /* Comentarios da atividade */\r\n    public pausas: AtividadePausa[] = []; /* Pausas da atividade */\r\n    public tarefas: AtividadeTarefa[] = []; /* Tarefas da atividade */\r\n\r\n    public plano_trabalho_id: string | null = null;\r\n    public plano_trabalho_entrega_id: string | null = null;\r\n    public tipo_atividade_id: string | null = null;\r\n    public demandante_id: string = \"\";\r\n    public usuario_id: string | null = null;\r\n    public unidade_id: string = \"\";\r\n    public documento_requisicao_id: string | null = null;\r\n    public documento_entrega_id: string | null = null;\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","import { Injector, TemplateRef } from '@angular/core';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { Atividade, AtividadeChecklist } from 'src/app/models/atividade.model';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { CalendarService, Efemerides, FeriadoList } from 'src/app/services/calendar.service';\r\nimport { Afastamento } from 'src/app/models/afastamento.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { TipoProcessoDaoService } from 'src/app/dao/tipo-processo-dao.service';\r\nimport { ComentarioService } from 'src/app/services/comentario.service';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\nimport { TipoAtividadeDaoService } from 'src/app/dao/tipo-atividade-dao.service';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\n\r\nexport type ExtraAtividade = {\r\n  planos_trabalho: { [plano_id: string]: PlanoTrabalho },\r\n  afastamentos: { [usuario_id: string]: Afastamento[] },\r\n  feriados?: { [unidade_id: string]: FeriadoList }\r\n}\r\n\r\nexport abstract class AtividadeListBase extends PageListBase<Atividade, AtividadeDaoService> {\r\n  public calendarEfemerides?: TemplateRef<any>;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public tipoAtividadeDao: TipoAtividadeDaoService;\r\n  public tipoProcessoDao: TipoProcessoDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public calendar: CalendarService;\r\n  public comentario: ComentarioService;\r\n  public extra: ExtraAtividade;\r\n  public etiquetas: LookupItem[] = [];\r\n  public checklist?: AtividadeChecklist[];\r\n  public efemerides?: Efemerides;\r\n  public addComentarioButton: ToolbarButton = {\r\n    icon: \"bi bi-plus-circle\",\r\n    hint: \"Incluir comentário\"\r\n  }\r\n  public DATAS_FILTRO: LookupItem[] = [\r\n    { key: \"DISTRIBUICAO\", value: \"Distribuição\", icon: \"bi bi-file-earmark-plus\", color: \"badge rounded-pill bg-warning text-dark\" },\r\n    { key: \"PRAZO\", value: \"Prazo\", icon: \"bi bi-calendar-check\", color: \"badge rounded-pill bg-info text-dark\" },\r\n    { key: \"CONCLUSAO\", value: \"Conclusão\", icon: \"bi bi-check-circle\", color: \"badge rounded-pill bg-info text-dark\" }\r\n    //{ key: \"AVALIACAO\", value: \"Avaliação\", icon: \"bi bi-star-half\", color: \"badge rounded-pill bg-success\" }\r\n  ];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Atividade, AtividadeDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.tipoAtividadeDao = injector.get<TipoAtividadeDaoService>(TipoAtividadeDaoService);\r\n    this.tipoProcessoDao = injector.get<TipoProcessoDaoService>(TipoProcessoDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.comentario = injector.get<ComentarioService>(ComentarioService);\r\n    this.join = [\"tipo_atividade\", \"demandante\", \"pausas\", \"usuario\", \"unidade\", \"comentarios.usuario\", \"tarefas.tarefa\", \"tarefas.comentarios.usuario\"];\r\n    /* Inicializações */\r\n    this.extra = { planos_trabalho: {}, afastamentos: {} };\r\n  }\r\n\r\n  /*public orderComentarios(comentarios?: Comentario[]) {\r\n    let ordered = comentarios?.sort((a: Comentario, b: Comentario) => {\r\n      if(a.path == b.path) { /* Situação 1: Paths iguais \r\n        return a.data_hora.getTime() < b.data_hora.getTime() ? -1 : 1;\r\n      } else { /* Situação 2: Paths diferentes, deverá ser encontrado o menor nível comum entre eles para poder comparar \r\n        let pathA = a.path.split(\"/\");\r\n        let pathB = b.path.split(\"/\");\r\n        let common = this.util.commonBegin(pathA, pathB);\r\n        let dataHoraA = (comentarios.find(x => x.id == (pathA[common.length] || a.id)) || a).data_hora.getTime();\r\n        let dataHoraB = (comentarios.find(x => x.id == (pathB[common.length] || b.id)) || b).data_hora.getTime();\r\n        return dataHoraA == dataHoraB ? 0 : (dataHoraA < dataHoraB ? -1 : 1);\r\n      }\r\n    }) || [];\r\n    return ordered;\r\n  }*/\r\n\r\n  public onGridLoad(rows?: any[]) {\r\n    /* Ordena os comentários */\r\n    rows?.forEach((atividade: Atividade) => {\r\n      atividade.comentarios = this.comentario.orderComentarios(atividade.comentarios);\r\n    });\r\n    /* Recebe informações extra da query para auxiliar em cálculos e melhorar performace da consulta */\r\n    const extra = (this.grid?.query || this.query!).extra;\r\n    if (extra) {\r\n      //this.extra.avaliadores = Object.assign(this.extra.avaliadores, extra.avaliadores || {});\r\n      this.extra.planos_trabalho = Object.assign(this.extra.planos_trabalho, extra.planos || {});\r\n      for (let [key, value] of Object.entries(extra.afastamentos || {})) {\r\n        this.extra.afastamentos[key] = (value as Array<Afastamento>).reduce((a, v) => {\r\n          if (!a.find(x => x.id == v.id)) a.push(v);\r\n          return a;\r\n        }, this.extra.afastamentos[key] || []);\r\n      }\r\n      Object.entries(extra.feriados || {}).forEach(([key, value]) => {\r\n        if (!this.calendar.feriadosCadastrados[key]) this.calendar.feriadosCadastrados[key] = value as FeriadoList;\r\n      });\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public onAtribuidasParaMimChange(event: Event) {\r\n    if (this.filter!.controls.atribuidas_para_mim.value) {\r\n      this.filter!.controls.usuario_id.setValue(this.auth.usuario!.id);\r\n    } else {\r\n      this.filter!.controls.usuario_id.setValue(undefined);\r\n    }\r\n  }\r\n\r\n  public onSomenteUnidadeAtualChange(event: Event) {\r\n    if (this.filter!.controls.somente_unidade_atual.value) {\r\n      this.filter!.controls.unidade_id.setValue(this.auth.unidade!.id);\r\n    } else {\r\n      this.filter!.controls.unidade_id.setValue(undefined);\r\n    }\r\n  }\r\n\r\n  public onDespendidoClick(row: Atividade) {\r\n    if (row.metadados && !row.metadados.concluido) {\r\n      const cargaHoraria = this.extra?.planos_trabalho[row.plano_trabalho_id!]?.carga_horaria || 0;\r\n      const afastamentos = this.extra?.afastamentos[row.usuario_id!] || [];\r\n      this.efemerides = this.calendar.calculaDataTempoUnidade(row.data_inicio!, this.auth.hora, cargaHoraria, row.unidade!, \"ENTREGA\", row.pausas, afastamentos);\r\n      this.dialog.template({ title: \"Cálculos do tempo despendido\" }, this.calendarEfemerides!, []);\r\n    }\r\n  }\r\n\r\n  public temposAtividade(row: Atividade): BadgeButton[] {\r\n    /* Atualiza somente a cada mudança de minuto da unidade atual */\r\n    if (row.metadados && row.metadados.extra?.lastUpdate != this.auth.unidadeHora) {\r\n      let planoTrabalho = this.extra?.planos_trabalho[row.plano_trabalho_id!];\r\n      let tempos: BadgeButton[] = [\r\n        { color: \"light\", hint: this.lex.noun(\"Data de distribuição\"), icon: \"bi bi-file-earmark-plus\", label: this.dao!.getDateTimeFormatted(row.data_distribuicao) },\r\n        { color: \"light\", hint: this.lex.noun(\"Prazo de entrega\"), icon: \"bi bi-calendar-check\", label: this.dao!.getDateTimeFormatted(row.prazo_entrega) }\r\n      ];\r\n      if (planoTrabalho?.tipo_modalidade?.atividade_esforco) tempos.push({ color: \"light\", hint: this.lex.noun(\"Esforço\"), icon: \"bi bi-stopwatch\", label: (row.esforco ? this.util.decimalToTimerFormated(row.esforco, true) + \" \" + this.lex.noun(\"esforço\") : \"Sem \" + this.lex.noun(\"esforço\"))});\r\n      if (row.metadados.concluido) tempos.push({ color: \"light\", hint: \"Data de entrega realizada\", icon: \"bi bi-check-circle\", label: this.dao!.getDateTimeFormatted(row.data_entrega) });\r\n      if (row.metadados.iniciado && !!planoTrabalho?.tipo_modalidade?.atividade_tempo_despendido) {\r\n        const cargaHoraria = planoTrabalho?.carga_horaria || 0;\r\n        const afastamentos = this.extra?.afastamentos[row.usuario_id!] || [];\r\n        const despendido = row.metadados.concluido ? (row.tempo_despendido || 0) : this.calendar.horasUteis(row.data_inicio!, this.auth.hora, cargaHoraria, row.unidade!, \"ENTREGA\", row.pausas, afastamentos);\r\n        tempos.push({ color: (despendido > row.esforco ? \"warning\" : \"light\"), hint: \"Tempo despendido\", icon: \"bi bi-hourglass-split\", label: this.util.decimalToTimerFormated(despendido, true) + \" despendido\", click: !row.metadados.concluido ? this.onDespendidoClick.bind(this) : undefined, data: row });\r\n      }\r\n      if (!row.metadados.concluido && row.prazo_entrega.getTime() < this.auth.hora.getTime()) {\r\n        const atrasado = this.calendar.horasAtraso(row.prazo_entrega, row.unidade!);\r\n        tempos.push({ color: \"danger\", hint: \"Tempo de atraso\", icon: \"bi bi-alarm\", label: this.util.decimalToTimerFormated(atrasado, true) + \" atrasado\" });\r\n      }\r\n      row.metadados.extra = row.metadados.extra || {};\r\n      row.metadados.extra.lastUpdate = this.auth.unidadeHora;\r\n      row.metadados.extra.tempos = tempos;\r\n    }\r\n    return row.metadados?.extra?.tempos || [];\r\n  }\r\n\r\n  public desarquivar(atividade: Atividade) {\r\n    this.dao!.arquivar(atividade.id, false).then(() => {\r\n      this.grid!.query!.refreshId(atividade.id);\r\n    }).catch(error => this.dialog.alert(\"Erro\", \"Erro ao cancelar inicio: \" + error?.message ? error?.message : error));\r\n  }\r\n\r\n  public arquivar(atividade: Atividade) {\r\n    this.dialog.confirm(\"Arquivar?\", \"Deseja realmente arquivar a atividade?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.arquivar(atividade.id, true).then(() => {\r\n          if (this.filter?.controls.arquivadas?.value) {\r\n            this.grid!.query!.refreshId(atividade.id);\r\n          } else {\r\n            (this.grid?.query || this.query!).removeId(atividade.id);\r\n          }\r\n        }).catch(error => this.dialog.alert(\"Erro\", \"Erro ao cancelar inicio: \" + error?.message ? error?.message : error));\r\n      }\r\n    });\r\n  }\r\n\r\n  public dynamicOptions(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let atividade: Atividade = row as Atividade;\r\n    //const isAvaliador = isGestor || (this.extra.avaliadores[atividade.unidade_id] || []).includes(this.auth.usuario?.id || \"\"); //|| atividade.unidade\r\n    const isGestor = this.auth.usuario?.id == atividade.unidade?.gestor?.id || this.auth.usuario?.id == atividade.unidade?.gestor_substituto?.id;\r\n    const isDemandante = this.auth.usuario?.id == atividade.demandante_id;\r\n    const isResponsavel = this.auth.usuario?.id == atividade.usuario_id;\r\n    const BOTAO_INFORMACOES = { label: \"Informações\", icon: \"bi bi-info-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'consult'] }, { modal: true }) };\r\n    const BOTAO_COMENTARIOS = { label: \"Comentários\", icon: \"bi bi-chat-left-quote\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['uteis', 'comentarios', 'ATIVIDADE', atividade.id, 'new'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_CLONAR = { label: \"Clonar\", icon: \"bi bi-stickies\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'clonar'] }, this.modalRefresh()) };\r\n    const BOTAO_ALTERAR = { label: \"Alterar atividade\", icon: \"bi bi-pencil-square\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'edit'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_EXCLUIR = { label: \"Excluir atividade\", icon: \"bi bi-trash\", onClick: this.delete.bind(this) };\r\n    const BOTAO_PRORROGAR_PRAZO = { label: \"Prorrogar prazo\", icon: \"bi bi-skip-end-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'prorrogar'] }, this.modalRefreshId(atividade))};\r\n    const BOTAO_INICIAR = { label: \"Iniciar\", id: \"INICIADO\", icon: \"bi bi-play-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'iniciar'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_CANCELAR_INICIO = { label: \"Cancelar inicio\", id: \"NAOINICIADO\", icon: \"bi bi-backspace\", onClick: this.cancelarInicio.bind(this) };\r\n    const BOTAO_ALTERAR_INICIO = { label: \"Alterar inicio\", icon: \"bi bi-play-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'iniciar'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_SUSPENDER = { label: \"Suspender\", id: \"PAUSADO\", icon: \"bi bi-pause-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'pausar'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_REINICIAR = { label: \"Reiniciar\", id: \"INICIADO\", icon: \"bi bi-play-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'pausar'], params: { reiniciar: true } }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_CONCLUIR = { label: \"Concluir\", id: \"CONCLUIDO\", icon: \"bi bi-check-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_ALTERAR_CONCLUSAO = { label: \"Alterar conclusão\", icon: \"bi bi-check-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_CANCELAR_CONCLUSAO = { label: \"Cancelar conclusão\", id: \"INICIADO\", icon: \"bi bi-backspace\", onClick: this.cancelarConclusao.bind(this) };\r\n    //const BOTAO_AVALIAR = { label: \"Avaliar\", id: \"AVALIADO\", icon: \"bi bi-star-half\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'avaliar'] }, this.modalRefreshId(atividade)) };\r\n    //const BOTAO_ALTERAR_AVALIACAO = { label: \"Alterar avaliação\", hint: \"Alterar avaliação\", icon: \"bi bi-check-all\", color: \"btn-outline-danger\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'avaliar'] }, this.modalRefreshId(atividade)) };\r\n    //const BOTAO_CANCELAR_AVALIACAO = { label: \"Cancelar avaliação\", id: \"CONCLUIDO\", icon: \"bi bi-backspace\", onClick: this.cancelarAvaliacao.bind(this) };\r\n    const BOTAO_ARQUIVAR = { label: \"Arquivar\", icon: \"bi bi-inboxes\", onClick: this.arquivar.bind(this) };\r\n    const BOTAO_DESARQUIVAR = { label: \"Desarquivar\", icon: \"bi bi-reply\", onClick: this.desarquivar.bind(this) };\r\n\r\n    result.push(BOTAO_INFORMACOES);\r\n    if (isResponsavel || isGestor || isDemandante) result.push(BOTAO_COMENTARIOS);\r\n    result.push(BOTAO_CLONAR);\r\n    if (atividade.metadados?.arquivado) { /* Arquivado*/\r\n      if (isGestor || isResponsavel) result.push(BOTAO_DESARQUIVAR);\r\n    } else if (!atividade.metadados?.iniciado) {\r\n      if (isResponsavel || (atividade.usuario_id == null) || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) { /* Não iniciado */\r\n        result.push(BOTAO_INICIAR);\r\n      }\r\n      if (isGestor || isDemandante || this.auth.hasPermissionTo('MOD_DMD_USERS_ALT')) {\r\n        result.push(BOTAO_ALTERAR);\r\n      }\r\n      if (isGestor || isDemandante || this.auth.hasPermissionTo('MOD_DMD_USERS_EXCL') || this.auth.hasPermissionTo('MOD_DMD_NI_EXCL')) {\r\n        if (result.length) result.push({ divider: true });\r\n        result.push(BOTAO_EXCLUIR);\r\n      }\r\n    } else if (atividade.metadados?.concluido) { /* Concluído -> Gestor ou substituto pode avaliar */\r\n      if (isGestor || isResponsavel) result.push(BOTAO_ARQUIVAR);\r\n      if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_ALT_CONCL')) {\r\n        result.push(BOTAO_ALTERAR_CONCLUSAO);\r\n      }\r\n      if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CANC_CONCL') ) {\r\n        if (result.length) result.push({ divider: true });\r\n        result.push(BOTAO_CANCELAR_CONCLUSAO);\r\n      }\r\n    } else if (atividade.metadados?.iniciado) { /* Iniciado */\r\n      if (atividade.metadados?.suspenso) {\r\n        if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) { /* Iniciada e Suspensa */\r\n          result.push(BOTAO_REINICIAR);\r\n        }\r\n      } else { /* Iniciada e não Suspensa */\r\n        if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CONCL')) result.push(BOTAO_CONCLUIR);\r\n        if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_PAUSA')) result.push(BOTAO_SUSPENDER);\r\n        if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CANC_INICIAR')) result.push(BOTAO_CANCELAR_INICIO);\r\n        if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) result.push(BOTAO_ALTERAR_INICIO);\r\n      }\r\n      if (isGestor || isDemandante || this.auth.hasPermissionTo('MOD_DMD_USERS_PPRZO')) {\r\n        result.push(BOTAO_PRORROGAR_PRAZO);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public cancelarInicio(atividade: Atividade) {\r\n    const self = this;\r\n    this.dialog.confirm(\"Cancelar inicio ?\", \"Deseja realmente cancelar a inicialização?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.cancelarInicio(atividade.id).then(function () {\r\n          (self.grid?.query || self.query!).refreshId(atividade.id);\r\n          self.dialog.alert(\"Sucesso\", \"Cancelado com sucesso!\");\r\n        }).catch(function (error) {\r\n          self.dialog.alert(\"Erro\", \"Erro ao cancelar inicio: \" + error?.message ? error?.message : error);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  public cancelarConclusao(atividade: Atividade) {\r\n    const self = this;\r\n    this.dialog.confirm(\"Cancelar conclusão ?\", \"Deseja realmente cancelar a conclusão?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.cancelarConclusao(atividade.id).then(function () {\r\n          (self.grid?.query || self.query!).refreshId(atividade.id);\r\n          self.dialog.alert(\"Sucesso\", \"Cancelado com sucesso!\");\r\n        }).catch(function (error) {\r\n          self.dialog.alert(\"Erro\", \"Erro ao cancelar conclusão: \" + error?.message ? error?.message : error);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /*public cancelarAvaliacao(atividade: Atividade) {\r\n    const self = this;\r\n    this.dialog.confirm(\"Cancelar avaliacao ?\", \"Deseja realmente cancelar a avaliacao?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.cancelarAvaliacao(atividade.id).then(function () {\r\n          (self.grid?.query || self.query!).refreshId(atividade.id);\r\n          self.dialog.alert(\"Sucesso\", \"Cancelado com sucesso!\");\r\n        }).catch(function (error) {\r\n          self.dialog.alert(\"Erro\", \"Erro ao cancelar avaliacao: \" + error?.message ? error?.message : error);\r\n        });\r\n      }\r\n    });\r\n  }*/\r\n\r\n  public dynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let atividade: Atividade = row as Atividade;\r\n    const isGestor = this.auth.usuario?.id == atividade.unidade?.gestor?.id || this.auth.usuario?.id == atividade.unidade?.gestor_substituto?.id;\r\n    //const isAvaliador = isGestor || (this.extra.avaliadores[atividade.unidade_id] || []).includes(this.auth.usuario?.id || \"\"); //|| atividade.unidade\r\n    //const isDemandante = this.auth.usuario?.id == atividade.demandante_id;\r\n    const isResponsavel = this.auth.usuario?.id == atividade.usuario_id;\r\n    const BOTAO_ALTERAR_AVALIACAO = { hint: \"Alterar avaliação\", icon: \"bi bi-check-all\", color: \"btn-outline-danger\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'avaliar'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_INFORMACOES = { label: \"Informações\", icon: \"bi bi-info-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'consult'] }, { modal: true }) };\r\n    const BOTAO_INICIAR = { hint: \"Iniciar\", icon: \"bi bi-play-circle\", color: \"btn-outline-secondary\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'iniciar'] }, this.modalRefreshId(atividade)) };\r\n    //const BOTAO_AVALIAR = { hint: \"Avaliar\", icon: \"bi bi-star-half\", color: \"btn-outline-success\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'avaliar'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_REINICIAR = { hint: \"Reiniciar\", icon: \"bi bi-play-circle\", color: \"btn-outline-secondary\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'pausar'], params: { reiniciar: true } }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_CONCLUIR = { hint: \"Concluir\", icon: \"bi bi-check\", color: \"btn-outline-success\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(atividade)) };\r\n    const BOTAO_ARQUIVAR = { hint: \"Arquivar\", icon: \"bi bi-inboxes\", onClick: this.arquivar.bind(this) };\r\n    const BOTAO_DESARQUIVAR = { hint: \"Desarquivar\", icon: \"bi bi-reply\", onClick: this.desarquivar.bind(this) };\r\n    const BOTAO_ALTERAR_CONCLUSAO = { hint: \"Alterar conclusão\", icon: \"bi bi-check-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(atividade)) };\r\n\r\n    /*if (atividade.metadados?.avaliado) { /* Arquivado *\r\n      if (isAvaliador || this.auth.hasPermissionTo('MOD_DMD_USERS_AVAL')) { /* Usuário logado é gestor da Unidade ou substituto*\r\n        result.push(BOTAO_ALTERAR_AVALIACAO);\r\n      } else if (atividade.metadados?.arquivado && (isGestor || isResponsavel)) { //Somente se gestor ou com capacidade para essa operação\r\n        result.push(BOTAO_DESARQUIVAR);\r\n      }\r\n    } else*/ \r\n    if (!atividade.metadados?.iniciado) { /* Não iniciado */\r\n      if (isResponsavel || (atividade.usuario_id == null) || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) { /* Usuário da atividade é o mesmo logado */\r\n        result.push(BOTAO_INICIAR);\r\n      }\r\n    } else if (atividade.metadados?.concluido) { /* Concluído */\r\n      /*if (isAvaliador || this.auth.hasPermissionTo('MOD_DMD_USERS_AVAL')) { /* Usuário logado é gestor da Unidade ou substituto * /\r\n          result.push(BOTAO_AVALIAR);\r\n      }*/\r\n      if (isGestor || isResponsavel) {\r\n        result.push(atividade.metadados?.arquivado ? BOTAO_DESARQUIVAR : BOTAO_ARQUIVAR);\r\n      } else if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_ALT_CONCL')) {\r\n        result.push(BOTAO_ALTERAR_CONCLUSAO);\r\n      }\r\n    } else if (atividade.metadados?.avaliado) { /* Avaliado */\r\n      if (isGestor) { /* Usuário logado é gestor da Unidade ou substituto */\r\n        result.push(BOTAO_ALTERAR_AVALIACAO);\r\n      }\r\n    } else if (atividade.metadados?.iniciado) { /* Iniciado */\r\n      if (atividade.metadados?.suspenso && isResponsavel) { /* Iniciada e Suspensa */\r\n        result.push(BOTAO_REINICIAR);\r\n      } else if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CONCL')) { /* Iniciada e não Suspensa */\r\n        result.push(BOTAO_CONCLUIR);\r\n      }\r\n    }\r\n    if(!result.length) result.push(BOTAO_INFORMACOES);\r\n    return result;\r\n  }\r\n\r\n  public getStatus(row: any): BadgeButton[] {\r\n    const atividade: Atividade = row as Atividade;\r\n    const status = this.lookup.ATIVIDADE_STATUS.find(x => x.key == atividade.metadados?.status) || { key: \"DESCONHECIDO\", value: \"Desconhecido\", icon: \"bi bi-question-circle\", color: \"light\" };\r\n    let result: BadgeButton[] = [{ data: {status: status.key, filter: true}, label: status.value, icon: status.icon!, color: status.color! }];\r\n    if (atividade.metadados?.atrasado) result.push({ data: {status: \"ATRASADO\", filter: false}, label: \"Atrasado\", icon: \"bi bi-alarm\", class: \"badge rounded-pill bg-danger\" });\r\n    if (atividade.metadados?.suspenso) result.push({ data: {status: \"SUSPENSO\", filter: false}, label: \"Suspenso\", icon: \"bi bi-pause-circle\", class: \"badge rounded-pill bg-danger\" });\r\n    if (atividade.metadados?.arquivado) result.push({ data: {status: \"ARQUIVADO\", filter: false}, label: \"Arquivado\", icon: \"bi bi-inboxes\", class: \"badge rounded-pill bg-danger\" });\r\n    if (atividade.metadados && JSON.stringify(atividade.metadados._status) != JSON.stringify(result)) atividade.metadados._status = result;\r\n    return atividade.metadados?._status || result;\r\n  }\r\n\r\n  /*public getEtiquetaStyle(etiqueta: any) {\r\n    const bgColor = etiqueta.color || \"#000000\";\r\n    const txtColor = this.util.contrastColor(bgColor);\r\n    return `background-color: ${bgColor}; color: ${txtColor};`;\r\n  }*/\r\n\r\n  public onEtiquetaConfigClick() {\r\n    this.go.navigate({ route: [\"configuracoes\", \"preferencia\", \"usuario\", this.auth.usuario!.id], params: { etiquetas: true } }, {\r\n      modal: true, modalClose: (modalResult) => {\r\n        this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n        this.cdRef.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  public comentarioClick(element: HTMLSpanElement) {\r\n    const value = element.getAttribute(\"data-expanded\");\r\n    element.setAttribute(\"data-expanded\", value == \"true\" ? \"false\" : \"true\");\r\n  }\r\n\r\n  public addComentarioClick(row: any) {\r\n    this.go.navigate({ route: ['gestao', 'atividade', row.id, 'comentar'] }, { modal: true, modalClose: modalResult => { if (modalResult) (this.grid?.query || this.query!).refreshId(row.id); } });\r\n  }\r\n\r\n}\r\n\r\n","import { Component, ElementRef, Injector, Input, TemplateRef, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { ActivatedRouteSnapshot } from '@angular/router';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { FullRoute, RouteMetadata } from 'src/app/services/navigate.service';\r\nimport { AtividadeListBase } from '../atividade-list-base';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\n\r\n@Component({\r\n  selector: 'atividade-list-grid',\r\n  templateUrl: './atividade-list-grid.component.html',\r\n  styleUrls: ['./atividade-list-grid.component.scss']\r\n})\r\nexport class AtividadeListGridComponent extends AtividadeListBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('calendarEfemerides', { static: false }) public calendarEfemerides?: TemplateRef<any>;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('etiqueta', { static: false }) public etiqueta?: InputSelectComponent;\r\n  @Input() snapshot?: ActivatedRouteSnapshot;\r\n  @Input() fixedFilter?: any[];\r\n\r\n  public static selectRoute?: FullRoute = { route: [\"gestao\", \"atividade\", \"grid\"] };\r\n  public formEdit: FormGroup;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    /* Inicializações */\r\n    this.title = this.lex.noun(\"Atividade\", true);\r\n    this.code = \"MOD_DMD\";\r\n    this.modalWidth = 1100;\r\n    this.filter = this.fh.FormBuilder({\r\n      agrupar: { default: true },\r\n      atribuidas_para_mim: { default: false },\r\n      usuario_id: { default: null },\r\n      numero: { default: \"\" },\r\n      somente_unidade_atual: { default: false },\r\n      unidades_subordinadas: { default: false },\r\n      unidade_id: { default: null },\r\n      numero_processo: { default: \"\" },\r\n      status: { default: null },\r\n      etiquetas: { default: [] },\r\n      arquivadas: { default: false },\r\n      tipo_atividade_id: { default: null },\r\n      tipo_processo_id: { default: null },\r\n      data_filtro: { default: null },\r\n      data_inicio: { default: null },\r\n      data_fim: { default: null }\r\n    });\r\n    this.formEdit = this.fh.FormBuilder({\r\n      etiquetas: { default: [] },\r\n      etiqueta: { default: null }\r\n    });\r\n    this.groupBy = [{ field: \"unidade.sigla\", label: \"Unidade\" }];\r\n  }\r\n\r\n  public storeFilter = (filter?: FormGroup) => {\r\n    const form = filter?.value;\r\n    return {\r\n      atribuidas_para_mim: form.atribuidas_para_mim,\r\n      usuario_id: form.usuario_id,\r\n      somente_unidade_atual: form.somente_unidade_atual,\r\n      unidades_subordinadas: form.unidades_subordinadas,\r\n      unidade_id: form.somente_unidade_atual ? null : form.unidade_id\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    if (this.fixedFilter) {\r\n      const status = this.fixedFilter.find(x => x[0] == \"status\");\r\n      if (status) this.filter?.controls.status.setValue(status[2]);\r\n    }\r\n  }\r\n\r\n  public onAgruparChange(event: Event) {\r\n    const agrupar = this.filter!.controls.agrupar.value;\r\n    if ((agrupar && !this.groupBy?.length) || (!agrupar && this.groupBy?.length)) {\r\n      this.groupBy = agrupar ? [{ field: \"unidade.sigla\", label: \"Unidade\" }] : [];\r\n      this.grid!.reloadFilter();\r\n    }\r\n  }\r\n\r\n  public onStatusClick(status: BadgeButton) {\r\n    this.filter?.controls.status.setValue(status.data?.status);\r\n    this.grid!.showFilter();\r\n    this.grid!.reloadFilter();\r\n  }\r\n\r\n  public onEtiquetaClick(etiqueta: LookupItem) {\r\n    let etiquetas = this.filter!.controls.etiquetas.value;\r\n    etiquetas.push(etiqueta);\r\n    this.filter?.controls.etiquetas.setValue(etiquetas);\r\n    this.grid!.showFilter();\r\n    this.grid!.reloadFilter();\r\n  }\r\n\r\n  public async onColumnEtiquetasChecklistEdit(row: any) {\r\n    this.formEdit.controls.etiquetas.setValue(row.etiquetas);\r\n    this.formEdit.controls.etiqueta.setValue(null);\r\n    this.etiquetas = this.util.merge(row.atividade?.etiquetas, row.unidade?.etiquetas, (a, b) => a.key == b.key);\r\n    this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key);\r\n    this.checklist = this.util.clone(row.checklist);\r\n  }\r\n\r\n  public async onColumnEtiquetasChecklistSave(row: any) {\r\n    try {\r\n      const saved = await this.dao!.update(row.id, {\r\n        etiquetas: this.formEdit.controls.etiquetas.value,\r\n        checklist: this.checklist\r\n      });\r\n      row.checklist = this.checklist;\r\n      return !!saved;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let result: any[] = this.fixedFilter || [];\r\n    let form: any = filter.value;\r\n\r\n    /* Verifica se estiver marcado Atual e a Unidade for diferente da Lotacao da barra superior */\r\n    if (form.somente_unidade_atual && form.unidade_id != this.auth.unidade?.id) {\r\n      filter.controls.unidade_id.setValue(this.auth.unidade?.id);\r\n      form.unidade_id = this.auth.unidade?.id;\r\n    }\r\n    /* Verifica se Minhas está selecionado e o usuário está diferente do logado (vazio) */\r\n    if (form.atribuidas_para_mim && form.usuario_id != this.auth.usuario?.id) {\r\n      filter.controls.usuario_id.setValue(this.auth.usuario?.id);\r\n      form.usuario_id = this.auth.usuario?.id;\r\n    }\r\n    /* Filtros */\r\n    if (form.usuario_id?.length) {\r\n      result.push([\"usuario_id\", \"==\", form.usuario_id]);\r\n    }\r\n    if (form.unidade_id?.length) {\r\n      result.push([\"unidade_id\", \"==\", form.unidade_id]);\r\n    }\r\n    if (form.unidades_subordinadas) {\r\n      result.push([\"unidades_subordinadas\", \"==\", true]);\r\n    }\r\n    if (form.etiquetas?.length) {\r\n      result.push([\"etiquetas\", \"in\", form.etiquetas.map((x: LookupItem) => x.value)]);\r\n    }\r\n    if (form.numero_processo?.length) {\r\n      result.push([\"numero_processo\", \"==\", form.numero_processo]);\r\n    }\r\n    if (form.numero?.length) {\r\n      result.push([\"numero\", \"==\", form.numero]);\r\n    }\r\n    if (form.status?.length && !result.find(x => x[0] == \"status\")) {\r\n      result.push([\"status\", \"==\", form.status]);\r\n      if (form.status == \"ARQUIVADO\") this.filter!.controls.arquivadas.setValue(true);\r\n    }\r\n    if (!this.filter!.controls.arquivadas.value) {\r\n      result.push([\"data_arquivamento\", \"==\", null]);\r\n    }\r\n    if (form.tipo_atividade_id?.length) {\r\n      result.push([\"tipo_atividade_id\", \"==\", form.tipo_atividade_id]);\r\n    }\r\n    if (form.tipo_processo_id?.length) {\r\n      result.push([\"tipo_processo_id\", \"==\", form.tipo_processo_id]);\r\n    }\r\n    if (form.data_filtro?.length) {\r\n      const field = form.data_filtro == \"DISTRIBUICAO\" ? \"data_distribuicao\" : form.data_filtro == \"PRAZO\" ? \"prazo_entrega\" : \"data_entrega\";\r\n      if (form.data_inicio) {\r\n        result.push([field, \">=\", form.data_inicio]);\r\n      }\r\n      if (form.data_fim) {\r\n        result.push([field, \"<=\", form.data_fim]);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  public filterClear(filter: FormGroup) {\r\n    this.filter!.controls.atribuidas_para_mim.setValue(false);\r\n    this.filter!.controls.usuario_id.setValue(null);\r\n    this.filter!.controls.somente_unidade_atual.setValue(false);\r\n    this.filter!.controls.unidades_subordinadas.setValue(false);\r\n    this.filter!.controls.unidade_id.setValue(null);\r\n    this.filter!.controls.numero_processo.setValue(\"\");\r\n    this.filter!.controls.atividade_id.setValue(null);\r\n    this.filter!.controls.tipo_processo_id.setValue(null);\r\n    this.filter!.controls.data_filtro.setValue(null);\r\n    this.filter!.controls.data_inicio.setValue(null);\r\n    this.filter!.controls.data_fim.setValue(null);\r\n    if (!this.fixedFilter?.length || !this.fixedFilter.find(x => x[0] == \"status\")) this.filter!.controls.status.setValue(null);\r\n    this.filter!.controls.etiquetas.setValue([]);\r\n    super.filterClear(filter);\r\n  }\r\n\r\n  public addItemHandleEtiquetas(): LookupItem | undefined {\r\n    let result = undefined;\r\n    if (this.etiqueta && this.etiqueta.selectedItem) {\r\n      const item = this.etiqueta.selectedItem;\r\n      const key = item.key?.length ? item.key : this.util.textHash(item.value);\r\n      if (this.util.validateLookupItem(this.formEdit.controls.etiquetas.value, key)) {\r\n        result = {\r\n          key: key,\r\n          value: item.value,\r\n          color: item.color,\r\n          icon: item.icon\r\n        };\r\n        this.formEdit.controls.etiqueta.setValue(null);\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n}\r\n\r\n","<ng-template #calendarEfemerides>\r\n    <calendar-efemerides [efemerides]=\"efemerides\"></calendar-efemerides>\r\n</ng-template>\r\n<grid [dao]=\"dao\" [add]=\"add\" [form]=\"formEdit\" [hasEdit]=\"false\" [hasDelete]=\"false\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [loadList]=\"onGridLoad.bind(this)\" [selectable]=\"selectable\" (select)=\"onSelect($event)\">\r\n    <toolbar *ngIf=\"!fixedFilter && !selectable\">\r\n        <input-switch [size]=\"4\" labelPosition=\"left\" label=\"Agrupar por Un.\" controlName=\"agrupar\" [control]=\"filter!.controls.agrupar\" (change)=\"onAgruparChange($event)\"></input-switch>\r\n    </toolbar>\r\n    <filter [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && !queryParams?.filter && filterCollapsed\">\r\n        <div class=\"row\">\r\n            <input-switch [size]=\"1\" label=\"Minhas\" controlName=\"atribuidas_para_mim\" [control]=\"filter!.controls.atribuidas_para_mim\" (change)=\"onAtribuidasParaMimChange($event)\"></input-switch>\r\n            <input-search [size]=\"5\" label=\"Usuário\" #usuario controlName=\"usuario_id\"  [disabled]=\"filter!.controls.atribuidas_para_mim.value ? 'true' : undefined\" [dao]=\"usuarioDao\" ></input-search>\r\n            <input-switch [size]=\"1\" label=\"Atual\" controlName=\"somente_unidade_atual\" [control]=\"filter!.controls.somente_unidade_atual\" (change)=\"onSomenteUnidadeAtualChange($event)\" labelInfo=\"Somente as atividades da unidade selecionada\"></input-switch>\r\n            <input-search [size]=\"4\" label=\"Unidade\" #unidade controlName=\"unidade_id\" [disabled]=\"filter!.controls.somente_unidade_atual.value ? 'true' : undefined\" [dao]=\"unidadeDao\" ></input-search>\r\n            <input-switch [size]=\"1\" label=\"Sub.\" controlName=\"unidades_subordinadas\" [control]=\"filter!.controls.unidades_subordinadas\" labelInfo=\"Incluir as unidades subordinadas\"></input-switch>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-text [size]=\"1\" label=\"#ID\" controlName=\"numero\" maskFormat=\"999999\" [control]=\"filter!.controls.numero\" [labelInfo]=\"'Número ' + lex.noun('atividade', false, true)\"></input-text>\r\n            <input-text [size]=\"3\" [label]=\"'Nº '+ lex.noun('Processo') +' (Sei)'\" maskFormat=\"00000.000000/0000-00\" controlName=\"numero_processo\" [control]=\"filter!.controls.numero_processo\" labelInfo=\"Pesquisa no documento de requisição, conclusão e nos documentos das tarefas\"></input-text>\r\n            <input-select [size]=\"3\" label=\"Status\" itemTodos=\"- Todos -\" [valueTodos]=\"null\" [disabled]=\"fixedFilter?.length && fixedFilter![0]![0] == 'status' ? 'true' : undefined\" controlName=\"status\" [control]=\"filter!.controls.status\" [items]=\"lookup.ATIVIDADE_STATUS_COM_ARQUIVADAS\"></input-select>\r\n            <input-multiselect noForm noBox [size]=\"4\" label=\"Etiquetas\" controlName=\"etiquetas\" [control]=\"filter!.controls.etiquetas\"></input-multiselect>\r\n            <input-switch [size]=\"1\" label=\"Arq.\" controlName=\"arquivadas\" [control]=\"filter!.controls.arquivadas\" labelInfo=\"Listar também atividades arquivadas\"></input-switch>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-search [size]=\"3\" [label]=\"lex.noun('Tipo de Atividade')\" controlName=\"tipo_atividade_id\" [dao]=\"tipoAtividadeDao\"></input-search>\r\n            <input-search [size]=\"3\" [label]=\"lex.noun('Tipo de Processo')\" controlName=\"tipo_processo_id\" [dao]=\"tipoProcessoDao\" ></input-search>\r\n            <input-select [size]=\"2\" label=\"Data\" itemTodos=\"- Todos -\" [valueTodos]=\"null\" controlName=\"data_filtro\" [control]=\"filter!.controls.data_filtro\" [items]=\"DATAS_FILTRO\"></input-select>\r\n            <input-datetime [size]=\"2\" noIcon [disabled]=\"filter!.controls.data_filtro.value == null ? 'true' : undefined\" label=\"Início\" controlName=\"data_inicio\" [control]=\"filter!.controls.data_inicio\" labelInfo=\"Data início do período\"></input-datetime>\r\n            <input-datetime [size]=\"2\" noIcon [disabled]=\"filter!.controls.data_filtro.value == null ? 'true' : undefined\" label=\"Fim\" controlName=\"data_fim\" [control]=\"filter!.controls.data_fim\" labelInfo=\"Data fim do período\"></input-datetime>\r\n        </div>\r\n    </filter>\r\n    <columns>\r\n        <column *ngIf=\"!selectable\" type=\"expand\" icon=\"bi bi-boxes\" [align]=\"'center'\" [hint]=\"lex.noun('Tarefas da atividade', true)\" [template]=\"columnTarefas\" [expandTemplate]=\"columnExpandedTarefas\">\r\n            <ng-template let-row=\"row\" #columnTarefas>\r\n                <span *ngIf=\"row.tarefas?.length\" class=\"badge rounded-pill bg-light text-dark\"><i class=\"bi bi-boxes\"></i> {{row.tarefas?.length}}</span>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnExpandedTarefas>\r\n                <atividade-list-tarefa persist [selectable]=\"selectable\" [editable]=\"!row.metadados.concluido\" [atividade]=\"row\"></atividade-list-tarefa>\r\n            </ng-template>\r\n        </column>\r\n        <column [titleTemplate]=\"titleIdNumeroStatus\" [template]=\"columnNumero\">\r\n            <ng-template let-header=\"header\" #titleIdNumeroStatus>\r\n                <order by=\"numero\" [header]=\"header\">#ID</order>/nº Processo<br>\r\n                Status\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnNumero>\r\n                <span class=\"text-nowrap\">\r\n                    <small class=\"micro-text fw-ligh\">#{{row.numero}}</small>\r\n                    <documentos-badge [documento]=\"row.documento_requisicao\"></documentos-badge>\r\n                    <!--span class=\"badge bg-light text-dark\" [attr.role]=\"row.numero_processo?.length ? 'button' : undefined\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" (click)=\"onProcessoClick(row)\" [title]=\"allPages.getButtonTitle(row.numero_processo, row.numero_requisicao)\">\r\n                        <i [class]=\"'bi ' + (row.numero_processo?.length ? 'bi bi-folder-symlink' : 'bi bi-x-lg')\"></i>\r\n                        {{row.numero_processo?.length ? row.numero_processo : \"Não processual\"}}\r\n                        <small *ngIf=\"row.numero_requisicao?.length\"><br>Sei nº {{row.numero_requisicao}}</small>\r\n                    </span//-->\r\n                </span>\r\n                <div class=\"one-per-line\">\r\n                    <badge *ngFor=\"let status of getStatus(row)\" [data]=\"status\" [color]=\"status.class\" [icon]=\"status.icon\" [label]=\"status.label\" [click]=\"status.data?.filter ? onStatusClick.bind(this) : undefined\"></badge>\r\n                    <!--span *ngFor=\"let status of getStatus(row)\" [class]=\"status.class\" [attr.role]=\"status.filter ? 'button' : undefined\" (click)=\"onStatusClick(status)\">\r\n                        <i [class]=\"status.icon\"></i>\r\n                        {{status.text}}\r\n                    </span/-->\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column [titleTemplate]=\"titleUnResponsavelDemandante\" [template]=\"columnPessoas\">\r\n            <ng-template let-header=\"header\" #titleUnResponsavelDemandante>\r\n                Un./<order by=\"usuario.nome\" [header]=\"header\">Responsável</order><br>\r\n                <order by=\"demandante.nome\" [header]=\"header\">Demandante</order>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnPessoas>\r\n                <div class=\"text-nowrap\">\r\n                    <badge icon=\"bi bi-briefcase\" color=\"light\" [label]=\"row.unidade.sigla\"></badge>\r\n                    <badge [icon]=\"'bi ' + (row.usuario?.nome?.length ? 'bi-person-check' : 'bi-person-x')\" color=\"light\" [label]=\"util.apelidoOuNome(row.usuario, true) || '(Não atribuído)'\" [hint]=\"'Responsável: ' + (row.usuario?.nome || 'Não atribuido a nenhum usuário')\"></badge>\r\n                </div>\r\n                <badge icon=\"bi bi-cursor\" color=\"light\" [label]=\"util.apelidoOuNome(row.demandante, true) || 'Desconhecido'\" [hint]=\"'Demandante: ' + (row.demandante?.nome || 'Desconhecido')\"></badge>\r\n            </ng-template>\r\n        </column>\r\n        <column [titleTemplate]=\"titleTempos\" [template]=\"columnTempos\">\r\n            <ng-template let-header=\"header\" #titleTempos>\r\n                Tempos\r\n                <order by=\"data_distribuicao\" [header]=\"header\">Distribuição</order><br>\r\n                <order by=\"prazo_entrega\" [header]=\"header\">Prazo</order>\r\n                <order by=\"data_entrega\" [header]=\"header\">Entrega</order>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnTempos>\r\n                <div class=\"one-per-line\">\r\n                    <badge *ngFor=\"let tempo of temposAtividade(row)\" [badge]=\"tempo\"></badge>\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column [title]=\"'Etiquetas\\nChecklist'\" [editTemplate]=\"selectable ? undefined : columnEtiquetasChecklistEdit\" [template]=\"columnEtiquetasChecklist\" [edit]=\"selectable ? undefined : onColumnEtiquetasChecklistEdit.bind(this)\" [save]=\"selectable ? undefined : onColumnEtiquetasChecklistSave.bind(this)\">\r\n            <ng-template let-row=\"row\" #columnEtiquetasChecklist>\r\n                <badge *ngFor=\"let etiqueta of row.etiquetas\" [lookup]=\"etiqueta\" [click]=\"onEtiquetaClick.bind(this)\"></badge>\r\n                <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                <table *ngIf=\"row.checklist?.length\">\r\n                    <tr *ngFor=\"let check of row.checklist\">\r\n                        <td><i *ngIf=\"check.checked\" class=\"bi bi-check-circle\"></i></td>\r\n                        <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                    </tr>\r\n                </table>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnEtiquetasChecklistEdit>\r\n                <input-multiselect controlName=\"etiquetas\" [size]=\"12\" [control]=\"formEdit.controls.etiquetas\" [addItemHandle]=\"addItemHandleEtiquetas.bind(this)\">\r\n                    <input-select [size]=\"12\" #etiqueta controlName=\"etiqueta\" nullable itemNull=\"- Selecione -\" detailsButton detailsButtonIcon=\"bi bi-tools\" (details)=\"onEtiquetaConfigClick()\" [control]=\"formEdit.controls.etiqueta\" [items]=\"etiquetas\"></input-select>\r\n                </input-multiselect>\r\n                <separator *ngIf=\"row.checklist?.length\" small title=\"Checklist\"></separator>\r\n                <table *ngIf=\"row.checklist?.length\">\r\n                    <tr *ngFor=\"let check of checklist; let i = index\">\r\n                        <td>\r\n                            <input-switch [size]=\"12\" scale=\"small\" [source]=\"checklist\" [path]=\"i + '.checked'\"></input-switch>\r\n                        </td>\r\n                        <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n                    </tr>\r\n                </table>\r\n            </ng-template>\r\n        </column>\r\n        <column [title]=\"'Tipo de Atividade\\nDescrição'\" [template]=\"columnTitulo\">\r\n            <ng-template let-row=\"row\" #columnTitulo>\r\n                <small *ngIf=\"row.atividade\" class=\"atividade-atividade\"><strong>{{row.tipo_atividade.nome || \"\"}}</strong><br></small>\r\n                <span class=\"micro-text fw-ligh atividade-descricao\">{{row.descricao}}</span>\r\n                <comentarios-widget [entity]=\"row\" [selectable]=\"selectable\" origem=\"ATIVIDADE\" [grid]=\"grid\"></comentarios-widget>\r\n            </ng-template>\r\n        </column>\r\n        <column *ngIf=\"!selectable\" type=\"options\" [onEdit]=\"edit\" [onDelete]=\"delete\" [dynamicOptions]=\"dynamicOptions.bind(this)\" [dynamicButtons]=\"dynamicButtons.bind(this)\"></column>\r\n    </columns>\r\n    <pagination [rows]=\"rowsLimit\"></pagination>\r\n</grid>\r\n","import { Base } from './base.model';\r\nimport { Comentario, HasComentarios } from './comentario';\r\nimport { Atividade } from './atividade.model';\r\nimport { TipoTarefa } from './tipo-tarefa.model';\r\nimport { Usuario } from './usuario.model';\r\nimport { Documento } from './documento.model';\r\n\r\nexport class AtividadeTarefa extends Base implements HasComentarios {\r\n    public atividade?: Atividade;\r\n    public usuario?: Usuario;\r\n    public tipo_tarefa?: TipoTarefa;\r\n    public documento: Documento | null = null ; /* Documento de entrga */ \r\n    public comentarios: Comentario[] = []; /* Comentarios da tarefa */\r\n\r\n    public descricao: string | null = null; /* Descrição da tarefa */\r\n    public data_hora: Date = new Date(); /* Data hora do lançamento da tarefa */\r\n    public tempo_estimado: number = 0; /* Tempo estimado para a execução da tarefa (Horas decimais) */\r\n    public concluido: boolean = false; /* Se a tarefa foi concluída */\r\n\r\n    public documento_id: string | null = null ; /* Documento de entrga */ \r\n    public atividade_id: string = \"\"; /* Atividade */\r\n    public usuario_id: string = \"\"; /* Usuário */\r\n    public tipo_tarefa_id: string | null = null; /* Tarefa */\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}\r\n"],"sourceRoot":"webpack:///"}