"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[3357],{83357:(At,A,n)=>{n.r(A),n.d(A,{TipoAvaliacaoModule:()=>g});var r=n(76733),b=n(55579),p=n(1391),u=n(2314),m=n(8239),Z=n(74040),N=n(20207),_=n(64368);class d extends _.X{constructor(i){super(),this.notas=[],this.tipo="QUANTITATIVO",this.nome="",this.initialization(i)}}var x=n(1184),Q=n(79055),F=n(65296);class E extends _.X{constructor(i){super(),this.sequencia=0,this.nota=0,this.descricao="",this.aprova=!1,this.justifica=!1,this.pergunta="",this.icone="",this.cor="",this.codigo="",this.justificativas=[],this.tipo_avaliacao_id="",this.initialization(i)}}class U extends _.X{constructor(i){super(),this.tipo_avaliacao_nota_id="",this.tipo_justificativa_id="",this.initialization(i)}}var t=n(20755),h=n(73150),O=n(57224),J=n(83351),y=n(88820),j=n(92392),z=n(64603),D=n(66848),M=n(17819),L=n(25560),C=n(95489),w=n(9224);function Y(e,i){if(1&e&&(t.TgZ(0,"strong"),t._uU(1),t.qZA()),2&e){const o=i.row;t.xp6(1),t.Oqu(o.nota)}}function P(e,i){if(1&e&&t._UZ(0,"input-number",23),2&e){const o=t.oxw(2);t.Q6J("control",o.formNota.controls.nota)}}function V(e,i){if(1&e&&t._UZ(0,"input-text",23),2&e){const o=t.oxw(2);t.Q6J("control",o.formNota.controls.nota),t.uIk("maxlength",250)}}function q(e,i){if(1&e&&(t.YNc(0,P,1,1,"input-number",21),t.YNc(1,V,1,2,"input-text",21),t._UZ(2,"input-text",22)),2&e){const o=t.oxw();t.Q6J("ngIf","QUANTITATIVO"==o.form.controls.tipo.value),t.xp6(1),t.Q6J("ngIf","QUALITATIVO"==o.form.controls.tipo.value),t.xp6(1),t.Q6J("control",o.formNota.controls.codigo),t.uIk("maxlength",250)}}function B(e,i){if(1&e&&t._UZ(0,"badge",24),2&e){const o=i.row;t.Q6J("label",o.descricao)("icon",o.icone)("color",o.cor)}}function S(e,i){if(1&e&&t._UZ(0,"input-text",25)(1,"input-select",26)(2,"input-color",27),2&e){const o=t.oxw();t.Q6J("control",o.formNota.controls.descricao),t.uIk("maxlength",250),t.xp6(1),t.Q6J("size",6)("control",o.formNota.controls.icone)("items",o.lookup.ICONES),t.xp6(1),t.Q6J("size",6)("control",o.formNota.controls.cor)}}function W(e,i){1&e&&t._UZ(0,"badge",31)}function R(e,i){1&e&&t._UZ(0,"badge",32)}function G(e,i){if(1&e&&(t.TgZ(0,"strong"),t._uU(1),t.qZA(),t.TgZ(2,"div",28),t.YNc(3,W,1,0,"badge",29),t.YNc(4,R,1,0,"badge",30),t.qZA()),2&e){const o=i.row;t.xp6(1),t.Oqu(o.pergunta),t.xp6(2),t.Q6J("ngIf",o.aprova),t.xp6(1),t.Q6J("ngIf",o.justifica)}}function X(e,i){if(1&e&&(t._UZ(0,"input-text",23),t.TgZ(1,"div",1),t._UZ(2,"input-switch",33)(3,"input-switch",34),t.qZA()),2&e){const o=t.oxw();t.Q6J("control",o.formNota.controls.pergunta),t.uIk("maxlength",250),t.xp6(2),t.Q6J("size",12)("control",o.formNota.controls.aprova),t.xp6(1),t.Q6J("size",12)("control",o.formNota.controls.justifica)}}function H(e,i){if(1&e&&t._UZ(0,"badge",36),2&e){const o=i.$implicit;t.Q6J("label",o.tipo_justificativa.nome)}}function K(e,i){if(1&e&&(t.TgZ(0,"div",28),t.YNc(1,H,1,1,"badge",35),t.qZA()),2&e){const o=i.row;t.xp6(1),t.Q6J("ngForOf",o.justificativas)}}const $=function(){return["cadastros","tipo-justificativa","new"]},k=function(e){return{route:e}};function tt(e,i){if(1&e&&(t.TgZ(0,"input-multiselect",37),t._UZ(1,"input-select",38,39),t.qZA()),2&e){const o=t.MAs(2),a=t.oxw();t.Q6J("size",12)("canEdit",!0)("addItemControl",o)("control",a.formNota.controls.justificativas),t.xp6(1),t.Q6J("size",12)("control",a.formNota.controls.tipo_justificativa_id)("dao",a.tipoJustificativaDao)("addRoute",t.VKq(9,k,t.DdM(8,$)))}}class c extends x.F{constructor(i){super(i,d,N.r),this.injector=i,this.justificativasLista=[],this.tipoJustificativa=new F.H,this.validate=(o,a)=>{let l=null;return["nome"].indexOf(a)>=0&&!o.value?.length&&(l="Obrigat\xf3rio"),l},this.validateNota=(o,a)=>{let l=null;return["pergunta","descricao","icone"].indexOf(a)>=0&&!o.value?.length&&(l="Obrigat\xf3rio"),l},this.titleEdit=o=>"Editando "+this.lex.translate("Tipo de Avalia\xe7\xe3o")+": "+(o?.nome||""),this.tipoJustificativaDao=i.get(Q.i),this.join=["notas.justificativas.tipo_justificativa"],this.form=this.fh.FormBuilder({nome:{default:""},tipo:{default:"QUANTITATIVO"},notas:{default:[]}},this.cdRef,this.validate),this.formNota=this.fh.FormBuilder({descricao:{default:""},nota:{default:0},codigo:{default:""},aprova:{default:!1},pergunta:{default:""},justifica:{default:!1},icone:{default:""},cor:{default:""},justificativas:{default:[]},tipo_justificativa_id:{default:null}},this.cdRef,this.validateNota)}loadData(i,o){let a=Object.assign({},o.value);o.patchValue(this.util.fillForm(a,i))}initializeData(i){this.entity=new d,this.loadData(this.entity,i)}saveData(i){return new Promise((o,a)=>{let l=this.util.fill(new d,this.entity);l=this.util.fillForm(l,this.form.value),o(l)})}addNota(){var i=this;return(0,m.Z)(function*(){return new E({tipo_avaliacao_id:i.entity.id,sequencia:i.form.controls.notas.value.length+1})})()}loadNota(i,o){return(0,m.Z)(function*(){i.patchValue(o),i.controls.tipo_justificativa_id.setValue(null),i.controls.justificativas.setValue(o.justificativas?.map(a=>Object.assign({},{key:a.tipo_justificativa_id,value:a.tipo_justificativa.nome,data:a.tipo_justificativa}))||[])})()}removeNota(i){var o=this;return(0,m.Z)(function*(){return yield o.dialog.confirm("Exclui ?","Deseja realmente excluir?")})()}saveNota(i,o){var a=this;return(0,m.Z)(function*(){let l=i.controls.justificativas.value||[];return a.util.fillForm(o,i.value),o.justificativas=l.map(s=>(o.justificativas||[]).find(T=>T.tipo_justificativa_id==s.key)||new U({tipo_avaliacao_nota_id:a.entity.id,tipo_justificativa_id:s.key,tipo_justificativa:s.data})),o})()}static#t=this.\u0275fac=function(o){return new(o||c)(t.Y36(t.zs3))};static#o=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-tipo-avaliacao-form"]],viewQuery:function(o,a){if(1&o&&t.Gf(Z.Q,5),2&o){let l;t.iGM(l=t.CRH())&&(a.editableForm=l.first)}},features:[t.qOj],decls:30,vars:25,consts:[["initialFocus","nome",3,"form","disabled","title","submit","cancel"],[1,"row"],["label","T\xedtulo","controlName","nome","required","",3,"size"],["label","Tipo da nota","controlName","tipo",3,"size","items"],["tipo",""],["title","Notas"],["editable","",3,"control","form","hasDelete","add","load","remove","save"],["grid",""],["title","Nota",3,"template","editTemplate"],["columnNota",""],["editNota",""],["title","Descri\xe7\xe3o/Icone/Cor",3,"template","editTemplate"],["columnDescricao",""],["editDescricao",""],[3,"title","template","editTemplate"],["columnPerguntaConfiguracoes",""],["editPerguntaConfiguracoes",""],[3,"title","width","template","editTemplate"],["columnJustificativas",""],["editJustificativas",""],["type","options"],[3,"control",4,"ngIf"],["placeholder","C\xf3digo integra\xe7\xe3o",3,"control"],[3,"control"],[3,"label","icon","color"],["placeholder","Descri\xe7\xe3o",3,"control"],["icon","fas fa-sign-out-alt",3,"size","control","items"],[3,"size","control"],[1,"one-per-line"],["color","success","icon","bi bi-check","label","Aprova","hint","Se para esta nota ser\xe1 considerado como aprovado, quando aplic\xe1vel",4,"ngIf"],["color","warning","icon","bi bi-patch-question","label","Justifica","hint","Se para esta nota ser\xe1 obrigat\xf3rio uma justificativa",4,"ngIf"],["color","success","icon","bi bi-check","label","Aprova","hint","Se para esta nota ser\xe1 considerado como aprovado, quando aplic\xe1vel"],["color","warning","icon","bi bi-patch-question","label","Justifica","hint","Se para esta nota ser\xe1 obrigat\xf3rio uma justificativa"],["scale","small","labelPosition","right","label","Aprova?","labelInfo","Se para esta nota ser\xe1 considerado como aprovado, quando aplic\xe1vel",3,"size","control"],["scale","small","labelPosition","right","label","Justifica?","labelInfo","Se para esta nota ser\xe1 obrigat\xf3rio uma justificativa",3,"size","control"],["color","light",3,"label",4,"ngFor","ngForOf"],["color","light",3,"label"],["noBox","",3,"size","canEdit","addItemControl","control"],["fullEntity","",3,"size","control","dao","addRoute"],["justificativa",""]],template:function(o,a){if(1&o&&(t.TgZ(0,"editable-form",0),t.NdJ("submit",function(){return a.onSaveData()})("cancel",function(){return a.onCancel()}),t.TgZ(1,"div",1),t._UZ(2,"input-text",2)(3,"input-select",3,4),t.qZA(),t.TgZ(5,"separator",5)(6,"grid",6,7)(8,"columns")(9,"column",8),t.YNc(10,Y,2,1,"ng-template",null,9,t.W1O),t.YNc(12,q,3,4,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(14,"column",11),t.YNc(15,B,1,3,"ng-template",null,12,t.W1O),t.YNc(17,S,3,7,"ng-template",null,13,t.W1O),t.qZA(),t.TgZ(19,"column",14),t.YNc(20,G,5,3,"ng-template",null,15,t.W1O),t.YNc(22,X,4,6,"ng-template",null,16,t.W1O),t.qZA(),t.TgZ(24,"column",17),t.YNc(25,K,2,1,"ng-template",null,18,t.W1O),t.YNc(27,tt,3,11,"ng-template",null,19,t.W1O),t.qZA(),t._UZ(29,"column",20),t.qZA()()()()),2&o){const l=t.MAs(11),s=t.MAs(13),I=t.MAs(16),T=t.MAs(18),gt=t.MAs(21),_t=t.MAs(23),ht=t.MAs(26),Tt=t.MAs(28);t.Q6J("form",a.form)("disabled",a.formDisabled)("title",a.isModal?"":a.title),t.xp6(2),t.Q6J("size",8),t.uIk("maxlength",250),t.xp6(1),t.Q6J("size",4)("items",a.lookup.TIPO_AVALIACAO_TIPO),t.xp6(3),t.Q6J("control",a.form.controls.notas)("form",a.formNota)("hasDelete",!0)("add",a.addNota.bind(a))("load",a.loadNota.bind(a))("remove",a.removeNota.bind(a))("save",a.saveNota.bind(a)),t.xp6(3),t.Q6J("template",l)("editTemplate",s),t.xp6(5),t.Q6J("template",I)("editTemplate",T),t.xp6(5),t.Q6J("title","Pergunta motivacional\nConfigura\xe7\xf5es")("template",gt)("editTemplate",_t),t.xp6(5),t.Q6J("title",a.lex.translate("Tipos de justificativa"))("width",300)("template",ht)("editTemplate",Tt)}},dependencies:[r.sg,r.O5,h.M,O.a,J.b,Z.Q,y.a,j.m,z.p,D.z,M.p,L.N,C.F,w.l]})}var ot=n(78509),at=n(57765),it=n(45512),et=n(42704);function nt(e,i){1&e&&t._UZ(0,"toolbar")}function lt(e,i){if(1&e&&t._uU(0),2&e){const o=i.row;t.hij(" ",o.nome," ")}}function st(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const o=t.oxw().row,a=t.oxw();t.xp6(1),t.hij(" ",a.getNotasText(o.notas)," ")}}function ct(e,i){1&e&&t._UZ(0,"badge",19)}function rt(e,i){1&e&&t._UZ(0,"badge",20)}function pt(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"badge",16),t.qZA(),t.TgZ(3,"td"),t._uU(4),t._UZ(5,"br"),t.TgZ(6,"small"),t._uU(7),t.qZA(),t._UZ(8,"br"),t.qZA(),t.TgZ(9,"td"),t.YNc(10,ct,1,0,"badge",17),t.YNc(11,rt,1,0,"badge",18),t.qZA()()),2&e){const o=i.$implicit;t.xp6(2),t.Q6J("label",o.nota)("icon",o.icon)("color",o.cor),t.xp6(2),t.hij(" ",o.descricao,""),t.xp6(3),t.Oqu(o.pergunta),t.xp6(3),t.Q6J("ngIf",o.aprova),t.xp6(1),t.Q6J("ngIf",o.justifica)}}function ut(e,i){if(1&e&&(t.TgZ(0,"table",13)(1,"thead")(2,"tr")(3,"th",14),t._uU(4,"Nota"),t.qZA(),t.TgZ(5,"th",14),t._uU(6,"Descri\xe7\xe3o"),t._UZ(7,"br"),t.TgZ(8,"small"),t._uU(9,"Pergunta motivacional"),t.qZA()(),t.TgZ(10,"th",14),t._uU(11,"Op\xe7\xf5es"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,pt,12,7,"tr",15),t.qZA()()),2&e){const o=t.oxw().row,a=t.oxw();t.xp6(13),t.Q6J("ngForOf",a.notasOrdenadas(o).notas)}}function mt(e,i){if(1&e&&(t.YNc(0,st,2,1,"div",11),t.YNc(1,ut,14,1,"ng-template",null,12,t.W1O)),2&e){const o=t.MAs(2),a=t.oxw();t.Q6J("ngIf",a.selectable)("ngIfElse",o)}}class f extends ot.E{constructor(i){super(i,d,N.r),this.injector=i,this.filterWhere=o=>{let a=[],l=o.value;return l.nome?.length&&a.push(["nome","like","%"+l.nome.trim().replace(" ","%")+"%"]),a},this.title=this.lex.translate("Tipos de Avalia\xe7\xe3o"),this.code="MOD_TIPO_AVAL",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.addOption(this.OPTION_INFORMACOES),this.addOption(this.OPTION_EXCLUIR,"MOD_TIPO_AVAL_EXCL"),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}getNotasText(i){return i.map(o=>o.nota).join(", ")}notasOrdenadas(i){let o=i.notas;return o.sort((a,l)=>a.sequencia-l.sequencia),i.notas=o,i}static#t=this.\u0275fac=function(o){return new(o||f)(t.Y36(t.zs3))};static#o=this.\u0275cmp=t.Xpm({type:f,selectors:[["app-tipo-avaliacao-list"]],viewQuery:function(o,a){if(1&o&&t.Gf(h.M,5),2&o){let l;t.iGM(l=t.CRH())&&(a.grid=l.first)}},features:[t.qOj],decls:14,vars:25,consts:[[3,"dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit","select"],[4,"ngIf"],[3,"deleted","form","where","submit","collapseChange","collapsed"],[1,"row"],["controlName","nome","placeholder","Nome...",3,"size","label","control"],["title","Nome",3,"template"],["columnNome",""],["title","Notas",3,"template"],["columnNotas",""],["type","options",3,"onEdit","options"],[3,"rows"],[4,"ngIf","ngIfElse"],["tabelaNotas",""],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"label","icon","color"],["icon","bi bi-hand-thumbs-up","color","success","label","Aprova",4,"ngIf"],["icon","bi bi-patch-question","color","primary","label","Justifica",4,"ngIf"],["icon","bi bi-hand-thumbs-up","color","success","label","Aprova"],["icon","bi bi-patch-question","color","primary","label","Justifica"]],template:function(o,a){if(1&o&&(t.TgZ(0,"grid",0),t.NdJ("select",function(s){return a.onSelect(s)}),t.YNc(1,nt,1,0,"toolbar",1),t.TgZ(2,"filter",2)(3,"div",3),t._UZ(4,"input-text",4),t.qZA()(),t.TgZ(5,"columns")(6,"column",5),t.YNc(7,lt,1,1,"ng-template",null,6,t.W1O),t.qZA(),t.TgZ(9,"column",7),t.YNc(10,mt,3,2,"ng-template",null,8,t.W1O),t.qZA(),t._UZ(12,"column",9),t.qZA(),t._UZ(13,"pagination",10),t.qZA()),2&o){const l=t.MAs(8),s=t.MAs(11);t.Q6J("dao",a.dao)("add",a.add)("title",a.isModal?"":a.title)("orderBy",a.orderBy)("groupBy",a.groupBy)("join",a.join)("selectable",a.selectable)("hasAdd",a.auth.hasPermissionTo("MOD_TIPO_AVAL_INCL"))("hasEdit",a.auth.hasPermissionTo("MOD_TIPO_AVAL_EDT")),t.xp6(1),t.Q6J("ngIf",!a.selectable),t.xp6(1),t.Q6J("deleted",a.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",a.filter)("where",a.filterWhere)("submit",a.filterSubmit.bind(a))("collapseChange",a.filterCollapseChange.bind(a))("collapsed",a.filterCollapsed),t.xp6(2),t.Q6J("size",12)("label","Nome "+a.lex.translate("tipo de avalia\xe7\xe3o"))("control",a.filter.controls.nome),t.uIk("maxlength",250),t.xp6(2),t.Q6J("template",l),t.xp6(3),t.Q6J("template",s),t.xp6(3),t.Q6J("onEdit",a.edit)("options",a.options),t.xp6(1),t.Q6J("rows",a.rowsLimit)}},dependencies:[r.sg,r.O5,h.M,O.a,J.b,at.z,it.n,et.Q,j.m,C.F]})}const dt=[{path:"",component:f,canActivate:[p.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Tipos de Avalia\xe7\xe3o"}},{path:"new",component:c,canActivate:[p.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Tipo de Avalia\xe7\xe3o",modal:!0}},{path:":id/edit",component:c,canActivate:[p.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Tipo de Avalia\xe7\xe3o",modal:!0}},{path:":id/consult",component:c,canActivate:[p.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Consulta a Tipo de Avalia\xe7\xe3o",modal:!0}}];class v{static#t=this.\u0275fac=function(o){return new(o||v)};static#o=this.\u0275mod=t.oAB({type:v});static#a=this.\u0275inj=t.cJS({imports:[b.Bz.forChild(dt),b.Bz]})}var ft=n(54218),vt=n(72133);class g{static#t=this.\u0275fac=function(o){return new(o||g)};static#o=this.\u0275mod=t.oAB({type:g});static#a=this.\u0275inj=t.cJS({imports:[r.ez,ft.K,vt.UX,v]})}}}]);