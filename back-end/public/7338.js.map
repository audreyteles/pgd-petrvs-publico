{"version":3,"file":"7338.js","mappings":"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","sources":["./src/app/modules/gestao/atividade/atividade.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AbstractControl, FormControl } from '@angular/forms';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { Afastamento } from 'src/app/models/afastamento.model';\r\nimport { Atividade, Checklist } from 'src/app/models/atividade.model';\r\nimport { Base } from 'src/app/models/base.model';\r\nimport { Comentario } from 'src/app/models/comentario';\r\nimport { PlanoTrabalhoConsolidacao } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoAtividade } from 'src/app/models/tipo-atividade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { CalendarService, FeriadoList } from 'src/app/services/calendar.service';\r\nimport { ComentarioService } from 'src/app/services/comentario.service';\r\nimport { DialogService } from 'src/app/services/dialog.service';\r\nimport { LexicalService } from 'src/app/services/lexical.service';\r\nimport { LookupService } from 'src/app/services/lookup.service';\r\nimport { NavigateService, RouteMetadata } from 'src/app/services/navigate.service';\r\nimport { UtilService } from 'src/app/services/util.service';\r\n\r\nexport type ExtraAtividade = {\r\n  planos_trabalho: { [plano_id: string]: PlanoTrabalho },\r\n  afastamentos: { [usuario_id: string]: Afastamento[] },\r\n  feriados?: { [unidade_id: string]: FeriadoList }\r\n}\r\n\r\nexport type AtividadeOptionsMetadata = {\r\n  disabled?: boolean,\r\n  refreshId: (id: string) => Promise<any> | void;\r\n  removeId: (id: string) => Promise<any> | void;\r\n  refresh: () => Promise<any> | void;\r\n}\r\n\r\nexport type AtividadeConsolidacoesMetadata = {\r\n  id: string,\r\n  status: string,\r\n  data_conclusao: Date\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AtividadeService {\r\n\r\n  constructor(\r\n    public lookup: LookupService,\r\n    public lex: LexicalService,\r\n    public calendar: CalendarService,\r\n    public comentario: ComentarioService,\r\n    public auth: AuthService,\r\n    public util: UtilService,\r\n    public go: NavigateService,\r\n    public dialog: DialogService,\r\n    public dao: AtividadeDaoService\r\n  ) { }\r\n\r\n  public getStatus(row: any, consolidacao?: PlanoTrabalhoConsolidacao): BadgeButton[] {\r\n    const atividade: Atividade = row as Atividade;\r\n    const status = this.lookup.ATIVIDADE_STATUS.find(x => x.key == atividade.status) || { key: \"DESCONHECIDO\", value: \"Desconhecido\", icon: \"bi bi-question-circle\", color: \"light\" };\r\n    const consolidacaoDataInicio = this.util.setTime(consolidacao!.data_inicio, 0, 0, 0); \r\n    const consolidacaoDataFim = this.util.setTime(consolidacao!.data_fim, 23, 59, 59);\r\n    let result: BadgeButton[] = [{ data: {status: status.key, filter: true}, label: status.value, icon: status.icon!, color: status.color! }];\r\n    if (atividade.metadados?.atrasado) result.push({ data: {status: \"ATRASADO\", filter: false}, label: \"Atrasado\", icon: \"bi bi-alarm\", color: \"danger\" });\r\n    if (consolidacao && ((atividade.data_inicio && this.util.asTimestamp(atividade.data_inicio) < this.util.asTimestamp(consolidacaoDataInicio)) ||\r\n      (atividade.data_entrega && this.util.asTimestamp(atividade.data_entrega) > this.util.asTimestamp(consolidacaoDataFim)))) {\r\n      console.log(atividade.data_inicio, consolidacao.data_inicio, atividade.data_entrega, consolidacao!.data_fim);\r\n      result.push({ data: {status: \"EXTRAPOLADO\", filter: false}, label: \"Extrapolado\", icon: \"bi bi-arrow-left-right\", color: \"danger\", hint: \"Data de início ou conclusão \" + this.lex.translate(\"da Atividade\") + \" extrapola os da consolidação\" });\r\n    }\r\n    if (atividade.metadados?.arquivado) result.push({ data: {status: \"ARQUIVADO\", filter: false}, label: \"Arquivado\", icon: \"bi bi-inboxes\", color: \"danger\" });\r\n    if (atividade.metadados && JSON.stringify(atividade.metadados._status) != JSON.stringify(result)) atividade.metadados._status = result;\r\n    return atividade.metadados?._status || result;\r\n  }\r\n\r\n  public temposAtividade(row: Atividade, extra?: ExtraAtividade, despendidoClick?: (atividade: Atividade) => void): BadgeButton[] {\r\n    /* Atualiza somente a cada mudança de minuto da unidade atual */\r\n    if (row.metadados && row.metadados.extra?.lastUpdate != this.auth.unidadeHora) {\r\n      let planoTrabalho = extra?.planos_trabalho[row.plano_trabalho_id!] || row.plano_trabalho;\r\n      let tempos: BadgeButton[] = [\r\n        { color: \"light\", hint: this.lex.translate(\"Data de distribuição\"), icon: \"bi bi-file-earmark-plus\", label: this.dao.getDateTimeFormatted(row.data_distribuicao) },\r\n        { color: \"light\", hint: this.lex.translate(\"Prazo de entrega\"), icon: \"bi bi-calendar-check\", label: this.dao.getDateTimeFormatted(row.data_estipulada_entrega) }\r\n      ];\r\n      if (planoTrabalho?.tipo_modalidade?.atividade_esforco) tempos.push({ color: \"light\", hint: this.lex.translate(\"Esforço\"), icon: \"bi bi-stopwatch\", label: (row.esforco ? this.util.decimalToTimerFormated(row.esforco, true) + \" \" + this.lex.translate(\"esforço\") : \"Sem \" + this.lex.translate(\"esforço\"))});\r\n      if (row.metadados.concluido) tempos.push({ color: \"light\", hint: \"Data de entrega realizada\", icon: \"bi bi-check-circle\", label: this.dao.getDateTimeFormatted(row.data_entrega) });\r\n      if (row.metadados.iniciado && !!planoTrabalho?.tipo_modalidade?.atividade_tempo_despendido) {\r\n        const cargaHoraria = planoTrabalho?.carga_horaria || 0;\r\n        const afastamentos = extra?.afastamentos[row.usuario_id!] || [];\r\n        const despendido = row.metadados.concluido ? (row.tempo_despendido || 0) : this.calendar.horasUteis(row.data_inicio!, this.auth.hora, cargaHoraria, row.unidade!, \"ENTREGA\", row.pausas, afastamentos);\r\n        tempos.push({ color: (despendido > row.esforco ? \"warning\" : \"light\"), hint: \"Tempo despendido\", icon: \"bi bi-hourglass-split\", label: this.util.decimalToTimerFormated(despendido, true) + \" despendido\", click: !row.metadados.concluido ? despendidoClick : undefined, data: row });\r\n      }\r\n      if (!row.metadados.concluido && this.util.asTimestamp(row.data_estipulada_entrega) < this.auth.hora.getTime()) {\r\n        const atrasado = this.calendar.horasAtraso(row.data_estipulada_entrega, row.unidade!);\r\n        tempos.push({ color: \"danger\", hint: \"Tempo de atraso\", icon: \"bi bi-alarm\", label: this.util.decimalToTimerFormated(atrasado, true) + \" atrasado\" });\r\n      }\r\n      row.metadados.extra = row.metadados.extra || {};\r\n      row.metadados.extra.lastUpdate = this.auth.unidadeHora;\r\n      row.metadados.extra.tempos = tempos;\r\n    }\r\n    return row.metadados?.extra?.tempos || [];\r\n  }\r\n\r\n  public onIdClick(numero: number) {\r\n    this.util.copyToClipboard(numero.toString());\r\n  }\r\n\r\n  public buildEtiquetas(unidade?: Unidade, tipoAtividade?: TipoAtividade) {\r\n    return this.util.merge(tipoAtividade?.etiquetas, unidade?.etiquetas, (a, b) => a.key == b.key);\r\n  }\r\n\r\n  public buildChecklist(tipoAtividade?: TipoAtividade, checklistControl?: AbstractControl) {\r\n    let checks: Checklist[] = this.util.merge((tipoAtividade?.checklist || []).map(a => {\r\n      return {\r\n        id: a.key,\r\n        texto: a.value,\r\n        checked: false\r\n      } as Checklist;\r\n    }), (checklistControl?.value || []).filter((b: Checklist) => b.checked), (a: Checklist, b: Checklist) => {\r\n      if(a.id == b.id) {\r\n        a.checked = b.checked;\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n    if(checklistControl) checklistControl.setValue(checks);\r\n    return checks;\r\n  }\r\n\r\n  public comentarioAtividade(tipoAtividade?: TipoAtividade, comentariosControl?: AbstractControl) {\r\n    let comentarios: Comentario[] = comentariosControl?.value || [];\r\n    const index = comentarios.findIndex(x => x.tipo == \"TIPO_ATIVIDADE\");\r\n    if(index >= 0) {\r\n      if(comentarios[index]._status == \"ADD\") {\r\n        comentarios.splice(index, 1);\r\n      } else {\r\n        comentarios[index]._status == \"DELETE\";\r\n      }\r\n    }\r\n    if(tipoAtividade?.comentario?.length) {\r\n      const comentario = new Comentario();\r\n      comentario.id = this.dao!.generateUuid();\r\n      comentario.path = \"\";\r\n      comentario.texto = tipoAtividade.comentario;\r\n      comentario.data_comentario = this.auth.hora;\r\n      comentario.usuario_id = this.auth.usuario!.id;\r\n      comentario.comentario_id = null;\r\n      comentario.tipo = \"TIPO_ATIVIDADE\";\r\n      comentario.usuario = this.auth.usuario;\r\n      comentario._status = \"ADD\";\r\n      comentarios.push(comentario);\r\n      comentarios = this.comentario.orderComentarios(comentarios);\r\n      if(comentariosControl) comentariosControl.setValue(comentarios);\r\n    }\r\n  }\r\n\r\n  public modalRefreshId(metadata: AtividadeOptionsMetadata, entity: Base): RouteMetadata {\r\n    return { modal: true, modalClose: async (modalResult?: string) => metadata.refreshId(entity.id) };\r\n  }\r\n\r\n  public modalRefresh(metadata: AtividadeOptionsMetadata) {\r\n    return { modal: true, modalClose: metadata.refresh };\r\n  }\r\n\r\n  public delete = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\").then(confirm => {\r\n      if(confirm) {\r\n        this.dao!.delete(atividade).then(() => {\r\n          metadata.removeId(atividade.id);\r\n          this.dialog.topAlert(\"Registro excluído com sucesso!\", 5000);\r\n        }).catch((error) => this.dialog.alert(\"Erro\", \"Erro ao excluir: \" + (error?.message ? error?.message : error)));\r\n      }\r\n    });\r\n  }\r\n\r\n  public cancelarInicio = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dialog.confirm(\"Cancelar inicio ?\", \"Deseja realmente cancelar a inicialização?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.cancelarInicio(atividade.id).then(() => {\r\n          metadata.refreshId(atividade.id);\r\n          this.dialog.topAlert(\"Cancelado a inicialização com sucesso!\", 5000);\r\n        }).catch((error) => this.dialog.alert(\"Erro\", \"Erro ao cancelar inicio: \" + error?.message ? error?.message : error));\r\n      }\r\n    });\r\n  }\r\n\r\n  public cancelarConclusao = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dialog.confirm(\"Cancelar conclusão ?\", \"Deseja realmente cancelar a conclusão?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.cancelarConclusao(atividade.id).then(() => {\r\n          metadata.refreshId(atividade.id);\r\n          this.dialog.topAlert(\"Cancelado a conclusão com sucesso!\", 5000);\r\n        }).catch((error) => this.dialog.alert(\"Erro\", \"Erro ao cancelar conclusão: \" + error?.message ? error?.message : error));\r\n      }\r\n    });\r\n  }\r\n\r\n  public desarquivar = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dao!.arquivar(atividade.id, false).then(() => {\r\n      metadata.refreshId(atividade.id);\r\n    }).catch(error => this.dialog.alert(\"Erro\", \"Erro ao cancelar inicio: \" + error?.message ? error?.message : error));\r\n  }\r\n\r\n  public arquivar = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dialog.confirm(\"Arquivar?\", \"Deseja realmente arquivar a atividade?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.arquivar(atividade.id, true).then(() => {\r\n          metadata.refreshId(atividade.id);\r\n        }).catch(error => this.dialog.alert(\"Erro\", \"Erro ao cancelar inicio: \" + error?.message ? error?.message : error));\r\n      }\r\n    });\r\n  }\r\n\r\n  public lastConsolidacao(consolidacoes: AtividadeConsolidacoesMetadata[]): AtividadeConsolidacoesMetadata | undefined {\r\n    return consolidacoes?.reduce((a: AtividadeConsolidacoesMetadata | undefined, v) => a = !a || this.util.asTimestamp(v.data_conclusao) > this.util.asTimestamp(a.data_conclusao) ? v : a, undefined);\r\n  }\r\n\r\n  public dynamicOptions = (row: any, metadata?: any): ToolbarButton[] => {\r\n    let result: ToolbarButton[] = [];\r\n    let atividade: Atividade = row as Atividade;\r\n    const isGestor = this.auth.usuario?.id == atividade.unidade?.gestor?.id || atividade.unidade?.gestores_substitutos?.map(x => x.id).includes(this.auth.usuario?.id || \"\");\r\n    const isDemandante = this.auth.usuario?.id == atividade.demandante_id;\r\n    const isResponsavel = this.auth.usuario?.id == atividade.usuario_id;\r\n    const lastConsolidacao = this.lastConsolidacao(row.metadados?.consolidacoes);\r\n    const BOTAO_INFORMACOES = { label: \"Informações\", icon: \"bi bi-info-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'consult'] }, { modal: true }) };\r\n    const BOTAO_COMENTARIOS = { label: \"Comentários\", icon: \"bi bi-chat-left-quote\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['uteis', 'comentarios', 'ATIVIDADE', atividade.id, 'new'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CLONAR = { label: \"Clonar\", icon: \"bi bi-stickies\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'clonar'] }, this.modalRefresh(metadata)) };\r\n    const BOTAO_ALTERAR = { label: \"Alterar atividade\", icon: \"bi bi-pencil-square\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'edit'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_EXCLUIR = { label: \"Excluir atividade\", icon: \"bi bi-trash\", onClick: this.delete.bind(this, metadata) };\r\n    const BOTAO_PRORROGAR_PRAZO = { label: \"Prorrogar prazo\", icon: \"bi bi-skip-end-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'prorrogar'] }, this.modalRefreshId(metadata, atividade))};\r\n    const BOTAO_INICIAR = { label: \"Iniciar\", id: \"INICIADO\", icon: \"bi bi-play-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'iniciar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CANCELAR_INICIO = { label: \"Cancelar inicio\", id: \"NAOINICIADO\", icon: \"bi bi-backspace\", onClick: this.cancelarInicio.bind(this, metadata) };\r\n    const BOTAO_ALTERAR_INICIO = { label: \"Alterar inicio\", icon: \"bi bi-play-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'iniciar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_PAUSAR = { label: \"Pausar\", id: \"PAUSADO\", icon: \"bi bi-pause-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'pausar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_REINICIAR = { label: \"Reiniciar\", id: \"INICIADO\", icon: \"bi bi-play-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'pausar'], params: { reiniciar: true } }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CONCLUIR = { label: \"Concluir\", id: \"CONCLUIDO\", icon: \"bi bi-check-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_ALTERAR_CONCLUSAO = { label: \"Alterar conclusão\", icon: \"bi bi-check-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CANCELAR_CONCLUSAO = { label: \"Cancelar conclusão\", id: \"INICIADO\", icon: \"bi bi-backspace\", onClick: this.cancelarConclusao.bind(this, metadata) };\r\n    const BOTAO_ARQUIVAR = { label: \"Arquivar\", icon: \"bi bi-inboxes\", onClick: this.arquivar.bind(this, metadata) };\r\n    const BOTAO_DESARQUIVAR = { label: \"Desarquivar\", icon: \"bi bi-reply\", onClick: this.desarquivar.bind(this, metadata) };\r\n\r\n    if(!metadata?.disabled) {\r\n      result.push(BOTAO_INFORMACOES);\r\n      if (isResponsavel || isGestor || isDemandante) result.push(BOTAO_COMENTARIOS);\r\n      result.push(BOTAO_CLONAR);\r\n      if (atividade.metadados?.arquivado) { /* Arquivado */\r\n        if (isGestor || isResponsavel) result.push(BOTAO_DESARQUIVAR);\r\n      } else if (!atividade.metadados?.iniciado) {\r\n        if (isResponsavel || (atividade.usuario_id == null) || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) { /* Não iniciado */\r\n          result.push(BOTAO_INICIAR);\r\n        }\r\n        if (isGestor || isDemandante || this.auth.hasPermissionTo('MOD_DMD_USERS_ALT')) {\r\n          result.push(BOTAO_ALTERAR);\r\n        }\r\n        if (isGestor || isDemandante || this.auth.hasPermissionTo('MOD_DMD_USERS_EXCL') || this.auth.hasPermissionTo('MOD_DMD_NI_EXCL')) {\r\n          if (result.length) result.push({ divider: true });\r\n          result.push(BOTAO_EXCLUIR);\r\n        }\r\n      } else if (atividade.metadados?.concluido) { /* Concluído -> Gestor ou substituto pode avaliar */\r\n        if (isGestor || isResponsavel) result.push(BOTAO_ARQUIVAR);\r\n        if(lastConsolidacao?.status != \"CONCLUIDO\") { /* (RN_CSLD_9) */\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_ALT_CONCL')) {\r\n            result.push(BOTAO_ALTERAR_CONCLUSAO);\r\n          }\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CANC_CONCL') ) {\r\n            if (result.length) result.push({ divider: true });\r\n            result.push(BOTAO_CANCELAR_CONCLUSAO);\r\n          }\r\n        }\r\n      } else if (atividade.metadados?.iniciado) { /* Iniciado */\r\n        if (atividade.metadados?.pausado) {\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) { /* Iniciada e Pausada */\r\n            result.push(BOTAO_REINICIAR);\r\n          }\r\n        } else { /* Iniciada e não Suspensa */\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CONCL')) result.push(BOTAO_CONCLUIR);\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_PAUSA')) result.push(BOTAO_PAUSAR);\r\n          if (!lastConsolidacao || lastConsolidacao?.status == \"INCLUIDO\") { /* (RN_CSLD_9) */\r\n            if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CANC_INICIAR')) result.push(BOTAO_CANCELAR_INICIO);\r\n            if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) result.push(BOTAO_ALTERAR_INICIO);\r\n          }\r\n        }\r\n        if (isGestor || isDemandante || this.auth.hasPermissionTo('MOD_DMD_USERS_PPRZO')) {\r\n          result.push(BOTAO_PRORROGAR_PRAZO);\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public dynamicButtons = (row: any, metadata?: any): ToolbarButton[] => {\r\n    let result: ToolbarButton[] = [];\r\n    let atividade: Atividade = row as Atividade;\r\n    const isGestor = this.auth.usuario?.id == atividade.unidade?.gestor?.id || atividade.unidade?.gestores_substitutos?.map(x => x.usuario_id).includes(this.auth.usuario?.id || \"\");\r\n    const isResponsavel = this.auth.usuario?.id == atividade.usuario_id;\r\n    const lastConsolidacao = this.lastConsolidacao(row.metadados?.consolidacoes);\r\n    const BOTAO_ALTERAR_AVALIACAO = { hint: \"Alterar avaliação\", icon: \"bi bi-check-all\", color: \"btn-outline-danger\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'avaliar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_INFORMACOES = { label: \"Informações\", icon: \"bi bi-info-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'consult'] }, { modal: true }) };\r\n    const BOTAO_INICIAR = { hint: \"Iniciar\", icon: \"bi bi-play-circle\", color: \"btn-outline-secondary\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'iniciar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_REINICIAR = { hint: \"Reiniciar\", icon: \"bi bi-play-circle\", color: \"btn-outline-secondary\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'pausar'], params: { reiniciar: true } }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CONCLUIR = { hint: \"Concluir\", icon: \"bi bi-check\", color: \"btn-outline-success\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_ARQUIVAR = { hint: \"Arquivar\", icon: \"bi bi-inboxes\", onClick: this.arquivar.bind(this, metadata) };\r\n    const BOTAO_DESARQUIVAR = { hint: \"Desarquivar\", icon: \"bi bi-reply\", onClick: this.desarquivar.bind(this, metadata) };\r\n    const BOTAO_ALTERAR_CONCLUSAO = { hint: \"Alterar conclusão\", icon: \"bi bi-check-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(metadata, atividade)) };\r\n\r\n    if(!metadata?.disabled) {\r\n      if (!atividade.metadados?.iniciado) { /* Não iniciado */\r\n        if (isResponsavel || (atividade.usuario_id == null) || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) { /* Usuário da atividade é o mesmo logado */\r\n          result.push(BOTAO_INICIAR);\r\n        }\r\n      } else if (atividade.metadados?.concluido) { /* Concluído */\r\n        if (isGestor || isResponsavel) {\r\n          result.push(atividade.metadados?.arquivado ? BOTAO_DESARQUIVAR : BOTAO_ARQUIVAR);\r\n        } else if (lastConsolidacao?.status != \"CONCLUIDO\" && (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_ALT_CONCL'))) { /* (RN_CSLD_9) */\r\n          result.push(BOTAO_ALTERAR_CONCLUSAO);\r\n        }\r\n      } else if (atividade.metadados?.iniciado) { /* Iniciado */\r\n        if (atividade.metadados?.pausado && isResponsavel) { /* Iniciada e Pausada */\r\n          result.push(BOTAO_REINICIAR);\r\n        } else if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CONCL')) { /* Iniciada e não Suspensa */\r\n          result.push(BOTAO_CONCLUIR);\r\n        }\r\n      }\r\n    }\r\n    if(!result.length) result.push(BOTAO_INFORMACOES);\r\n    return result;\r\n  }\r\n}\r\n"],"names":["Comentario","AtividadeService","constructor","lookup","lex","calendar","comentario","auth","util","go","dialog","dao","delete","metadata","atividade","confirm","then","removeId","id","topAlert","catch","error","alert","message","cancelarInicio","refreshId","cancelarConclusao","desarquivar","arquivar","dynamicOptions","row","result","isGestor","usuario","unidade","gestor","gestores_substitutos","map","x","includes","isDemandante","demandante_id","isResponsavel","usuario_id","lastConsolidacao","metadados","consolidacoes","BOTAO_INFORMACOES","label","icon","onClick","navigate","route","modal","BOTAO_COMENTARIOS","modalRefreshId","BOTAO_CLONAR","modalRefresh","BOTAO_ALTERAR","BOTAO_EXCLUIR","bind","BOTAO_PRORROGAR_PRAZO","BOTAO_INICIAR","BOTAO_CANCELAR_INICIO","BOTAO_ALTERAR_INICIO","BOTAO_PAUSAR","BOTAO_REINICIAR","params","reiniciar","BOTAO_CONCLUIR","BOTAO_ALTERAR_CONCLUSAO","BOTAO_CANCELAR_CONCLUSAO","BOTAO_ARQUIVAR","BOTAO_DESARQUIVAR","disabled","push","arquivado","iniciado","hasPermissionTo","length","divider","concluido","status","pausado","dynamicButtons","BOTAO_ALTERAR_AVALIACAO","hint","color","getStatus","consolidacao","ATIVIDADE_STATUS","find","key","value","consolidacaoDataInicio","setTime","data_inicio","consolidacaoDataFim","data_fim","data","filter","atrasado","asTimestamp","data_entrega","console","log","translate","JSON","stringify","_status","temposAtividade","extra","despendidoClick","lastUpdate","unidadeHora","planoTrabalho","planos_trabalho","plano_trabalho_id","plano_trabalho","tempos","getDateTimeFormatted","data_distribuicao","data_estipulada_entrega","tipo_modalidade","atividade_esforco","esforco","decimalToTimerFormated","atividade_tempo_despendido","cargaHoraria","carga_horaria","afastamentos","despendido","tempo_despendido","horasUteis","hora","pausas","click","undefined","getTime","horasAtraso","onIdClick","numero","copyToClipboard","toString","buildEtiquetas","tipoAtividade","merge","etiquetas","a","b","buildChecklist","checklistControl","checks","checklist","texto","checked","setValue","comentarioAtividade","comentariosControl","comentarios","index","findIndex","tipo","splice","generateUuid","path","data_comentario","comentario_id","orderComentarios","entity","modalClose","_ref","_asyncToGenerator","modalResult","_x","apply","arguments","refresh","reduce","v","data_conclusao","_","i0","ɵɵinject","i1","LookupService","i2","LexicalService","i3","CalendarService","i4","ComentarioService","i5","AuthService","i6","UtilService","i7","NavigateService","i8","DialogService","i9","AtividadeDaoService","_2","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}