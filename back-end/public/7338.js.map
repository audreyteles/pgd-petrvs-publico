{"version":3,"file":"7338.js","mappings":"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","sources":["./src/app/modules/gestao/atividade/atividade.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AbstractControl, FormControl } from '@angular/forms';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { Afastamento } from 'src/app/models/afastamento.model';\r\nimport { Atividade, Checklist } from 'src/app/models/atividade.model';\r\nimport { Base } from 'src/app/models/base.model';\r\nimport { Comentario } from 'src/app/models/comentario';\r\nimport { PlanoTrabalhoConsolidacao } from 'src/app/models/plano-trabalho-consolidacao.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoAtividade } from 'src/app/models/tipo-atividade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { CalendarService, FeriadoList } from 'src/app/services/calendar.service';\r\nimport { ComentarioService } from 'src/app/services/comentario.service';\r\nimport { DialogService } from 'src/app/services/dialog.service';\r\nimport { LexicalService } from 'src/app/services/lexical.service';\r\nimport { LookupService } from 'src/app/services/lookup.service';\r\nimport { NavigateService, RouteMetadata } from 'src/app/services/navigate.service';\r\nimport { UtilService } from 'src/app/services/util.service';\r\n\r\nexport type ExtraAtividade = {\r\n  planos_trabalho: { [plano_id: string]: PlanoTrabalho },\r\n  afastamentos: { [usuario_id: string]: Afastamento[] },\r\n  feriados?: { [unidade_id: string]: FeriadoList }\r\n}\r\n\r\nexport type AtividadeOptionsMetadata = {\r\n  disabled?: boolean,\r\n  refreshId: (id: string) => Promise<any> | void;\r\n  removeId: (id: string) => Promise<any> | void;\r\n  refresh: () => Promise<any> | void;\r\n}\r\n\r\nexport type AtividadeConsolidacoesMetadata = {\r\n  id: string,\r\n  status: string,\r\n  data_conclusao: Date\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AtividadeService {\r\n\r\n  constructor(\r\n    public lookup: LookupService,\r\n    public lex: LexicalService,\r\n    public calendar: CalendarService,\r\n    public comentario: ComentarioService,\r\n    public auth: AuthService,\r\n    public util: UtilService,\r\n    public go: NavigateService,\r\n    public dialog: DialogService,\r\n    public dao: AtividadeDaoService\r\n  ) { }\r\n\r\n  public getStatus(row: any, consolidacao?: PlanoTrabalhoConsolidacao): BadgeButton[] {\r\n    const atividade: Atividade = row as Atividade;\r\n    const status = this.lookup.ATIVIDADE_STATUS.find(x => x.key == atividade.status) || { key: \"DESCONHECIDO\", value: \"Desconhecido\", icon: \"bi bi-question-circle\", color: \"light\" };\r\n    const consolidacaoDataInicio = this.util.setTime(consolidacao!.data_inicio, 0, 0, 0); \r\n    const consolidacaoDataFim = this.util.setTime(consolidacao!.data_fim, 23, 59, 59);\r\n    let result: BadgeButton[] = [{ data: {status: status.key, filter: true}, label: status.value, icon: status.icon!, color: status.color! }];\r\n    if (atividade.metadados?.atrasado) result.push({ data: {status: \"ATRASADO\", filter: false}, label: \"Atrasado\", icon: \"bi bi-alarm\", color: \"danger\" });\r\n    if (consolidacao && ((atividade.data_inicio && this.util.asTimestamp(atividade.data_inicio) < this.util.asTimestamp(consolidacaoDataInicio)) ||\r\n      (atividade.data_entrega && this.util.asTimestamp(atividade.data_entrega) > this.util.asTimestamp(consolidacaoDataFim)))) {\r\n      console.log(atividade.data_inicio, consolidacao.data_inicio, atividade.data_entrega, consolidacao!.data_fim);\r\n      result.push({ data: {status: \"EXTRAPOLADO\", filter: false}, label: \"Extrapolado\", icon: \"bi bi-arrow-left-right\", color: \"danger\", hint: \"Data de início ou conclusão \" + this.lex.translate(\"da Atividade\") + \" extrapola os da consolidação\" });\r\n    }\r\n    if (atividade.metadados?.arquivado) result.push({ data: {status: \"ARQUIVADO\", filter: false}, label: \"Arquivado\", icon: \"bi bi-inboxes\", color: \"danger\" });\r\n    if (atividade.metadados && JSON.stringify(atividade.metadados._status) != JSON.stringify(result)) atividade.metadados._status = result;\r\n    return atividade.metadados?._status || result;\r\n  }\r\n\r\n  public temposAtividade(row: Atividade, extra?: ExtraAtividade, despendidoClick?: (atividade: Atividade) => void): BadgeButton[] {\r\n    /* Atualiza somente a cada mudança de minuto da unidade atual */\r\n    if (row.metadados && row.metadados.extra?.lastUpdate != this.auth.unidadeHora) {\r\n      let planoTrabalho = extra?.planos_trabalho[row.plano_trabalho_id!] || row.plano_trabalho;\r\n      let tempos: BadgeButton[] = [\r\n        { color: \"light\", hint: this.lex.translate(\"Data de distribuição\"), icon: \"bi bi-file-earmark-plus\", label: this.dao.getDateTimeFormatted(row.data_distribuicao) },\r\n        { color: \"light\", hint: this.lex.translate(\"Prazo de entrega\"), icon: \"bi bi-calendar-check\", label: this.dao.getDateTimeFormatted(row.data_estipulada_entrega) }\r\n      ];\r\n      if (planoTrabalho?.tipo_modalidade?.atividade_esforco) tempos.push({ color: \"light\", hint: this.lex.translate(\"Esforço\"), icon: \"bi bi-stopwatch\", label: (row.esforco ? this.util.decimalToTimerFormated(row.esforco, true) + \" \" + this.lex.translate(\"esforço\") : \"Sem \" + this.lex.translate(\"esforço\"))});\r\n      if (row.metadados.concluido) tempos.push({ color: \"light\", hint: \"Data de entrega realizada\", icon: \"bi bi-check-circle\", label: this.dao.getDateTimeFormatted(row.data_entrega) });\r\n      if (row.metadados.iniciado && !!planoTrabalho?.tipo_modalidade?.atividade_tempo_despendido) {\r\n        const cargaHoraria = planoTrabalho?.carga_horaria || 0;\r\n        const afastamentos = extra?.afastamentos[row.usuario_id!] || [];\r\n        const despendido = row.metadados.concluido ? (row.tempo_despendido || 0) : this.calendar.horasUteis(row.data_inicio!, this.auth.hora, cargaHoraria, row.unidade!, \"ENTREGA\", row.pausas, afastamentos);\r\n        tempos.push({ color: (despendido > row.esforco ? \"warning\" : \"light\"), hint: \"Tempo despendido\", icon: \"bi bi-hourglass-split\", label: this.util.decimalToTimerFormated(despendido, true) + \" despendido\", click: !row.metadados.concluido ? despendidoClick : undefined, data: row });\r\n      }\r\n      if (!row.metadados.concluido && this.util.asTimestamp(row.data_estipulada_entrega) < this.auth.hora.getTime()) {\r\n        const atrasado = this.calendar.horasAtraso(row.data_estipulada_entrega, row.unidade!);\r\n        tempos.push({ color: \"danger\", hint: \"Tempo de atraso\", icon: \"bi bi-alarm\", label: this.util.decimalToTimerFormated(atrasado, true) + \" atrasado\" });\r\n      }\r\n      row.metadados.extra = row.metadados.extra || {};\r\n      row.metadados.extra.lastUpdate = this.auth.unidadeHora;\r\n      row.metadados.extra.tempos = tempos;\r\n    }\r\n    return row.metadados?.extra?.tempos || [];\r\n  }\r\n\r\n  public onIdClick(numero: number) {\r\n    this.util.copyToClipboard(numero.toString());\r\n  }\r\n\r\n  public buildEtiquetas(unidade?: Unidade, tipoAtividade?: TipoAtividade) {\r\n    return this.util.merge(tipoAtividade?.etiquetas, unidade?.etiquetas, (a, b) => a.key == b.key);\r\n  }\r\n\r\n  public buildChecklist(tipoAtividade?: TipoAtividade, checklistControl?: AbstractControl) {\r\n    let checks: Checklist[] = this.util.merge((tipoAtividade?.checklist || []).map(a => {\r\n      return {\r\n        id: a.key,\r\n        texto: a.value,\r\n        checked: false\r\n      } as Checklist;\r\n    }), (checklistControl?.value || []).filter((b: Checklist) => b.checked), (a: Checklist, b: Checklist) => {\r\n      if(a.id == b.id) {\r\n        a.checked = b.checked;\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n    if(checklistControl) checklistControl.setValue(checks);\r\n    return checks;\r\n  }\r\n\r\n  public comentarioAtividade(tipoAtividade?: TipoAtividade, comentariosControl?: AbstractControl) {\r\n    let comentarios: Comentario[] = comentariosControl?.value || [];\r\n    const index = comentarios.findIndex(x => x.tipo == \"TIPO_ATIVIDADE\");\r\n    if(index >= 0) {\r\n      if(comentarios[index]._status == \"ADD\") {\r\n        comentarios.splice(index, 1);\r\n      } else {\r\n        comentarios[index]._status == \"DELETE\";\r\n      }\r\n    }\r\n    if(tipoAtividade?.comentario?.length) {\r\n      const comentario = new Comentario();\r\n      comentario.id = this.dao!.generateUuid();\r\n      comentario.path = \"\";\r\n      comentario.texto = tipoAtividade.comentario;\r\n      comentario.data_comentario = this.auth.hora;\r\n      comentario.usuario_id = this.auth.usuario!.id;\r\n      comentario.comentario_id = null;\r\n      comentario.tipo = \"TIPO_ATIVIDADE\";\r\n      comentario.usuario = this.auth.usuario;\r\n      comentario._status = \"ADD\";\r\n      comentarios.push(comentario);\r\n      comentarios = this.comentario.orderComentarios(comentarios);\r\n      if(comentariosControl) comentariosControl.setValue(comentarios);\r\n    }\r\n  }\r\n\r\n  public modalRefreshId(metadata: AtividadeOptionsMetadata, entity: Base): RouteMetadata {\r\n    return { modal: true, modalClose: async (modalResult?: string) => metadata.refreshId(entity.id) };\r\n  }\r\n\r\n  public modalRefresh(metadata: AtividadeOptionsMetadata) {\r\n    return { modal: true, modalClose: metadata.refresh };\r\n  }\r\n\r\n  public delete = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\").then(confirm => {\r\n      if(confirm) {\r\n        this.dao!.delete(atividade).then(() => {\r\n          metadata.removeId(atividade.id);\r\n          this.dialog.topAlert(\"Registro excluído com sucesso!\", 5000);\r\n        }).catch((error) => this.dialog.alert(\"Erro\", \"Erro ao excluir: \" + (error?.message ? error?.message : error)));\r\n      }\r\n    });\r\n  }\r\n\r\n  public cancelarInicio = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dialog.confirm(\"Cancelar inicio ?\", \"Deseja realmente cancelar a inicialização?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.cancelarInicio(atividade.id).then(() => {\r\n          metadata.refreshId(atividade.id);\r\n          this.dialog.topAlert(\"Cancelado a inicialização com sucesso!\", 5000);\r\n        }).catch((error) => this.dialog.alert(\"Erro\", \"Erro ao cancelar inicio: \" + error?.message ? error?.message : error));\r\n      }\r\n    });\r\n  }\r\n\r\n  public cancelarConclusao = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dialog.confirm(\"Cancelar conclusão ?\", \"Deseja realmente cancelar a conclusão?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.cancelarConclusao(atividade.id).then(() => {\r\n          metadata.refreshId(atividade.id);\r\n          this.dialog.topAlert(\"Cancelado a conclusão com sucesso!\", 5000);\r\n        }).catch((error) => this.dialog.alert(\"Erro\", \"Erro ao cancelar conclusão: \" + error?.message ? error?.message : error));\r\n      }\r\n    });\r\n  }\r\n\r\n  public desarquivar = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dao!.arquivar(atividade.id, false).then(() => {\r\n      metadata.refreshId(atividade.id);\r\n    }).catch(error => this.dialog.alert(\"Erro\", \"Erro ao cancelar inicio: \" + error?.message ? error?.message : error));\r\n  }\r\n\r\n  public arquivar = (metadata: AtividadeOptionsMetadata, atividade: Atividade) => {\r\n    this.dialog.confirm(\"Arquivar?\", \"Deseja realmente arquivar a atividade?\").then(confirm => {\r\n      if (confirm) {\r\n        this.dao!.arquivar(atividade.id, true).then(() => {\r\n          metadata.refreshId(atividade.id);\r\n        }).catch(error => this.dialog.alert(\"Erro\", \"Erro ao cancelar inicio: \" + error?.message ? error?.message : error));\r\n      }\r\n    });\r\n  }\r\n\r\n  public lastConsolidacao(consolidacoes: AtividadeConsolidacoesMetadata[]): AtividadeConsolidacoesMetadata | undefined {\r\n    return consolidacoes?.reduce((a: AtividadeConsolidacoesMetadata | undefined, v) => a = !a || this.util.asTimestamp(v.data_conclusao) > this.util.asTimestamp(a.data_conclusao) ? v : a, undefined);\r\n  }\r\n\r\n  public dynamicOptions = (row: any, metadata?: any): ToolbarButton[] => {\r\n    let result: ToolbarButton[] = [];\r\n    let atividade: Atividade = row as Atividade;\r\n    const isGestor = this.auth.usuario?.id == atividade.unidade?.gestor?.id || this.auth.usuario?.id == atividade.unidade?.gestor_substituto?.id;\r\n    const isDemandante = this.auth.usuario?.id == atividade.demandante_id;\r\n    const isResponsavel = this.auth.usuario?.id == atividade.usuario_id;\r\n    const lastConsolidacao = this.lastConsolidacao(row.metadados?.consolidacoes);\r\n    const BOTAO_INFORMACOES = { label: \"Informações\", icon: \"bi bi-info-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'consult'] }, { modal: true }) };\r\n    const BOTAO_COMENTARIOS = { label: \"Comentários\", icon: \"bi bi-chat-left-quote\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['uteis', 'comentarios', 'ATIVIDADE', atividade.id, 'new'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CLONAR = { label: \"Clonar\", icon: \"bi bi-stickies\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'clonar'] }, this.modalRefresh(metadata)) };\r\n    const BOTAO_ALTERAR = { label: \"Alterar atividade\", icon: \"bi bi-pencil-square\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'edit'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_EXCLUIR = { label: \"Excluir atividade\", icon: \"bi bi-trash\", onClick: this.delete.bind(this, metadata) };\r\n    const BOTAO_PRORROGAR_PRAZO = { label: \"Prorrogar prazo\", icon: \"bi bi-skip-end-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'prorrogar'] }, this.modalRefreshId(metadata, atividade))};\r\n    const BOTAO_INICIAR = { label: \"Iniciar\", id: \"INICIADO\", icon: \"bi bi-play-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'iniciar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CANCELAR_INICIO = { label: \"Cancelar inicio\", id: \"NAOINICIADO\", icon: \"bi bi-backspace\", onClick: this.cancelarInicio.bind(this, metadata) };\r\n    const BOTAO_ALTERAR_INICIO = { label: \"Alterar inicio\", icon: \"bi bi-play-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'iniciar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_PAUSAR = { label: \"Pausar\", id: \"PAUSADO\", icon: \"bi bi-pause-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'pausar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_REINICIAR = { label: \"Reiniciar\", id: \"INICIADO\", icon: \"bi bi-play-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'pausar'], params: { reiniciar: true } }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CONCLUIR = { label: \"Concluir\", id: \"CONCLUIDO\", icon: \"bi bi-check-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_ALTERAR_CONCLUSAO = { label: \"Alterar conclusão\", icon: \"bi bi-check-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CANCELAR_CONCLUSAO = { label: \"Cancelar conclusão\", id: \"INICIADO\", icon: \"bi bi-backspace\", onClick: this.cancelarConclusao.bind(this, metadata) };\r\n    const BOTAO_ARQUIVAR = { label: \"Arquivar\", icon: \"bi bi-inboxes\", onClick: this.arquivar.bind(this, metadata) };\r\n    const BOTAO_DESARQUIVAR = { label: \"Desarquivar\", icon: \"bi bi-reply\", onClick: this.desarquivar.bind(this, metadata) };\r\n\r\n    if(!metadata?.disabled) {\r\n      result.push(BOTAO_INFORMACOES);\r\n      if (isResponsavel || isGestor || isDemandante) result.push(BOTAO_COMENTARIOS);\r\n      result.push(BOTAO_CLONAR);\r\n      if (atividade.metadados?.arquivado) { /* Arquivado */\r\n        if (isGestor || isResponsavel) result.push(BOTAO_DESARQUIVAR);\r\n      } else if (!atividade.metadados?.iniciado) {\r\n        if (isResponsavel || (atividade.usuario_id == null) || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) { /* Não iniciado */\r\n          result.push(BOTAO_INICIAR);\r\n        }\r\n        if (isGestor || isDemandante || this.auth.hasPermissionTo('MOD_DMD_USERS_ALT')) {\r\n          result.push(BOTAO_ALTERAR);\r\n        }\r\n        if (isGestor || isDemandante || this.auth.hasPermissionTo('MOD_DMD_USERS_EXCL') || this.auth.hasPermissionTo('MOD_DMD_NI_EXCL')) {\r\n          if (result.length) result.push({ divider: true });\r\n          result.push(BOTAO_EXCLUIR);\r\n        }\r\n      } else if (atividade.metadados?.concluido) { /* Concluído -> Gestor ou substituto pode avaliar */\r\n        if (isGestor || isResponsavel) result.push(BOTAO_ARQUIVAR);\r\n        if(lastConsolidacao?.status != \"CONCLUIDO\") { /* (RN_CSLD_9) */\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_ALT_CONCL')) {\r\n            result.push(BOTAO_ALTERAR_CONCLUSAO);\r\n          }\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CANC_CONCL') ) {\r\n            if (result.length) result.push({ divider: true });\r\n            result.push(BOTAO_CANCELAR_CONCLUSAO);\r\n          }\r\n        }\r\n      } else if (atividade.metadados?.iniciado) { /* Iniciado */\r\n        if (atividade.metadados?.pausado) {\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) { /* Iniciada e Pausada */\r\n            result.push(BOTAO_REINICIAR);\r\n          }\r\n        } else { /* Iniciada e não Suspensa */\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CONCL')) result.push(BOTAO_CONCLUIR);\r\n          if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_PAUSA')) result.push(BOTAO_PAUSAR);\r\n          if (!lastConsolidacao || lastConsolidacao?.status == \"INCLUIDO\") { /* (RN_CSLD_9) */\r\n            if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CANC_INICIAR')) result.push(BOTAO_CANCELAR_INICIO);\r\n            if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) result.push(BOTAO_ALTERAR_INICIO);\r\n          }\r\n        }\r\n        if (isGestor || isDemandante || this.auth.hasPermissionTo('MOD_DMD_USERS_PPRZO')) {\r\n          result.push(BOTAO_PRORROGAR_PRAZO);\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public dynamicButtons = (row: any, metadata?: any): ToolbarButton[] => {\r\n    let result: ToolbarButton[] = [];\r\n    let atividade: Atividade = row as Atividade;\r\n    const isGestor = this.auth.usuario?.id == atividade.unidade?.gestor?.id || this.auth.usuario?.id == atividade.unidade?.gestor_substituto?.id;\r\n    const isResponsavel = this.auth.usuario?.id == atividade.usuario_id;\r\n    const lastConsolidacao = this.lastConsolidacao(row.metadados?.consolidacoes);\r\n    const BOTAO_ALTERAR_AVALIACAO = { hint: \"Alterar avaliação\", icon: \"bi bi-check-all\", color: \"btn-outline-danger\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'avaliar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_INFORMACOES = { label: \"Informações\", icon: \"bi bi-info-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'consult'] }, { modal: true }) };\r\n    const BOTAO_INICIAR = { hint: \"Iniciar\", icon: \"bi bi-play-circle\", color: \"btn-outline-secondary\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'iniciar'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_REINICIAR = { hint: \"Reiniciar\", icon: \"bi bi-play-circle\", color: \"btn-outline-secondary\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'pausar'], params: { reiniciar: true } }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_CONCLUIR = { hint: \"Concluir\", icon: \"bi bi-check\", color: \"btn-outline-success\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(metadata, atividade)) };\r\n    const BOTAO_ARQUIVAR = { hint: \"Arquivar\", icon: \"bi bi-inboxes\", onClick: this.arquivar.bind(this, metadata) };\r\n    const BOTAO_DESARQUIVAR = { hint: \"Desarquivar\", icon: \"bi bi-reply\", onClick: this.desarquivar.bind(this, metadata) };\r\n    const BOTAO_ALTERAR_CONCLUSAO = { hint: \"Alterar conclusão\", icon: \"bi bi-check-circle\", onClick: (atividade: Atividade) => this.go.navigate({ route: ['gestao', 'atividade', atividade.id, 'concluir'] }, this.modalRefreshId(metadata, atividade)) };\r\n\r\n    if(!metadata?.disabled) {\r\n      if (!atividade.metadados?.iniciado) { /* Não iniciado */\r\n        if (isResponsavel || (atividade.usuario_id == null) || this.auth.hasPermissionTo('MOD_DMD_USERS_INICIAR')) { /* Usuário da atividade é o mesmo logado */\r\n          result.push(BOTAO_INICIAR);\r\n        }\r\n      } else if (atividade.metadados?.concluido) { /* Concluído */\r\n        if (isGestor || isResponsavel) {\r\n          result.push(atividade.metadados?.arquivado ? BOTAO_DESARQUIVAR : BOTAO_ARQUIVAR);\r\n        } else if (lastConsolidacao?.status != \"CONCLUIDO\" && (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_ALT_CONCL'))) { /* (RN_CSLD_9) */\r\n          result.push(BOTAO_ALTERAR_CONCLUSAO);\r\n        }\r\n      } else if (atividade.metadados?.iniciado) { /* Iniciado */\r\n        if (atividade.metadados?.pausado && isResponsavel) { /* Iniciada e Pausada */\r\n          result.push(BOTAO_REINICIAR);\r\n        } else if (isResponsavel || this.auth.hasPermissionTo('MOD_DMD_USERS_CONCL')) { /* Iniciada e não Suspensa */\r\n          result.push(BOTAO_CONCLUIR);\r\n        }\r\n      }\r\n    }\r\n    if(!result.length) result.push(BOTAO_INFORMACOES);\r\n    return result;\r\n  }\r\n}\r\n"],"names":["Comentario","AtividadeService","constructor","lookup","lex","calendar","comentario","auth","util","go","dialog","dao","delete","metadata","atividade","confirm","then","removeId","id","topAlert","catch","error","alert","message","cancelarInicio","refreshId","cancelarConclusao","desarquivar","arquivar","dynamicOptions","row","result","isGestor","usuario","unidade","gestor","gestor_substituto","isDemandante","demandante_id","isResponsavel","usuario_id","lastConsolidacao","metadados","consolidacoes","BOTAO_INFORMACOES","label","icon","onClick","navigate","route","modal","BOTAO_COMENTARIOS","modalRefreshId","BOTAO_CLONAR","modalRefresh","BOTAO_ALTERAR","BOTAO_EXCLUIR","bind","BOTAO_PRORROGAR_PRAZO","BOTAO_INICIAR","BOTAO_CANCELAR_INICIO","BOTAO_ALTERAR_INICIO","BOTAO_PAUSAR","BOTAO_REINICIAR","params","reiniciar","BOTAO_CONCLUIR","BOTAO_ALTERAR_CONCLUSAO","BOTAO_CANCELAR_CONCLUSAO","BOTAO_ARQUIVAR","BOTAO_DESARQUIVAR","disabled","push","arquivado","iniciado","hasPermissionTo","length","divider","concluido","status","pausado","dynamicButtons","BOTAO_ALTERAR_AVALIACAO","hint","color","getStatus","consolidacao","ATIVIDADE_STATUS","find","x","key","value","consolidacaoDataInicio","setTime","data_inicio","consolidacaoDataFim","data_fim","data","filter","atrasado","asTimestamp","data_entrega","console","log","translate","JSON","stringify","_status","temposAtividade","extra","despendidoClick","lastUpdate","unidadeHora","planoTrabalho","planos_trabalho","plano_trabalho_id","plano_trabalho","tempos","getDateTimeFormatted","data_distribuicao","data_estipulada_entrega","tipo_modalidade","atividade_esforco","esforco","decimalToTimerFormated","atividade_tempo_despendido","cargaHoraria","carga_horaria","afastamentos","despendido","tempo_despendido","horasUteis","hora","pausas","click","undefined","getTime","horasAtraso","onIdClick","numero","copyToClipboard","toString","buildEtiquetas","tipoAtividade","merge","etiquetas","a","b","buildChecklist","checklistControl","checks","checklist","map","texto","checked","setValue","comentarioAtividade","comentariosControl","comentarios","index","findIndex","tipo","splice","generateUuid","path","data_comentario","comentario_id","orderComentarios","entity","modalClose","_ref","_asyncToGenerator","modalResult","_x","apply","arguments","refresh","reduce","v","data_conclusao","_","i0","ɵɵinject","i1","LookupService","i2","LexicalService","i3","CalendarService","i4","ComentarioService","i5","AuthService","i6","UtilService","i7","NavigateService","i8","DialogService","i9","AtividadeDaoService","_2","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}