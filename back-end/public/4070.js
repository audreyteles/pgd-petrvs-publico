"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[4070],{4070:(bt,I,s)=>{s.r(I),s.d(I,{SolucaoModule:()=>gt});var E=s(6610),O=s(1260),u=s(3308),v=s(5611),b=s(9175),_=s(3535),y=s(5413),j=s(291);class h extends j.C{constructor(d){super(),this.identificador=0,this.nome="",this.sigla="",this.descricao="",this.url="",this.initialization(d)}}var L=s(9062),t=s(3279),N=s(4796);let U=(()=>{class o{constructor(i){this.auth=i,this.solucao=[]}static{this.\u0275fac=function(a){return new(a||o)(t.KVO(N.u))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var A=s(2034),D=s(5852),B=s(7772),M=s(2305),V=s(6764),F=s(114),R=s(9226);function k(o,d){if(1&o){const i=t.RV6();t.j41(0,"toolbar")(1,"input-switch",20),t.bIt("change",function(e){t.eBV(i);const n=t.XpG();return t.Njj(n.onAgruparChange(e))}),t.k0s()()}if(2&o){const i=t.XpG();t.R7$(),t.Y8G("size",4)("control",i.filter.controls.agrupar)}}function Y(o,d){1&o&&(t.j41(0,"span"),t.EFF(1,"Nome"),t.k0s())}function $(o,d){1&o&&(t.j41(0,"span"),t.EFF(1,"#ID"),t.k0s())}function z(o,d){1&o&&(t.j41(0,"span"),t.EFF(1,"Status"),t.k0s())}function w(o,d){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&o){const i=d.row;t.R7$(),t.SpI(" ",i.identificador,"")}}function Q(o,d){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&o){const i=d.row;t.R7$(),t.SpI(" ",i.nome,"")}}function X(o,d){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&o){const i=d.row;t.R7$(),t.SpI(" ",i.sigla,"")}}let H=(()=>{class o extends L.P{constructor(i,a){super(i,h,b.Y),this.injector=i,this.botoes=[],this.isUpdating=!1,this.isSearching=!1,this.filterWhere=e=>{let n=[],r=e.value;return r.nome?.length&&n.push(["nome","like","%"+r.nome.trim().replace(" ","%")+"%"]),r.id?.length&&n.push(["id","=",r.id]),r.unidade_id?.length&&n.push(["unidade_id","==",r.unidade_id]),r.status&&n.push(["status","==",r.status]),this.isSearching&&n.push(["data_ativado","!=",null]),n},this.catalogoService=i.get(U),this.usuarioDao=i.get(y._),this.unidadeDao=i.get(_.s),this.title=this.lex.translate("Solu\xe7\xf5es"),this.filter=this.fh.FormBuilder({agrupar:{default:!0},nome:{default:this.metadata?.nome??""},unidade_id:{default:""},id:{default:""},status:{default:""}}),this.botoes=[],this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.options.push({icon:"bi bi-clipboard-check",label:"Unidades",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_SOLUCOES_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.isCurador=this.auth.isUsuarioCurador()}ngOnInit(){super.ngOnInit(),this.isSearching="search"==this.queryParams.mode}dynamicButtons(i){return[]}onAgruparChange(i){const a=this.filter.controls.agrupar.value;(a&&!this.groupBy?.length||!a&&this.groupBy?.length)&&(this.groupBy=a?[{field:"unidade.sigla",label:"Unidade"}]:[],this.grid.reloadFilter())}onBuscaAvancada(){var a,i=this;this.go.navigate({route:["gestao","solucao","filter"]},{metadata:{nome:this.filter?.controls.nome.value,id:this.filter?.controls.id.value,status:this.filter?.controls.status.value},modalClose:(a=(0,u.A)(function*(e){e&&i.filter&&(i.filter?.controls.nome.setValue(e.nome),i.filter?.controls.id.setValue(e.id),i.filter?.controls.status.setValue(e.status),i.grid.reloadFilter())}),function(n){return a.apply(this,arguments)})})}onFilterClear(){this.filter?.reset(),this.grid.reloadFilter()}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(t.zZn),t.rXU(b.Y))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-solucao-list"]],viewQuery:function(a,e){if(1&a&&t.GBs(v._,5),2&a){let n;t.mGM(n=t.lsd())&&(e.grid=n.first)}},features:[t.Vt3],decls:31,vars:28,consts:[["unidade",""],["columnID",""],["columnNome",""],["columnSigla",""],[3,"select","dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit"],[4,"ngIf"],[3,"form","where","submit","collapseChange","collapsed"],[1,"row"],[1,"col-md-4"],["controlName","unidade_id",3,"size","control","dao"],[1,"col-md-3","busca-avancada"],[1,"busca-avancada-link"],[3,"click"],[1,"busca-avancada-clear"],[1,"busca-avancada-filtros-aplicados"],["title","ID#",3,"template"],["title","Nome",3,"template"],["title","Sigla/Nome Fantasia",3,"template"],["type","options",3,"onEdit","options","dynamicButtons"],[3,"rows"],["labelPosition","left","label","Agrupar por unidade","controlName","agrupar",3,"change","size","control"]],template:function(a,e){if(1&a){const n=t.RV6();t.j41(0,"grid",4),t.bIt("select",function(c){return t.eBV(n),t.Njj(e.onSelect(c))}),t.DNE(1,k,2,2,"toolbar",5),t.j41(2,"filter",6)(3,"div",7)(4,"div",8),t.nrm(5,"input-search",9,0),t.k0s(),t.j41(7,"div",10)(8,"div",11)(9,"a",12),t.bIt("click",function(){return t.eBV(n),t.Njj(e.onBuscaAvancada())}),t.EFF(10,"Busca Avan\xe7ada"),t.k0s()(),t.j41(11,"div",13)(12,"a",12),t.bIt("click",function(){return t.eBV(n),t.Njj(e.onFilterClear())}),t.EFF(13,"Limpar filtros de busca"),t.k0s()(),t.j41(14,"div",14),t.EFF(15,"Filtros aplicados: "),t.DNE(16,Y,2,0,"span",5)(17,$,2,0,"span",5)(18,z,2,0,"span",5),t.k0s()()()(),t.j41(19,"columns")(20,"column",15),t.DNE(21,w,3,1,"ng-template",null,1,t.C5r),t.k0s(),t.j41(23,"column",16),t.DNE(24,Q,3,1,"ng-template",null,2,t.C5r),t.k0s(),t.j41(26,"column",17),t.DNE(27,X,3,1,"ng-template",null,3,t.C5r),t.k0s(),t.nrm(29,"column",18),t.k0s(),t.nrm(30,"pagination",19),t.k0s()}if(2&a){const n=t.sdS(22),r=t.sdS(25),c=t.sdS(28);t.Y8G("dao",e.dao)("add",e.add)("title",e.isModal?"":e.title)("orderBy",e.orderBy)("groupBy",e.groupBy)("join",e.join)("selectable",e.selectable)("hasAdd",e.isCurador)("hasEdit",e.auth.hasPermissionTo("MOD_SOLUCOES_EDT")),t.R7$(),t.Y8G("ngIf",!e.selectable),t.R7$(),t.Y8G("form",e.filter)("where",e.filterWhere)("submit",e.filterSubmit.bind(e))("collapseChange",e.filterCollapseChange.bind(e))("collapsed",!e.selectable&&e.filterCollapsed),t.R7$(3),t.Y8G("size",6)("control",e.filter.controls.unidade_id)("dao",e.unidadeDao),t.R7$(11),t.Y8G("ngIf",e.filter.controls.nome.value.length>0),t.R7$(),t.Y8G("ngIf",e.filter.controls.id.value.length>0),t.R7$(),t.Y8G("ngIf",e.filter.controls.status.value.length>0),t.R7$(2),t.Y8G("template",n),t.R7$(3),t.Y8G("template",r),t.R7$(3),t.Y8G("template",c),t.R7$(3),t.Y8G("onEdit",e.edit)("options",e.options)("dynamicButtons",e.dynamicButtons.bind(e)),t.R7$(),t.Y8G("rows",e.rowsLimit)}},dependencies:[E.bT,v._,A.T,D.I,B.i,M.H,V.e,F.S,R.O],styles:["filter[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{align-items:end}.busca-avancada[_ngcontent-%COMP%]   .busca-avancada-link[_ngcontent-%COMP%], .busca-avancada[_ngcontent-%COMP%]   .busca-avancada-clear[_ngcontent-%COMP%]{margin-bottom:6px}.busca-avancada[_ngcontent-%COMP%]   .busca-avancada-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .busca-avancada[_ngcontent-%COMP%]   .busca-avancada-clear[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;cursor:pointer;color:#000}.busca-avancada[_ngcontent-%COMP%]   .busca-avancada-filtros-aplicados[_ngcontent-%COMP%]{margin-top:4px;font-size:12px}.busca-avancada[_ngcontent-%COMP%]   .busca-avancada-filtros-aplicados[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;background-color:#ccc;padding:1px 5px;margin-right:3px;border-radius:3px}"]})}}return o})();var p=s(1620),g=s(6819),S=s(1641),W=s(24),T=s(16),Z=s(4489),J=s(3130),G=s(4795),x=s(5723),K=s(9419);const q=["unidade"];function tt(o,d){if(1&o&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.j41(2,"span"),t.EFF(3),t.k0s(),t.nrm(4,"br"),t.j41(5,"span"),t.EFF(6),t.k0s()),2&o){const i=d.row;t.R7$(),t.JRh(i.unidade_sigla||""),t.R7$(2),t.SpI(" ",i.informal?"(Unidade Informal)":"(C\xf3digo: "+(i.unidade_codigo||"")+")",""),t.R7$(3),t.SpI("",i.unidade_nome||""," ")}}function et(o,d){if(1&o&&t.nrm(0,"input-search",9,4),2&o){const i=t.XpG(),a=t.sdS(1);t.Y8G("disabled",null!=a&&a.adding?void 0:"true")("size",12)("dao",i.unidadeDao)}}function it(o,d){if(1&o){const i=t.RV6();t.j41(0,"input-switch",10),t.bIt("change",function(){return t.eBV(i),t.Njj(!1)}),t.k0s()}2&o&&t.Y8G("value","true")("valueOn","true")("valueOff","false")}let at=(()=>{class o extends G.g{set control(i){super.control=i}get control(){return super.control}set entity(i){super.entity=i}get entity(){return super.entity}set noPersist(i){super.noPersist=i}get noPersist(){return super.noPersist}constructor(i){super(i),this.injector=i,this.items=[],this.perfilUsuario="",this.validate=(a,e)=>{let n=null;return["unidade_id","perfil_id","atribuicoes"].includes(e)&&!a.value?.length&&(n="Obrigat\xf3rio"),"unidade_id"==e&&this.grid?.adding&&this.items.map(r=>r.id).includes(a.value)&&(n="O usu\xe1rio j\xe1 \xe9 integrante desta unidade. Edite-a, ao inv\xe9s de inclu\xed-la novamente!"),n},this.formValidation=a=>{if(this.util.array_diff(["GESTOR","GESTOR_SUBSTITUTO","GESTOR_DELEGADO"],a.controls.atribuicoes.value.map(n=>n.key)||[]).length<2)return"A um mesmo servidor s\xf3 pode ser atribu\xedda uma fun\xe7\xe3o de gestor (titular, substituto ou delegado), para uma mesma Unidade!"},this.integranteService=i.get(x.H),this.integranteDao=i.get(Z.f),this.unidadeDao=i.get(_.s),this.usuarioDao=i.get(y._),this.perfilDao=i.get(K.e),this.form=this.fh.FormBuilder({unidade_id:{default:""},atribuicoes:{default:void 0},atribuicao:{default:""}},this.cdRef,this.validate),this.formPerfil=this.fh.FormBuilder({perfil_id:{default:""}},this.cdRef,this.validate),this.join=["integracaoServidor"]}ngOnInit(){super.ngOnInit(),this.entity=this.entity??this.metadata?.entity}ngAfterViewInit(){var i=this;(0,u.A)(function*(){yield i.loadData(i.entity||{},i.form)})()}loadData(i,a){var e=this;return(0,u.A)(function*(){if(i.id){let n=[];try{yield e.integranteDao.carregarIntegrantes("",i.id).then(r=>n=r.integrantes.filter(c=>c.atribuicoes?.length>0))}finally{e.perfilUsuario=i.perfil_id,e.formPerfil.controls.perfil_id.setValue(e.perfilUsuario),e.items=[],n.forEach(r=>e.items?.push(e.integranteService.completarIntegrante(r,r.id,i.id,r.atribuicoes))),e.items=e.integranteService.ordenarIntegrantes(e.items),e.cdRef.detectChanges(),e.grid.loading=!1}}})()}salvarPerfil(){var i=this;return(0,u.A)(function*(){i.submitting=!0,i.usuarioDao?.update(i.entity.id,{perfil_id:i.formPerfil.controls.perfil_id.value},[]).then(a=>{i.perfilUsuario=a.perfil_id,i.submitting=!1})})()}addItemHandle(){let i;const a=this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO,this.form.controls.atribuicao.value),e=this.form.controls.atribuicao.value;return a?.length&&this.util.validateLookupItem(this.form.controls.atribuicao.value,e)&&(i={key:e,value:a,icon:this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO,this.form.controls.atribuicao.value),color:this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO,this.form.controls.atribuicao.value)},this.form.controls.atribuicao.setValue("")),i}deleteItemHandle(i){return"LOTADO"!=i.key}carregarIntegrante(i,a){var e=this;return(0,u.A)(function*(){i.controls.unidade_id.setValue(e.grid?.adding?a.unidade_id:a.id),i.controls.atribuicoes.setValue(e.integranteService.converterAtribuicoes(a.atribuicoes)),i.controls.atribuicao.setValue("")})()}adicionarIntegrante(){var i=this;return(0,u.A)(function*(){return i.grid&&(i.grid.error=""),{id:i.integranteDao.generateUuid(),unidade_id:"",atribuicoes:[]}})()}removerIntegrante(i){var a=this;return(0,u.A)(function*(){if(i.atribuicoes.includes("LOTADO"))yield a.dialog.alert("IMPOSS\xcdVEL EXCLUIR !","O v\xednculo que inclui "+a.lex.translate("a lota\xe7\xe3o")+" "+a.lex.translate("do servidor")+" n\xe3o pode ser exclu\xeddo. Se deseja excluir as demais atribui\xe7\xf5es, edite o v\xednculo. Se deseja alterar "+a.lex.translate("a lota\xe7\xe3o")+", lote-o em outra "+a.lex.translate("Unidade")+".");else if(yield a.dialog.confirm("Exclui ?","Deseja realmente excluir todas as atribui\xe7\xf5es de "+a.entity.nome.toUpperCase()+" "+a.lex.translate("na unidade")+" "+i.unidade_sigla?.toUpperCase()+" ?")){let n;try{if(a.isNoPersist)return Object.assign(i,{_status:"DELETE",atribuicoes:[]}),!1;a.loading=!0,yield a.integranteDao.salvarIntegrantes([a.integranteService.completarIntegrante(i,i.id,a.entity.id,[])]).then(r=>{(n=r.find(c=>c._metadata.msg?.length)?._metadata.msg)&&a.grid&&(a.grid.error=n)}),yield a.loadData({id:a.entity.id},a.form)}finally{a.loading=!1}}return!1})()}salvarIntegrante(i,a){var e=this;return(0,u.A)(function*(){let n=e.lookup.uniqueLookupItem(i.controls.atribuicoes.value);i.controls.atribuicoes.setValue(n),e.grid&&(e.grid.error=""),e.cdRef.detectChanges();let r=e.formValidation(i);if(r)yield e.dialog.alert("IMPOSS\xcdVEL INCLUIR/ALTERAR A UNIDADE !",r);else{let c=e.grid?.items||[],C=!0,f=e.integranteService.haAlteracaoGestor(n.map(l=>l.key),Object.assign(a,{unidade_sigla:e.unidade?.selectedItem?.entity.sigla}),c,e.entity?.nome||e.parent?.form?.controls.nome.value||"");if("nenhuma"!=f[0]){if(C=yield e.dialog.confirm("CONFIRMA A ALTERA\xc7\xc3O DA CHEFIA ?",f[2]),!C)return;switch(f[0]){case"ganho":if(f[3]){let l=e.grid?.items.findIndex(m=>m.atribuicoes.includes("LOTADO"));l&&(e.grid.items[l].atribuicoes=e.grid.items[l].atribuicoes.filter(m=>"LOTADO"!=m))}break;case"troca":e.grid.items[f[1]].atribuicoes=e.grid.items[f[1]].atribuicoes.filter(l=>!["GESTOR","LOTADO"].includes(l))}n=e.integranteService.inserirAtribuicao(n,"LOTADO"),i.controls.atribuicoes.setValue(n),e.loading=!0}else{let l=e.integranteService.haAlteracaoLotacao(i,Object.assign(a,{unidade_sigla:e.unidade?.selectedItem?.entity.sigla}),c,e.entity?.nome||"");if(l[0]){if(e.grid?.items[l[1]].atribuicoes.includes("GESTOR"))return void(yield e.dialog.alert("IMPOSS\xcdVEL ALTERAR A LOTA\xc7\xc3O !",l[3]));if(C=yield e.dialog.confirm("CONFIRMA A ALTERA\xc7\xc3O DA LOTA\xc7\xc3O ?",l[2]),!C)return;e.grid.items[l[1]].atribuicoes=e.grid.items[l[1]].atribuicoes.filter(m=>"LOTADO"!=m)}}try{e.isNoPersist?(a.id=e.unidade?.selectedEntity.id,e.grid.items=e.integranteService.substituirItem({id:a.id,itens:e.grid?.items||[],apelidoOuSigla:e.unidade?.selectedItem?.entity.sigla,nome:e.unidade?.selectedItem?.entity.nome,codigo:e.unidade?.selectedItem?.entity.codigo},n.map(l=>l.key),new J.P(e.entity)),e.cdRef.detectChanges()):(yield e.integranteDao.salvarIntegrantes([e.integranteService.completarIntegrante(a,i.controls.unidade_id.value,e.entity.id,n.map(l=>l.key))]).then(l=>{let m;(m=l?.find(vt=>vt._metadata.msg?.length)?._metadata.msg)&&e.dialog.alert("ATEN\xc7\xc3O: ERRO!",m)}),yield e.loadData({id:e.entity.id},e.form),e.grid&&(e.grid.error=""))}catch(l){e.grid&&(e.grid.error=l),yield e.loadData({id:e.entity.id},e.form)}finally{e.loading=!1}}})()}isNoButtons(){return this.isNoPersist||this.formPerfil.controls.perfil_id.value==this.perfilUsuario?"true":void 0}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["solucao-unidade"]],viewQuery:function(a,e){if(1&a&&(t.GBs(v._,5),t.GBs(q,5)),2&a){let n;t.mGM(n=t.lsd())&&(e.grid=n.first),t.mGM(n=t.lsd())&&(e.unidade=n.first)}},inputs:{control:"control",entity:"entity",noPersist:"noPersist",parent:"parent"},features:[t.Vt3],decls:12,vars:12,consts:[["grid",""],["columnUnidade",""],["editUnidade",""],["columnAtivar",""],["unidade",""],["editable","",3,"items","minHeight","form","hasDelete","add","load","remove","save"],[3,"title","template","editTemplate"],["title","Ativar/Desativar",3,"template"],["type","options"],["label","","icon","","controlName","unidade_id",3,"disabled","size","dao"],[3,"change","value","valueOn","valueOff"]],template:function(a,e){if(1&a&&(t.j41(0,"grid",5,0)(2,"columns")(3,"column",6),t.DNE(4,tt,7,3,"ng-template",null,1,t.C5r)(6,et,2,3,"ng-template",null,2,t.C5r),t.k0s(),t.j41(8,"column",7),t.DNE(9,it,1,3,"ng-template",null,3,t.C5r),t.k0s(),t.nrm(11,"column",8),t.k0s()()),2&a){const n=t.sdS(5),r=t.sdS(7),c=t.sdS(10);t.Y8G("items",e.items)("minHeight",500)("form",e.form)("hasDelete",!0)("add",e.adicionarIntegrante.bind(e))("load",e.carregarIntegrante.bind(e))("remove",e.removerIntegrante.bind(e))("save",e.salvarIntegrante.bind(e)),t.R7$(3),t.Y8G("title",e.lex.translate("Unidades"))("template",n)("editTemplate",r),t.R7$(5),t.Y8G("template",c)}},dependencies:[v._,A.T,D.I,F.S,R.O]})}}return o})();const ot=["unidade"],nt=["usuario"];let P=(()=>{class o extends W.n{constructor(i){super(i,h,b.Y),this.injector=i,this.usuarioDao=i.get(y._),this.modalWidth=1300,this.join=["unidade"],this.form=this.fh.FormBuilder({nome:{default:""},sigla:{default:""},unidade_id:{default:""},descricao:{default:""},url:{default:""}})}loadData(i,a){var e=this;return(0,u.A)(function*(){let n=Object.assign({},a.value);a.patchValue(e.util.fillForm(n,i))})()}initializeData(i){var a=this;return(0,u.A)(function*(){i.patchValue(new h),a.entity=new h,yield a.loadData(a.entity,a.form)})()}saveData(i){return new Promise((a,e)=>{const n=this.util.fill(new h,this.entity);a(this.util.fillForm(n,this.form.value))})}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-solucao-form"]],viewQuery:function(a,e){if(1&a&&(t.GBs(S.Q,5),t.GBs(ot,5),t.GBs(nt,5)),2&a){let n;t.mGM(n=t.lsd())&&(e.editableForm=n.first),t.mGM(n=t.lsd())&&(e.unidade=n.first),t.mGM(n=t.lsd())&&(e.usuario=n.first)}},features:[t.Vt3],decls:12,vars:15,consts:[["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],[1,"col-md-4"],["label","Nome da Solu\xe7\xe3o","icon","bi bi-textarea-t","controlName","nome","labelInfo","Nome formal do produto ou servi\xe7o. Ex: Programa de Dest\xe3o do Desempenho","required","",3,"size","control"],[1,"col-md-8"],["label","Sigla/Nome Fantasia","icon","bi bi-textarea-t","controlName","nome","labelInfo","Nome informal do produto ou servi\xe7o. Ex: PGD","required","",3,"size","control"],[1,"col-md-6"],["label","Descri\xe7\xe3o","icon","bi bi-textarea-t","controlName","descricao","labelInfo","Objetivo e aplicabilidade da solu\xe7\xe3o. Ex: Programa do indutor da melhoria de desempenho individual e institucional.","required","",3,"size","control"],["label","URL","icon","bi bi-textarea-t","controlName","url","labelInfo","P\xe1gina oficial do produto ou servi\xe7o. Ex: www.gov.br/lgpd",3,"size","control"]],template:function(a,e){1&a&&(t.j41(0,"editable-form",0),t.bIt("submit",function(){return e.onSaveData()})("cancel",function(){return e.onCancel()}),t.j41(1,"div",1)(2,"div",2),t.nrm(3,"input-text",3),t.k0s(),t.j41(4,"div",4),t.nrm(5,"input-text",5),t.k0s()(),t.j41(6,"div",1)(7,"div",6),t.nrm(8,"input-text",7),t.k0s(),t.j41(9,"div",6),t.nrm(10,"input-text",8),t.k0s()()(),t.nrm(11,"solucao-unidade")),2&a&&(t.Y8G("form",e.form)("disabled",e.formDisabled)("title",e.isModal?"":e.title),t.R7$(3),t.Y8G("size",8)("control",e.form.controls.nome),t.BMQ("maxlength",250),t.R7$(2),t.Y8G("size",8)("control",e.form.controls.sigla),t.BMQ("maxlength",250),t.R7$(3),t.Y8G("size",6)("control",e.form.controls.descricao),t.BMQ("maxlength",250),t.R7$(2),t.Y8G("size",6)("control",e.form.controls.url),t.BMQ("maxlength",250))},dependencies:[S.Q,T.H,at]})}}return o})();var st=s(568),rt=s(3678);let lt=(()=>{class o extends G.g{constructor(i){super(i),this.injector=i,this.lookup=i.get(st.s),this.usuarioDao=i.get(y._),this.modalWidth=500,this.form=this.fh.FormBuilder({id:{default:""},nome:{default:""},status:{default:""}},this.cdRef)}ngOnInit(){super.ngOnInit(),this.snapshot=this.snapshot||this.modalRoute||this.route.snapshot,this.urlParams=this.snapshot.paramMap,this.queryParams=this.go.decodeParam(this.snapshot.queryParams),this.metadata=this.go.getMetadata(this.snapshot.queryParams.idroute),this.form?.controls.nome.setValue(this.metadata.nome),this.form?.controls.id.setValue(this.metadata.id),this.form?.controls.status.setValue(this.metadata.status)}onSubmitClick(){var i=this;return(0,u.A)(function*(){i.loading=!0;try{let a={nome:i.form?.controls.nome.value,id:i.form?.controls.id.value,status:i.form?.controls.status.value};i.go.setModalResult(i.modalRoute?.queryParams?.idroute,a),i.close()}catch(a){i.error(a?.message||a?.error||a||"Erro desconhecido")}finally{i.loading=!1}})()}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["solucao-filtro"]],viewQuery:function(a,e){if(1&a&&t.GBs(S.Q,5),2&a){let n;t.mGM(n=t.lsd())&&(e.editableForm=n.first)}},features:[t.Vt3],decls:6,vars:10,consts:[["confirmLabel","Buscar",3,"submit","cancel","form"],[1,"row"],[1,"col-md-12"],["label","Nome","icon","bi bi-textarea-t","controlName","this.form.nome",3,"size","control"],["label","ID#","icon","bi bi-textarea-t","controlName","this.form.id",3,"size","control"],["label","Status","controlName","this.form.status",3,"size","items","control"]],template:function(a,e){1&a&&(t.j41(0,"editable-form",0),t.bIt("submit",function(){return e.onSubmitClick()})("cancel",function(){return e.onCancel()}),t.j41(1,"div",1)(2,"div",2),t.nrm(3,"input-text",3)(4,"input-text",4)(5,"input-select",5),t.k0s()()()),2&a&&(t.Y8G("form",e.form),t.R7$(3),t.Y8G("size",12)("control",e.form.controls.nome),t.BMQ("maxlength",250),t.R7$(),t.Y8G("size",12)("control",e.form.controls.id),t.BMQ("maxlength",10),t.R7$(),t.Y8G("size",12)("items",e.lookup.TIPO_ATIVO_INATIVO)("control",e.form.controls.status))},dependencies:[S.Q,T.H,rt.K]})}}return o})();var dt=s(4468);function ut(o,d){1&o&&(t.j41(0,"div",7),t.nrm(1,"span",8),t.k0s())}const mt=[{path:"",component:H,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Solu\xe7\xf5es"}},{path:"new",component:P,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Solu\xe7\xe3o",modal:!0}},{path:":id/edit",component:P,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Solu\xe7\xe3o",modal:!0}},{path:"filter",component:lt,canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Busca Avan\xe7ada",modal:!0}},{path:":id/consult",component:(()=>{class o extends dt.V{constructor(i){super(i),this.injector=i,this.solucaoDaoService=i.get(b.Y),this.modalWidth=1300,this.loading=!0}ngOnInit(){super.ngOnInit(),this.carregaSolucaoDetalhado()}carregaSolucaoDetalhado(){var i=this;return(0,u.A)(function*(){i.solucao=yield i.solucaoDaoService.getById(i.urlParams.get("id"),["unidade"]),i.loading=!1})()}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["solucao-show"]],features:[t.Vt3],decls:23,vars:4,consts:[["class","spinner-border","role","status",4,"ngIf"],[1,"solucao-show","bg-body-secondary"],[1,"row"],[1,"col-md-4"],[1,"d-block"],[1,"col-md-2"],[1,"col-md-6"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(a,e){1&a&&(t.DNE(0,ut,2,0,"div",0),t.qex(1),t.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"small",4),t.EFF(6,"Solu\xe7\xe3o"),t.k0s(),t.j41(7,"b"),t.EFF(8),t.k0s()(),t.j41(9,"div",5)(10,"small",4),t.EFF(11,"Produtos e Servi\xe7os cadastrados"),t.k0s()()(),t.j41(12,"div",2)(13,"div",6)(14,"small",4),t.EFF(15,"Descri\xe7\xe3o"),t.k0s(),t.j41(16,"b"),t.EFF(17),t.k0s()(),t.j41(18,"div",6)(19,"small",4),t.EFF(20,"URL"),t.k0s(),t.j41(21,"b"),t.EFF(22),t.k0s()()()(),t.bVm()),2&a&&(t.Y8G("ngIf",e.loading),t.R7$(8),t.JRh(null==e.solucao?null:e.solucao.nome),t.R7$(9),t.JRh(null==e.solucao?null:e.solucao.descricao),t.R7$(5),t.JRh(null==e.solucao?null:e.solucao.url))},styles:[".solucao-show[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;flex-direction:column;padding:10px 20px 20px}"]})}}return o})(),canActivate:[p.q],resolve:{config:g.L},runGuardsAndResolvers:"always",data:{title:"Solu\xe7\xe3o - Detalhamento",modal:!0}}];let ft=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[O.iI.forChild(mt),O.iI]})}}return o})();var ht=s(8832),pt=s(8425);let gt=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[E.MD,pt.h,ht.X1,ft]})}}return o})()}}]);