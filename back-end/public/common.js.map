<<<<<<< HEAD
{"version":3,"file":"common.js","mappings":"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","sources":["./src/app/models/tipo-justificativa.model.ts","./src/app/modules/home/home.component.ts","./src/app/modules/home/home.component.html","./src/app/services/integrante.service.ts"],"sourcesContent":["import { Base } from './base.model';\r\n\r\nexport class TipoJustificativa extends Base {\r\n    public nome: string = \"\"; /* Descrição do tipo da justificativa */\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","\nimport { Component, Injector, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { GestorDashboard, UsuarioDaoService, UsuarioDashboard } from 'src/app/dao/usuario-dao.service';\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\nimport { LexicalService } from 'src/app/services/lexical.service';\nimport { NavigateService } from 'src/app/services/navigate.service';\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\nimport { GlobalsService } from 'src/app/services/globals.service';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Chart, ChartData, ChartOptions } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { UtilService } from 'src/app/services/util.service';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { LookupItem } from 'src/app/services/lookup.service';\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n\n  constructor(\n    public auth: AuthService,\n    public utils: UtilService,\n    public usuarioDao: UsuarioDaoService,\n    public unidadeDao: UnidadeDaoService,\n    public atividadeDao: AtividadeDaoService,\n    public injector: Injector,\n    public lex: LexicalService,\n    public go: NavigateService,\n    public gb: GlobalsService,\n    public allPages: ListenerAllPagesService\n  ) {\n   \n    \n  }\n\n  ngOnInit(): void {\n    if (this.gb.isEmbedded) {\n      this.allPages.visibilidadeMenuSei(!this.auth.usuario!.config.ocultar_menu_sei);\n    }\n   \n\n  }\n\n  async ngAfterViewInit() {\n   \n  }\n\n  \n\n  public mensagemSaudacao() {\n    const hora = parseInt(this.auth.unidadeHora.replace(\":\", \"\"));\n    const apelido = this.auth.usuario?.apelido;\n    const mail = this.auth.usuario?.email;\n    return hora < 1200 ? \"Bom dia, \" + apelido : hora < 1800 ? \"Boa tarde, \" + apelido : \"Boa noite, \" + apelido;\n  }\n\n  public emailUsuario() {\n    const mail = this.auth.usuario?.email;\n    return mail;\n  }\n\n \n\n\n  public tokenGAPI() {\n    this.auth.googleApi.getAccessToken().then(res => {\n      const sei = res || ''\n    });\n  }\n\n  getLastDayOfMonth(year: number, month: number) {\n    return new Date(year, month + 1, 0);\n  }\n\n \n\n}\n\n","<div class=\"container-fluid\">\n    <div class=\"saudacao\">\n        <h2 class=\"\">{{mensagemSaudacao()}}</h2>\n    </div>    \n\n    <router-outlet></router-outlet>\n</div>\n","import { Injectable, Injector } from '@angular/core';\nimport { LookupItem, LookupService } from './lookup.service';\nimport { FormGroup } from '@angular/forms';\nimport { IntegranteConsolidado } from '../models/unidade-integrante.model';\nimport { Vinculo } from '../dao/unidade-integrante-dao.service';\nimport { IntegranteAtribuicao } from '../models/base.model';\nimport { PageBase } from '../modules/base/page-base';\nimport { UtilService } from './util.service';\nimport { DialogService } from './dialog.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IntegranteService {\n\n  public lookup: LookupService;\n  public util: UtilService;\n  public dialog: DialogService;\n\n  constructor(public injector: Injector){\n    /* Injections */\n    this.lookup = this.injector.get<LookupService>(LookupService);\n    this.dialog = this.injector.get<DialogService>(DialogService);\n    this.util = this.injector.get<UtilService>(UtilService);\n  }\n\n  public converterAtribuicoes(atribuicoes: string[]): LookupItem[] {\n    return atribuicoes.map((x: string) => Object.assign({}, {\n      key: x,\n      value: this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, x),\n      icon: this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, x),\n      color: this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, x)\n    }))\n  }\n\n  public alterandoGestor(form: FormGroup, items: IntegranteAtribuicao[]): string[] {\n    let result: string[] = [];\n    let novasAtribuicoes: string[] = form!.controls.atribuicoes.value.map((a: { key: string; }) => a.key);\n    ['GESTOR', 'GESTOR_DELEGADO', 'GESTOR_SUBSTITUTO'].forEach(g => { if (this.util.array_diff_simm(novasAtribuicoes, items).includes(g)) result.push(this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, g)); });\n    return result;\n  }\n\n  public ordenar(items: IntegranteConsolidado[]): IntegranteConsolidado[] {\n    items.sort((a, b) => {\n      let x = (a.usuario_nome || a.unidade_nome)?.toLowerCase();\n      let y = (b.usuario_nome || b.unidade_nome)?.toLowerCase();\n      return x! < y! ? -1 : (x! > y! ? 1 : 0)\n    });\n    return items;\n  }\n\n  public converterEmVinculo(base: any, unidade_id: string, usuario_id: string, atribuicoes: IntegranteAtribuicao[]): Vinculo {\n    return Object.assign(base, { 'unidade_id': unidade_id, 'usuario_id': usuario_id, 'atribuicoes': atribuicoes });\n  }\n\n  public permitidoApagar(atribuicao: string, noPersist: boolean): boolean {\n    let proibicoes = noPersist ? [\"LOTADO\", \"GESTOR\", \"GESTOR_SUBSTITUTO\"] : [\"LOTADO\"];\n    let permitidoApagar = !proibicoes.includes(atribuicao);\n    let msg = atribuicao == \"LOTADO\" ? \"A lotação do servidor não pode ser apagada. Para alterá-la, lote-o em outra Unidade.\" : \"Para alterar/excluir o Gestor/Substituto use a aba 'Principal'.\";\n    (async () => {\n      if (!permitidoApagar) await this.dialog.alert(\"Não permitido!\", msg);\n    })();\n    return permitidoApagar;\n  }\n}\n"],"names":["Base","TipoJustificativa","constructor","data","nome","initialization","HomeComponent","auth","utils","usuarioDao","unidadeDao","atividadeDao","injector","lex","go","gb","allPages","ngOnInit","isEmbedded","visibilidadeMenuSei","usuario","config","ocultar_menu_sei","ngAfterViewInit","_asyncToGenerator","mensagemSaudacao","hora","parseInt","unidadeHora","replace","apelido","mail","email","emailUsuario","tokenGAPI","googleApi","getAccessToken","then","res","sei","getLastDayOfMonth","year","month","Date","_","i0","ɵɵdirectiveInject","i1","AuthService","i2","UtilService","i3","UsuarioDaoService","i4","UnidadeDaoService","i5","AtividadeDaoService","Injector","i6","LexicalService","i7","NavigateService","i8","GlobalsService","i9","ListenerAllPagesService","_2","selectors","decls","vars","consts","template","HomeComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate","LookupService","DialogService","IntegranteService","lookup","get","dialog","util","converterAtribuicoes","atribuicoes","map","x","Object","assign","key","value","getValue","UNIDADE_INTEGRANTE_TIPO","icon","getIcon","color","getColor","alterandoGestor","form","items","result","novasAtribuicoes","controls","a","forEach","g","array_diff_simm","includes","push","ordenar","sort","b","usuario_nome","unidade_nome","toLowerCase","y","converterEmVinculo","base","unidade_id","usuario_id","permitidoApagar","atribuicao","noPersist","_this","proibicoes","msg","alert","ɵɵinject","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
=======
{"version":3,"file":"common.js","mappings":";;;;;;;;;;;;;;AAAoC;AAE9B,MAAOC,iBAAkB,SAAQD,6CAAI;EAGvCE,YAAmBC,IAAU;IAAI,KAAK,EAAE;IAFjC,KAAAC,IAAI,GAAW,EAAE,CAAC,CAAC;IAEgB,IAAI,CAACC,cAAc,CAACF,IAAI,CAAC;EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACenE,MAAOG,aAAa;EAExBJ,YACSK,IAAiB,EACjBC,KAAkB,EAClBC,UAA6B,EAC7BC,UAA6B,EAC7BC,YAAiC,EACjCC,QAAkB,EAClBC,GAAmB,EACnBC,EAAmB,EACnBC,EAAkB,EAClBC,QAAiC;IATjC,KAAAT,IAAI,GAAJA,IAAI;IACJ,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,UAAU,GAAVA,UAAU;IACV,KAAAC,UAAU,GAAVA,UAAU;IACV,KAAAC,YAAY,GAAZA,YAAY;IACZ,KAAAC,QAAQ,GAARA,QAAQ;IACR,KAAAC,GAAG,GAAHA,GAAG;IACH,KAAAC,EAAE,GAAFA,EAAE;IACF,KAAAC,EAAE,GAAFA,EAAE;IACF,KAAAC,QAAQ,GAARA,QAAQ;EAIjB;EAEAC,QAAQA,CAAA;IACN,IAAI,IAAI,CAACF,EAAE,CAACG,UAAU,EAAE;MACtB,IAAI,CAACF,QAAQ,CAACG,mBAAmB,CAAC,CAAC,IAAI,CAACZ,IAAI,CAACa,OAAQ,CAACC,MAAM,CAACC,gBAAgB,CAAC;;EAIlF;EAEMC,eAAeA,CAAA;IAAA,OAAAC,mHAAA;EAErB;EAIOC,gBAAgBA,CAAA;IACrB,MAAMC,IAAI,GAAGC,QAAQ,CAAC,IAAI,CAACpB,IAAI,CAACqB,WAAW,CAACC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;IAC7D,MAAMC,OAAO,GAAG,IAAI,CAACvB,IAAI,CAACa,OAAO,EAAEU,OAAO;IAC1C,MAAMC,IAAI,GAAG,IAAI,CAACxB,IAAI,CAACa,OAAO,EAAEY,KAAK;IACrC,OAAON,IAAI,GAAG,IAAI,GAAG,WAAW,GAAGI,OAAO,GAAGJ,IAAI,GAAG,IAAI,GAAG,aAAa,GAAGI,OAAO,GAAG,aAAa,GAAGA,OAAO;EAC9G;EAEOG,YAAYA,CAAA;IACjB,MAAMF,IAAI,GAAG,IAAI,CAACxB,IAAI,CAACa,OAAO,EAAEY,KAAK;IACrC,OAAOD,IAAI;EACb;EAKOG,SAASA,CAAA;IACd,IAAI,CAAC3B,IAAI,CAAC4B,SAAS,CAACC,cAAc,EAAE,CAACC,IAAI,CAACC,GAAG,IAAG;MAC9C,MAAMC,GAAG,GAAGD,GAAG,IAAI,EAAE;IACvB,CAAC,CAAC;EACJ;EAEAE,iBAAiBA,CAACC,IAAY,EAAEC,KAAa;IAC3C,OAAO,IAAIC,IAAI,CAACF,IAAI,EAAEC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC;EACrC;;SAvDWpC,aAAa;;mBAAbA,MAAa,EAAAsC,gEAAA,CAAAE,sEAAA,GAAAF,gEAAA,CAAAI,sEAAA,GAAAJ,gEAAA,CAAAM,8EAAA,GAAAN,gEAAA,CAAAQ,8EAAA,GAAAR,gEAAA,CAAAU,kFAAA,GAAAV,gEAAA,CAAAA,oDAAA,GAAAA,gEAAA,CAAAa,4EAAA,GAAAb,gEAAA,CAAAe,8EAAA,GAAAf,gEAAA,CAAAiB,4EAAA,GAAAjB,gEAAA,CAAAmB,iGAAA;AAAA;;QAAbzD,MAAa;EAAA2D,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,uBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCpB1B3B,6DAAA,aAA6B;MAERA,qDAAA,GAAsB;MAAAA,2DAAA,EAAK;MAG5CA,wDAAA,oBAA+B;MACnCA,2DAAA,EAAM;;;MAJeA,wDAAA,GAAsB;MAAtBA,gEAAA,CAAA4B,GAAA,CAAA/C,gBAAA,GAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;ACDkB;AAMhB;AACI;;AAK3C,MAAOwD,iBAAiB;EAM5B/E,YAAmBU,QAAkB;IAAlB,KAAAA,QAAQ,GAARA,QAAQ;IACzB;IACA,IAAI,CAACsE,MAAM,GAAG,IAAI,CAACtE,QAAQ,CAACuE,GAAG,CAAgBJ,0DAAa,CAAC;IAC7D,IAAI,CAACK,MAAM,GAAG,IAAI,CAACxE,QAAQ,CAACuE,GAAG,CAAgBH,0DAAa,CAAC;IAC7D,IAAI,CAACK,IAAI,GAAG,IAAI,CAACzE,QAAQ,CAACuE,GAAG,CAAclC,sDAAW,CAAC;EACzD;EAEOqC,oBAAoBA,CAACC,WAAqB;IAC/C,OAAOA,WAAW,CAACC,GAAG,CAAEC,CAAS,IAAKC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE;MACtDC,GAAG,EAAEH,CAAC;MACNI,KAAK,EAAE,IAAI,CAACX,MAAM,CAACY,QAAQ,CAAC,IAAI,CAACZ,MAAM,CAACa,uBAAuB,EAAEN,CAAC,CAAC;MACnEO,IAAI,EAAE,IAAI,CAACd,MAAM,CAACe,OAAO,CAAC,IAAI,CAACf,MAAM,CAACa,uBAAuB,EAAEN,CAAC,CAAC;MACjES,KAAK,EAAE,IAAI,CAAChB,MAAM,CAACiB,QAAQ,CAAC,IAAI,CAACjB,MAAM,CAACa,uBAAuB,EAAEN,CAAC;KACnE,CAAC,CAAC;EACL;EAEOW,eAAeA,CAACC,IAAe,EAAEC,KAA6B;IACnE,IAAIC,MAAM,GAAa,EAAE;IACzB,IAAIC,gBAAgB,GAAaH,IAAK,CAACI,QAAQ,CAAClB,WAAW,CAACM,KAAK,CAACL,GAAG,CAAEkB,CAAmB,IAAKA,CAAC,CAACd,GAAG,CAAC;IACrG,CAAC,QAAQ,EAAE,iBAAiB,EAAE,mBAAmB,CAAC,CAACe,OAAO,CAACC,CAAC,IAAG;MAAG,IAAI,IAAI,CAACvB,IAAI,CAACwB,eAAe,CAACL,gBAAgB,EAAEF,KAAK,CAAC,CAACQ,QAAQ,CAACF,CAAC,CAAC,EAAEL,MAAM,CAACQ,IAAI,CAAC,IAAI,CAAC7B,MAAM,CAACY,QAAQ,CAAC,IAAI,CAACZ,MAAM,CAACa,uBAAuB,EAAEa,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC;IACnN,OAAOL,MAAM;EACf;EAEOS,OAAOA,CAACV,KAA8B;IAC3CA,KAAK,CAACW,IAAI,CAAC,CAACP,CAAC,EAAEQ,CAAC,KAAI;MAClB,IAAIzB,CAAC,GAAG,CAACiB,CAAC,CAACS,YAAY,IAAIT,CAAC,CAACU,YAAY,GAAGC,WAAW,EAAE;MACzD,IAAIC,CAAC,GAAG,CAACJ,CAAC,CAACC,YAAY,IAAID,CAAC,CAACE,YAAY,GAAGC,WAAW,EAAE;MACzD,OAAO5B,CAAE,GAAG6B,CAAE,GAAG,CAAC,CAAC,GAAI7B,CAAE,GAAG6B,CAAE,GAAG,CAAC,GAAG,CAAE;IACzC,CAAC,CAAC;IACF,OAAOhB,KAAK;EACd;EAEOiB,kBAAkBA,CAACC,IAAS,EAAEC,UAAkB,EAAEC,UAAkB,EAAEnC,WAAmC;IAC9G,OAAOG,MAAM,CAACC,MAAM,CAAC6B,IAAI,EAAE;MAAE,YAAY,EAAEC,UAAU;MAAE,YAAY,EAAEC,UAAU;MAAE,aAAa,EAAEnC;IAAW,CAAE,CAAC;EAChH;EAEOoC,eAAeA,CAACC,UAAkB,EAAEC,SAAkB;IAAA,IAAAC,KAAA;IAC3D,IAAIC,UAAU,GAAGF,SAAS,GAAG,CAAC,QAAQ,EAAE,QAAQ,EAAE,mBAAmB,CAAC,GAAG,CAAC,QAAQ,CAAC;IACnF,IAAIF,eAAe,GAAG,CAACI,UAAU,CAACjB,QAAQ,CAACc,UAAU,CAAC;IACtD,IAAII,GAAG,GAAGJ,UAAU,IAAI,QAAQ,GAAG,sFAAsF,GAAG,iEAAiE;IAC7LpG,mHAAA,CAAC,aAAW;MACV,IAAI,CAACmG,eAAe,EAAE,MAAMG,KAAI,CAAC1C,MAAM,CAAC6C,KAAK,CAAC,gBAAgB,EAAED,GAAG,CAAC;IACtE,CAAC,EAAC,CAAE;IACJ,OAAOL,eAAe;EACxB;;SAlDW1C,iBAAiB;;mBAAjBA,MAAiB,EAAArC,sDAAA,CAAAA,mDAAA;AAAA;;SAAjBqC,MAAiB;EAAAkD,OAAA,EAAjBlD,MAAiB,CAAAmD,IAAA;EAAAC,UAAA,EAFhB;AAAM","sources":["./src/app/models/tipo-justificativa.model.ts","./src/app/modules/home/home.component.ts","./src/app/modules/home/home.component.html","./src/app/services/integrante.service.ts"],"sourcesContent":["import { Base } from './base.model';\r\n\r\nexport class TipoJustificativa extends Base {\r\n    public nome: string = \"\"; /* Descrição do tipo da justificativa */\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","\nimport { Component, Injector, OnInit } from '@angular/core';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { GestorDashboard, UsuarioDaoService, UsuarioDashboard } from 'src/app/dao/usuario-dao.service';\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\nimport { LexicalService } from 'src/app/services/lexical.service';\nimport { NavigateService } from 'src/app/services/navigate.service';\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\nimport { GlobalsService } from 'src/app/services/globals.service';\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\nimport { Chart, ChartData, ChartOptions } from 'chart.js';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { UtilService } from 'src/app/services/util.service';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { LookupItem } from 'src/app/services/lookup.service';\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n\n  constructor(\n    public auth: AuthService,\n    public utils: UtilService,\n    public usuarioDao: UsuarioDaoService,\n    public unidadeDao: UnidadeDaoService,\n    public atividadeDao: AtividadeDaoService,\n    public injector: Injector,\n    public lex: LexicalService,\n    public go: NavigateService,\n    public gb: GlobalsService,\n    public allPages: ListenerAllPagesService\n  ) {\n   \n    \n  }\n\n  ngOnInit(): void {\n    if (this.gb.isEmbedded) {\n      this.allPages.visibilidadeMenuSei(!this.auth.usuario!.config.ocultar_menu_sei);\n    }\n   \n\n  }\n\n  async ngAfterViewInit() {\n   \n  }\n\n  \n\n  public mensagemSaudacao() {\n    const hora = parseInt(this.auth.unidadeHora.replace(\":\", \"\"));\n    const apelido = this.auth.usuario?.apelido;\n    const mail = this.auth.usuario?.email;\n    return hora < 1200 ? \"Bom dia, \" + apelido : hora < 1800 ? \"Boa tarde, \" + apelido : \"Boa noite, \" + apelido;\n  }\n\n  public emailUsuario() {\n    const mail = this.auth.usuario?.email;\n    return mail;\n  }\n\n \n\n\n  public tokenGAPI() {\n    this.auth.googleApi.getAccessToken().then(res => {\n      const sei = res || ''\n    });\n  }\n\n  getLastDayOfMonth(year: number, month: number) {\n    return new Date(year, month + 1, 0);\n  }\n\n \n\n}\n\n","<div class=\"container-fluid\">\n    <div class=\"saudacao\">\n        <h2 class=\"\">{{mensagemSaudacao()}}</h2>\n    </div>    \n\n    <router-outlet></router-outlet>\n</div>\n","import { Injectable, Injector } from '@angular/core';\nimport { LookupItem, LookupService } from './lookup.service';\nimport { FormGroup } from '@angular/forms';\nimport { IntegranteConsolidado } from '../models/unidade-integrante.model';\nimport { Vinculo } from '../dao/unidade-integrante-dao.service';\nimport { IntegranteAtribuicao } from '../models/base.model';\nimport { PageBase } from '../modules/base/page-base';\nimport { UtilService } from './util.service';\nimport { DialogService } from './dialog.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IntegranteService {\n\n  public lookup: LookupService;\n  public util: UtilService;\n  public dialog: DialogService;\n\n  constructor(public injector: Injector){\n    /* Injections */\n    this.lookup = this.injector.get<LookupService>(LookupService);\n    this.dialog = this.injector.get<DialogService>(DialogService);\n    this.util = this.injector.get<UtilService>(UtilService);\n  }\n\n  public converterAtribuicoes(atribuicoes: string[]): LookupItem[] {\n    return atribuicoes.map((x: string) => Object.assign({}, {\n      key: x,\n      value: this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, x),\n      icon: this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, x),\n      color: this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, x)\n    }))\n  }\n\n  public alterandoGestor(form: FormGroup, items: IntegranteAtribuicao[]): string[] {\n    let result: string[] = [];\n    let novasAtribuicoes: string[] = form!.controls.atribuicoes.value.map((a: { key: string; }) => a.key);\n    ['GESTOR', 'GESTOR_DELEGADO', 'GESTOR_SUBSTITUTO'].forEach(g => { if (this.util.array_diff_simm(novasAtribuicoes, items).includes(g)) result.push(this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, g)); });\n    return result;\n  }\n\n  public ordenar(items: IntegranteConsolidado[]): IntegranteConsolidado[] {\n    items.sort((a, b) => {\n      let x = (a.usuario_nome || a.unidade_nome)?.toLowerCase();\n      let y = (b.usuario_nome || b.unidade_nome)?.toLowerCase();\n      return x! < y! ? -1 : (x! > y! ? 1 : 0)\n    });\n    return items;\n  }\n\n  public converterEmVinculo(base: any, unidade_id: string, usuario_id: string, atribuicoes: IntegranteAtribuicao[]): Vinculo {\n    return Object.assign(base, { 'unidade_id': unidade_id, 'usuario_id': usuario_id, 'atribuicoes': atribuicoes });\n  }\n\n  public permitidoApagar(atribuicao: string, noPersist: boolean): boolean {\n    let proibicoes = noPersist ? [\"LOTADO\", \"GESTOR\", \"GESTOR_SUBSTITUTO\"] : [\"LOTADO\"];\n    let permitidoApagar = !proibicoes.includes(atribuicao);\n    let msg = atribuicao == \"LOTADO\" ? \"A lotação do servidor não pode ser apagada. Para alterá-la, lote-o em outra Unidade.\" : \"Para alterar/excluir o Gestor/Substituto use a aba 'Principal'.\";\n    (async () => {\n      if (!permitidoApagar) await this.dialog.alert(\"Não permitido!\", msg);\n    })();\n    return permitidoApagar;\n  }\n}\n"],"names":["Base","TipoJustificativa","constructor","data","nome","initialization","HomeComponent","auth","utils","usuarioDao","unidadeDao","atividadeDao","injector","lex","go","gb","allPages","ngOnInit","isEmbedded","visibilidadeMenuSei","usuario","config","ocultar_menu_sei","ngAfterViewInit","_asyncToGenerator","mensagemSaudacao","hora","parseInt","unidadeHora","replace","apelido","mail","email","emailUsuario","tokenGAPI","googleApi","getAccessToken","then","res","sei","getLastDayOfMonth","year","month","Date","i0","ɵɵdirectiveInject","i1","AuthService","i2","UtilService","i3","UsuarioDaoService","i4","UnidadeDaoService","i5","AtividadeDaoService","Injector","i6","LexicalService","i7","NavigateService","i8","GlobalsService","i9","ListenerAllPagesService","selectors","decls","vars","consts","template","HomeComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate","LookupService","DialogService","IntegranteService","lookup","get","dialog","util","converterAtribuicoes","atribuicoes","map","x","Object","assign","key","value","getValue","UNIDADE_INTEGRANTE_TIPO","icon","getIcon","color","getColor","alterandoGestor","form","items","result","novasAtribuicoes","controls","a","forEach","g","array_diff_simm","includes","push","ordenar","sort","b","usuario_nome","unidade_nome","toLowerCase","y","converterEmVinculo","base","unidade_id","usuario_id","permitidoApagar","atribuicao","noPersist","_this","proibicoes","msg","alert","ɵɵinject","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
>>>>>>> 7dc47decd359da0d8fcf67d6dd8185f53d03d034
