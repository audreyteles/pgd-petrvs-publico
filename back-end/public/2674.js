"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[2674],{2674:(Te,S,r)=>{r.r(S),r.d(S,{ProdutoModule:()=>Ee});var R=r(6610),T=r(1260),d=r(3308),M=r(6409),c=r(5611),h=r(4423),t=r(3279);let p=(()=>{class i extends h.F{constructor(e){super("Produto",e),this.injector=e,this.inputSearchConfig.searchFields=["nome"]}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(t.zZn))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var _=r(291);class g extends _.C{constructor(a){super(),this.nome="",this.data_ativado=new Date,this.data_desativado=new Date,this.nome_fantasia="",this.tipo="produto",this.descricao="",this.url="",this.produto_processo_cadeia_valor=[],this.produto_produto=[],this.produto_cliente=[],this.produto_solucoes=[],this.unidade_id="",this.initialization(a)}}var w=r(9062),k=r(4796);let z=(()=>{class i{constructor(e){this.auth=e,this.produto=[]}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(k.u))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var v=r(2034),C=r(5852),U=r(7772),Q=r(2305),J=r(6764),X=r(114),G=r(16),H=r(5201);function K(i,a){1&i&&t.nrm(0,"toolbar")}function Z(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"Nome"),t.k0s())}function W(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"#ID"),t.k0s())}function x(i,a){1&i&&(t.j41(0,"span"),t.EFF(1,"Status"),t.k0s())}function q(i,a){if(1&i&&(t.j41(0,"div",23),t.EFF(1," Filtros aplicados: "),t.DNE(2,Z,2,0,"span",6)(3,W,2,0,"span",6)(4,x,2,0,"span",6),t.k0s()),2&i){const e=t.XpG();t.R7$(2),t.Y8G("ngIf",e.filter.controls.nome.value.length>0),t.R7$(),t.Y8G("ngIf",e.filter.controls.id.value.length>0),t.R7$(),t.Y8G("ngIf",e.filter.controls.status.value.length>0)}}function tt(i,a){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&i){const e=a.row;t.R7$(),t.SpI(" ",e.identificador,"")}}function et(i,a){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&i){const e=a.row;t.R7$(),t.SpI(" ",e.nome,"")}}function ot(i,a){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&i){const e=a.row;t.R7$(),t.SpI(" ",e.nome_fantasia,"")}}function it(i,a){1&i&&t.nrm(0,"badge",27)}function nt(i,a){1&i&&t.nrm(0,"badge",28)}function st(i,a){if(1&i&&t.DNE(0,it,1,0,"badge",25)(1,nt,1,0,"badge",26),2&i){const e=a.row,n=t.XpG(2);t.Y8G("ngIf",n.ativo(e)),t.R7$(),t.Y8G("ngIf",!n.ativo(e))}}function at(i,a){if(1&i&&(t.j41(0,"column",24),t.DNE(1,st,2,2,"ng-template",null,3,t.C5r),t.k0s()),2&i){const e=t.sdS(2);t.Y8G("template",e)}}function rt(i,a){if(1&i){const e=t.RV6();t.j41(0,"input-switch",30),t.bIt("change",function(){const o=t.eBV(e).row,s=t.XpG(2);return t.Njj(s.ativarDesativar(o))}),t.k0s()}if(2&i){const e=a.row,n=t.XpG(2);t.Y8G("value",n.ativo(e)?"true":"false")("valueOn","true")("valueOff","false")}}function lt(i,a){if(1&i&&(t.j41(0,"column",29),t.DNE(1,rt,1,3,"ng-template",null,4,t.C5r),t.k0s()),2&i){const e=t.sdS(2);t.Y8G("template",e)}}let dt=(()=>{class i extends w.P{constructor(e,n){super(e,g,p),this.injector=e,this.isUpdating=!1,this.isChefe=!1,this.isCurador=!1,this.filterWhere=o=>{let s=[],l=o.value;return l.nome?.length&&s.push(["nome","like","%"+l.nome.trim().replace(" ","%")+"%"]),l.id?.length&&s.push(["id","=",l.id]),l.unidade_id?.length&&s.push(["unidade_id","==",l.unidade_id]),l.status&&"ativo"==l.status&&s.push(["data_ativado","!=",null]),l.status&&"inativo"==l.status&&s.push(["data_ativado","==",null]),s},this.produtoService=e.get(z),this.title=this.lex.translate("Produtos"),this.filter=this.fh.FormBuilder({nome:{default:this.metadata?.nome??""},unidade_id:{default:""},id:{default:""},status:{default:""}}),this.join=["produtoProcessoCadeiaValor"],this.isChefe=this.auth.isGestorAlgumaAreaTrabalho(!1),this.isCurador=this.auth.isUsuarioCurador()}ngOnInit(){super.ngOnInit()}dynamicButtons(e){let n=[];return e._status||n.push({label:"Detalhes",icon:"bi bi-eye",color:"btn-outline-success",onClick:this.showDetalhes.bind(this)}),n}showDetalhes(e){var n=this;return(0,d.A)(function*(){n.go.navigate({route:["gestao","produto",e.id,"show"]},{metadata:{produto:e}})})()}ativarDesativar(e){var n=this;return(0,d.A)(function*(){if(n.isUpdating)return void console.log("Aguarde o t\xe9rmino do processo anterior");n.isUpdating=!0;let o=n.ativo(e);e.data_desativado=null,e.data_ativado=null,o?e.data_desativado=new Date:e.data_ativado=new Date;let s="";try{yield n.dao?.update(e.id,{id:e.id,data_desativado:e.data_desativado,data_ativado:e.data_ativado})}catch(l){if(l instanceof M.yz&&(s=l.error.message),l.validationErrors){console.log(l.status);let u=l.validationErrors;s="",Object.keys(u).forEach(f=>{u[f].forEach(E=>{s+=`${f}: ${E}\n`})})}s=s||"Erro inesperado",n.dialog.alert("Erro ao ativar/inativar o produto",s,"Fechar","fa fa-exclamation-triangle")}finally{n.isUpdating=!1}})()}onBuscaAvancada(){var n,e=this;this.go.navigate({route:["gestao","produto","filter"]},{metadata:{nome:this.filter?.controls.nome.value,id:this.filter?.controls.id.value,status:this.filter?.controls.status.value,unidade_id:this.filter?.controls.unidade_id.value},modalClose:(n=(0,d.A)(function*(o){o&&e.filter&&(e.filter?.controls.nome.setValue(o.nome),e.filter?.controls.id.setValue(o.id),e.filter?.controls.status.setValue(o.status),e.filter?.controls.unidade_id.setValue(o.unidade_id),e.grid.reloadFilter())}),function(s){return n.apply(this,arguments)})})}onFilterClear(){this.filter?.reset(),this.grid.reloadFilter()}filtrosDefinidos(){return this.filter?.controls.nome.value.length>0||this.filter?.controls.id.value.length>0||this.filter?.controls.unidade_id.value.length>0||this.filter?.controls.status.value.length>0}ativo(e){return e.data_ativado instanceof Date}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.zZn),t.rXU(p))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-produto-list"]],viewQuery:function(n,o){if(1&n&&t.GBs(c._,5),2&n){let s;t.mGM(s=t.lsd())&&(o.grid=s.first)}},features:[t.Vt3],decls:28,vars:32,consts:[["columnID",""],["columnNome",""],["columnSigla",""],["columnStatus",""],["columnAtivar",""],[3,"select","dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit","hasDelete"],[4,"ngIf"],[3,"deleted","form","where","submit","collapseChange","collapsed"],[1,"row"],[1,"col-md-4"],["controlName","nome",3,"size","label","control","placeholder"],[1,"col-md-3","busca-avancada"],[1,"busca-avancada-link"],[3,"click"],[1,"busca-avancada-clear"],["class","busca-avancada-filtros-aplicados",4,"ngIf"],["title","ID",3,"template"],["title","Nome",3,"template"],["title","Sigla/Nome Fantasia",3,"template"],["title","Status",3,"template",4,"ngIf"],["title","Ativar/Desativar",3,"template",4,"ngIf"],["type","options",3,"onEdit","options","dynamicButtons"],[3,"rows"],[1,"busca-avancada-filtros-aplicados"],["title","Status",3,"template"],["color","success","label","Ativo",4,"ngIf"],["color","danger","label","Inativo",4,"ngIf"],["color","success","label","Ativo"],["color","danger","label","Inativo"],["title","Ativar/Desativar",3,"template"],[3,"change","value","valueOn","valueOff"]],template:function(n,o){if(1&n){const s=t.RV6();t.j41(0,"grid",5),t.bIt("select",function(u){return t.eBV(s),t.Njj(o.onSelect(u))}),t.DNE(1,K,1,0,"toolbar",6),t.j41(2,"filter",7)(3,"div",8)(4,"div",9),t.nrm(5,"input-text",10),t.k0s(),t.j41(6,"div",11)(7,"div",12)(8,"a",13),t.bIt("click",function(){return t.eBV(s),t.Njj(o.onBuscaAvancada())}),t.EFF(9,"Busca Avan\xe7ada"),t.k0s()(),t.j41(10,"div",14)(11,"a",13),t.bIt("click",function(){return t.eBV(s),t.Njj(o.onFilterClear())}),t.EFF(12,"Limpar filtros de busca"),t.k0s()(),t.DNE(13,q,5,3,"div",15),t.k0s()()(),t.j41(14,"columns")(15,"column",16),t.DNE(16,tt,3,1,"ng-template",null,0,t.C5r),t.k0s(),t.j41(18,"column",17),t.DNE(19,et,3,1,"ng-template",null,1,t.C5r),t.k0s(),t.j41(21,"column",18),t.DNE(22,ot,3,1,"ng-template",null,2,t.C5r),t.k0s(),t.DNE(24,at,3,1,"column",19)(25,lt,3,1,"column",20),t.nrm(26,"column",21),t.k0s(),t.nrm(27,"pagination",22),t.k0s()}if(2&n){const s=t.sdS(17),l=t.sdS(20),u=t.sdS(23);t.Y8G("dao",o.dao)("add",o.add)("title",o.isModal?"":o.title)("orderBy",o.orderBy)("groupBy",o.groupBy)("join",o.join)("selectable",o.selectable)("hasAdd",o.isChefe)("hasEdit",o.isChefe)("hasDelete",o.isChefe),t.R7$(),t.Y8G("ngIf",!o.selectable),t.R7$(),t.Y8G("deleted",o.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",o.filter)("where",o.filterWhere)("submit",o.filterSubmit.bind(o))("collapseChange",o.filterCollapseChange.bind(o))("collapsed",!o.selectable&&o.filterCollapsed),t.R7$(3),t.Y8G("size",12)("label","Nome do "+o.lex.translate("produto"))("control",o.filter.controls.nome)("placeholder","Nome do "+o.lex.translate("produto")),t.BMQ("maxlength",250),t.R7$(8),t.Y8G("ngIf",o.filtrosDefinidos),t.R7$(2),t.Y8G("template",s),t.R7$(3),t.Y8G("template",l),t.R7$(3),t.Y8G("template",u),t.R7$(3),t.Y8G("ngIf",!o.isCurador),t.R7$(),t.Y8G("ngIf",o.isCurador),t.R7$(),t.Y8G("onEdit",o.edit)("options",o.options)("dynamicButtons",o.dynamicButtons.bind(o)),t.R7$(),t.Y8G("rows",o.rowsLimit)}},dependencies:[R.bT,c._,v.T,C.I,U.i,Q.H,J.e,X.S,G.H,H.n],styles:["filter[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{align-items:end}.busca-avancada[_ngcontent-%COMP%]   .busca-avancada-link[_ngcontent-%COMP%], .busca-avancada[_ngcontent-%COMP%]   .busca-avancada-clear[_ngcontent-%COMP%]{margin-bottom:6px}.busca-avancada[_ngcontent-%COMP%]   .busca-avancada-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .busca-avancada[_ngcontent-%COMP%]   .busca-avancada-clear[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none;cursor:pointer;color:#000}.busca-avancada[_ngcontent-%COMP%]   .busca-avancada-filtros-aplicados[_ngcontent-%COMP%]{margin-top:4px;font-size:12px}.busca-avancada[_ngcontent-%COMP%]   .busca-avancada-filtros-aplicados[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;background-color:#ccc;padding:1px 5px;margin-right:3px;border-radius:3px}"]})}}return i})();var P=r(1620),b=r(6819),m=r(1641),A=r(3535),ut=r(24),F=r(9226),ct=r(158),j=r(3678),V=r(2075),I=r(6774),mt=r(8467),pt=r(242);let ft=(()=>{class i extends h.F{constructor(e){super("ProdutoProcesso",e),this.injector=e}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(t.zZn))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class O extends _.C{constructor(a){super(),this.cadeia_valor_processo_id="",this.produto_id="",this.initialization(a)}}var y=r(4795);const ht=["cadeiaValor"],_t=["cadeiaProcesso"],gt=()=>["unidade"],vt=i=>["unidade_id","==",i],Ct=i=>[i],Pt=i=>({unidade_id:i}),bt=i=>({filter:i});function Ft(i,a){1&i&&(t.j41(0,"div",12)(1,"span")(2,"strong"),t.EFF(3,"Cadeia de valor"),t.k0s()()())}function yt(i,a){if(1&i&&(t.j41(0,"div",13)(1,"p"),t.EFF(2),t.k0s()()),2&i){const e=a.row;t.R7$(2),t.JRh(null==e.cadeia_valor_processo||null==e.cadeia_valor_processo.cadeia_valor?null:e.cadeia_valor_processo.cadeia_valor.nome)}}function Et(i,a){if(1&i){const e=t.RV6();t.j41(0,"input-search",14,7),t.bIt("change",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.onCadeiaChange(o))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("placeholder","Selecione a "+e.lex.translate("cadeia de valor"))("join",t.lJ4(5,gt))("where",t.eq3(8,Ct,t.eq3(6,vt,null==e.auth.unidade?null:e.auth.unidade.id)))("selectParams",t.eq3(12,bt,t.eq3(10,Pt,null==e.auth.unidade?null:e.auth.unidade.id)))("dao",e.cadeiaValorDao)}}function Rt(i,a){1&i&&(t.j41(0,"div",12)(1,"span")(2,"strong"),t.EFF(3,"Processo"),t.k0s()()())}function jt(i,a){if(1&i&&(t.j41(0,"div",13)(1,"p"),t.EFF(2),t.k0s()()),2&i){const e=a.row;t.R7$(2),t.JRh(null==e.cadeia_valor_processo?null:e.cadeia_valor_processo.nome)}}function Dt(i,a){if(1&i&&t.nrm(0,"input-select",15,8),2&i){const e=t.XpG();t.Y8G("control",e.form.controls.cadeia_valor_processo_id)("items",e.processos)}}let Tt=(()=>{class i extends y.g{set control(e){super.control=e}get control(){return super.control}set entity(e){super.entity=e}get entity(){return super.entity}set disabled(e){this._disabled!=e&&(this._disabled=e)}get disabled(){return this._disabled}set noPersist(e){super.noPersist=e}get noPersist(){return super.noPersist}get items(){return this.gridControl.value||this.gridControl.setValue(new O),this.gridControl.value.produto_processo_cadeia_valor||(this.gridControl.value.produto_processo_cadeia_valor=[]),this.gridControl.value.produto_processo_cadeia_valor}constructor(e){super(e),this.injector=e,this.processos=[],this._disabled=!1,this.dao=e.get(ft),this.cdRef=e.get(t.gRc),this.cadeiaValorDao=e.get(mt.X),this.processosDao=e.get(pt.p),this.form=this.fh.FormBuilder({cadeia_valor_processo_id:{default:null},cadeia_valor_id:{default:null}},this.cdRef),this.join=["cadeiaValorProcesso.cadeiaValor"]}ngOnInit(){var e=()=>super.ngOnInit,n=this;return(0,d.A)(function*(){e().call(n),n.entity=n.metadata?.entity||n.entity})()}addProcesso(){var e=this;return(0,d.A)(function*(){return Object.assign(new O,{_status:"ADD",id:e.dao.generateUuid(),cadeia_valor_processo_id:""})})()}loadProcesso(e,n){return(0,d.A)(function*(){"ADD"!=n._status&&(e.controls.cadeia_valor_id.setValue(n.cadeia_valor_processo.cadeia_valor.id),e.controls.cadeia_valor_processo_id.setValue(n.cadeia_valor_processo.id))})()}removeProcesso(e){var n=this;return(0,d.A)(function*(){if(yield n.dialog.confirm("Exclui ?","Deseja realmente excluir?")){n.loading=!0;try{n.isNoPersist?Object.assign(e,{_status:"DELETE"}):yield n.dao?.delete(e.id)}finally{n.loading=!1}return!n.isNoPersist}return!1})()}saveProcesso(e,n){var o=this;return(0,d.A)(function*(){let s;return o.form.markAllAsTouched(),o.form.valid&&(n.id="NEW"==n.id?o.dao.generateUuid():n.id,n.cadeia_valor_processo=o.cadeiaProcesso.selectedItem?.data,n.cadeia_valor_processo.cadeia_valor=o.cadeiaValor.selectedEntity,n.cadeia_valor_processo_id=o.form.controls.cadeia_valor_processo_id.value,s=n,o.cdRef.detectChanges()),s})()}saveEndProcesso(e){}onCadeiaChange(e){var n=this;return(0,d.A)(function*(){n.cdRef.detectChanges(),n.loadProcessoCadeiaValor()})()}loadProcessoCadeiaValor(){try{let e=this.form.controls.cadeia_valor_id.value;this.processosDao?.query({where:[["cadeia_valor_id","=",e]]}).asPromise().then(n=>{this.processos=n.map(o=>({key:o.id,value:o.nome,data:o}))})}catch(e){console.error("Error loading processo cadeia valor:",e),this.processos=[]}}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["produto-list-processo"]],viewQuery:function(n,o){if(1&n&&(t.GBs(m.Q,5),t.GBs(c._,5),t.GBs(ht,5),t.GBs(_t,5)),2&n){let s;t.mGM(s=t.lsd())&&(o.editableForm=s.first),t.mGM(s=t.lsd())&&(o.grid=s.first),t.mGM(s=t.lsd())&&(o.cadeiaValor=s.first),t.mGM(s=t.lsd())&&(o.cadeiaProcesso=s.first)}},inputs:{control:"control",entity:"entity",disabled:"disabled",noPersist:"noPersist",cdRef:"cdRef"},features:[t.Vt3],decls:18,vars:26,consts:[["gridProcessos",""],["titleCadeia",""],["columnCadeia",""],["editCadeia",""],["titleProcesso",""],["columnProcesso",""],["editProcesso",""],["cadeiaValor",""],["cadeiaProcesso",""],["noMargin","","editable","",3,"items","form","selectable","minHeight","join","groupBy","add","remove","save","load","saveEnd","hasDelete","hasEdit","hasAdd"],[3,"titleTemplate","template","editTemplate","verticalAlign","width","align"],["type","options"],[1,"text-center"],[1,"w-100","d-flex","justify-content-center"],["label","","controlName","cadeia_valor_id","required","",3,"change","placeholder","join","where","selectParams","dao"],["fullEntity","","controlName","cadeia_valor_processo_id","controlName","cadeia_valor_processo_id","required","",3,"control","items"]],template:function(n,o){if(1&n&&(t.j41(0,"grid",9,0)(2,"columns")(3,"column",10),t.DNE(4,Ft,4,0,"ng-template",null,1,t.C5r)(6,yt,3,1,"ng-template",null,2,t.C5r)(8,Et,2,14,"ng-template",null,3,t.C5r),t.k0s(),t.j41(10,"column",10),t.DNE(11,Rt,4,0,"ng-template",null,4,t.C5r)(13,jt,3,1,"ng-template",null,5,t.C5r)(15,Dt,2,2,"ng-template",null,6,t.C5r),t.k0s(),t.nrm(17,"column",11),t.k0s()()),2&n){const s=t.sdS(5),l=t.sdS(7),u=t.sdS(9),f=t.sdS(12),D=t.sdS(14),E=t.sdS(16);t.Y8G("items",o.items)("form",o.form)("selectable",!1)("minHeight",o.items.length>2?0:300)("join",o.join)("groupBy",o.groupBy)("add",o.addProcesso.bind(o))("remove",o.removeProcesso.bind(o))("save",o.saveProcesso.bind(o))("load",o.loadProcesso.bind(o))("saveEnd",o.saveEndProcesso.bind(o))("hasDelete",!0)("hasEdit",!0)("hasAdd",!0),t.R7$(3),t.Y8G("titleTemplate",s)("template",l)("editTemplate",u)("verticalAlign","middle")("width",300)("align","center"),t.R7$(7),t.Y8G("titleTemplate",f)("template",D)("editTemplate",E)("verticalAlign","middle")("width",300)("align","center")}},dependencies:[c._,v.T,C.I,F.O,j.K]})}}return i})(),Gt=(()=>{class i extends h.F{constructor(e){super("ProdutoProduto",e),this.injector=e}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(t.zZn))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var St=r(5492);class N extends _.C{constructor(a){super(),this.produto_base_id="",this.produto_id="",this.tipo="",this.initialization(a)}}const kt=["produtoRelacionado"],At=i=>["id","!=",i],Vt=i=>[i];function It(i,a){1&i&&(t.j41(0,"div",17)(1,"span")(2,"strong"),t.EFF(3,"Origem"),t.k0s()()())}function Ot(i,a){}function Nt(i,a){if(1&i){const e=t.RV6();t.j41(0,"input-select",18,10),t.bIt("change",function(o){t.eBV(e);const s=t.XpG();return t.Njj(s.alteraTipoCliente(o))}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("dao",e.tipoClienteDao)}}function Bt(i,a){1&i&&(t.j41(0,"div",17)(1,"span")(2,"strong"),t.EFF(3,"Fornecedor"),t.k0s()()())}function Lt(i,a){}function $t(i,a){if(1&i&&t.nrm(0,"input-select",19,11),2&i){const e=t.XpG();t.Y8G("items",e.clientes)}}function Yt(i,a){1&i&&(t.j41(0,"div",17)(1,"span")(2,"strong"),t.EFF(3,"Insumo"),t.k0s()()())}function Mt(i,a){if(1&i&&(t.j41(0,"div",20)(1,"p"),t.EFF(2),t.k0s()()),2&i){const e=a.row;t.R7$(2),t.JRh(null==e.produto_relacionado?null:e.produto_relacionado.nome)}}function wt(i,a){if(1&i&&t.nrm(0,"input-select",21,12),2&i){const e=t.XpG();t.Y8G("control",e.form.controls.produto_id)("dao",e.produtoDao)("where",t.eq3(5,Vt,t.eq3(3,At,null==e.entity?null:e.entity.id)))}}let zt=(()=>{class i extends y.g{set control(e){super.control=e}get control(){return super.control}set entity(e){super.entity=e}get entity(){return super.entity}set disabled(e){this._disabled!=e&&(this._disabled=e)}get disabled(){return this._disabled}set noPersist(e){super.noPersist=e}get noPersist(){return super.noPersist}get items(){return this.gridControl.value||this.gridControl.setValue(new N),this.gridControl.value.produto_produto||(this.gridControl.value.produto_produto=[]),this.gridControl.value.produto_produto}constructor(e){super(e),this.injector=e,this._disabled=!1,this.clientes=[],this.dao=e.get(Gt),this.produtoDao=e.get(p),this.tipoClienteDao=e.get(St.E),this.cdRef=e.get(t.gRc),this.form=this.fh.FormBuilder({tipo_cliente_id:{default:null},cliente_id:{default:null},produto_id:{default:null},tipo:{default:""}},this.cdRef),this.join=["produtoProduto.produtoRelacionado"]}addProduto(){var e=this;return(0,d.A)(function*(){return Object.assign(new N,{_status:"ADD",id:e.dao.generateUuid(),produto_id:""})})()}loadProduto(e,n){return(0,d.A)(function*(){"ADD"!=n._status&&(e.controls.produto_id.setValue(n.produto_id),e.controls.tipo.setValue(n.tipo))})()}removeProduto(e){var n=this;return(0,d.A)(function*(){if(yield n.dialog.confirm("Exclui ?","Deseja realmente excluir?")){n.loading=!0;try{n.isNoPersist?Object.assign(e,{_status:"DELETE"}):yield n.dao?.delete(e.id)}finally{n.loading=!1}return!n.isNoPersist}return!1})()}saveProduto(e,n){var o=this;return(0,d.A)(function*(){let s;return o.form.markAllAsTouched(),o.form.valid&&(n.id="NEW"==n.id?o.dao.generateUuid():n.id,n.produto_id=o.form.controls.produto_id.value,n.tipo=o.form.controls.tipo.value,n.produto_relacionado=o.produtoRelacionado.selectedItem?.data,s=n,o.cdRef.detectChanges()),s})()}alteraTipoCliente(e){var n=this;return(0,d.A)(function*(){let o=n.form.controls.tipo_cliente_id.value;console.log(o);const s=(yield n.clienteDao?.query({where:[["tipo_cliente_id","=",o]]}).asPromise())||[];n.clientes=s.map(l=>({value:l.id,key:l.nome}))})()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["produto-list-produto"]],viewQuery:function(n,o){if(1&n&&(t.GBs(m.Q,5),t.GBs(c._,5),t.GBs(kt,5)),2&n){let s;t.mGM(s=t.lsd())&&(o.editableForm=s.first),t.mGM(s=t.lsd())&&(o.grid=s.first),t.mGM(s=t.lsd())&&(o.produtoRelacionado=s.first)}},inputs:{control:"control",entity:"entity",disabled:"disabled",noPersist:"noPersist",cdRef:"cdRef"},features:[t.Vt3],decls:25,vars:27,consts:[["gridProdutos",""],["tipoCliente",""],["columnTipoCliente",""],["editTipoCliente",""],["cliente",""],["columnCliente",""],["editCliente",""],["titleProduto",""],["columnProduto",""],["editProduto",""],["tipoClienteID",""],["clienteID",""],["produtoRelacionado",""],["noMargin","","editable","",3,"items","form","selectable","minHeight","join","groupBy","add","remove","save","load","hasDelete","hasEdit","hasAdd"],[3,"titleTemplate","template","editTemplate","width"],[3,"titleTemplate","template","editTemplate","verticalAlign","width","align"],["type","options"],[1,"text-center"],["fullEntity","","controlName","tipo_cliente_id","required","",3,"change","dao"],["fullEntity","","controlName","cliente_id","required","",3,"items"],[1,"w-100","d-flex","justify-content-center"],["fullEntity","","controlName","produto_id","required","",3,"control","dao","where"]],template:function(n,o){if(1&n&&(t.j41(0,"grid",13,0)(2,"columns")(3,"column",14),t.DNE(4,It,4,0,"ng-template",null,1,t.C5r)(6,Ot,0,0,"ng-template",null,2,t.C5r)(8,Nt,2,1,"ng-template",null,3,t.C5r),t.k0s(),t.j41(10,"column",14),t.DNE(11,Bt,4,0,"ng-template",null,4,t.C5r)(13,Lt,0,0,"ng-template",null,5,t.C5r)(15,$t,2,1,"ng-template",null,6,t.C5r),t.k0s(),t.j41(17,"column",15),t.DNE(18,Yt,4,0,"ng-template",null,7,t.C5r)(20,Mt,3,1,"ng-template",null,8,t.C5r)(22,wt,2,7,"ng-template",null,9,t.C5r),t.k0s(),t.nrm(24,"column",16),t.k0s()()),2&n){const s=t.sdS(5),l=t.sdS(7),u=t.sdS(9),f=t.sdS(12),D=t.sdS(14),E=t.sdS(16),Re=t.sdS(19),je=t.sdS(21),De=t.sdS(23);t.Y8G("items",o.items)("form",o.form)("selectable",!1)("minHeight",o.items.length>2?0:300)("join",o.join)("groupBy",o.groupBy)("add",o.addProduto.bind(o))("remove",o.removeProduto.bind(o))("save",o.saveProduto.bind(o))("load",o.loadProduto.bind(o))("hasDelete",!0)("hasEdit",!0)("hasAdd",!0),t.R7$(3),t.Y8G("titleTemplate",s)("template",l)("editTemplate",u)("width",150),t.R7$(7),t.Y8G("titleTemplate",f)("template",D)("editTemplate",E)("width",150),t.R7$(7),t.Y8G("titleTemplate",Re)("template",je)("editTemplate",De)("verticalAlign","middle")("width",300)("align","center")}},dependencies:[c._,v.T,C.I,j.K]})}}return i})();var Ut=r(5099);let Qt=(()=>{class i extends h.F{constructor(e){super("ProdutoCliente",e),this.injector=e}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(t.zZn))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class B extends _.C{constructor(a){super(),this.produto_id="",this.cliente_id="",this.initialization(a)}}const Jt=["cliente"],Xt=()=>["cadastros","cliente"],Ht=i=>({route:i});function Kt(i,a){1&i&&(t.j41(0,"div",8)(1,"span")(2,"strong"),t.EFF(3,"Cliente"),t.k0s()()())}function Zt(i,a){if(1&i&&(t.j41(0,"div",9)(1,"p"),t.EFF(2),t.k0s()()),2&i){const e=a.row;t.R7$(2),t.JRh(e.cliente.nome)}}function Wt(i,a){if(1&i&&t.nrm(0,"input-search",10,4),2&i){const e=t.XpG();t.Y8G("placeholder","Selecione o cliente")("dao",e.clienteDao)("selectRoute",t.eq3(4,Ht,t.lJ4(3,Xt)))}}let xt=(()=>{class i extends y.g{set control(e){super.control=e}get control(){return super.control}set entity(e){super.entity=e}get entity(){return super.entity}set disabled(e){this._disabled!=e&&(this._disabled=e)}get disabled(){return this._disabled}set noPersist(e){super.noPersist=e}get noPersist(){return super.noPersist}get items(){return this.gridControl.value||this.gridControl.setValue(new B),this.gridControl.value.produto_cliente||(this.gridControl.value.produto_cliente=[]),this.gridControl.value.produto_cliente}constructor(e){super(e),this.injector=e,this._disabled=!1,this.dao=e.get(Qt),this.produtoDao=e.get(p),this.clienteDao=e.get(Ut.K),this.cdRef=e.get(t.gRc),this.form=this.fh.FormBuilder({cliente_id:{default:""}},this.cdRef),this.join=["produtoCliente.cliente"]}addCliente(){var e=this;return(0,d.A)(function*(){return Object.assign(new B,{_status:"ADD",id:e.dao.generateUuid(),cliente_id:""})})()}loadCliente(e,n){return(0,d.A)(function*(){"ADD"!=n._status&&e.controls.cliente_id.setValue(n.cliente_id)})()}removeCliente(e){var n=this;return(0,d.A)(function*(){if(yield n.dialog.confirm("Exclui ?","Deseja realmente excluir?")){n.loading=!0;try{n.isNoPersist?Object.assign(e,{_status:"DELETE"}):yield n.dao?.delete(e.id)}finally{n.loading=!1}return!n.isNoPersist}return!1})()}saveCliente(e,n){var o=this;return(0,d.A)(function*(){let s;return o.form.markAllAsTouched(),o.form.valid&&(n.id="NEW"==n.id?o.dao.generateUuid():n.id,n.cliente_id=o.form.controls.cliente_id.value,n.cliente=o.cliente.selectedEntity,s=n,o.cdRef.detectChanges()),s})()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["produto-list-cliente"]],viewQuery:function(n,o){if(1&n&&(t.GBs(m.Q,5),t.GBs(c._,5),t.GBs(Jt,5)),2&n){let s;t.mGM(s=t.lsd())&&(o.editableForm=s.first),t.mGM(s=t.lsd())&&(o.grid=s.first),t.mGM(s=t.lsd())&&(o.cliente=s.first)}},inputs:{control:"control",entity:"entity",disabled:"disabled",noPersist:"noPersist",cdRef:"cdRef"},features:[t.Vt3],decls:11,vars:19,consts:[["gridClientes",""],["titleCliente",""],["columnCliente",""],["editCliente",""],["cliente",""],["noMargin","","editable","",3,"items","form","selectable","minHeight","join","groupBy","add","remove","save","load","hasDelete","hasEdit","hasAdd"],[3,"titleTemplate","template","editTemplate","verticalAlign","width","align"],["type","options"],[1,"text-center"],[1,"w-100","d-flex","justify-content-center"],["label","","controlName","cliente_id","required","",3,"placeholder","dao","selectRoute"]],template:function(n,o){if(1&n&&(t.j41(0,"grid",5,0)(2,"columns")(3,"column",6),t.DNE(4,Kt,4,0,"ng-template",null,1,t.C5r)(6,Zt,3,1,"ng-template",null,2,t.C5r)(8,Wt,2,6,"ng-template",null,3,t.C5r),t.k0s(),t.nrm(10,"column",7),t.k0s()()),2&n){const s=t.sdS(5),l=t.sdS(7),u=t.sdS(9);t.Y8G("items",o.items)("form",o.form)("selectable",!1)("minHeight",o.items.length>2?0:300)("join",o.join)("groupBy",o.groupBy)("add",o.addCliente.bind(o))("remove",o.removeCliente.bind(o))("save",o.saveCliente.bind(o))("load",o.loadCliente.bind(o))("hasDelete",!0)("hasEdit",!0)("hasAdd",!0),t.R7$(3),t.Y8G("titleTemplate",s)("template",l)("editTemplate",u)("verticalAlign","middle")("width",300)("align","center")}},dependencies:[c._,v.T,C.I,F.O]})}}return i})(),qt=(()=>{class i extends h.F{constructor(e){super("ProdutoSolucao",e),this.injector=e}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(t.zZn))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var te=r(9175);class L extends _.C{constructor(a){super(),this.produto_id="",this.solucao_id="",this.initialization(a)}}const ee=["solucao"],oe=()=>["gestao","solucao"],ie=()=>({mode:"search"}),ne=(i,a)=>({route:i,params:a});function se(i,a){1&i&&(t.j41(0,"div",8)(1,"span")(2,"strong"),t.EFF(3,"Solu\xe7\xe3o"),t.k0s()()())}function ae(i,a){if(1&i&&(t.j41(0,"div",9)(1,"p"),t.EFF(2),t.k0s()()),2&i){const e=a.row;t.R7$(2),t.JRh(e.solucao.nome)}}function re(i,a){if(1&i&&t.nrm(0,"input-search",10,4),2&i){const e=t.XpG();t.Y8G("placeholder","Selecione a solu\xe7\xe3o")("dao",e.solucaoDao)("selectRoute",t.l_i(5,ne,t.lJ4(3,oe),t.lJ4(4,ie)))}}let le=(()=>{class i extends y.g{set control(e){super.control=e}get control(){return super.control}set entity(e){super.entity=e}get entity(){return super.entity}set disabled(e){this._disabled!=e&&(this._disabled=e)}get disabled(){return this._disabled}set noPersist(e){super.noPersist=e}get noPersist(){return super.noPersist}get items(){return this.gridControl.value||this.gridControl.setValue(new L),this.gridControl.value.produto_solucoes||(this.gridControl.value.produto_solucoes=[]),this.gridControl.value.produto_solucoes}constructor(e){super(e),this.injector=e,this._disabled=!1,this.dao=e.get(qt),this.produtoDao=e.get(p),this.solucaoDao=e.get(te.Y),this.cdRef=e.get(t.gRc),this.form=this.fh.FormBuilder({solucao_id:{default:""}},this.cdRef),this.join=["produtoSolucao.solucao"]}addSolucao(){var e=this;return(0,d.A)(function*(){return Object.assign(new L,{_status:"ADD",id:e.dao.generateUuid(),solucao_id:""})})()}loadSolucao(e,n){return(0,d.A)(function*(){"ADD"!=n._status&&e.controls.solucao_id.setValue(n.solucao_id)})()}removeSolucao(e){var n=this;return(0,d.A)(function*(){if(yield n.dialog.confirm("Excluir?","Deseja realmente excluir a Solu\xe7\xe3o?")){n.loading=!0;try{n.isNoPersist?Object.assign(e,{_status:"DELETE"}):yield n.dao?.delete(e.id)}finally{n.loading=!1}return!n.isNoPersist}return!1})()}saveSolucao(e,n){var o=this;return(0,d.A)(function*(){let s;return o.form.markAllAsTouched(),o.form.valid&&(n.id="NEW"==n.id?o.dao.generateUuid():n.id,n.solucao_id=o.form.controls.solucao_id.value,n.solucao=o.solucao.selectedEntity,s=n,o.cdRef.detectChanges()),s})()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["produto-list-solucao"]],viewQuery:function(n,o){if(1&n&&(t.GBs(m.Q,5),t.GBs(c._,5),t.GBs(ee,5)),2&n){let s;t.mGM(s=t.lsd())&&(o.editableForm=s.first),t.mGM(s=t.lsd())&&(o.grid=s.first),t.mGM(s=t.lsd())&&(o.solucao=s.first)}},inputs:{control:"control",entity:"entity",disabled:"disabled",noPersist:"noPersist",cdRef:"cdRef"},features:[t.Vt3],decls:11,vars:19,consts:[["gridSolucoes",""],["titleSolucao",""],["columnSolucao",""],["editSolucao",""],["solucao",""],["noMargin","","editable","",3,"items","form","selectable","minHeight","join","groupBy","add","remove","save","load","hasDelete","hasEdit","hasAdd"],[3,"titleTemplate","template","editTemplate","verticalAlign","width","align"],["type","options"],[1,"text-center"],[1,"w-100","d-flex","justify-content-center"],["label","","required","","controlName","solucao_id",3,"placeholder","dao","selectRoute"]],template:function(n,o){if(1&n&&(t.j41(0,"grid",5,0)(2,"columns")(3,"column",6),t.DNE(4,se,4,0,"ng-template",null,1,t.C5r)(6,ae,3,1,"ng-template",null,2,t.C5r)(8,re,2,8,"ng-template",null,3,t.C5r),t.k0s(),t.nrm(10,"column",7),t.k0s()()),2&n){const s=t.sdS(5),l=t.sdS(7),u=t.sdS(9);t.Y8G("items",o.items)("form",o.form)("selectable",!1)("minHeight",o.items.length>2?0:300)("join",o.join)("groupBy",o.groupBy)("add",o.addSolucao.bind(o))("remove",o.removeSolucao.bind(o))("save",o.saveSolucao.bind(o))("load",o.loadSolucao.bind(o))("hasDelete",!0)("hasEdit",!0)("hasAdd",!0),t.R7$(3),t.Y8G("titleTemplate",s)("template",l)("editTemplate",u)("verticalAlign","middle")("width",300)("align","center")}},dependencies:[c._,v.T,C.I,F.O]})}}return i})();const de=["unidade"];let $=(()=>{class i extends ut.n{constructor(e){super(e,g,p),this.injector=e,this.unidadeDao=e.get(A.s),this.join=["produtoProcessoCadeiaValor.cadeiaValorProcesso.cadeiaValor","produtoProduto.produtoRelacionado","produtoCliente.cliente","produtoSolucoes.solucao"],this.form=this.fh.FormBuilder({nome:{default:""},nome_fantasia:{default:""},descricao:{default:""},url:{default:""},tipo:{default:""},unidade_id:{default:""},produto_processo_cadeia_valor:{default:[]},produto_produto:{default:[]},produto_cliente:{default:[]},produto_solucoes:{default:[]}})}loadData(e,n){var o=this;return(0,d.A)(function*(){let s=Object.assign({},n.value);e.unidade_id=e.unidade?.id||o.auth.unidade.id,n.patchValue(o.util.fillForm(s,e))})()}initializeData(e){var n=this;return(0,d.A)(function*(){e.patchValue(new g),n.entity=new g,yield n.loadData(n.entity,n.form)})()}saveData(e){return new Promise((n,o)=>{const s=this.util.fill(new g,this.entity);n(this.util.fillForm(s,this.form.value))})}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-produto-form"]],viewQuery:function(n,o){if(1&n&&(t.GBs(m.Q,5),t.GBs(de,5)),2&n){let s;t.mGM(s=t.lsd())&&(o.editableForm=s.first),t.mGM(s=t.lsd())&&(o.unidade=s.first)}},features:[t.Vt3],decls:26,vars:27,consts:[["unidade",""],["clientes",""],["solucoes",""],["processos",""],["produtos",""],["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],["label","Nome do produto","icon","bi bi-textarea-t","controlName","nome","required","","labelInfo","Nome formal do produto ou servi\xe7o. Ex: Programa de Gest\xe3o e Desempenho",3,"size","control"],["label","Sigla/Nome fantasia","icon","bi bi-textarea-t","controlName","nome_fantasia","labelInfo","Nome informal do produto ou servi\xe7o. Ex: PGD",3,"size","control"],["label","Tipo","icon","bi bi-arrow-up-right-circle","controlName","tipo","required","",3,"size","items"],["label","URL","icon","bi bi-textarea-t","controlName","url","labelInfo","P\xe1gina oficial do produto ou servi\xe7o",3,"size","control"],["label","Descri\xe7\xe3o","required","",3,"control"],["controlName","unidade_id","required","",3,"size","control","dao"],[1,"row","abas"],["key","CLIENTES","label","Clientes"],["noPersist","",3,"disabled","entity"],["key","SOLUCOES","label","Solu\xe7\xf5es"],["key","PROCESSOS","label","Processos (cadeia de valor)"],["key","INSUMOS","label","Insumos"]],template:function(n,o){if(1&n){const s=t.RV6();t.j41(0,"editable-form",5),t.bIt("submit",function(){return t.eBV(s),t.Njj(o.onSaveData())})("cancel",function(){return t.eBV(s),t.Njj(o.onCancel())}),t.j41(1,"div",6)(2,"div",6),t.nrm(3,"input-text",7)(4,"input-text",8),t.k0s(),t.j41(5,"div",6),t.nrm(6,"input-select",9)(7,"input-text",10),t.k0s(),t.j41(8,"div",6),t.nrm(9,"input-textarea",11)(10,"input-search",12,0),t.k0s(),t.j41(12,"div",13)(13,"tabs")(14,"tab",14),t.nrm(15,"produto-list-cliente",15,1),t.k0s(),t.j41(17,"tab",16),t.nrm(18,"produto-list-solucao",15,2),t.k0s(),t.j41(20,"tab",17),t.nrm(21,"produto-list-processo",15,3),t.k0s(),t.j41(23,"tab",18),t.nrm(24,"produto-list-produto",15,4),t.k0s()()()()()}2&n&&(t.Y8G("form",o.form)("disabled",o.formDisabled)("title",o.isModal?"":o.title),t.R7$(3),t.Y8G("size",6)("control",o.form.controls.nome),t.BMQ("maxlength",250),t.R7$(),t.Y8G("size",6)("control",o.form.controls.nome_fantasia),t.BMQ("maxlength",250),t.R7$(2),t.Y8G("size",4)("items",o.lookup.TIPO_PRODUTO),t.R7$(),t.Y8G("size",8)("control",o.form.controls.url),t.BMQ("maxlength",250),t.R7$(2),t.Y8G("control",o.form.controls.descricao),t.BMQ("maxlength",250),t.R7$(),t.Y8G("size",4)("control",o.form.controls.unidade_id)("dao",o.unidadeDao),t.R7$(5),t.Y8G("disabled",o.formDisabled)("entity",o.entity),t.R7$(3),t.Y8G("disabled",o.formDisabled)("entity",o.entity),t.R7$(3),t.Y8G("disabled",o.formDisabled)("entity",o.entity),t.R7$(3),t.Y8G("disabled",o.formDisabled)("entity",o.entity))},dependencies:[m.Q,F.O,G.H,ct.S,j.K,V.O,I.j,Tt,zt,xt,le],styles:[".abas[_ngcontent-%COMP%]{margin-top:15px}"]})}}return i})();var ue=r(4468);function ce(i,a){1&i&&(t.j41(0,"div",2),t.nrm(1,"span",3),t.k0s())}function me(i,a){if(1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.nrm(5,"td"),t.k0s()),2&i){const e=a.$implicit;t.R7$(2),t.JRh(null==e.cadeia_valor_processo?null:e.cadeia_valor_processo.nome),t.R7$(2),t.JRh(null==e.cadeia_valor_processo?null:e.cadeia_valor_processo.sequencia)}}function pe(i,a){if(1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.nrm(9,"td"),t.k0s()),2&i){const e=a.$implicit;t.R7$(2),t.JRh(null==e.cadeia_valor_processo?null:e.cadeia_valor_processo.nome),t.R7$(2),t.JRh(null==e.cadeia_valor_processo?null:e.cadeia_valor_processo.sequencia),t.R7$(2),t.JRh(null==e.cadeia_valor_processo||null==e.cadeia_valor_processo.cadeia_valor?null:e.cadeia_valor_processo.cadeia_valor.nome),t.R7$(2),t.JRh(null==e.cadeia_valor_processo||null==e.cadeia_valor_processo.cadeia_valor||null==e.cadeia_valor_processo.cadeia_valor.unidade?null:e.cadeia_valor_processo.cadeia_valor.unidade.nome)}}function fe(i,a){if(1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"th"),t.EFF(4),t.k0s(),t.j41(5,"th"),t.EFF(6),t.k0s(),t.nrm(7,"td"),t.k0s()),2&i){const e=a.$implicit,n=t.XpG(2);t.R7$(2),t.JRh(null==e.produto_relacionado?null:e.produto_relacionado.nome),t.R7$(2),t.JRh(n.lookup.getValue(n.lookup.TIPO_RELACAO_PRODUTO,e.tipo)),t.R7$(2),t.JRh(null==e.produto_relacionado||null==e.produto_relacionado.unidade?null:e.produto_relacionado.unidade.nome)}}function he(i,a){if(1&i&&(t.qex(0),t.j41(1,"div",4)(2,"div",5)(3,"h5"),t.EFF(4),t.k0s()()(),t.j41(5,"div",6)(6,"div")(7,"small",7),t.EFF(8,"Descri\xe7\xe3o"),t.k0s(),t.j41(9,"b"),t.EFF(10),t.k0s()(),t.j41(11,"div")(12,"small",7),t.EFF(13,"Unidade"),t.k0s(),t.j41(14,"b"),t.EFF(15),t.k0s()(),t.j41(16,"div")(17,"small",7),t.EFF(18,"Ativado em"),t.k0s(),t.j41(19,"b"),t.EFF(20),t.k0s()(),t.j41(21,"div")(22,"small",7),t.EFF(23,"Desativado em"),t.k0s(),t.j41(24,"b"),t.EFF(25),t.k0s()()(),t.j41(26,"tabs")(27,"tab",8)(28,"table",9)(29,"thead")(30,"tr")(31,"th",10),t.EFF(32,"Tipo de cliente"),t.k0s(),t.j41(33,"th",10),t.EFF(34,"Cliente"),t.k0s()()(),t.j41(35,"tbody"),t.DNE(36,me,6,2,"tr",11),t.k0s()()(),t.j41(37,"tab",12)(38,"div",13)(39,"div",14)(40,"small",7),t.EFF(41,"Solu\xe7\xe3o"),t.k0s(),t.j41(42,"b"),t.EFF(43),t.k0s()(),t.j41(44,"div",14)(45,"small",7),t.EFF(46,"Unidade instituidora"),t.k0s(),t.j41(47,"b"),t.EFF(48),t.k0s()(),t.j41(49,"div",14)(50,"small",7),t.EFF(51,"Status da solu\xe7\xe3o"),t.k0s(),t.j41(52,"b"),t.EFF(53),t.k0s()()(),t.j41(54,"div",13)(55,"div",14)(56,"small",7),t.EFF(57,"Descri\xe7\xe3o"),t.k0s(),t.j41(58,"b"),t.EFF(59),t.k0s()(),t.j41(60,"div",14)(61,"small",7),t.EFF(62,"Respons\xe1vel"),t.k0s(),t.j41(63,"b"),t.EFF(64),t.k0s()(),t.j41(65,"div",14)(66,"small",7),t.EFF(67,"URL"),t.k0s(),t.j41(68,"b"),t.EFF(69),t.k0s()()()(),t.j41(70,"tab",15)(71,"table",9)(72,"thead")(73,"tr")(74,"th",10),t.EFF(75,"Processo"),t.k0s(),t.j41(76,"th",10),t.EFF(77,"N\xedvel"),t.k0s(),t.j41(78,"th",10),t.EFF(79,"Cadeia de valor"),t.k0s(),t.j41(80,"th",10),t.EFF(81,"Unidade"),t.k0s(),t.j41(82,"th",10),t.EFF(83,"Visualizar"),t.k0s()()(),t.j41(84,"tbody"),t.DNE(85,pe,10,4,"tr",11),t.k0s()()(),t.j41(86,"tab",16)(87,"table",9)(88,"thead")(89,"tr")(90,"th",10),t.EFF(91,"Produto/Servi\xe7o"),t.k0s(),t.j41(92,"th",10),t.EFF(93,"Tipo"),t.k0s(),t.j41(94,"th",10),t.EFF(95,"Unidade"),t.k0s(),t.j41(96,"th",10),t.EFF(97,"Detalhes"),t.k0s()()(),t.j41(98,"tbody"),t.DNE(99,fe,8,3,"tr",11),t.k0s()()()(),t.bVm()),2&i){const e=t.XpG();t.R7$(4),t.E5c("ID #",e.produto.id," - ",e.produto.nome," - ",e.produto.nome,""),t.R7$(6),t.JRh(e.produto.descricao),t.R7$(5),t.JRh(null==e.produto.unidade?null:e.produto.unidade.nome),t.R7$(5),t.JRh(e.produto.data_ativado),t.R7$(5),t.JRh(e.produto.data_desativado),t.R7$(11),t.Y8G("ngForOf",e.produto.produto_processo_cadeia_valor),t.R7$(7),t.JRh(e.produto.descricao),t.R7$(5),t.JRh(e.produto.descricao),t.R7$(5),t.JRh(e.produto.descricao),t.R7$(6),t.JRh(e.produto.descricao),t.R7$(5),t.JRh(e.produto.descricao),t.R7$(5),t.JRh(e.produto.descricao),t.R7$(16),t.Y8G("ngForOf",e.produto.produto_processo_cadeia_valor),t.R7$(14),t.Y8G("ngForOf",e.produto.produto_produto)}}let _e=(()=>{class i extends ue.V{constructor(e){super(e),this.injector=e,this.produtoDaoService=e.get(p),this.loading=!0}ngOnInit(){super.ngOnInit(),this.carregaProdutoDetalhado()}carregaProdutoDetalhado(){var e=this;return(0,d.A)(function*(){e.produto=yield e.produtoDaoService.getById(e.metadata.produto.id,["produtoProcessoCadeiaValor.cadeiaValorProcesso.cadeiaValor.unidade","produtoProduto.produtoRelacionado.unidade"]),e.loading=!1})()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["produto-show"]],features:[t.Vt3],decls:2,vars:2,consts:[["class","spinner-border","role","status",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"bg-dark-subtle","d-flex","p-2","px-4"],[1,""],[1,"bg-body-secondary","d-flex","justify-content-between","p-2","px-4","mb-4"],[1,"d-block"],["key","CLIENTES","label","Clientes"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["key","SOLUCAO","label","Solu\xe7\xe3o"],[1,"row"],[1,"col-4"],["key","PROCESSOS","label","Processos"],["key","PRODUTOS","label","Produtos relacionados"]],template:function(n,o){1&n&&t.DNE(0,ce,2,0,"div",0)(1,he,100,16,"ng-container",1),2&n&&(t.Y8G("ngIf",o.loading),t.R7$(),t.Y8G("ngIf",o.produto))},dependencies:[R.Sq,R.bT,V.O,I.j]})}}return i})();var ge=r(5413),ve=r(568);let Ce=(()=>{class i extends y.g{constructor(e){super(e),this.injector=e,this.lookup=e.get(ve.s),this.usuarioDao=e.get(ge._),this.unidadeDao=e.get(A.s),this.modalWidth=500,this.form=this.fh.FormBuilder({id:{default:""},nome:{default:""},status:{default:""},unidade_id:{default:""}},this.cdRef)}ngOnInit(){super.ngOnInit(),this.snapshot=this.snapshot||this.modalRoute||this.route.snapshot,this.urlParams=this.snapshot.paramMap,this.queryParams=this.go.decodeParam(this.snapshot.queryParams),this.metadata=this.go.getMetadata(this.snapshot.queryParams.idroute),this.form?.controls.nome.setValue(this.metadata.nome),this.form?.controls.id.setValue(this.metadata.id),this.form?.controls.status.setValue(this.metadata.status),this.form?.controls.unidade_id.setValue(this.metadata.unidade)}onSubmitClick(){var e=this;return(0,d.A)(function*(){e.loading=!0;try{let n={nome:e.form?.controls.nome.value,id:e.form?.controls.id.value,unidade_id:e.form?.controls.unidade_id.value,status:e.form?.controls.status.value};e.go.setModalResult(e.modalRoute?.queryParams?.idroute,n),e.close()}catch(n){e.error(n?.message||n?.error||n||"Erro desconhecido")}finally{e.loading=!1}})()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(t.zZn))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["produto-filter"]],viewQuery:function(n,o){if(1&n&&t.GBs(m.Q,5),2&n){let s;t.mGM(s=t.lsd())&&(o.editableForm=s.first)}},features:[t.Vt3],decls:8,vars:13,consts:[["unidade",""],["confirmLabel","Buscar",3,"submit","cancel","form"],[1,"row"],[1,"col-md-12"],["label","Nome","icon","bi bi-textarea-t","controlName","this.form.nome",3,"size","control"],["label","ID#","icon","bi bi-textarea-t","controlName","this.form.id",3,"size","control"],["label","Unidade","controlName","unidade_id",3,"size","control","dao"],["label","Status","controlName","this.form.status",3,"size","items","control"]],template:function(n,o){if(1&n){const s=t.RV6();t.j41(0,"editable-form",1),t.bIt("submit",function(){return t.eBV(s),t.Njj(o.onSubmitClick())})("cancel",function(){return t.eBV(s),t.Njj(o.onCancel())}),t.j41(1,"div",2)(2,"div",3),t.nrm(3,"input-text",4)(4,"input-text",5)(5,"input-search",6,0)(7,"input-select",7),t.k0s()()()}2&n&&(t.Y8G("form",o.form),t.R7$(3),t.Y8G("size",12)("control",o.form.controls.nome),t.BMQ("maxlength",250),t.R7$(),t.Y8G("size",12)("control",o.form.controls.id),t.BMQ("maxlength",10),t.R7$(),t.Y8G("size",6)("control",o.form.controls.unidade_id)("dao",o.unidadeDao),t.R7$(2),t.Y8G("size",12)("items",o.lookup.TIPO_ATIVO_INATIVO)("control",o.form.controls.status))},dependencies:[m.Q,F.O,G.H,j.K]})}}return i})(),Y=(()=>{class i{constructor(e,n){this.auth=e,this.router=n}canActivate(e,n){return this.auth.isGestorAlgumaAreaTrabalho(!1)}static{this.\u0275fac=function(n){return new(n||i)(t.KVO(k.u),t.KVO(T.Ix))}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const Pe=[{path:"",component:dt,canActivate:[P.q],resolve:{config:b.L},runGuardsAndResolvers:"always",data:{title:"Produtos"}},{path:"new",component:$,canActivate:[P.q,Y],resolve:{config:b.L},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de produto",modal:!0}},{path:"filter",component:Ce,canActivate:[P.q],resolve:{config:b.L},runGuardsAndResolvers:"always",data:{title:"Busca Avan\xe7ada",modal:!0}},{path:":id/edit",component:$,canActivate:[P.q,Y],resolve:{config:b.L},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de produto",modal:!0}},{path:":id/show",component:_e,canActivate:[P.q],resolve:{config:b.L},runGuardsAndResolvers:"always",data:{title:"Visualiza\xe7\xe3o de produto",modal:!0}}];let be=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[T.iI.forChild(Pe),T.iI]})}}return i})();var Fe=r(8832),ye=r(8425);let Ee=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[R.MD,ye.h,Fe.X1,be]})}}return i})()}}]);