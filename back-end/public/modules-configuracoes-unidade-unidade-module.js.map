{"version":3,"sources":["./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.html","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.ts","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.html","./src/app/modules/configuracoes/unidade/unidade.module.ts","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.ts","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.html","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.ts","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.html","./src/app/modules/configuracoes/unidade/unidade-routing.module.ts"],"names":[],"mappings":"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","file":"modules-configuracoes-unidade-unidade-module.js","sourcesContent":["import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { TemplateDataset } from 'src/app/components/input/input-editor/input-editor.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Expediente } from 'src/app/models/expediente.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NotificacaoService } from 'src/app/modules/uteis/notificacoes/notificacao.service';\r\nimport { NotificacoesConfigComponent } from 'src/app/modules/uteis/notificacoes/notificacoes-config/notificacoes-config.component';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\n\r\n@Component({\r\n  selector: 'app-unidade-form',\r\n  templateUrl: './unidade-form.component.html',\r\n  styleUrls: ['./unidade-form.component.scss']\r\n})\r\n\r\nexport class UnidadeFormComponent extends PageFormBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('unidade_pai', { static: false }) public unidadePai?: InputSearchComponent;\r\n  @ViewChild('cidade', { static: false }) public cidade?: InputSearchComponent;\r\n  @ViewChild('gestor', { static: false }) public gestor?: InputSearchComponent;\r\n  @ViewChild('gestorSubstituto', { static: false }) public gestorSubstituto?: InputSearchComponent;\r\n  @ViewChild('entidade', { static: false }) public entidade?: InputSearchComponent;\r\n  @ViewChild('notificacoes', { static: false }) public notificacoes?: NotificacoesConfigComponent;\r\n\r\n  public form: FormGroup;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public cidadeDao: CidadeDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public planoTrabalhoDao: PlanoTrabalhoDaoService;\r\n  public notificacao: NotificacaoService;\r\n  public planoDataset: TemplateDataset[];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.notificacao = injector.get<NotificacaoService>(NotificacaoService);\r\n    this.modalWidth = 1200;\r\n    this.planoDataset = this.planoTrabalhoDao.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      codigo: {default: \"\"},\r\n      sigla: {default: \"\"},\r\n      nome: {default: \"\"},\r\n      path: {default: \"\"},\r\n      cidade_id: {default: \"\"},\r\n      uf: {default: \"\"},\r\n      atividades_arquivamento_automatico: {default: 1},\r\n      distribuicao_forma_contagem_prazos: {default: \"DIAS_UTEIS\"},\r\n      entrega_forma_contagem_prazos: {default: \"HORAS_UTEIS\"},\r\n      notificacoes: {default: {}},\r\n      etiquetas: {default: []},\r\n      unidade_pai_id: {default: \"\"},\r\n      entidade_id: {default: this.auth.unidade?.entidade_id},\r\n      etiqueta_texto: {default: \"\"},\r\n      etiqueta_icone: {default: null},\r\n      etiqueta_cor: {default: null},\r\n      expediente24: {default: true},\r\n      /*notifica_demanda_distribuicao: {default: true},\r\n      notifica_demanda_conclusao: {default: true},\r\n      notifica_demanda_avaliacao: {default: true},\r\n      notifica_demanda_modificacao: {default: true},\r\n      notifica_demanda_comentario: {default: true},\r\n      template_demanda_distribuicao: {default: \"\"},\r\n      template_demanda_conclusao: {default: \"\"},\r\n      template_demanda_avaliacao: {default: \"\"},\r\n      template_demanda_modificacao: {default: \"\"},\r\n      template_demanda_comentario: {default: \"\"},\r\n      enviar_petrvs: {default: true},\r\n      enviar_email: {default: true},\r\n      enviar_whatsapp: {default: true},*/\r\n      expediente: {default: null},\r\n      usar_expediente_entidade: {default: true},\r\n      texto_complementar_plano: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n    this.join =  [\"cidade\", \"entidade\", \"gestor\", \"gestor_substituto\", \"notificacoes_templates\"];\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(['codigo', 'sigla', 'nome', 'cidade_id', 'entidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public get is24hrs(): string | undefined {\r\n    return this.form?.controls.expediente24.value ? \"\" : undefined;\r\n  }\r\n\r\n  public onUsarExpedienteEntidadeChange() {\r\n    this.form.controls.expediente.setValue(this.form.controls.usar_expediente_entidade.value ? null : this.form.controls.expediente.value || new Expediente());\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form.controls.etiqueta_texto.value;\r\n    const key = this.util.textHash(value);\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.etiquetas.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form.controls.etiqueta_texto.value,\r\n        color: this.form.controls.etiqueta_cor.value,\r\n        icon: this.form.controls.etiqueta_icone.value\r\n      };\r\n      this.form.controls.etiqueta_texto.setValue(\"\");\r\n      this.form.controls.etiqueta_icone.setValue(null);\r\n      this.form.controls.etiqueta_cor.setValue(null);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public async loadData(entity: Unidade, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    await Promise.all ([\r\n      this.unidadePai!.loadSearch(entity.unidade || entity.unidade_pai_id),\r\n      this.cidade!.loadSearch(entity.cidade || entity.cidade_id),\r\n      this.gestor!.loadSearch(entity.gestor),// || entity.gestor!.id),\r\n      this.gestorSubstituto!.loadSearch(entity.gestor_substituto),// || entity.gestor_substituto!.id),\r\n      this.entidade!.loadSearch(entity.entidade || entity.entidade_id)\r\n    ]);\r\n    this.form.patchValue(this.util.fillForm(formValue, {...entity, ...{\r\n      //expediente24: entity.horario_trabalho_fim.startsWith(\"24:00\")\r\n      /*notifica_demanda_distribuicao: entity.notificacoes?.notifica_demanda_distribuicao == undefined || entity.notificacoes?.notifica_demanda_distribuicao,\r\n      notifica_demanda_conclusao: entity.notificacoes?.notifica_demanda_conclusao == undefined || entity.notificacoes?.notifica_demanda_conclusao,\r\n      notifica_demanda_avaliacao: entity.notificacoes?.notifica_demanda_avaliacao == undefined || entity.notificacoes?.notifica_demanda_avaliacao,\r\n      notifica_demanda_modificacao: entity.notificacoes?.notifica_demanda_modificacao == undefined || entity.notificacoes?.notifica_demanda_modificacao,\r\n      notifica_demanda_comentario: entity.notificacoes?.notifica_demanda_comentario == undefined || entity.notificacoes?.notifica_demanda_comentario,\r\n      template_demanda_distribuicao: entity.notificacoes?.template_demanda_distribuicao || \"\",\r\n      template_demanda_conclusao: entity.notificacoes?.template_demanda_conclusao || \"\",\r\n      template_demanda_avaliacao: entity.notificacoes?.template_demanda_avaliacao || \"\",\r\n      template_demanda_modificacao: entity.notificacoes?.template_demanda_modificacao || \"\",\r\n      template_demanda_comentario: entity.notificacoes?.template_demanda_comentario || \"\",\r\n      enviar_email: entity.notificacoes?.enviar_email == undefined || entity.notificacoes?.enviar_email,\r\n      enviar_whatsapp: entity.notificacoes?.enviar_whatsapp == undefined || entity.notificacoes?.enviar_whatsapp*/\r\n    }}));\r\n  }\r\n\r\n  public initializeData(form: FormGroup): void {\r\n    this.entity = new Unidade({ entidade_id: this.auth.unidade?.entidade_id, entidade: this.auth.unidade?.entidade });\r\n    this.loadData(this.entity, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<Unidade> {\r\n    return new Promise<Unidade>((resolve, reject) => {\r\n      this.notificacoes!.saveData();\r\n      let unidade: Unidade = this.util.fill(new Unidade(), this.entity!);\r\n      unidade = this.util.fillForm(unidade, this.form!.value);\r\n      unidade.notificacoes = this.entity!.notificacoes;\r\n      /*unidade.notificacoes.notifica_demanda_distribuicao = form.notifica_demanda_distribuicao;\r\n      unidade.notificacoes.notifica_demanda_conclusao = form.notifica_demanda_conclusao;\r\n      unidade.notificacoes.notifica_demanda_avaliacao = form.notifica_demanda_avaliacao;\r\n      unidade.notificacoes.notifica_demanda_modificacao = form.notifica_demanda_modificacao;\r\n      unidade.notificacoes.notifica_demanda_comentario = form.notifica_demanda_comentario;\r\n      unidade.notificacoes.template_demanda_distribuicao = form.template_demanda_distribuicao;\r\n      unidade.notificacoes.template_demanda_conclusao = form.template_demanda_conclusao;\r\n      unidade.notificacoes.template_demanda_avaliacao = form.template_demanda_avaliacao;\r\n      unidade.notificacoes.template_demanda_modificacao = form.template_demanda_modificacao;\r\n      unidade.notificacoes.template_demanda_comentario = form.template_demanda_comentario;\r\n      unidade.notificacoes.enviar_email = form.enviar_email;\r\n      unidade.notificacoes.enviar_whatsapp = form.enviar_whatsapp;*/\r\n      /* Remove os ids gerados para os novos unidades_origem_atividades, será gerado pelo servidor como UUID */\r\n      /* O pai vai ser resolvido do lado do servidor\r\n      if(!this.form.controls.unidade_id.value?.length) { //Então, selecionou o Pai.\r\n        unidade.unidade_id = (this.pai?.searchObj as Unidade).id;\r\n        unidade.codigoPai = (this.pai?.searchObj as Unidade).codigo;\r\n        if(!(this.pai?.searchObj as Unidade).path.length) {//Então, o pai não tem Path (não tem Pai do Pai)\r\n          unidade.path = \"/\"+(this.pai?.searchObj as Unidade).id+\"/\";\r\n        }\r\n        else{//O Pai tem um Pai, já vai vir algo do tipo '/dadasd-dasdas-dasdas/'\r\n          unidade.path = (this.pai?.searchObj as Unidade).path+(this.pai?.searchObj as Unidade).id+\"/\";\r\n        }\r\n      }*/\r\n      resolve(unidade);\r\n    });\r\n  }\r\n\r\n  public titleEdit = (entity: Unidade): string => {\r\n    return \"Editando \" + (entity?.sigla || \"\") + ' - ' + (entity?.nome || \"\");\r\n  }\r\n\r\n}\r\n","<editable-form [title]=\"isModal ? '' : title\" [form]=\"form!\" [disabled]=\"formDisabled\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <tabs display right>\r\n        <tab key=\"PRINCIPAL\" label=\"Principal\">\r\n            <div class=\"row\">\r\n                <input-text [size]=\"2\" label=\"Código\" controlName=\"codigo\"></input-text>\r\n                <input-text [size]=\"2\" label=\"Sigla\" controlName=\"sigla\"></input-text>\r\n                <input-text [size]=\"8\" label=\"Nome\" controlName=\"nome\"></input-text>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #gestor label=\"Gestor\" [size]=\"6\" [emptyValue]=\"null\" controlName=\"gestor_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável pela unidade\"></input-search>\r\n                <input-search #gestorSubstituto label=\"Gestor Substituto\" [size]=\"6\" [emptyValue]=\"null\" controlName=\"gestor_substituto_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável substituto pela unidade\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #cidade [size]=\"4\" controlName=\"cidade_id\" [dao]=\"cidadeDao\"></input-search>\r\n                <input-search #unidade_pai [size]=\"4\" [label]=\"lex.noun('Unidade') + ' pai'\" controlName=\"unidade_pai_id\" [where]=\"[['entidade_id', '==', form.controls.entidade_id.value]]\" [dao]=\"dao!\"></input-search>\r\n                <input-search #entidade [size]=\"4\" [disabled] controlName=\"entidade_id\" [dao]=\"entidadeDao\"></input-search>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"CONFIGURACOES\" label=\"Configurações\">\r\n            <div class=\"row\">\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.noun('Prazo de Distribuição')\" controlName=\"distribuicao_forma_contagem_prazos\" [items]=\"lookup.DIA_HORA_CORRIDOS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos para a distribuição (lançamento da demanda).\"></input-select>\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.noun('Prazo de Entrega')\" controlName=\"entrega_forma_contagem_prazos\" [items]=\"lookup.HORAS_CORRIDAS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos na entrega da demanda (data da entrega e tempo despendido)\"></input-select>\r\n                <input-radio [size]=\"4\" label=\"Arquivamento automático\" controlName=\"atividades_arquivamento_automatico\" [items]=\"lookup.SIMNAO\" labelInfo=\"Se após a avaliação, arquivará automaticamente a atividade.\"></input-radio>\r\n            </div>\r\n            <!--separator title=\"Expediente\">\r\n                <div class=\"row\">\r\n                    <input-switch [size]=\"2\" label=\"24hs\" controlName=\"expediente24\" [control]=\"form!.controls.expediente24\" (change)=\"onExpediente24Change($event)\" labelInfo=\"Se o expediente é de 24hs ou é um perído, se for período será informado início e fim\"></input-switch>\r\n                    <input-datetime time [size]=\"4\" label=\"Início\" [disabled]=\"is24hrs\" controlName=\"horario_trabalho_inicio\" [control]=\"form!.controls.horario_trabalho_inicio\" labelInfo=\"Horário do início da Jornada de Trabalho\"></input-datetime>\r\n                    <input-datetime time [size]=\"4\" label=\"Final\" [disabled]=\"is24hrs\" controlName=\"horario_trabalho_fim\" [control]=\"form!.controls.horario_trabalho_fim\" labelInfo=\"Horário do Final da Jornada de Trabalho\"></input-datetime>\r\n                    <input-datetime time noIcon [size]=\"2\" label=\"Dur. Intervalo\" controlName=\"horario_trabalho_intervalo\" [control]=\"form!.controls.horario_trabalho_intervalo\" labelInfo=\"Duração do intervalo realizado dentro da jornada de trabalho (quantidade de horas, ex.: horário de almoço de duas horas será 02:00). Para fins de computo de jornada de trabalho na ausência do plano de trabalho.\"></input-datetime>\r\n                </div>\r\n            </separator//-->\r\n            <separator></separator>\r\n            <div clss=\"row\">\r\n                <input-multiselect label=\"Etiquetas\" multiselectStyle=\"inline\" [maxItemWidth]=\"250\" controlName=\"etiquetas\" [size]=\"12\" [addItemHandle]=\"addItemHandle.bind(this)\">\r\n                    <input-text [size]=\"6\" label=\"Texto\" controlName=\"etiqueta_texto\"></input-text>\r\n                    <input-select [size]=\"3\" label=\"Ícone\" controlName=\"etiqueta_icone\" [items]=\"lookup.ICONES\"></input-select>\r\n                    <input-color [size]=\"3\" label=\"Cor\" controlName=\"etiqueta_cor\"></input-color>\r\n                </input-multiselect>\r\n            </div>\r\n            <separator></separator>\r\n            <div class=\"row\">\r\n                <input-editor [label]=\"'Texto complementar ' + lex.noun('Plano de Trabalho',false,true)\" controlName=\"texto_complementar_plano\" [dataset]=\"planoDataset\"></input-editor>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"EXPEDIENTE\" label=\"Expediente\">\r\n            <div class=\"row\">\r\n                <input-switch #usarExpedienteEntidade [label]=\"'Usar o calendário ' + lex.noun('entidade',false,true)\" labelPosition=\"right\" icon=\"bi bi-check2\" [size]=\"12\" (change)=\"onUsarExpedienteEntidadeChange()\" controlName=\"usar_expediente_entidade\" labelInfo=\"Se utiliza o expediente configurado na entidade ao invés de especificar na unidade\"></input-switch>\r\n            </div>\r\n            <calendar-expediente #expediente [disabled]=\"form!.controls.usar_expediente_entidade.value ? 'true' : undefined\" [expedienteDisabled]=\"entity?.entidade?.expediente\" [control]=\"form!.controls.expediente\"></calendar-expediente>\r\n        </tab>\r\n        <tab *ngIf=\"entity\" key=\"NOTIFICACOES\" label=\"Notificações\">\r\n            <notificacoes-config #notificacoes [unidadeId]=\"entity?.id?.length ? entity!.id : 'ADD'\" [entity]=\"entity!\" [disabled]=\"formDisabled\"></notificacoes-config>\r\n            <!--div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                    <separator transparent title=\"Meios de notificação\"></separator>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" label=\"Notificar no Petrvs\" controlName=\"enviar_petrvs\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" label=\"Notificar por e-mail\" controlName=\"enviar_email\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" label=\"Notificar por Whatsapp\" controlName=\"enviar_whatsapp\"></input-switch>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                    <separator transparent title=\"Tipos de notificação\"></separator>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar distribuição ' + lex.noun('demanda',false,true)\" controlName=\"notifica_demanda_distribuicao\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar conclusão ' + lex.noun('demanda',false,true)\" controlName=\"notifica_demanda_conclusao\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar avaliação ' + lex.noun('demanda',false,true)\" controlName=\"notifica_demanda_avaliacao\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar modificação ' + lex.noun('demanda',false,true)\" controlName=\"notifica_demanda_modificacao\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar comentário ' + lex.noun('demanda',false,true)\" controlName=\"notifica_demanda_comentario\"></input-switch>\r\n                </div>\r\n            </div>\r\n            <separator transparent [title]=\"lex.noun('Template',true) + ' das mensagens'\"></separator>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na criação ' + lex.noun('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaDistribuicao\" controlName=\"template_demanda_distribuicao\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na conclusão ' + lex.noun('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaConclusao\" controlName=\"template_demanda_conclusao\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na avaliação ' + lex.noun('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaAvaliacao\" controlName=\"template_demanda_avaliacao\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na modificação ' + lex.noun('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaModificacao\" controlName=\"template_demanda_modificacao\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na inclusão de comentário ' + lex.noun('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaComentario\" controlName=\"template_demanda_comentario\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div/-->\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\n\r\n@Component({\r\n  selector: 'app-unidade-list',\r\n  templateUrl: './unidade-list.component.html',\r\n  styleUrls: ['./unidade-list.component.scss']\r\n})\r\nexport class UnidadeListComponent extends PageListBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n\r\n  public cidadeDao: CidadeDaoService;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public buttons: ToolbarButton[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.join = [\"cidade\", \"unidade_pai:id,sigla\", \"entidade:id,sigla\"];\r\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n\r\n    /* Inicializações */\r\n    this.title = this.lex.noun(\"Unidade\", true);\r\n    this.code = \"MOD_CFG_UND\";\r\n    this.filter = this.fh.FormBuilder({\r\n      entidade_id: { default: this.auth.unidade?.entidade_id },\r\n      inativos: { default: false },\r\n      nome: { default: \"\" }\r\n    });\r\n    this.groupBy = [{ field: \"entidade.sigla\", label: \"Entidade\" }];\r\n    // Testa se o usuário possui permissão unificar unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_UNIR\")) {\r\n      this.buttons.push({\r\n        icon: \"bi bi-arrows-collapse\",\r\n        color: \"btn-outline-danger\",\r\n        label: \"Unificar\",\r\n        onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', 'merge'] }, this.modalRefresh())\r\n      });\r\n    }\r\n  }\r\n\r\n  public dynamicOptions(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let unidade: Unidade = row as Unidade;\r\n    /* Testa se o usuário possui permissão para exibir dados da unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_CONS\")) result.push({ icon: \"bi bi-activity\", label: \"Ver Atividades\", onClick: this.consultAtividades.bind(this) });*/\r\n    // Testa se o usuário possui permissão para exibir dados da unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_CONS\")) result.push({ icon: \"bi bi-info-circle\", label: \"Informações\", onClick: this.consult.bind(this) });\r\n    // Testa se o usuário possui permissão de inativar a unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_INATV\")) result.push({icon: unidade.inativo ? \"bi bi-check-circle\" : \"bi bi-x-circle\", label: unidade.inativo ? 'Reativar' : 'Inativar', onClick: async (unidade: Unidade) => await this.inativo(unidade, !unidade.inativo)});\r\n    // Testa se o usuário possui permissão para gerenciar integrantes da unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_INTG\")) result.push({icon: \"bi bi-people\", label: \"Integrantes\", onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', 'NOPERSIST', unidade.id, 'integrante'] })});\r\n    // Testa se o usuário possui permissão para excluir unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_EXCL\")) result.push({ icon: \"bi bi-trash\", label: \"Excluir\", onClick: this.delete.bind(this) });\r\n    return result;\r\n  }\r\n\r\n  public async inativo(unidade: Unidade, inativo: boolean) {\r\n    if (await this.dialog.confirm(inativo ? \"Inativar\" : \"Reativar\", inativo ? \"Deseja realmente inativar a unidade?\" : \"Deseja reativar a unidade?\")) {\r\n      try {\r\n        this.submitting = true;\r\n        await this.dao!.inativo(unidade.id, inativo);\r\n        await this.modalRefreshId(unidade).modalClose!(undefined);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public filterClear(filter: FormGroup) {\r\n    super.filterClear(filter);\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let form: any = filter.value;\r\n    let result: any[] = [];\r\n    /* Se for selectable trás somente os inativos ou os não inativos, se não for então trás juntamente os inativos se form.inativos */\r\n    result.push(this.selectable ? [\"inativo\", form.inativos ? \"!=\" : \"==\", null] : [\"inativos\", \"==\", form.inativos]);\r\n    if (form.entidade_id?.length) {\r\n      result.push([\"entidade_id\", \"==\", form.entidade_id]);\r\n    }\r\n    if (form.nome?.length) {\r\n      result.push([\"or\", [\"nome\", \"like\", \"%\" + form.nome.replace(\" \", \"%\") + \"%\"], [\"sigla\", \"like\", \"%\" + form.nome.replace(\" \", \"%\") + \"%\"]]);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /*public consultAtividades(unidade: Unidade) {\r\n    this.go.navigate({ route: ['cadastros', 'atividade'] }, { metadata: { unidade_id: unidade.id, filterHidden: 'true', exibir_vinculadas_toolbar: true, minhas: true }, modal: true });\r\n  }*/\r\n}","<h3 *ngIf=\"!isModal\" class=\"my-2\">{{title}}</h3>\r\n<grid [dao]=\"dao\" [add]=\"add\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [selectable]=\"selectable\"\r\n    (select)=\"onSelect($event)\" [hasAdd]=\"auth.hasPermissionTo('MOD_UND_INCL')\"\r\n    [hasEdit]=\"auth.hasPermissionTo('MOD_UND_EDT')\">\r\n    <toolbar *ngIf=\"!selectable\" [buttons]=\"buttons\"></toolbar>\r\n    <filter [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\"\r\n        [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && filterCollapsed\">\r\n        <div class=\"row\">\r\n            <input-search #entidade [size]=\"4\" controlName=\"entidade_id\" [dao]=\"entidadeDao\"></input-search>\r\n            <input-text [size]=\"7\" label=\"Nome\" controlName=\"nome\" [control]=\"filter!.controls.nome\" placeholder=\"Nome ou sigla...\"></input-text>\r\n            <input-switch [size]=\"1\" label=\"Inativos\" controlName=\"inativos\" [control]=\"filter!.controls.inativos\" labelInfo=\"Se lista também as unidade inativas\"></input-switch>\r\n        </div>\r\n    </filter>\r\n    <columns>\r\n        <column title=\"Sigla\" field=\"sigla\"></column>\r\n        <column title=\"Nome\" [template]=\"columnNome\" orderBy=\"nome\">\r\n            <ng-template let-row=\"row\" #columnNome>\r\n                <span class=\"d-block\">{{row.nome}}</span>\r\n                <span *ngIf=\"row.unidade\" class=\"badge bg-light text-dark\">\r\n                    <i class=\"bi bi-arrow-return-right\"></i>\r\n                    {{row.unidade.sigla}}\r\n                </span>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Código\" field=\"codigo\"></column>\r\n        <column [title]=\"lex.noun('Cidade')\" [template]=\"columnCidade\">\r\n            <ng-template let-row=\"row\" #columnCidade>\r\n                <span>{{(row.cidade?.nome || \"\") + \"/\" + (row.cidade?.uf || \"\")}}</span>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Situação\" [template]=\"columnSituacao\">\r\n            <ng-template let-row=\"row\" #columnSituacao>\r\n                <badge [color]=\"!row.inativo ? 'success' : 'danger'\"\r\n                    [icon]=\"!row.inativo ? 'bi bi-check-circle' : 'bi bi-x-circle'\"\r\n                    [label]=\"!row.inativo ? 'Ativo' : 'Inativo'\"></badge>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\" [onEdit]=\"edit\" [dynamicOptions]=\"dynamicOptions.bind(this)\"></column>\r\n    </columns>\r\n    <pagination [rows]=\"rowsLimit\"></pagination>\r\n</grid>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { UnidadeRoutingModule } from './unidade-routing.module';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UnidadeFormComponent,\r\n    UnidadeListComponent,\r\n    UnidadeMergeComponent,\r\n    UnidadeIntegranteComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    UteisModule,\r\n    ReactiveFormsModule,\r\n    UnidadeRoutingModule\r\n  ]\r\n})\r\nexport class UnidadeModule { }\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { UnidadeIntegranteDaoService } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { UnidadeIntegranteConsolidado } from 'src/app/models/unidade-integrante.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\n\r\n@Component({\r\n  selector: 'app-unidade-integrante',\r\n  templateUrl: './unidade-integrante.component.html',\r\n  styleUrls: ['./unidade-integrante.component.scss']\r\n})\r\nexport class UnidadeIntegranteComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public items: UnidadeIntegranteConsolidado[] = [];\r\n  public unidadeId: string = \"\";\r\n  public unidade?: Unidade;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      usuario_id: {default: \"\"},\r\n      atribuicoes: {default: undefined},\r\n      atribuicao: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    this.unidadeId = this.urlParams!.get(\"idUnidade\") as string;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    (async () => {\r\n      await this.loadData({}, this.form);\r\n    })();\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente para carregar todos os integrantes da unidade.\r\n   * @param entity \r\n   * @param form \r\n   */\r\n  public async loadData(entity: IIndexable, form?: FormGroup | undefined) {\r\n    this.grid!.loading = true;\r\n    try {\r\n      let result = await this.integranteDao!.loadIntegrantes(this.unidadeId);\r\n      this.items = result.integrantes;\r\n      this.unidade = result.unidade;\r\n    } finally {\r\n      this.grid!.loading = false;\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if([\"usuario_id\", \"atribuicoes\"].includes(controlName) && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public async addIntegrante() {\r\n    return {\r\n      id: this.integranteDao!.generateUuid(),\r\n      usuario_id: \"\",\r\n      atribuicoes: []\r\n    } as IIndexable;\r\n  }\r\n\r\n  public addItemHandleAtribuicoes(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n    const key = this.form!.controls.atribuicao.value;\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.atribuicoes.value, key)) {\r\n      const icon = this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      const color = this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      result = {\r\n        key: key,\r\n        value: value,\r\n        icon: icon,\r\n        color: color\r\n      };\r\n      this.form!.controls.atribuicao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  /**\r\n   * Método chamado na edição de um integrante da Unidade.\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadIntegrante(form: FormGroup, row: any) {\r\n    form.controls.usuario_id.setValue(row.usuario_id);\r\n    form.controls.atribuicoes.setValue(row.atribuicoes.map((x: string) => Object.assign({}, {\r\n      key: x,\r\n      value: this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, x),\r\n      icon: this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, x),\r\n      color: this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, x)\r\n    })));\r\n    form.controls.atribuicao.setValue(\"\");\r\n  }\r\n\r\n  public async removeIntegrante(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\");\r\n    if(confirm) {\r\n      this.loading = true;\r\n      try {\r\n        await this.integranteDao.saveIntegrante(this.unidade!.id, Object.assign(row, { atribuicoes: [] }));\r\n        await this.loadData({}, this.form);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveIntegrante(form: FormGroup, row: any) {\r\n    let consolidado = row as UnidadeIntegranteConsolidado;\r\n    if(form!.controls.atribuicoes.value.length) {\r\n      consolidado.usuario_id = form!.controls.usuario_id.value;\r\n      consolidado.atribuicoes = form!.controls.atribuicoes.value.map((x: LookupItem) => x.key);\r\n      this.loading = true;\r\n      try {\r\n        await this.integranteDao.saveIntegrante(this.unidade!.id, consolidado);\r\n        await this.loadData({}, this.form);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n}\r\n","<grid [items]=\"items\" [minHeight]=\"500\" [form]=\"form!\" [hasDelete]=\"true\"\r\n    [add]=\"addIntegrante.bind(this)\" [load]=\"loadIntegrante.bind(this)\" [remove]=\"removeIntegrante.bind(this)\" [save]=\"saveIntegrante.bind(this)\" \r\n    editable [hasAdd]=\"auth.hasPermissionTo('MOD_PRGT_PART_INCL')\"\r\n    [hasEdit]=\"auth.hasPermissionTo('MOD_PRGT_PART_EDT')\"\r\n    [hasDelete]=\"auth.hasPermissionTo('MOD_PRGT_PART_EXCL')\">\r\n    <columns>\r\n        <column [title]=\"lex.noun('Usuário')\" [template]=\"columnUsuario\" [editTemplate]=\"editUsuario\">\r\n            <ng-template let-row=\"row\" #columnUsuario>\r\n                <div class=\"row\">\r\n                    <div class=\"col-2\">\r\n                        <profile-picture [url]=\"row.usuario?.url_foto\" [size]=\"40\" [hint]=\"row.usuario?.nome\"></profile-picture>\r\n                    </div>\r\n                    <div class=\"col-10\">\r\n                        <strong>{{row.usuario?.nome || \"\"}}</strong><br>\r\n                        <small>{{row.usuario?.apelido || \"\"}}</small>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editUsuario>\r\n                <input-search #usuario [size]=\"12\" label icon controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Atribuições\" titleHint=\"Atribuições do usuário nesta unidade\" [template]=\"columnUnidadeDestino\" [editTemplate]=\"editUnidadeDestino\">\r\n            <ng-template let-row=\"row\" #columnUnidadeDestino>\r\n                <div class=\"text-wrap width-min-content\">\r\n                    <badge *ngFor=\"let atribuicao of row.atribuicoes\" [color]=\"lookup.getColor(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao)\" [icon]=\"lookup.getIcon(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao)\" [label]=\"lookup.getValue(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao)\"></badge>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editUnidadeDestino>\r\n                <input-multiselect controlName=\"atribuicoes\" [size]=\"8\" [addItemHandle]=\"addItemHandleAtribuicoes.bind(this)\">\r\n                    <input-select [size]=\"12\" label=\"\" icon=\"fas fa-sign-out-alt\" controlName=\"atribuicao\" [items]=\"lookup.UNIDADE_INTEGRANTE_TIPO\"></input-select>\r\n                </input-multiselect>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\"></column>\r\n    </columns>\r\n</grid>\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\nexport type UnidadeMerge = {\r\n  id: string,\r\n  unidade_origem_id: string,\r\n  unidade_destino_id: string,\r\n  unidade_origem?: Unidade,\r\n  unidade_destino?: Unidade\r\n}\r\n\r\n@Component({\r\n  selector: 'app-unidade-merge',\r\n  templateUrl: './unidade-merge.component.html',\r\n  styleUrls: ['./unidade-merge.component.scss']\r\n})\r\nexport class UnidadeMergeComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('unidadeOrigem', { static: false }) public unidadeOrigem?: InputSearchComponent;\r\n  @ViewChild('unidadeDestino', { static: false }) public unidadeDestino?: InputSearchComponent;\r\n\r\n  public items: UnidadeMerge[] = [];\r\n  public toolbarButtons: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-yin-yang\",\r\n      label: \"Mesma sigla\",\r\n      hint: \"Unificar todos que tenham a mesma sigla. Sendo a inativa considerada como origem.\",\r\n      onClick: this.onMesmaSiglaClick.bind(this)\r\n    }\r\n  ];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      exclui_origem: {default: false},\r\n      origem_inativo: {default: true},\r\n      unidade_origem_id: {default: \"\"},\r\n      unidade_destino_id: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    return result;\r\n  }\r\n\r\n  public onMesmaSiglaClick() {\r\n    this.loading = true;\r\n    (this.dao as UnidadeDaoService).mesmaSigla().then(unidades => {\r\n      let destinos: Unidade[] = [];\r\n      destinos = unidades.reduce((acumulador, valor) => {\r\n        if(!valor.inativo && !acumulador.find(x => x.sigla == valor.sigla)) acumulador.push(valor);\r\n        return acumulador; \r\n      }, destinos);\r\n      let destinosIds = destinos.map(x => x.id);\r\n      let origens = unidades.filter(x => !destinosIds.includes(x.id) && !!x.inativo);\r\n      let origensIds = origens.map(x => x.id);\r\n      this.items = [];\r\n      for(let origem of origens) {\r\n        let destino = destinos.find(x => x.sigla == origem.sigla);\r\n        if(destino) {\r\n          this.items.push({\r\n            id: this.dao!.generateUuid(),\r\n            unidade_origem_id: origem.id,\r\n            unidade_destino_id: destino.id,\r\n            unidade_origem: origem,\r\n            unidade_destino: destino\r\n          });\r\n        }\r\n      }\r\n      /* Pegas as unidade que tem a Sigla repetida mas que não estão inativas */\r\n      let error: string[] = [];\r\n      for(let unidade of unidades) {\r\n        if(!destinosIds.includes(unidade.id) && !origensIds.includes(unidade.id)) error.push(unidade.codigo + \" - \" + unidade.sigla + \" - \" + unidade.nome);\r\n      }\r\n      if(error.length) this.editableForm!.error = (error.length == 1 ? \"A unidade abaixo possui duplicidade de SIGLA, mas não está inativa:\" : \"As unidades abaixo possuem duplicidade de SIGLA, mas não estão inativas:\") + \"\\n\" + error.join(\"\\n\");\r\n    }).finally(() => {\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  public async addMerge() {\r\n    return {\r\n      id: this.dao!.generateUuid(),\r\n      unidade_origem_id: \"\",\r\n      unidade_destino_id: \"\",\r\n      unidade_origem: undefined,\r\n      unidade_destino: undefined\r\n    } as IIndexable;\r\n  }\r\n\r\n  public async loadMerge(form: FormGroup, row: any) {\r\n    form.controls.unidade_origem_id.setValue(row.unidade_origem_id);\r\n    form.controls.unidade_destino_id.setValue(row.unidade_destino_id);\r\n  }\r\n\r\n  public async removeMerge(row: any) {\r\n    return true;\r\n  }\r\n\r\n  public async saveMerge(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    if(this.form!.controls.unidade_origem_id.value?.length || this.form!.controls.unidade_destino_id.value?.length) {\r\n      row.unidade_origem_id = form.controls.unidade_origem_id.value;\r\n      row.unidade_origem = this.unidadeOrigem?.selectedItem?.entity || await this.dao?.getById(row.unidade_origem_id);\r\n      row.unidade_destino_id = form.controls.unidade_destino_id.value;\r\n      row.unidade_destino = this.unidadeDestino?.selectedItem?.entity || await this.dao?.getById(row.unidade_destino_id);\r\n      result = row;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public onMerge() {\r\n    let error: string | undefined = undefined;\r\n    for(let row of this.items) error = error || (!row.unidade_origem_id?.length || !row.unidade_destino_id?.length ? \"A origem e o destino precisam estar preenchidos em todos\" : undefined);\r\n    this.editableForm!.error = error;\r\n    if(!error?.length) {\r\n      this.loading = true;\r\n      (this.dao as UnidadeDaoService).unificar(this.items.map(x => Object.assign({}, {unidade_origem_id: x.unidade_origem_id, unidade_destino_id: x.unidade_destino_id})), this.form!.controls.exclui_origem.value).then(result => {\r\n        if(result) this.close();\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<editable-form [form]=\"form!\" [title]=\"isModal ? '' : title\" confirmLabel=\"Unificar\" (submit)=\"onMerge()\" (cancel)=\"onCancel()\">\r\n    <top-alert type=\"warning\" message=\"Por motivos de segurança será permitido somente unificar unidades inativas para unidade ativas. E caso [Exclui origem] não esteja habilitado, a unidade de origem continuará na lista (como inativa).\"></top-alert>\r\n    <toolbar [buttons]=\"toolbarButtons\">\r\n        <input-switch [size]=\"4\" labelPosition=\"left\" label=\"Exclui origem\" controlName=\"exclui_origem\"></input-switch>\r\n    </toolbar>\r\n    <grid [items]=\"items\" [form]=\"form!\" [add]=\"addMerge.bind(this)\" [load]=\"loadMerge.bind(this)\" [remove]=\"removeMerge.bind(this)\" [save]=\"saveMerge.bind(this)\" editable>\r\n        <columns>\r\n            <column [title]=\"lex.noun('Unidade') + ' origem'\" titleHint=\"Unidade que será substituída pela outra\" [template]=\"columnUnidadeOrigem\" [editTemplate]=\"editUnidadeOrigem\">\r\n                <ng-template let-row=\"row\" #columnUnidadeOrigem>\r\n                    <span>{{row.unidade_origem?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_origem?.codigo || \"\"}} - {{row.unidade_origem?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeOrigem>\r\n                    <input-search #unidade_origem [size]=\"12\" label icon controlName=\"unidade_origem_id\" [dao]=\"dao\" [where]=\"[['inativo', '!=', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: true}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"lex.noun('Unidade') + ' destino'\" titleHint=\"Unidade que sobrará após a unificação\" [template]=\"columnUnidadeDestino\" [editTemplate]=\"editUnidadeDestino\">\r\n                <ng-template let-row=\"row\" #columnUnidadeDestino>\r\n                    <span>{{row.unidade_destino?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_destino?.codigo || \"\"}} - {{row.unidade_destino?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeDestino>\r\n                    <input-search #unidade_destino [size]=\"12\" label icon controlName=\"unidade_destino_id\" [dao]=\"dao\" [where]=\"[['inativo', '==', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: false}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column type=\"options\"></column>\r\n        </columns>\r\n    </grid>\r\n</editable-form>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades\" } },\r\n  { path: ':id/subordinadas', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades subordinadas\" } },\r\n  { path: 'new', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão\", modal: true } },\r\n  { path: ':id/edit', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição\", modal: true } },\r\n  { path: ':id/consult', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consultar\", modal: true } },\r\n  { path: ':id/:idUnidade/integrante', component: UnidadeIntegranteComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Integrantes\", modal: true } },\r\n  { path: 'merge', component: UnidadeMergeComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unificar\", modal: true } }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UnidadeRoutingModule { }\r\n"],"sourceRoot":"webpack:///"}