{"version":3,"sources":["./src/app/modules/gestao/atividade/atividade-form/atividade-form.component.ts","./src/app/modules/gestao/atividade/atividade-form/atividade-form.component.html","./src/app/modules/gestao/atividade/atividade-form-prorrogar/atividade-form-prorrogar.component.ts","./src/app/modules/gestao/atividade/atividade-form-prorrogar/atividade-form-prorrogar.component.html","./src/app/modules/gestao/atividade/atividade.module.ts","./src/app/modules/gestao/atividade/atividade-list-kanban/atividade-list-kanban.component.ts","./src/app/modules/gestao/atividade/atividade-list-kanban/atividade-list-kanban.component.html","./src/app/modules/gestao/atividade/atividade-form-pausar/atividade-form-pausar.component.ts","./src/app/modules/gestao/atividade/atividade-form-pausar/atividade-form-pausar.component.html","./src/app/modules/gestao/atividade/atividade-form-tarefa/atividade-form-tarefa.component.ts","./src/app/modules/gestao/atividade/atividade-form-tarefa/atividade-form-tarefa.component.html","./src/app/modules/gestao/atividade/atividade-form-iniciar/atividade-form-iniciar.component.ts","./src/app/modules/gestao/atividade/atividade-form-iniciar/atividade-form-iniciar.component.html","./src/app/modules/gestao/atividade/atividade-routing.module.ts","./src/app/modules/gestao/atividade/atividade-form-concluir/atividade-form-concluir.component.ts","./src/app/modules/gestao/atividade/atividade-form-concluir/atividade-form-concluir.component.html","./src/app/modules/gestao/atividade/atividade-dashboard/atividade-dashboard.component.ts","./src/app/modules/gestao/atividade/atividade-list-tarefa/atividade-list-tarefa.component.ts","./src/app/modules/gestao/atividade/atividade-list-tarefa/atividade-list-tarefa.component.html","./src/app/modules/gestao/atividade/atividade-list/atividade-list.component.ts","./src/app/modules/gestao/atividade/atividade-list/atividade-list.component.html"],"names":[],"mappings":"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","file":"modules-gestao-atividade-atividade-module.js","sourcesContent":["import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Atividade, AtividadeChecklist } from 'src/app/models/atividade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { CalendarService } from 'src/app/services/calendar.service';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Comentario } from 'src/app/models/comentario';\r\nimport { AtividadeTarefa } from 'src/app/models/atividade-tarefa.model';\r\nimport { ComentarioService } from 'src/app/services/comentario.service';\r\nimport { ComentariosComponent } from 'src/app/modules/uteis/comentarios/comentarios.component';\r\nimport { TipoAtividadeDaoService } from 'src/app/dao/tipo-atividade-dao.service';\r\nimport { Documento } from 'src/app/models/documento.model';\r\nimport { AtividadePausa } from 'src/app/models/atividade-pausa.model';\r\nimport { TipoAtividade } from 'src/app/models/tipo-atividade.model';\r\nimport { SeiKeys } from 'src/app/listeners/procedimento-trabalhar/procedimento-trabalhar.component';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\n\r\nexport type Checklist = {id: string, texto: string, checked: boolean};\r\n\r\n@Component({\r\n  selector: 'app-atividade-form',\r\n  templateUrl: './atividade-form.component.html',\r\n  styleUrls: ['./atividade-form.component.scss']\r\n})\r\nexport class AtividadeFormComponent extends PageFormBase<Atividade, AtividadeDaoService> implements OnInit {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('etiqueta', { static: false }) public etiqueta?: InputSelectComponent;\r\n  @ViewChild('tipoAtividade', { static: false }) public tipoAtividade?: InputSearchComponent;\r\n  @ViewChild('planoTrabalho', { static: false }) public planoTrabalho?: InputSelectComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('comentarios', { static: false }) public comentarios?: ComentariosComponent;\r\n\r\n  public sei?: SeiKeys;\r\n  public form: FormGroup;\r\n  public formChecklist: FormGroup;\r\n  public planoTrabalhoDao: PlanoTrabalhoDaoService;\r\n  public tipoAtividadeDao: TipoAtividadeDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public calendar: CalendarService;\r\n  public comentario: ComentarioService;\r\n  public etiquetas: LookupItem[] = [];\r\n  public checklist: LookupItem[] = [];\r\n  public planosTrabalhos: LookupItem[] = [];\r\n  public planoTrabalhoJoin: string[] = [\"entregas.entrega:id,nome\", \"tipo_modalidade:id,nome\"];\r\n  public planoTrabalhoSelecionado?: PlanoTrabalho | null = null;\r\n  public usuarioJoin: string[] = ['planos_trabalho.entregas.entrega:id,nome', 'planos_trabalho.tipo_modalidade:id,nome'];\r\n  public entregas: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Atividade, AtividadeDaoService);\r\n    const horaInicial = this.auth.hora;\r\n    this.tipoAtividadeDao = injector.get<TipoAtividadeDaoService>(TipoAtividadeDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.comentario = injector.get<ComentarioService>(ComentarioService);\r\n    this.form = this.fh.FormBuilder({\r\n      numero: {default: 0},\r\n      descricao: {default: \"\"},\r\n      data_distribuicao: {default: horaInicial},\r\n      carga_horaria: {default: 0},\r\n      tempo_planejado: {default: 0},\r\n      prazo_entrega: {default: horaInicial},\r\n      data_inicio: {default: null},\r\n      data_entrega: {default: null},\r\n      esforco: {default: 0},\r\n      tempo_despendido: {default: 0},\r\n      data_arquivamento: {default: null},\r\n      etiquetas: {default: []},\r\n      checklist: {default: []},\r\n      prioridade: {default: 0},\r\n      progresso: {default: 0},\r\n      plano_trabalho_id: {default: null},\r\n      plano_trabalho_entrega_id: {default: null},\r\n      tipo_atividade_id: {default: null},\r\n      demandante_id: {default: \"\"},\r\n      usuario_id: {default: null},\r\n      unidade_id: {default: \"\"},\r\n      documento_requisicao_id: {default: null},\r\n      documento_entrega_id: {default: null},\r\n      comentarios: {default: []},\r\n      pausas: {default: []},\r\n      etiqueta: {default: \"\"},\r\n      tarefas: {default: []},\r\n      documento_requisicao: {default: new Documento()},\r\n      documento_entrega: {default: new Documento()}\r\n    }, this.cdRef, this.validate);\r\n    this.formChecklist = this.fh.FormBuilder({\r\n      id: {default: \"\"},\r\n      texto: {default: \"\"},\r\n      checked: {default: false}\r\n    }, this.cdRef, this.validateChecklist);\r\n    this.join = [\"usuario.planos_entrega.entregas.entrega:id,nome\", \"usuario.planos_entrega.tipo_modalidade:id,nome\", \"pausas\", \"tipo_atividade\", \"unidade\", \"comentarios.usuario\", \"tarefas.tipo_tarefa\", \"tarefas.comentarios.usuario\", \"documento_requisicao\", \"documento_entrega\"];\r\n  }\r\n\r\n  public ngOnInit() {\r\n    super.ngOnInit();\r\n    const segment = (this.url ? this.url[this.url.length-1]?.path : \"\") || \"\";\r\n    this.action = [\"comentar\", \"clonar\"].includes(segment) ? segment : this.action;\r\n  }\r\n\r\n  public get isClonar(): boolean {\r\n    return this.action == \"clonar\";\r\n  }\r\n\r\n  public get titleAtividade(): string {\r\n    return this.form?.controls.numero?.value ? \"#\" + this.form?.controls.numero?.value : \"\";\r\n  }\r\n\r\n  /*public get prazoEmDias(): string | undefined {\r\n    const unidade = this.unidade?.searchObj as Unidade || this.auth.unidade!;\r\n    return [\"DIAS_CORRIDOS\", \"DIAS_UTEIS\"].includes(unidade?.distribuicao_forma_contagem_prazos) ? \"true\" : undefined;\r\n  }\r\n\r\n  public get prazoEmHoras(): string | undefined {\r\n    const unidade = this.unidade?.searchObj as Unidade || this.auth.unidade!;\r\n    return [\"DIAS_CORRIDOS\", \"DIAS_UTEIS\"].includes(unidade?.distribuicao_forma_contagem_prazos) ? undefined : \"true\";\r\n  }*/\r\n\r\n  public validateChecklist = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    return result;\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n\r\n    if([\"unidade_id\", \"descricao\"].includes(controlName) && !control?.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if(controlName == \"tipo_atividade_id\" && !control?.value?.length && !this.auth.hasPermissionTo(\"MOD_ATV_TIPO_ATV_VAZIO\")) {\r\n      result = \"Obrigatório\";\r\n    } else if([\"data_distribuicao\", \"prazo_entrega\"].includes(controlName)) {\r\n      let prazoEntrega = this.form?.controls.prazo_entrega?.value;\r\n      let dataDistribuicao = this.form?.controls.data_distribuicao?.value;\r\n      if (!this.util.isDataValid(control.value)) {\r\n        result = \"Data inválida\";\r\n      } else if(controlName == \"data_distribuicao\" && control.value && this.util.isDataValid(prazoEntrega) && control.value.getTime() > prazoEntrega.getTime()) {\r\n        result = \"Maior que entrega\";\r\n      } else if(controlName == \"prazo_entrega\" && control.value && this.util.isDataValid(dataDistribuicao) && control.value.getTime() < dataDistribuicao.getTime()) {\r\n        result = \"Menor que distribuição\";\r\n      }\r\n    } else if(controlName == \"plano_trabalho_id\" && !control.value?.length && this.form?.controls?.usuario_id.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if(controlName == \"plano_trabalho_entrega_id\") {\r\n      if(this.form?.controls?.plano_trabalho_id.value?.length && !control.value?.length) {\r\n        result = \"Obrigatório\";\r\n      } else if(control.value?.length && !this.entregas.find(x => x.key == control.value)) {\r\n        result = \"Selecione\";\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    let result = undefined;\r\n    //if(!this.isComentarios) {\r\n    this.loadEtiquetas();\r\n    this.loadChecklist();\r\n    const etiquetasKeys = this.etiquetas.map(x => x.key);\r\n    const checklistKeys = this.checklist.map(x => x.key);\r\n    const etiqueta = (this.form.controls.etiquetas.value || []).find((x: LookupItem) => !etiquetasKeys.includes(x.key)) as LookupItem;\r\n    const checklst = (this.form.controls.checklist.value || []).find((x: AtividadeChecklist) => !etiquetasKeys.includes(x.id) && x.checked) as AtividadeChecklist;\r\n    if(etiqueta) result = \"Etiqueta \" + etiqueta.value + \"não pode ser utilizada!\";\r\n    if(checklst) result = \"Checklist \" + checklst.texto + \"não pode ser utilizado!\";\r\n    /* Validações pelo plano *\r\n    if(this.form.controls.plano_id.value?.length) {\r\n      /* Verifica se a atividade seleciona está na lista de atividades permitidas no plano de trabalho *\r\n      if(this.form.controls.atividade_id.value?.length && !this.auth.hasPermissionTo('MOD_DMD_TIPO_ATV_FORA_PL_TRB')) {\r\n        const atividades_termo_adesao = this.planoSelecionado?.documento?.metadados?.atividades_termo_adesao;\r\n        const atividade = this.atividade!.searchObj as Atividade;\r\n        if(!this.planoSelecionado || this.planoSelecionado?.id != this.form.controls.plano_id.value) {\r\n          result = \"Erro ao ler \" + this.lex.translate(\"plano de trabalho\") + \". Selecione-o novamente!\";\r\n        } else if(atividades_termo_adesao && atividade && atividades_termo_adesao.indexOf(this.util.removeAcentos(atividade.nome.toLowerCase())) < 0){\r\n          result = this.lex.translate(\"Atividade\") + \" não consta na lista permitida pelo \" + this.lex.translate(\"plano de trabalho\") + \" selecionado.\";\r\n        }\r\n      }\r\n    }*/\r\n    //}\r\n    return result;\r\n  }\r\n\r\n  public addItemHandleEtiquetas(): LookupItem | undefined {\r\n    let result = undefined;\r\n    if(this.etiqueta && this.etiqueta.selectedItem) {\r\n      const item = this.etiqueta.selectedItem;\r\n      const key = item.key?.length ? item.key : this.util.textHash(item.value);\r\n      if(this.util.validateLookupItem(this.form.controls.etiquetas.value, key)) {\r\n        result = {\r\n          key: key,\r\n          value: item.value,\r\n          color: item.color,\r\n          icon: item.icon\r\n        };\r\n        this.form.controls.etiqueta.setValue(\"\");\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  /*private calcularPrazo(source: \"PACTUADO\" | \"COMPLEXIDADE\" | \"PLANO\" | \"PLANEJADO\" | \"ENTREGA\") {\r\n    if(this.action != \"consult\"){\r\n      const atividade = this.atividade?.searchObj as Atividade;\r\n      const plano = (this.plano?.selectedItem?.data || this.planos.find(x => x.key == this.plano?.selectedItem?.key)?.data) as Plano;\r\n      if(source == \"PACTUADO\") {\r\n        const fator = this.form.controls.fator_complexidade.value || 1;\r\n        const fator_ganho_produtivade = 1 - ((plano?.ganho_produtividade || 0) / 100);\r\n        this.form.controls.tempo_pactuado.setValue((atividade?.tempo_pactuado || 0) * fator * fator_ganho_produtivade || 0);\r\n        this.cdRef.detectChanges();\r\n      } else if(this.deltaChanged()) {\r\n        const unidade = this.unidade?.searchObj as Unidade;\r\n        const fator = this.form.controls.fator_complexidade.value || 1;\r\n        const cargaHoraria = plano?.carga_horaria || this.calendar.expedienteMedio(unidade);\r\n        this.assignDelta(null);\r\n        if(source == \"COMPLEXIDADE\") {\r\n          if(atividade) this.setControlPreventChange(\"tempo_planejado\", atividade.dias_planejado * cargaHoraria * fator || 0);\r\n          const entrega = this.calendar.prazo(this.form.controls.data_distribuicao.value, this.form.controls.tempo_planejado.value, cargaHoraria, unidade, \"DISTRIBUICAO\");\r\n          this.setControlPreventChange(\"prazo_entrega\", entrega);\r\n        } else if(source == \"PLANO\") {\r\n          if(this.planejado) this.planejado.hoursPerDay = cargaHoraria;\r\n          this.form.controls.carga_horaria.setValue(cargaHoraria);\r\n          const tempo = this.calendar.horasUteis(this.form.controls.data_distribuicao.value, this.form.controls.prazo_entrega.value, cargaHoraria, unidade, \"DISTRIBUICAO\");\r\n          this.setControlPreventChange(\"tempo_planejado\", tempo);\r\n        } else if(source == \"PLANEJADO\") {\r\n          const entrega = this.calendar.prazo(this.form.controls.data_distribuicao.value, this.form.controls.tempo_planejado.value, cargaHoraria, unidade, \"DISTRIBUICAO\");\r\n          this.setControlPreventChange(\"prazo_entrega\", entrega);\r\n        } else if(source == \"ENTREGA\") {\r\n          const tempo = this.form.controls.prazo_entrega.value ? this.calendar.horasUteis(this.form.controls.data_distribuicao.value, this.form.controls.prazo_entrega.value, cargaHoraria, unidade, \"DISTRIBUICAO\") : 0;\r\n          this.setControlPreventChange(\"tempo_planejado\", tempo);\r\n        }\r\n        this.cdRef.detectChanges();\r\n      }\r\n    }\r\n  }*/\r\n\r\n  public onUnidadeChange(event: Event) {\r\n    this.loadEtiquetas();\r\n  }\r\n\r\n  public onDataDistribuicaoChange(event: Event) {\r\n    this.loadUsuario(this.usuario?.selectedItem?.entity); /* Atualiza a lista de planos de trabalho válidos no período */\r\n    this.form?.controls.prazo_entrega.updateValueAndValidity();\r\n  }\r\n\r\n  public onPrazoEntregaChange(event: Event) {\r\n    this.form?.controls.data_distribuicao.updateValueAndValidity();\r\n  }\r\n\r\n  public onPlanoTrabalhoChange(event: Event) {\r\n    (async () => {\r\n      if(this.entity) {\r\n        const planoTrabalho = (this.usuario?.searchObj as Usuario)?.planos_trabalho?.find(x => x.id == this.form!.controls.plano_trabalho_id.value);\r\n        const planoTrabalhoEntregaId = this.form.controls.plano_trabalho_entrega_id.value;\r\n        if(planoTrabalho) {\r\n          if(this.planoTrabalhoSelecionado?.id != planoTrabalho.id) {\r\n            this.planoTrabalhoSelecionado = await this.planoTrabalhoDao.getById(planoTrabalho.id, this.planoTrabalhoJoin);\r\n          }\r\n          if(this.form!.controls.unidade_id.value != planoTrabalho.unidade_id) {\r\n            const unidade = await this.unidadeDao.getById(planoTrabalho.unidade_id);\r\n            if(unidade) {\r\n              await this.unidade?.loadSearch(unidade);\r\n              await this.auth.selecionaUnidade(unidade.id);\r\n            }\r\n          }\r\n          this.entregas = planoTrabalho.entregas?.map(x => Object.assign({}, {\r\n            key: x.id,\r\n            value: x.descricao + (x.entrega ? \" (\" + x.entrega!.nome + \")\" : \"\"),\r\n            data: x\r\n          })) || [];\r\n          this.cdRef.detectChanges();\r\n          this.form.controls.plano_trabalho_entrega_id.setValue(!planoTrabalhoEntregaId?.length && this.entregas.length > 0 ? this.entregas[0].key : planoTrabalhoEntregaId);\r\n        } else {\r\n          this.entregas = [];\r\n          this.form.controls.plano_trabalho_entrega_id.setValue(null);\r\n        }\r\n      }\r\n    })();\r\n  }\r\n\r\n  public loadEtiquetas() {\r\n    const unidade = (this.unidade?.searchObj as Unidade);\r\n    const tipoAtividade = (this.tipoAtividade?.searchObj as TipoAtividade);\r\n    this.etiquetas = this.util.merge(tipoAtividade?.etiquetas, unidade?.etiquetas, (a, b) => a.key == b.key);\r\n  }\r\n\r\n  public loadChecklist() {\r\n    const tipoAtividade = (this.tipoAtividade?.searchObj as TipoAtividade);\r\n    this.checklist = tipoAtividade?.checklist || [];\r\n    let checks: AtividadeChecklist[] = this.util.merge(this.checklist.map(a => {\r\n      return {\r\n        id: a.key,\r\n        texto: a.value,\r\n        checked: false\r\n      } as AtividadeChecklist;\r\n    }), (this.form.controls.checklist.value || []).filter((b: AtividadeChecklist) => b.checked), (a: AtividadeChecklist, b: AtividadeChecklist) => {\r\n      if(a.id == b.id) {\r\n        a.checked = b.checked;\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    });\r\n    this.form.controls.checklist.setValue(checks);\r\n  }\r\n\r\n  public loadTipoAtividade(tipoAtividade: TipoAtividade | undefined) {\r\n    if(tipoAtividade) {\r\n      this.loadEtiquetas();\r\n      this.loadChecklist();\r\n    } else {\r\n      this.etiquetas = [];\r\n      this.form.controls.esforco.setValue(0);\r\n      this.form.controls.tempo_planejado.setValue(0);\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public getPlanosTrabalhos(usuario: Usuario, data_distribuicao: Date, plano_trabalho_id: string | null): LookupItem[] {\r\n    return usuario.planos_trabalho?.filter(x => x.id == plano_trabalho_id || (this.util.between(data_distribuicao, {start: x.data_inicio_vigencia, end: x.data_fim_vigencia}))).map(x => Object.assign({\r\n      key: x.id, \r\n      value: (x.tipo_modalidade?.nome || \"\") + \" - \" + this.usuarioDao.getDateFormatted(x.data_inicio_vigencia)+ \" a \" + this.usuarioDao.getDateFormatted(x.data_fim_vigencia), data: x\r\n    })) || [];\r\n  }\r\n\r\n  public loadUsuario(usuario: Usuario | undefined) {\r\n    if(usuario) {\r\n      const planoTrabalhoId = this.form.controls.plano_trabalho_id.value;\r\n      const dataDistribuicao = this.form.controls.data_distribuicao.value || new Date();\r\n      this.planosTrabalhos = this.getPlanosTrabalhos(usuario, dataDistribuicao, planoTrabalhoId); //usuario?.planos?.map(x => Object.assign({key: x.id, value: (x.tipo_modalidade?.nome || \"\") + \" - \" + this.usuarioDao.getDateFormatted(x.data_inicio_vigencia)+ \" a \" + this.usuarioDao.getDateFormatted(x.data_fim_vigencia), data: x})) || [];\r\n      this.cdRef.detectChanges();\r\n      this.form.controls.plano_trabalho_id.setValue(!planoTrabalhoId?.length && this.planosTrabalhos.length > 0 ? this.planosTrabalhos[0].key : planoTrabalhoId);\r\n    } else {\r\n      this.planosTrabalhos = [];\r\n      this.form.controls.plano_trabalho_id.setValue(null);\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onTipoAtividadeSelect(item: SelectItem) {\r\n    const tipoAtividade: TipoAtividade | undefined = item.entity as TipoAtividade;\r\n    this.loadTipoAtividade(tipoAtividade);\r\n    this.comentarioAtividade(tipoAtividade);\r\n  }\r\n\r\n  public comentarioAtividade(tipoAtividade?: TipoAtividade) {\r\n    const comentarios: Comentario[] = this.form.controls.comentarios.value || [];\r\n    const index = comentarios.findIndex(x => x.tipo == \"TIPO_ATIVIDADE\");\r\n    if(index >= 0) {\r\n      if(comentarios[index]._status == \"ADD\") {\r\n        comentarios.splice(index, 1);\r\n      } else {\r\n        comentarios[index]._status == \"DELETE\";\r\n      }\r\n    }\r\n    if(tipoAtividade?.comentario?.length) {\r\n      const comentario = new Comentario();\r\n      comentario.id = this.dao!.generateUuid();\r\n      comentario.path = \"\";\r\n      comentario.texto = tipoAtividade.comentario;\r\n      comentario.data_hora = this.auth.hora;\r\n      comentario.usuario_id = this.auth.usuario!.id;\r\n      comentario.comentario_id = null;\r\n      comentario.tipo = \"TIPO_ATIVIDADE\";\r\n      comentario.usuario = this.auth.usuario;\r\n      comentario._status = \"ADD\";\r\n      comentarios.push(comentario);\r\n      this.form.controls.comentarios.setValue(this.comentario.orderComentarios(comentarios));\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public onTipoAtividadeChange(event: Event) {\r\n    if(!this.form?.controls.tipo_atividade_id.value?.length) this.loadTipoAtividade(undefined);\r\n  }\r\n\r\n  public onUsuarioSelect(item: SelectItem) {\r\n    const usuario: Usuario | undefined = item.entity as Usuario;\r\n    this.loadUsuario(usuario);\r\n  }\r\n\r\n  public onUsuarioChange(event: Event) {\r\n    if(!this.form?.controls.usuario_id.value?.length) this.loadUsuario(undefined);\r\n  }\r\n\r\n  /*public addComentario = async () => {\r\n    this.comentario.newComentario(this.form.controls.comentarios, this.comentarios!);\r\n    return undefined;\r\n  }*/\r\n\r\n  public orderPausas(pausas: AtividadePausa[]) {\r\n    return pausas.sort((a: AtividadePausa, b: AtividadePausa) => {\r\n      return a.data_inicio < b.data_inicio ? -1 : 1;\r\n    });\r\n  }\r\n\r\n  /*public comentarioDynamicOptions(row: any): ToolbarButton[] {\r\n    return [{\r\n      label: \"Comentar\",\r\n      icon: \"bi bi-chat-left-quote\",\r\n      onClick: (comentario: Comentario) => {\r\n        this.comentario.newComentario(this.form.controls.comentarios, this.comentarios!, comentario);\r\n      }\r\n    }];\r\n  }*/\r\n\r\n  /*public async saveComentario(form: FormGroup, item: any) {\r\n    const entity = form.value;\r\n    Object.assign(this.comentarios!.editing!, entity);\r\n    return undefined;\r\n  }*/\r\n\r\n  /*public async loadComentario(form: FormGroup, row: any) {\r\n    this.formComentarios.controls.texto.setValue(row.texto);\r\n    this.formComentarios.controls.tipo.setValue(row.tipo);\r\n    this.formComentarios.controls.privacidade.setValue(row.privacidade);\r\n  }*/\r\n\r\n  public async loadData(entity: Atividade, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    this.planoTrabalhoSelecionado = entity.plano_trabalho;\r\n    await Promise.all([\r\n      this.unidade?.loadSearch(entity.unidade || formValue.unidade_id, false),\r\n      this.usuario?.loadSearch(entity.usuario || formValue.usuario_id, false),\r\n      this.tipoAtividade?.loadSearch(entity.tipo_atividade || formValue.tipo_atividade_id, false)\r\n    ]);\r\n    form.patchValue(formValue, {emitEvent: false}); /* Carrega valores iniciais no form e previne que o plano_id seja sobrescrito */\r\n    if(entity.usuario) this.loadUsuario(entity.usuario);\r\n    if(entity.tipo_atividade) this.loadTipoAtividade(entity.tipo_atividade);\r\n    if(entity.unidade_id != this.auth.unidade!.id) await this.auth.selecionaUnidade(entity.unidade_id);\r\n    entity.comentarios = this.comentario.orderComentarios(entity.comentarios || []);\r\n    entity.pausas = this.orderPausas(entity.pausas || []);\r\n    form.patchValue(formValue); /* Carrega os valores e dispara os eventos */\r\n    this.loadEtiquetas();\r\n    /*if(this.action == \"new\" && this.entity?.numero_requisicao?.length || this.entity?.numero_processo?.length) {\r\n      if() {\r\n        this.onNumeroRequisicaoClick(new Event(\"\"));\r\n      } else if() {\r\n        this.onProcessoRequisicaoClick(new Event(\"\"));\r\n      }\r\n    }*/\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    if (this.isClonar) {\r\n      const source = (await this.dao!.getAtividade(this.urlParams!.get(\"id\")!))!;\r\n      this.entity = new Atividade();\r\n      Object.assign(this.entity, {\r\n        tipo_atividade: source.tipo_atividade,\r\n        unidade: source.unidade,\r\n        usuario: source.usuario,\r\n        plano_trabalho: source.plano_trabalho,\r\n        descricao: source.descricao,\r\n        data_distribuicao: source.data_distribuicao,\r\n        tempo_planejado: source.tempo_planejado,\r\n        carga_horaria: source.carga_horaria,\r\n        prazo_entrega: source.prazo_entrega,\r\n        esforco: source.esforco,\r\n        tipo_atividade_id: source.tipo_atividade_id,\r\n        demandante_id: this.auth.usuario?.id,\r\n        usuario_id: source.usuario_id,\r\n        unidade_id: source.unidade_id,\r\n        plano_trabalho_id: source.plano_trabalho_id,\r\n        etiquetas: source.etiquetas,\r\n        checklist: source.checklist,\r\n        plano_trabalho_entrega_id: source.plano_trabalho_entrega_id,\r\n        progresso: source.progresso,\r\n        tarefas: (source.tarefas || []).map((tarefa: AtividadeTarefa) => new AtividadeTarefa(Object.assign({}, tarefa, {\r\n          id: this.dao!.generateUuid(),\r\n          comentarios: [],\r\n          _status: \"ADD\"\r\n        }))),\r\n        documento_requisicao: !source.documento_requisicao ? undefined : Object.assign({}, new Documento(Object.assign({}, source.documento_requisicao, {\r\n          id: this.dao!.generateUuid(),\r\n          _status: \"ADD\"\r\n        }))),\r\n        documento_entrega: !source.documento_entrega ? undefined : Object.assign({}, new Documento(Object.assign({}, source.documento_entrega, {\r\n          id: this.dao!.generateUuid(),\r\n          _status: \"ADD\"\r\n        })))\r\n      });\r\n    } else {\r\n      this.sei = this.metadata?.sei;\r\n      this.entity = new Atividade();\r\n      this.entity.data_distribuicao = this.auth.hora;\r\n      this.entity.prazo_entrega = this.entity.data_distribuicao;\r\n      this.entity.demandante_id = this.auth.usuario?.id || \"\";\r\n      this.entity.unidade_id = this.auth.unidade?.id || \"\";\r\n      this.entity.unidade = this.auth.unidade;\r\n      /* Verificar isso (TODO)\r\n      if(this.queryParams?.numero_requisicao?.length) {\r\n        this.entity.numero_requisicao = this.queryParams?.numero_requisicao;\r\n      } else if(this.queryParams?.numero_processo?.length) {\r\n        this.entity.numero_processo = this.queryParams?.numero_processo;\r\n      }*/\r\n    }\r\n    await this.loadData(this.entity, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<Atividade | boolean> {\r\n    return new Promise<Atividade | boolean>((resolve, reject) => {\r\n      let atividade = this.util.fill(new Atividade(), this.entity!);\r\n      this.comentarios?.confirm();\r\n      atividade = this.util.fillForm(atividade, this.form!.value);\r\n      atividade.comentarios = atividade.comentarios.filter((x: Comentario) => [\"ADD\", \"EDIT\", \"DELETE\"].includes(x._status || \"\") && x.texto?.length);\r\n      atividade.tarefas = atividade.tarefas.filter((tarefa: AtividadeTarefa) => {\r\n        tarefa.comentarios = tarefa.comentarios.filter((x: Comentario) => [\"ADD\", \"EDIT\", \"DELETE\"].includes(x._status || \"\") && x.texto?.length);\r\n        return [\"ADD\", \"EDIT\", \"DELETE\"].includes(tarefa._status || \"\");\r\n      });\r\n      resolve(atividade);\r\n    });\r\n  }\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <tabs display right [title]=\"titleAtividade\">\r\n        <tab key=\"ATIVIDADE\" label=\"Atividade\">\r\n            <documento-link [sei]=\"sei\" [documento]=\"form!.controls.documento_requisicao.value\"></documento-link>\r\n            <div class=\"row\">\r\n                <input-textarea label=\"Descrição\" [size]=\"12\" [rows]=\"2\" controlName=\"descricao\" [control]=\"form!.controls.descricao\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search [label]=\"lex.translate('Unidade')\" [size]=\"6\" #unidade controlName=\"unidade_id\" [dao]=\"unidadeDao\"  (change)=\"onUnidadeChange($event)\"></input-search>\r\n                <input-search [label]=\"lex.translate('Tipo de atividade')\" #tipoAtividade [emptyValue]=\"null\" [size]=\"6\" controlName=\"tipo_atividade_id\"  [dao]=\"tipoAtividadeDao\" (select)=\"onTipoAtividadeSelect($event)\" (change)=\"onTipoAtividadeChange($event)\" [labelInfo]=\"lex.translate('Tipo de atividade') + ' utilizado para classificar a atividade'\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search label=\"Responsável\" [size]=\"4\" [emptyValue]=\"null\" #usuario controlName=\"usuario_id\" [dao]=\"usuarioDao\" [join]=\"usuarioJoin\" labelInfo=\"Responsável pela execução\" (select)=\"onUsuarioSelect($event)\" (change)=\"onUsuarioChange($event)\"></input-search>\r\n                <input-select [label]=\"lex.translate('Plano de trabalho')\" [size]=\"4\" controlName=\"plano_trabalho_id\" #planoTrabalho [control]=\"form!.controls.plano_trabalho_id\" [items]=\"planosTrabalhos\" (change)=\"onPlanoTrabalhoChange($event)\" [labelInfo]=\"lex.translate('Plano de trabalho')\"></input-select>\r\n                <input-select [label]=\"lex.translate('Entrega') + lex.translate('plano de trabalho')\" [size]=\"4\" controlName=\"plano_trabalho_entrega_id\" #entrega [control]=\"form!.controls.plano_trabalho_entrega_id\" [items]=\"entregas\" [labelInfo]=\"lex.translate('Entrega') + lex.translate('plano de trabalho') + ' que a ' + lex.translate('atividade') + ' é referente'\"></input-select>\r\n            </div>\r\n            <div *ngIf=\"!planoTrabalho?.selectedItem?.data?.tipo_modalidade?.atividade_esforco; else comEsforco\" class=\"row\">\r\n                <input-datetime noIcon [size]=\"4\" [label]=\"lex.translate('Data de distribuição')\" controlName=\"data_distribuicao\" [control]=\"form!.controls.data_distribuicao\" (change)=\"onDataDistribuicaoChange($event)\" labelInfo=\"Data de inclusão/distribuição/lançamento\"></input-datetime>\r\n                <input-number [size]=\"4\" [decimals]=\"2\" label=\"Progresso\" disabled sufix=\"%\" icon=\"bi bi-clock\" controlName=\"progresso\" labelInfo=\"Progresso de execução (% Concluído)\"></input-number>\r\n                <input-datetime noIcon  [size]=\"4\" [label]=\"lex.translate('Prazo de entrega')\" controlName=\"prazo_entrega\" [control]=\"form!.controls.prazo_entrega\" (change)=\"onPrazoEntregaChange($event)\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime>\r\n            </div>\r\n            <ng-template #comEsforco>\r\n                <div class=\"row\">\r\n                    <input-datetime noIcon [size]=\"3\" [label]=\"lex.translate('Data de distribuição')\" controlName=\"data_distribuicao\" [control]=\"form!.controls.data_distribuicao\" (change)=\"onDataDistribuicaoChange($event)\" labelInfo=\"Data de inclusão/distribuição/lançamento\"></input-datetime>\r\n                    <input-timer [size]=\"3\" [label]=\"lex.translate('Esforço')\" icon=\"bi bi-stopwatch\" onlyHours controlName=\"esforco\" [control]=\"form!.controls.esforco\" labelInfo=\"Tempo estimado de execução\"></input-timer>\r\n                    <input-number [size]=\"3\" [decimals]=\"2\" label=\"Progresso\" disabled sufix=\"%\" icon=\"bi bi-clock\" controlName=\"progresso\" labelInfo=\"Progresso de execução (% Concluído)\"></input-number>\r\n                    <input-datetime noIcon  [size]=\"3\" [label]=\"lex.translate('Prazo de entrega')\" controlName=\"prazo_entrega\" [control]=\"form!.controls.prazo_entrega\" (change)=\"onPrazoEntregaChange($event)\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime>\r\n                </div>\r\n            </ng-template>\r\n            <separator *ngIf=\"form!.controls.data_entrega.value\" title=\"Conclusão\">\r\n                <div *ngIf=\"!planoTrabalho?.selectedItem?.data?.tipo_modalidade?.atividade_tempo_despendido; else comTempoDespendido\" class=\"row\">\r\n                    <input-datetime noIcon [size]=\"4\" label=\"Inicio\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" disabled labelInfo=\"Data em que o usuário iniciou a atividade\"></input-datetime>\r\n                    <input-datetime noIcon [size]=\"4\" label=\"Conclusão\" controlName=\"data_entrega\" [control]=\"form!.controls.data_entrega\" disabled labelInfo=\"Data da conclusão da atividade\"></input-datetime>\r\n                    <input-datetime [size]=\"4\" label=\"Data de arquivamento\" controlName=\"data_arquivamento\" [control]=\"form!.controls.data_inicio\" disabled labelInfo=\"Data de arquivamento da atividade\"></input-datetime>\r\n                </div>\r\n                <ng-template #comTempoDespendido>\r\n                    <div class=\"row\">\r\n                        <input-datetime noIcon [size]=\"4\" label=\"Inicio\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" disabled labelInfo=\"Data em que o usuário iniciou a atividade\"></input-datetime>\r\n                        <input-datetime noIcon [size]=\"4\" label=\"Conclusão\" controlName=\"data_entrega\" [control]=\"form!.controls.data_entrega\" disabled labelInfo=\"Data da conclusão da atividade\"></input-datetime>\r\n                        <input-timer [size]=\"4\" label=\"Tempo despendido\" icon=\"bi bi-hourglass-bottom\" controlName=\"tempo_despendido\" [control]=\"form!.controls.tempo_despendido\" disabled labelInfo=\"Calculado no fim da atividade, sendo o tempo líquido (considerando pausas)\"></input-timer>\r\n                        <input-datetime [size]=\"4\" label=\"Data de arquivamento\" controlName=\"data_arquivamento\" [control]=\"form!.controls.data_inicio\" disabled labelInfo=\"Data de arquivamento da atividade\"></input-datetime>\r\n                    </div>\r\n                </ng-template>\r\n                <documento-link [documento]=\"form!.controls.documento_entrega.value\"></documento-link>\r\n            </separator>\r\n        </tab>\r\n        <tab key=\"TAREFAS\" [label]=\"lex.translate('Tarefa') + ' ' + lex.translate('atividade')\">\r\n            <atividade-list-tarefa [control]=\"form!.controls.tarefas\" [atividade]=\"entity\" [disabled]=\"formDisabled\"></atividade-list-tarefa>\r\n        </tab>\r\n        <tab key=\"CARACTERIZACAO\" label=\"Caracterização\">\r\n            <div class=\"row\">\r\n                <input-multiselect label=\"Etiquetas\" controlName=\"etiquetas\" [size]=\"8\" [control]=\"form!.controls.etiquetas\" [addItemHandle]=\"addItemHandleEtiquetas.bind(this)\">\r\n                    <input-select [size]=\"12\" #etiqueta controlName=\"etiqueta\" [control]=\"form!.controls.etiqueta\" [items]=\"etiquetas\"></input-select>\r\n                </input-multiselect>\r\n                <div class=\"col-md-4\">\r\n                    <grid [control]=\"form!.controls.checklist\" [form]=\"formChecklist\" [hasAdd]=\"false\" [hasDelete]=\"false\" editable>\r\n                        <columns>\r\n                            <column type=\"switch\" title=\"Check\" field=\"checked\"></column>\r\n                            <column type=\"display\" title=\"Texto\" field=\"texto\" [editable]=\"false\"></column>\r\n                            <column type=\"options\"></column>\r\n                        </columns>\r\n                    </grid>\r\n                </div>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"COMENTARIOS\" label=\"Comentários\">\r\n            <div clss=\"row\">\r\n                <comentarios #comentarios origem=\"ATIVIDADE\" [control]=\"form!.controls.comentarios\"></comentarios>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"COMPLEMENTARES\" label=\"Complementares\">\r\n            <div class=\"row\">\r\n                <input-search label=\"Demandante\" [size]=\"12\" controlName=\"demandante_id\" [dao]=\"usuarioDao\" disabled></input-search>\r\n            </div>\r\n            <div clss=\"row\">\r\n                <div class=\"card col-md-4 mt-4\">\r\n                    <h5 class=\"card-header\">\r\n                        <i class=\"bi bi-pause-circle\"></i>\r\n                        Suspensões/Pausas\r\n                    </h5>\r\n                    <div class=\"card-body\">\r\n                        <grid [control]=\"form!.controls.pausas\" #pausas [hasEdit]=\"false\" [hasDelete]=\"false\" [minHeight]=\"0\" disabled>\r\n                            <columns>\r\n                                <column title=\"Início\" type=\"datetime\" field=\"data_inicio\"></column>\r\n                                <column title=\"Fim\" type=\"datetime\" field=\"data_fim\"></column>\r\n                            </columns>\r\n                        </grid>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\n\r\n@Component({\r\n  selector: 'app-atividade-form-prorrogar',\r\n  templateUrl: './atividade-form-prorrogar.component.html',\r\n  styleUrls: ['./atividade-form-prorrogar.component.scss']\r\n})\r\nexport class AtividadeFormProrrogarComponent extends PageFormBase<Atividade, AtividadeDaoService> implements OnInit {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  \r\n  public form: FormGroup;\r\n  public modalWidth: number = 400;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Atividade, AtividadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      data_distribuicao: {default: new Date()},\r\n      prazo_entrega: {default: new Date()}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n\r\n    if(controlName == \"prazo_entrega\") {\r\n      if(!this.util.isDataValid(control.value)) {\r\n        result = \"Obrigatório\";\r\n      } else if(this.entity?.data_distribuicao && (control.value as Date).getTime() < this.entity!.data_distribuicao!.getTime()) {\r\n        result = \"Menor que distribuição!\";\r\n      } \r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  public async loadData(entity: Atividade, form: FormGroup) {\r\n    let formValue = {\r\n      data_distribuicao: entity.data_distribuicao, \r\n      prazo_entrega: entity.prazo_entrega \r\n    };\r\n    if(entity.unidade_id != this.auth.unidade!.id) {\r\n      await this.auth.selecionaUnidade(entity.unidade_id);\r\n    }\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getAtividade(this.urlParams!.get(\"id\")!))!;\r\n    await this.loadData(this.entity, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<boolean> {\r\n    return new Promise<boolean>((resolve, reject) => {\r\n      let prorrogar = {\r\n        id: this.entity!.id,\r\n        prazo_entrega: this.form.controls.prazo_entrega.value \r\n      };\r\n      this.dao!.prorrogar(prorrogar).then(saved => resolve(saved)).catch(reject);\r\n    });\r\n  }\r\n\r\n}","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"12\" label=\"Data da distribuição\" controlName=\"data_distribuicao\" [control]=\"form!.controls.data_distribuicao\" disabled labelInfo=\"Data de distribuição da atividade\"></input-datetime>\r\n    </div>\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"12\" [label]=\"lex.translate('Prazo de entrega')\" controlName=\"prazo_entrega\" [control]=\"form!.controls.prazo_entrega\" labelInfo=\"Prazo para entrega da atividade\"></input-datetime>\r\n    </div>\r\n</editable-form>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AtividadeRoutingModule } from './atividade-routing.module';\r\nimport { AtividadeListComponent } from './atividade-list/atividade-list.component';\r\nimport { AtividadeFormComponent } from './atividade-form/atividade-form.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { AtividadeListGridComponent } from './atividade-list-grid/atividade-list-grid.component';\r\nimport { AtividadeFormIniciarComponent } from './atividade-form-iniciar/atividade-form-iniciar.component';\r\nimport { AtividadeFormConcluirComponent } from './atividade-form-concluir/atividade-form-concluir.component';\r\nimport { AtividadeFormPausarComponent } from './atividade-form-pausar/atividade-form-pausar.component';\r\nimport { AtividadeFormProrrogarComponent } from './atividade-form-prorrogar/atividade-form-prorrogar.component';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { AtividadeListKanbanComponent } from './atividade-list-kanban/atividade-list-kanban.component';\r\nimport { AtividadeDashboardComponent } from './atividade-dashboard/atividade-dashboard.component';\r\nimport { AtividadeFormTarefaComponent } from './atividade-form-tarefa/atividade-form-tarefa.component';\r\nimport { AtividadeListTarefaComponent } from './atividade-list-tarefa/atividade-list-tarefa.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AtividadeListComponent,\r\n    AtividadeFormComponent,\r\n    AtividadeListGridComponent,\r\n    AtividadeFormIniciarComponent,\r\n    AtividadeFormConcluirComponent,\r\n    AtividadeFormPausarComponent,\r\n    AtividadeDashboardComponent,\r\n    AtividadeFormProrrogarComponent,\r\n    AtividadeFormTarefaComponent,\r\n    AtividadeListTarefaComponent,\r\n    AtividadeListKanbanComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    AtividadeRoutingModule,\r\n    ComponentsModule,\r\n    UteisModule\r\n  ],\r\n  exports: [\r\n    AtividadeListGridComponent\r\n  ]\r\n})\r\nexport class AtividadeModule { }\r\n","import { Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { ActivatedRouteSnapshot } from '@angular/router';\r\nimport { DndDropEvent, DropEffect } from 'ngx-drag-drop';\r\nimport { FilterComponent } from 'src/app/components/grid/filter/filter.component';\r\nimport { CardItem, DockerComponent } from 'src/app/components/kanban/docker/docker.component';\r\nimport { KanbanComponent, KanbanDocker } from 'src/app/components/kanban/kanban.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { QueryOptions } from 'src/app/dao/query-options';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { RouteMetadata } from 'src/app/services/navigate.service';\r\nimport { AtividadeListBase } from '../atividade-list-base';\r\nimport { BadgeButton } from 'src/app/components/badge/badge.component';\r\n\r\nexport type StatusDockerConfig = {\r\n  naoIniciado: boolean, \r\n  pausado: boolean,\r\n  iniciado: boolean,\r\n  concluido: boolean\r\n}\r\n\r\n@Component({\r\n  selector: 'atividade-list-kanban',\r\n  templateUrl: './atividade-list-kanban.component.html',\r\n  styleUrls: ['./atividade-list-kanban.component.scss']\r\n})\r\nexport class AtividadeListKanbanComponent extends AtividadeListBase {\r\n  @ViewChild(\"filterRef\", {static: false}) filterRef?: FilterComponent;\r\n  @ViewChild(\"kanbanEtiquetas\", {static: false}) kanbanEtiquetas?: KanbanComponent;\r\n  @ViewChild(\"dockerNaoIniciado\", {static: false}) dockerNaoIniciado?: DockerComponent;\r\n  @ViewChild(\"dockerPausado\", {static: false}) dockerPausado?: DockerComponent;\r\n  @ViewChild(\"dockerIniciado\", {static: false}) dockerIniciado?: DockerComponent;\r\n  @ViewChild(\"dockerConcluido\", {static: false}) dockerConcluido?: DockerComponent;\r\n  @Input() snapshot?: ActivatedRouteSnapshot;\r\n  @Input() fixedFilter?: any[];\r\n\r\n  public TITLE_OUTRAS = \"Outras\";\r\n  public NAOINICIADO: number = 0;\r\n  public PAUSADO: number = 1;\r\n  public INICIADO: number = 2;\r\n  public CONCLUIDO: number = 3;\r\n  public AVALIADO: number = 4;\r\n  public DOCKERS: string[] = [\"NAOINICIADO\", \"PAUSADO\", \"INICIADO\", \"CONCLUIDO\"];\r\n  public cards: (CardItem[])[] = [[], [], [], []];\r\n  public cardsConfig: StatusDockerConfig = {naoIniciado: false, pausado: false, iniciado: false, concluido: false};\r\n  public labels: KanbanDocker[] = [];\r\n  public cardsVersion: number = 0;\r\n  public dragDrop: any = {};\r\n  public rowsLimit = 500;\r\n  public kanbanQueryOptions: QueryOptions = {};\r\n  public formEdit: FormGroup;\r\n  public etiquetasEdit: LookupItem[] = [];\r\n  public toolbarButtons: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-search\",\r\n      label: \"Filtrar\",\r\n      onClick: () => this.filterRef?.toggle()\r\n    },\r\n    {\r\n      icon: \"bi bi-plus-circle\",\r\n      color: \"btn-outline-success\",\r\n      label: \"Incluir\",\r\n      onClick: async () => await this.add()\r\n    }\r\n  ];\r\n  public outrasButtons: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-plus-circle\",\r\n      color: \"btn-outline-success\",\r\n      hint: \"Incluir nova lista a direita\",\r\n      onClick: this.incluirLista.bind(this)\r\n    }\r\n  ];\r\n  public etiquetasButtons: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-plus-circle\",\r\n      color: \"btn-outline-success\",\r\n      hint: \"Incluir nova lista a direita\",\r\n      onClick: this.incluirLista.bind(this)\r\n    }\r\n  ];\r\n  public menuDockerNaoIniciado: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-plus-circle\",\r\n      color: \"btn-outline-primary\",\r\n      hint: \"Incluir\",\r\n      onClick: async () => await this.add()\r\n    }\r\n  ];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    /* Inicializações */\r\n    this.code = \"MOD_DMD\";\r\n    this.filter = this.fh.FormBuilder({\r\n      atribuidas_para_mim: {default: false},\r\n      usuario_id: {default: \"\"},\r\n      somente_unidade_atual: {default: false},\r\n      unidades_subordinadas: {default: false},\r\n      unidade_id: {default: \"\"},\r\n      numero_processo: {default: \"\"},\r\n      status: {default: \"\"},\r\n      usarEtiquetas: {default: !!this.usuarioConfig?.kanban_usar_etiquetas},\r\n      resumido: {default: !!this.usuarioConfig?.kanban_resumido},\r\n      etiquetas: {default: []}\r\n    });\r\n    this.formEdit = this.fh.FormBuilder({\r\n      etiqueta: {default: null}\r\n    });\r\n    this.cardsConfig = Object.assign(this.cardsConfig, this.usuarioConfig?.kanban_status_dockers);\r\n    this.groupBy = [];\r\n    this.loadEtiquetas();\r\n    this.loadLabel();\r\n  }\r\n\r\n  public defaultUsuarioConfig() {\r\n    return Object.assign(super.defaultUsuarioConfig(), {\r\n      active_tab: \"TABELA\",\r\n      kanban_resumido: false,\r\n      kanban_usar_etiquetas: false,\r\n      kanban_status_dockers: {naoIniciado: false, pausado: false, iniciado: false, concluido: false},\r\n      kanban_etiquetas_dockers: []\r\n    });   \r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    super.ngAfterViewInit();\r\n    this.query!.onLoadingChange = (loading) => {\r\n      this.loading = loading;\r\n      this.cdRef.detectChanges();\r\n    }\r\n    this.loading = this.query!.loading;\r\n    this.query!.subject.asObservable().subscribe(this.onQueryLoad.bind(this));\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public isOutras(x: KanbanDocker): boolean {\r\n    return x.title == this.TITLE_OUTRAS && !x.labels.length;\r\n  } \r\n\r\n  public loadLabel() {\r\n    const dockers: any[] = [...(this.usuarioConfig?.kanban_etiquetas_dockers || [])];\r\n    if(!dockers.find(this.isOutras.bind(this))) dockers.splice(0, 0, {title: this.TITLE_OUTRAS, labels: [], collapse: false});\r\n    this.labels = dockers.reduce((a, v) => {\r\n      if(!a.find((x: any) => (x.title?.length && x.title == v.title) || (x.labels?.length && v.labels?.length && x.labels[0].key == v.labels[0].key))) {\r\n        a.push({\r\n          labels: this.isOutras(v) ? [] : v.labels,\r\n          title: v.title,\r\n          menu: this.isOutras(v) ? this.outrasButtons : this.etiquetasButtons,\r\n          cards: [],\r\n          editing: false,\r\n          collapse: v.collapse\r\n        });\r\n      }\r\n      return a;\r\n    }, []); \r\n    /*this.labels = dockers.map(x => {\r\n      return {\r\n        labels: this.isOutras(x) ? [] : x.labels,\r\n        title: x.title,\r\n        menu: this.isOutras(x) ? this.outrasButtons : this.etiquetasButtons,\r\n        cards: [],\r\n        editing: false,\r\n        collapse: x.collapse\r\n      }        \r\n    });*/\r\n  }\r\n\r\n  public get isEtiquetas(): boolean {\r\n    return !!this.filter?.controls?.usarEtiquetas?.value;\r\n  } \r\n\r\n  public onUsarEtiquetasChange(event: Event) {\r\n    this.saveUsuarioConfig({kanban_usar_etiquetas: this.filter!.controls.usarEtiquetas.value});\r\n    if(this.query) this.onQueryLoad(this.query!.rows);\r\n  }\r\n\r\n  public incluirLista(docker: DockerComponent) {\r\n    this.labels.splice(docker.key + 1, 0, {\r\n      labels: [],\r\n      menu: this.etiquetasButtons,\r\n      cards: [],\r\n      editing: true,\r\n      collapse: false\r\n    });\r\n    \r\n    this.kanbanEtiquetas?.refreshDoubleScrollbar();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onResumidoChange(event: Event) {\r\n    this.saveUsuarioConfig({kanban_resumido: this.filter!.controls.resumido.value});\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public loadEtiquetas() {\r\n    //this.etiquetas = this.util.merge(row.atividade?.etiquetas, row.unidade?.etiquetas, (a, b) => a.key == b.key); \r\n    this.etiquetas = this.util.merge(this.etiquetas, this.auth.usuario!.config?.etiquetas, (a, b) => a.key == b.key); \r\n  }\r\n\r\n  public getLabelStyle(label: KanbanDocker) {\r\n    const bgColor = label.labels.length == 1 ? label.labels[0].color || \"#000000\" : \"#000000\";\r\n    //const txtColor = this.util.contrastColor(bgColor);\r\n    return `border-color: ${bgColor} !important;`;\r\n  }\r\n\r\n  public onDockerCollapse(docker: DockerComponent, collapse: boolean) {\r\n    if(this.isEtiquetas) {\r\n      this.labels[docker.key].collapse = collapse;\r\n      this.saveEtiquetasUsuarioConfig();\r\n    } else {\r\n      this.cardsConfig = {\r\n        naoIniciado: !!this.dockerNaoIniciado?.collapse,\r\n        pausado: !!this.dockerPausado?.collapse,\r\n        iniciado: !!this.dockerIniciado?.collapse,\r\n        concluido: !!this.dockerConcluido?.collapse\r\n      };\r\n      this.saveUsuarioConfig({kanban_status_dockers: this.cardsConfig});\r\n    }\r\n    this.kanbanEtiquetas?.refreshDoubleScrollbar();\r\n  }\r\n\r\n  public async editEtiquetas(docker: DockerComponent) {\r\n    const label = this.labels[docker.key!];\r\n    const allUsed = this.labels.reduce((a: string[], v: KanbanDocker, i: number) => {\r\n      if(v.labels.length && i != docker.key) a.push(v.labels[0].key);\r\n      return a;\r\n    }, []);\r\n    this.etiquetasEdit = this.etiquetas.filter(x => !allUsed.includes(x.key));\r\n    this.formEdit.controls.etiqueta.setValue(label.labels.length ? label.labels[0].key : null);\r\n  }\r\n\r\n  public saveEtiquetasUsuarioConfig() {\r\n    const dockers = this.labels.reduce((a: any[], v: any) => {\r\n      if(!a.find((x: any) => (x.title?.length && x.title == v.title) || (x.labels?.length && v.labels?.length && x.labels[0].key == v.labels[0].key))) {\r\n        a.push({\r\n          title: v.title,\r\n          labels: v.labels,\r\n          collapse: v.collapse\r\n        });\r\n      }\r\n      return a;\r\n    }, []);\r\n    /*const dockers = this.labels.map(x => {\r\n      return {\r\n        title: x.title,\r\n        labels: x.labels,\r\n        collapse: x.collapse\r\n      }\r\n    });*/\r\n    this.saveUsuarioConfig({kanban_etiquetas_dockers: dockers});\r\n  }\r\n\r\n  public async saveEtiquetas(docker: DockerComponent) {\r\n    const key = this.formEdit.controls.etiqueta.value;\r\n    if(key?.length) {\r\n      const label = this.labels[docker.key!];\r\n      const etiqueta = this.etiquetasEdit.find(x => x.key == key);\r\n      if(etiqueta) label.labels = [etiqueta];\r\n      if(this.query) this.onQueryLoad(this.query!.rows);\r\n      this.saveEtiquetasUsuarioConfig();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public async cancelEtiquetas(docker: DockerComponent) {\r\n    const label = this.labels[docker.key!];\r\n    if(!label.labels?.length) {\r\n      this.labels.splice(docker.key!, 1);\r\n      this.kanbanEtiquetas?.refreshDoubleScrollbar();\r\n    }\r\n  }\r\n\r\n  public async deleteEtiquetas(docker: DockerComponent) {\r\n    this.labels.splice(docker.key!, 1);\r\n    this.kanbanEtiquetas?.refreshDoubleScrollbar();\r\n    if(this.query) this.onQueryLoad(this.query!.rows);\r\n    this.saveEtiquetasUsuarioConfig();\r\n  }\r\n\r\n  public getNomes(context: any) {\r\n    return Object.getOwnPropertyNames(context.filter.controls || {}).join(\",\");\r\n  }\r\n\r\n  public modalRefreshId(atividade: Atividade): RouteMetadata {\r\n    return { \r\n      modal: true, \r\n      modalClose: (modalResult?: string) => {\r\n        const destination = this.dragDrop.destination;\r\n        const source = this.dragDrop.source;\r\n        if(modalResult) {\r\n          if(destination && source) {\r\n            destination.list.splice(destination.index, 0, destination.card);\r\n            source.list.splice(source.index, 1);\r\n          }\r\n          (this.grid?.query || this.query!).refreshId(atividade.id);\r\n        }\r\n        this.dragDrop = {};\r\n      }\r\n    };\r\n  }\r\n\r\n  public mergeEtiqueta(etiqueta: LookupItem) {\r\n    if(!this.etiquetas.find(x => x.key == etiqueta.key)) {\r\n      this.etiquetas.push(etiqueta);\r\n    }\r\n  }\r\n\r\n  public filterSubmit(filter: FormGroup): QueryOptions {\r\n    super.filterSubmit(filter);\r\n    this.cards = [[], [], [], []];\r\n    this.labels.forEach(x => x.cards = []);\r\n    return this.queryOptions;\r\n  }\r\n\r\n  public onQueryLoad(rows?: any[]) {\r\n    super.onGridLoad(rows);\r\n    this.cardsVersion++;\r\n    if(!this.filter?.controls?.usarEtiquetas?.value) {\r\n      rows?.forEach(row => {\r\n        const atividade: Atividade = row as Atividade;\r\n        let status = atividade.metadados?.suspenso ? \"SUSPENSO\" : this.lookup.ATIVIDADE_STATUS.find(x => x.key == atividade.metadados?.status)?.key;\r\n        switch(status || \"LANCADO\") {\r\n          case \"SUSPENSO\": this.putCard(this.cards[this.PAUSADO], atividade); break;\r\n          case \"INICIADO\": this.putCard(this.cards[this.INICIADO], atividade); break;\r\n          case \"CONCLUIDO\": this.putCard(this.cards[this.CONCLUIDO], atividade); break;\r\n          default: this.putCard(this.cards[this.NAOINICIADO], atividade);\r\n        }\r\n      });\r\n      for(let cards of this.cards) {\r\n        for(let i = 0; i < cards.length; cards[i].version != this.cardsVersion ? cards.splice(i, 1) : i++);\r\n      }\r\n    } else {\r\n      const outrasIndex = this.labels.findIndex(this.isOutras.bind(this));\r\n      rows?.forEach(row => {\r\n        let atividade: Atividade = row as Atividade;\r\n        let docker: KanbanDocker | undefined = undefined;\r\n        atividade.etiquetas = atividade.etiquetas || [];\r\n        for(let i = 0; i < atividade.etiquetas.length; i++) {\r\n          for(let j = 1; j < this.labels.length && !docker; j++) {\r\n            if(this.labels[j].labels[0].key == atividade.etiquetas[i].key) docker = this.labels[j];\r\n          }\r\n          if(!this.etiquetas.some(x => x.key == atividade.etiquetas[i].key)) this.etiquetas.push(atividade.etiquetas[i]);\r\n        }\r\n        this.putCard(docker?.cards || this.labels[outrasIndex]?.cards || [], atividade);\r\n      });\r\n      for(let cards of this.labels.map(x => x.cards || [])) {\r\n        for(let i = 0; i < cards.length; cards[i].version != this.cardsVersion ? cards.splice(i, 1) : i++);\r\n      }\r\n      /*this.labels[0].labels = [];\r\n      this.etiquetas.forEach(x => {\r\n        if(!this.labels.find(y => y.labels.find(z => z.key == x.key))) this.labels[0].labels.push(x)\r\n      });*/\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public putCard(list: CardItem[], atividade: Atividade) {\r\n    const index = list.findIndex(x => x.id == atividade.id);\r\n    const card = {\r\n      id: atividade.id,\r\n      title: atividade.tipo_atividade?.nome || \"(Atividade não atribuída)\",\r\n      subTitle: atividade.descricao || \"\",\r\n      data: atividade,\r\n      version: this.cardsVersion,\r\n      menu: undefined,\r\n      dynamicMenu: this.dynamicCardMenu.bind(this)\r\n    };\r\n    if(index >= 0) {\r\n      list[index] = Object.assign(list[index], card);\r\n    } else {\r\n      list.push(card);\r\n    }\r\n  }\r\n\r\n  public dynamicCardMenu(card: CardItem): ToolbarButton[] | undefined {\r\n    const menu: ToolbarButton[] | undefined = this.dynamicButtons(card.data);\r\n    menu.push({\r\n      icon: \"bi bi-three-dots\",\r\n      hint: \"Opções\",\r\n      dynamicItems: this.cardDynamicOptions.bind(this)\r\n    });\r\n    if(!card.menu || card.menu.map(x => x.hint).join() != menu.map(x => x.hint).join()) card.menu = menu;\r\n    return card.menu;\r\n  }\r\n\r\n  public cardDynamicOptions(card: CardItem): ToolbarButton[] | undefined {\r\n    const olders = card.menu?.find(x => x.hint == \"Opções\");\r\n    if(olders) {\r\n      const options = this.dynamicOptions.bind(this)(card.data);\r\n      if(!olders.items || olders?.items.map(x => x.label).join() != options.map(x => x.label).join()) olders.items = options;\r\n    }\r\n    return olders?.items;\r\n  }\r\n\r\n  public canDrop(status: string) {\r\n    let self = this;\r\n    return (drag: CardItem) => {\r\n      if(self.isEtiquetas) {\r\n        return true;\r\n      } else {\r\n        const buttons = self.dynamicOptions(drag.data);\r\n        return !!buttons.find(x => x.id == status);\r\n      }\r\n    }\r\n  }\r\n\r\n  public updateEtiquetasAtividade(dragDrop: any) {\r\n    const sourceLabel = this.labels.find(x => x.cards == dragDrop.source.list)?.labels[0];\r\n    const destinationLabel = this.labels.find(x => x.cards == dragDrop.destination.list)?.labels[0];\r\n    const atividade = dragDrop.destination.atividade as Atividade;\r\n    if(sourceLabel && destinationLabel && sourceLabel.key == destinationLabel.key) return;\r\n    if(sourceLabel) atividade.etiquetas.splice(atividade.etiquetas.findIndex(x => x.key == sourceLabel.key), 1);\r\n    if(destinationLabel) atividade.etiquetas.unshift(destinationLabel);\r\n    this.loading = true;\r\n    this.dao!.update(atividade.id, {etiquetas: atividade.etiquetas}).then(atividade => this.modalRefreshId(atividade).modalClose!.bind(this)(atividade.id)).finally(() => this.loading = false);\r\n  }\r\n\r\n  public onDragged(item: any, list: any[], effect: DropEffect) {\r\n    if([\"copy\", \"move\"].includes(effect)) {\r\n      const index = list.indexOf(item);\r\n      this.dragDrop.source = {list, index};\r\n      if(this.isEtiquetas) this.updateEtiquetasAtividade(this.dragDrop);\r\n    }\r\n  }\r\n\r\n  public onDrop(event: DndDropEvent, list?: any[]) {\r\n    if(list && [\"copy\", \"move\"].includes(event.dropEffect)) {\r\n      const atividade = event.data.data;\r\n      const card = event.data;\r\n      let index = typeof event.index === \"undefined\" ? list.length : event.index;\r\n      this.dragDrop = {destination: {list, index, card, atividade}};\r\n      if(!this.isEtiquetas) {\r\n        const buttons = this.dynamicOptions(atividade);\r\n        const docker = this.cards.indexOf(list);\r\n        if(docker >= 0) {\r\n          const action = buttons.find(x => x.id == this.DOCKERS[docker]);\r\n          if(action?.onClick) action?.onClick(atividade);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public onStatusClick(status: BadgeButton) {\r\n    this.filter?.controls.status.setValue(status.data?.status);\r\n    this.filterCollapsed = false;\r\n    this.filterRef?.onButtonFilterClick();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onEtiquetaClick(etiqueta: LookupItem) {\r\n    let etiquetas = this.filter!.controls.etiquetas.value;\r\n    etiquetas.push(etiqueta);\r\n    this.filter?.controls.etiquetas.setValue(etiquetas);\r\n    this.filterCollapsed = false;\r\n    this.filterRef?.onButtonFilterClick();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let result: any[] = this.fixedFilter || [];\r\n    let form: any = filter.value;\r\n \r\n    if(form.usuario_id?.length) {\r\n      result.push([\"usuario_id\", \"==\", form.usuario_id]);\r\n    } \r\n    if(form.unidade_id?.length) {\r\n      result.push([\"unidade_id\", \"==\", form.unidade_id]);\r\n    }\r\n    if(form.unidades_subordinadas) {\r\n      result.push([\"unidades_subordinadas\", \"==\", true]);\r\n    }\r\n    if(form.etiquetas?.length) {\r\n      result.push([\"etiquetas\", \"in\", form.etiquetas.map((x: LookupItem) => x.value)]);\r\n    }\r\n    if(form.numero_processo?.length) {\r\n      result.push([\"numero_processo\", \"==\", form.numero_processo]);\r\n    }\r\n    if(form.status?.length && !result.find(x => x[0] == \"status\")) {\r\n      result.push([\"status\", \"==\", form.status]);\r\n    }\r\n    result.push([\"data_arquivamento\", \"==\", null]); /* Não trazer as arquivadas */\r\n\r\n    return result;\r\n  }\r\n\r\n  public filterClear(filter: FormGroup) {\r\n    this.filter!.controls.atribuidas_para_mim.setValue(false);\r\n    this.filter!.controls.usuario_id.setValue(\"\");\r\n    this.filter!.controls.somente_unidade_atual.setValue(false);\r\n    this.filter!.controls.unidades_subordinadas.setValue(false);\r\n    this.filter!.controls.unidade_id.setValue(\"\");\r\n    this.filter!.controls.numero_processo.setValue(\"\");\r\n    if(!this.fixedFilter?.length || !this.fixedFilter.find(x => x[0] == \"status\")) this.filter!.controls.status.setValue(null);\r\n    this.filter!.controls.etiquetas.setValue([]);\r\n    super.filterClear(filter);\r\n  }\r\n\r\n  public onSwimlaneDrop(event: DndDropEvent, fromIndex: number) {\r\n    const element = this.labels[fromIndex];\r\n    const toIndex = fromIndex < event.index! ? event.index!-1 : event.index!;\r\n    this.labels.splice(fromIndex, 1);\r\n    this.labels.splice(toIndex, 0, element);\r\n    this.saveEtiquetasUsuarioConfig();\r\n  }\r\n\r\n}\r\n\r\n","<!--top-alert type=\"warning\" message=\"ATENÇÃO: O módulo Quadro ainda está em desenvolvimento, utilize apenas a Lista!\"></top-alert/-->\r\n<toolbar [buttons]=\"toolbarButtons\">\r\n    <input-switch [size]=\"2\" labelPosition=\"left\" label=\"Resumido\" controlName=\"resumido\" [control]=\"filter!.controls.resumido\" (change)=\"onResumidoChange($event)\"></input-switch>\r\n    <input-switch [size]=\"2\" labelPosition=\"left\" label=\"Usar etiquetas\" class=\"me-2\" controlName=\"usarEtiquetas\" [control]=\"filter!.controls.usarEtiquetas\" (change)=\"onUsarEtiquetasChange($event)\"></input-switch>\r\n</toolbar>\r\n<filter [form]=\"filter\" #filterRef [where]=\"filterWhere\" [query]=\"query\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"filterCollapsed\">\r\n    <div class=\"row\">\r\n        <input-switch [size]=\"1\" label=\"Minhas\" controlName=\"atribuidas_para_mim\" [control]=\"filter!.controls.atribuidas_para_mim\" (change)=\"onAtribuidasParaMimChange($event)\"></input-switch>\r\n        <input-search [size]=\"5\" [label]=\"lex.translate('Usuário')\" #usuario controlName=\"usuario_id\" [disabled]=\"filter!.controls.atribuidas_para_mim.value ? 'true' : undefined\" [dao]=\"usuarioDao\" ></input-search>\r\n        <input-switch [size]=\"1\" label=\"Atual\" controlName=\"somente_unidade_atual\" [control]=\"filter!.controls.somente_unidade_atual\" (change)=\"onSomenteUnidadeAtualChange($event)\" labelInfo=\"Somente as atividades da unidade selecionada\"></input-switch>\r\n        <input-search [size]=\"4\" [label]=\"lex.translate('Unidade')\" #unidade controlName=\"unidade_id\" [disabled]=\"filter!.controls.somente_unidade_atual.value ? 'true' : undefined\" [dao]=\"unidadeDao\"></input-search>\r\n        <input-switch [size]=\"1\" label=\"Sub.\" controlName=\"unidades_subordinadas\" [control]=\"filter!.controls.unidades_subordinadas\" labelInfo=\"Incluir as unidades subordinadas\"></input-switch>      \r\n    </div>\r\n    <div class=\"row\">\r\n        <input-text [size]=\"4\" [label]=\"'Nº '+ lex.translate('Processo')+' (Sei)'\" maskFormat=\"00000.000000/0000-00\" controlName=\"numero_processo\" [control]=\"filter!.controls.numero_processo\" labelInfo=\"Pesquisa no documento de requisição, conclusão e nos documentos das tarefas\"></input-text>\r\n        <input-select [size]=\"4\" label=\"Status\" itemTodos=\"- Todos -\" [valueTodos]=\"null\" [disabled]=\"fixedFilter?.length && fixedFilter![0]![0] == 'status' ? 'true' : undefined\" controlName=\"status\" [control]=\"filter!.controls.status\" [items]=\"lookup.ATIVIDADE_STATUS\"></input-select>\r\n        <input-multiselect noForm noBox [size]=\"4\" label=\"Etiquetas\" controlName=\"etiquetas\" [control]=\"filter!.controls.etiquetas\"></input-multiselect>\r\n    </div>\r\n</filter>  \r\n<ng-template #ticket let-card=\"card\">\r\n    <div class=\"d-flex w-100\">\r\n        <div class=\"flex-fill\">\r\n            <div class=\"text-nowrap\">\r\n                <span class=\"badge bg-light text-dark\">\r\n                    #{{card.data.numero}}\r\n                </span>\r\n                <span class=\"badge bg-light text-dark\">\r\n                    <i class=\"bi bi-briefcase\"></i>\r\n                    {{card.data.unidade.sigla}}    \r\n                </span>\r\n                <span class=\"badge bg-light text-dark\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Responsável: {{card.data.usuario?.nome || 'Não atribuido a nenhum usuário'}}\">\r\n                    <i [class]=\"'bi ' + (card.data.usuario?.nome?.length ? 'bi-person-check' : 'bi-person-x')\"></i>\r\n                    {{util.apelidoOuNome(card.data.usuario, true) || \"(Não atribuído)\"}}    \r\n                </span>\r\n            </div>\r\n            <span class=\"badge bg-light text-dark fw-light\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Demandante: {{card.data.demandante?.nome || 'Desconhecido'}}\">\r\n                <i class=\"bi bi-cursor\"></i>\r\n                {{util.apelidoOuNome(card.data.demandante, true) || \"Desconhecido\"}}\r\n            </span>\r\n        </div>\r\n        <div *ngIf=\"card.data.usuario\">\r\n            <profile-picture [url]=\"card.data.usuario.url_foto\" [hint]=\"'Responsável: ' + (card.data.usuario?.nome || 'Não atribuido a nenhum usuário')\"></profile-picture>\r\n            <!--img [src]=\"card.data.usuario.url_foto\" class=\"rounded-circle profile-photo\" onerror=\"this.src='./assets/images/profile.png'\" width=\"25\" height=\"25\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Responsável: {{card.data.usuario?.nome || 'Não atribuido a nenhum usuário'}}\"//-->\r\n        </div>\r\n    </div>\r\n    <ng-container *ngIf=\"!filter?.controls?.resumido?.value\">\r\n        <div class=\"card-status-container\">\r\n            <documentos-badge [documento]=\"card.data.documento_requisicao\"></documentos-badge>\r\n            <!--badge *ngIf=\"card.data.numero_processo?.length\" [label]=\"card.data.numero_processo\" color=\"light\" icon=\"bi-folder-symlink\" [data]=\"card.data\" [click]=\"documentoService.onProcessoClick.bind(this)\" [hint]=\"documentoService.processoHint(card.data)\">\r\n                <small *ngIf=\"card.data.numero_requisicao?.length\"><br>Sei nº {{card.data.numero_requisicao}}</small>\r\n            </badge/-->\r\n            <badge *ngFor=\"let status of getStatus(card.data)\" class=\"ms-1\" [color]=\"status.color\" [label]=\"status.label\" [icon]=\"status.icon\" [data]=\"status\" [click]=\"status.data.filter ? onStatusClick.bind(this) : undefined\"></badge>\r\n            <badge *ngFor=\"let etiqueta of card.data.etiquetas\" class=\"ms-1\" [color]=\"etiqueta.color\" [label]=\"etiqueta.value\" [icon]=\"etiqueta.icon\" [data]=\"etiqueta\" [click]=\"onEtiquetaClick.bind(this)\"></badge>\r\n        </div>\r\n        <separator *ngIf=\"card.data.checklist?.length\" small title=\"Checklist\"></separator>\r\n        <table *ngIf=\"card.data.checklist?.length\">\r\n            <tr *ngFor=\"let check of card.data.checklist\">\r\n                <td><i *ngIf=\"check.checked\" class=\"bi bi-check-circle\"></i></td>\r\n                <td class=\"micro-text fw-ligh\">{{check.texto}}</td>\r\n            </tr>\r\n        </table>\r\n        <comentarios-widget [entity]=\"card.data\" [selectable]=\"false\" origem=\"ATIVIDADE\" [query]=\"query\"></comentarios-widget>\r\n        <!--separator title=\"Comentários\" small [button]=\"!selectable ? addComentarioButton : undefined\" (buttonClick)=\"addComentarioClick(card)\"></separator>\r\n        <span *ngFor=\"let comentario of card.data.comentarios\" #badge class=\"badge bg-light text-dark comentario-badge\" role=\"button\" (click)=\"comentarioClick(badge)\" data-expanded=\"false\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" [title]=\"lookup.getValue(lookup.COMENTARIO_TIPO, comentario.tipo)\">\r\n            {{\"• \".repeat(comentario.path?.includes(\"/\") ? comentario.path.split(\"/\").length-1 : 0)}}\r\n            <i [class]=\"'me-1 ' + lookup.getIcon(lookup.COMENTARIO_TIPO, comentario.tipo)\"></i>\r\n            <span class=\"comentario-title\">\r\n                <strong>{{util.shortName(util.apelidoOuNome(comentario.usuario)!)}}</strong>\r\n                • {{util.getDateTimeFormatted(comentario.data_hora)}}<br>\r\n            </span>\r\n            <span class=\"comentario-text\">\r\n                {{comentario.texto}}\r\n            </span>\r\n        </span//-->\r\n    </ng-container>\r\n</ng-template>\r\n<ng-template #editDocker>\r\n    <input-select [size]=\"12\" controlName=\"etiqueta\" [control]=\"formEdit.controls.etiqueta\" [items]=\"etiquetasEdit\"></input-select>\r\n</ng-template>\r\n<ng-template #placeholder>\r\n    <div class=\"card-body\">\r\n        <div class=\"d-flex w-100\">\r\n            <div class=\"flex-fill\">\r\n                <h5 class=\"card-title placeholder-glow\"><span class=\"placeholder col-6\"></span></h5>\r\n            </div>\r\n            <div class=\"btn-group\" role=\"group\" aria-label=\"Basic outlined example\">\r\n                <button type=\"button\" class=\"btn btn-sm btn-outline-secondary disabled placeholder\">\r\n                    <i class=\"bi bi-question\"></i>\r\n                </button>\r\n            </div>\r\n        </div>\r\n        <h6 class=\"card-subtitle mb-2 text-muted placeholder-glow\"><span class=\"placeholder col-8\"></span></h6>\r\n        <p class=\"card-text placeholder-glow\">\r\n            <span class=\"placeholder col-7\"></span>\r\n            <span class=\"placeholder col-4\"></span>\r\n            <span class=\"placeholder col-4\"></span>\r\n            <span class=\"placeholder col-6\"></span>\r\n            <span class=\"placeholder col-8\"></span>\r\n        </p>\r\n    </div>\r\n</ng-template>\r\n\r\n<!-- Kanban por status: Não iniciado, Iniciado, Pausado, Concluido, Avaliado -->\r\n<kanban *ngIf=\"!isEtiquetas\" [template]=\"ticket\" [placeholderTemplate]=\"placeholder\" [loading]=\"loading\" useCardData [dragSwimlanes]=\"false\">\r\n    <swimlane>\r\n        <docker #dockerNaoIniciado icon=\"bi bi-hourglass-split\" title=\"Não iniciado\" color=\"border-warning\" [collapse]=\"cardsConfig.naoIniciado\" [toggle]=\"onDockerCollapse.bind(this)\" [menu]=\"menuDockerNaoIniciado\" [dragged]=\"onDragged.bind(this)\" [drop]=\"onDrop.bind(this)\" [dropIf]=\"canDrop(DOCKERS[NAOINICIADO])\" [cards]=\"cards[NAOINICIADO]\"></docker>\r\n    </swimlane>\r\n    <swimlane>\r\n        <docker #dockerPausado icon=\"bi bi-pause-circle\" title=\"Pausadas\" color=\"border-danger\" [collapse]=\"cardsConfig.pausado\" [toggle]=\"onDockerCollapse.bind(this)\" [dragged]=\"onDragged.bind(this)\" [drop]=\"onDrop.bind(this)\" [dropIf]=\"canDrop(DOCKERS[PAUSADO])\" [cards]=\"cards[PAUSADO]\"></docker>\r\n        <docker #dockerIniciado icon=\"bi bi-play-circle\" title=\"Iniciadas\" color=\"border-info\" [collapse]=\"cardsConfig.iniciado\" [toggle]=\"onDockerCollapse.bind(this)\" [dragged]=\"onDragged.bind(this)\" [drop]=\"onDrop.bind(this)\" [dropIf]=\"canDrop(DOCKERS[INICIADO])\" [cards]=\"cards[INICIADO]\"></docker>\r\n    </swimlane>\r\n    <swimlane>\r\n        <docker #dockerConcluido icon=\"bi bi-check-circle\" title=\"Concluídas\" color=\"border-primary\" [collapse]=\"cardsConfig.concluido\" [toggle]=\"onDockerCollapse.bind(this)\" [dragged]=\"onDragged.bind(this)\" [drop]=\"onDrop.bind(this)\" [dropIf]=\"canDrop(DOCKERS[CONCLUIDO])\" [cards]=\"cards[CONCLUIDO]\"></docker>\r\n    </swimlane>\r\n    <!--swimlane>\r\n        <docker #dockerAvaliado icon=\"bi bi-star-half\" title=\"Avaliadas\" color=\"border-success\" [collapse]=\"cardsConfig.avaliado\" [toggle]=\"onDockerCollapse.bind(this)\" [dragged]=\"onDragged.bind(this)\" [drop]=\"onDrop.bind(this)\" [dropIf]=\"canDrop(DOCKERS[AVALIADO])\" [cards]=\"cards[AVALIADO]\"></docker>\r\n    </swimlane//-->\r\n</kanban>\r\n\r\n<!-- Kanban por label (definido polo usuário) -->\r\n<kanban #kanbanEtiquetas *ngIf=\"isEtiquetas\" \r\n    [dockers]=\"labels\" \r\n    [template]=\"ticket\" \r\n    [placeholderTemplate]=\"placeholder\" \r\n    [loading]=\"loading\" \r\n    [swimlaneDrop]=\"onSwimlaneDrop.bind(this)\"\r\n    [dockerDragged]=\"onDragged.bind(this)\" \r\n    [dockerDrop]=\"onDrop.bind(this)\" \r\n    [dockerEditTemplate]=\"editDocker\" \r\n    [dockerToggle]=\"onDockerCollapse.bind(this)\" \r\n    [dockerEdit]=\"editEtiquetas.bind(this)\" \r\n    [dockerSave]=\"saveEtiquetas.bind(this)\" \r\n    [dockerDelete]=\"deleteEtiquetas.bind(this)\" \r\n    [dockerCancel]=\"cancelEtiquetas.bind(this)\" \r\n    [dockerColorStyle]=\"getLabelStyle\" \r\n    useCardData>\r\n</kanban>","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\n\r\n@Component({\r\n  selector: 'app-atividade-form-pausar',\r\n  templateUrl: './atividade-form-pausar.component.html',\r\n  styleUrls: ['./atividade-form-pausar.component.scss']\r\n})\r\nexport class AtividadeFormPausarComponent extends PageFormBase<Atividade, AtividadeDaoService> implements OnInit {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  \r\n  public form: FormGroup;\r\n  public reiniciar: boolean = false;\r\n  public modalWidth: number = 400;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Atividade, AtividadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      inicio: {default: undefined},\r\n      data: {default: new Date()}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    let pausado = this.entity?.pausas?.find(x => !x.data_fim);\r\n\r\n    if(controlName == \"data\") {\r\n      if(this.reiniciar && !pausado) {\r\n        result = \"Não á pausa!\"; \r\n      } else if(!this.util.isDataValid(control.value)) {\r\n        result = \"Obrigatório\";\r\n      } else if(pausado && this.entity && (control.value as Date).getTime() < this.entity!.data_inicio!.getTime()) {\r\n        result = \"Menor que inicio!\";\r\n      } \r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.reiniciar = !!this.queryParams?.reiniciar;\r\n    this.title = this.reiniciar ? \"Reiniciar\" : \"Suspender\";\r\n    super.ngAfterViewInit();\r\n  }\r\n\r\n  public async loadData(entity: Atividade, form: FormGroup) {\r\n    //this.reiniciar = !!this.queryParams?.reiniciar;\r\n    let pausado = this.entity?.pausas?.find(x => !x.data_fim);\r\n    if(this.reiniciar && !pausado) {\r\n      this.error(\"Não há pausa ativa para ser reiniciada.\");\r\n    }\r\n    let formValue = {\r\n      inicio: this.reiniciar ? pausado?.data_inicio : undefined, \r\n      data: this.util.setStrTime(new Date(), this.auth.unidadeHora)\r\n    };\r\n    if(entity.unidade_id != this.auth.unidade!.id) {\r\n      await this.auth.selecionaUnidade(entity.unidade_id);\r\n    }\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getAtividade(this.urlParams!.get(\"id\")!))!;\r\n    await this.loadData(this.entity, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<boolean> {\r\n    return new Promise<boolean>((resolve, reject) => {\r\n      let pausa = {\r\n        atividade_id: this.entity!.id,\r\n        data: this.form.controls.data.value \r\n      };\r\n      if(this.reiniciar) {\r\n        this.dao!.reiniciar(pausa).then(saved => resolve(saved)).catch(reject);\r\n      } else {\r\n        this.dao!.pausar(pausa).then(saved => resolve(saved)).catch(reject);\r\n      }\r\n    });\r\n  }\r\n\r\n}","<top-alert *ngIf=\"!reiniciar\" type=\"warning\" message=\"Dica: Não é necessário suspender a tarefa entre as jornadas de trabalho!\"></top-alert>\r\n<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <div *ngIf=\"reiniciar\" class=\"row\">\r\n        <input-datetime [size]=\"12\" label=\"Início da pausa\" controlName=\"inicio\" [control]=\"form!.controls.inicio\" disabled labelInfo=\"Data de inicio da última pausa\"></input-datetime>\r\n    </div>\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"12\" [label]=\"reiniciar ? 'Data de reinício' : 'Data da pausa'\" controlName=\"data\" [control]=\"form!.controls.data\" [labelInfo]=\"reiniciar ? 'Data e hora do reinício da atividade' : 'Data e hora do início da pausa/suspensão'\"></input-datetime>\r\n    </div>\r\n</editable-form>\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { TipoDocumentoDaoService } from 'src/app/dao/tipo-documento-dao.service';\r\nimport { TipoTarefaDaoService } from 'src/app/dao/tipo-tarefa-dao.service';\r\nimport { AtividadeTarefaDaoService } from 'src/app/dao/atividade-tarefa-dao.service';\r\nimport { AtividadeTarefa } from 'src/app/models/atividade-tarefa.model';\r\nimport { TipoProcessoDaoService } from 'src/app/dao/tipo-processo-dao.service';\r\nimport { NavigateResult } from 'src/app/services/navigate.service';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { TipoTarefa } from 'src/app/models/tipo-tarefa.model';\r\nimport { SeiKeys } from 'src/app/listeners/procedimento-trabalhar/procedimento-trabalhar.component';\r\nimport { ComentarioService } from 'src/app/services/comentario.service';\r\nimport { ComentariosComponent } from 'src/app/modules/uteis/comentarios/comentarios.component';\r\nimport { DocumentosLinkComponent } from 'src/app/modules/uteis/documentos/documentos-link/documentos-link.component';\r\n\r\n@Component({\r\n  selector: 'app-atividade-form-tarefa',\r\n  templateUrl: './atividade-form-tarefa.component.html',\r\n  styleUrls: ['./atividade-form-tarefa.component.scss']\r\n})\r\nexport class AtividadeFormTarefaComponent extends PageFormBase<AtividadeTarefa, AtividadeTarefaDaoService> implements OnInit {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('documento', { static: false }) public documento?: DocumentosLinkComponent;\r\n  @ViewChild('comentarios', { static: false }) public comentarios?: ComentariosComponent;\r\n  @ViewChild('tipoTarefa', { static: false }) public tipoTarefa?: InputSearchComponent;\r\n\r\n  public tipoTarefaDao: TipoTarefaDaoService;\r\n  public tipoDocumentoDao: TipoDocumentoDaoService;\r\n  public tipoProcessoDao: TipoProcessoDaoService;\r\n  public atividade?: Atividade;\r\n  public sei?: SeiKeys;\r\n  public allPages: ListenerAllPagesService;\r\n  public comentario: ComentarioService;\r\n  public form: FormGroup;\r\n  public modalWidth: number = 800;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, AtividadeTarefa, AtividadeTarefaDaoService);\r\n    this.tipoTarefaDao = injector.get<TipoTarefaDaoService>(TipoTarefaDaoService);\r\n    this.tipoDocumentoDao = injector.get<TipoDocumentoDaoService>(TipoDocumentoDaoService);\r\n    this.tipoProcessoDao = injector.get<TipoProcessoDaoService>(TipoProcessoDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.comentario = injector.get<ComentarioService>(ComentarioService);\r\n    this.title = this.lex.translate(\"Tarefa da atividade\");\r\n    this.form = this.fh.FormBuilder({\r\n      descricao: {default: \"\"},\r\n      tarefa_id: {default: null},\r\n      tempo_estimado: {default: 0},\r\n      concluido: {default: false},\r\n      id_processo: {default: 0},\r\n      numero_processo: {default: \"\"},\r\n      documento: {default: null},\r\n      comentarios: {default: []}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if([\"descricao\"].includes(controlName) && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    const values = form!.value;\r\n    if(values.tipo_tarefa_id?.length && !this.tipoTarefa?.searchObj) {\r\n      return \"Aguarde o carregamento \" + this.lex.translate(\"tipo de tarefa\") + \". Caso demore, selecione novamente!\";\r\n    }\r\n    if(values.concluido && (this.tipoTarefa?.searchObj as TipoTarefa)?.documental && this.documento?.isEmpty()) {\r\n      return this.gb.isEmbedded ? \"Obrigatório selecionar um arquivo para a tarefa selecionada!\" : \"Utilize o sistema como extensão para concluir!\";\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  public ngOnInit() {\r\n    super.ngOnInit();\r\n    const segment = (this.url ? this.url[this.url.length-1]?.path : \"\") || \"\";\r\n    this.action = segment == \"comentar\" ? segment : this.action;\r\n  }\r\n\r\n  public async loadData(entity: AtividadeTarefa, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    await this.tipoTarefa?.loadSearch(entity.tipo_tarefa || formValue.tipo_tarefa_id);\r\n    formValue.comentarios = this.comentario.orderComentarios(formValue.comentarios || []);\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = this.metadata.tarefa;\r\n    this.atividade = this.metadata.atividade;\r\n    this.sei = this.metadata.sei;\r\n    await this.loadData(this.entity!, form);\r\n  }\r\n\r\n  public async saveData(form: IIndexable) {\r\n    this.comentarios?.confirm();\r\n    this.util.fillForm(this.entity, this.form!.value);\r\n    this.entity!.tipo_tarefa = this.tipoTarefa?.searchObj;\r\n    return new NavigateResult(this.entity);\r\n  }\r\n\r\n  public onTipoTarefaSelect(item: SelectItem) {\r\n    const tipoTarefa: TipoTarefa | undefined = item.entity as TipoTarefa;\r\n    this.form!.controls.tempo_estimado.setValue(tipoTarefa?.tempo_estimado || 0);\r\n  }\r\n}\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <tabs display right [title]=\"!isModal ? title : ''\">\r\n        <tab key=\"TAREFA\" [label]=\"lex.translate('Tarefa da Atividade')\">\r\n            <div class=\"row\">\r\n                <input-textarea label=\"Descrição\" [size]=\"12\" [rows]=\"2\" controlName=\"descricao\" [control]=\"form!.controls.descricao\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search [label]=\"lex.translate('Tipo de Tarefa')\" #tipoTarefa [size]=\"7\" controlName=\"tipo_tarefa_id\" [dao]=\"tipoTarefaDao\" (select)=\"onTipoTarefaSelect($event)\"></input-search>\r\n                <input-timer onlyHours label=\"Tempo estimado\" [size]=\"3\" controlName=\"tempo_estimado\" [control]=\"form!.controls.tempo_estimado\" labelInfo=\"Tempo estimado de execução\"></input-timer>\r\n                <input-switch label=\"Concluído\" [size]=\"2\" controlName=\"concluido\" [control]=\"form!.controls.concluido\" labelInfo=\"Se foi concluída\"></input-switch>\r\n            </div>\r\n            <documento-link #documento [sei]=\"sei\" [documento]=\"form!.controls.documento.value\"></documento-link>\r\n        </tab>\r\n        <tab key=\"COMENTARIOS\" label=\"Comentarios\">\r\n            <div clss=\"row\">\r\n                <comentarios #comentarios origem=\"ATIVIDADE_TAREFA\" [control]=\"form!.controls.comentarios\"></comentarios>\r\n            </div>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { CalendarService } from 'src/app/services/calendar.service';\r\nimport { InputTimerComponent } from 'src/app/components/input/input-timer/input-timer.component';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\n\r\n@Component({\r\n  selector: 'app-atividade-form-iniciar',\r\n  templateUrl: './atividade-form-iniciar.component.html',\r\n  styleUrls: ['./atividade-form-iniciar.component.scss']\r\n})\r\nexport class AtividadeFormIniciarComponent extends PageFormBase<Atividade, AtividadeDaoService> implements OnInit {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('planoTrabalho', { static: false }) public planoTrabalho?: InputSelectComponent;\r\n  @ViewChild('planejado', { static: false }) public planejado?: InputTimerComponent;\r\n  \r\n  public usuarioDao: UsuarioDaoService;\r\n  public calendar: CalendarService;\r\n  public form: FormGroup;\r\n  public modalWidth: number = 600;\r\n  public iniciadas: string[] = []; \r\n  public planosTrabalhos: LookupItem[] = [];\r\n  public planosTrabalhosEntregas: LookupItem[] = [];\r\n  public get labelInfoSuspender(): string {\r\n    const n = this.iniciadas.length > 1 ? this.lex.translate(\"tarefas\"): this.lex.translate(\"tarefa\");\r\n    const s = this.iniciadas.length == 1 ? \"\" : \"s\";\r\n    const q = this.iniciadas.length == 1 ? \"\" : \" \" + this.iniciadas.length.toString();\r\n    return this.iniciadas.length ? `Suspender a${s}${q} ${n} já iniciada${s}?` : \"Não há outras atividades iniciadas pelo usuário!\";\r\n  }\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Atividade, AtividadeDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.form = this.fh.FormBuilder({\r\n      usuario_id: {default: undefined},\r\n      plano_trabalho_id: {default: undefined},\r\n      plano_trabalho_entrega_id: {default: undefined},\r\n      data_distribuicao: {default: new Date()},\r\n      prazo_entrega: {default: new Date()},\r\n      carga_horaria: {default: 0},\r\n      tempo_planejado: {default: 0},\r\n      esforco: {default: 0},\r\n      data_inicio: {default: null},\r\n      suspender: {default: false}\r\n    }, this.cdRef, this.validate);\r\n    this.join = [\"unidade\", \"atividade\", \"usuario.planos_trabalho.tipo_modalidade\", \"usuario.planos_trabalho.entregas.entrega:id,nome\"];\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n\r\n    if([\"usuario_id\", \"plano_trabalho_id\"].includes(controlName) && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    } else if(controlName == \"data_inicio\" && !control.value){\r\n      result = \"Obrigatório\";\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  public loadIniciadas(usuario_id?: string) {\r\n    this.iniciadas = [];\r\n    if(usuario_id?.length) {\r\n      this.dao!.iniciadas(usuario_id).then(idsIniciadas => {\r\n        this.iniciadas = idsIniciadas;\r\n        this.cdRef.detectChanges();\r\n      });\r\n    }\r\n  }\r\n\r\n  public onUsuarioSelect(item: SelectItem) {\r\n    const usuario: Usuario | undefined = item.entity as Usuario;\r\n    const planosTrabalhos = usuario?.planos_trabalho || [];\r\n    this.planosTrabalhos = planosTrabalhos.filter(x => x.unidade_id == this.entity!.unidade_id).map(x => {\r\n      return {\r\n        key: x.id,\r\n        value: (x.tipo_modalidade?.nome || \"\") + \" - \" + this.dao!.getDateFormatted(x.data_inicio_vigencia)+ \" à \" + this.dao!.getDateFormatted(x.data_fim_vigencia),\r\n        data: x\r\n      };\r\n    });\r\n    this.cdRef.detectChanges();\r\n    if(!this.form.controls.plano_trabalho_id.value?.length && this.planosTrabalhos.length == 1) {\r\n      this.form.controls.plano_trabalho_id.setValue(this.planosTrabalhos[0].key);\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onPlanoChange(event: Event) {\r\n    (async () => {\r\n      if(this.entity) {\r\n        const planoTrabalho = this.planoTrabalho?.selectedItem?.data as PlanoTrabalho;\r\n        const planoTrabalhoEntregaId = this.form.controls.plano_trabalho_entrega_id.value;\r\n        /*if(plano && this.form!.controls.unidade_id.value != plano.unidade_id) {\r\n          const unidade = await this.unidadeDao.getById(plano.unidade_id);\r\n          if(unidade) {\r\n            await this.unidade?.loadSearch(unidade);\r\n            await this.auth.selecionaUnidade(unidade.id);\r\n          }\r\n        }*/\r\n        const cargaHoraria = planoTrabalho?.carga_horaria || this.calendar.expedienteMedio(this.entity!.unidade);\r\n        const tempo_planejado = this.calendar.horasUteis(this.form.controls.data_distribuicao.value, this.form.controls.prazo_entrega.value, cargaHoraria, this.entity!.unidade!, \"DISTRIBUICAO\");\r\n        this.form.controls.carga_horaria.setValue(cargaHoraria);\r\n        this.form.controls.tempo_planejado.setValue(tempo_planejado);\r\n        this.form.controls.esforco.setValue(this.form.controls.esforco.value || this.entity?.tipo_atividade?.esforco || 0);\r\n        /* Carrega entregas */\r\n        this.planosTrabalhosEntregas = planoTrabalho.entregas?.map(x => Object.assign({}, {\r\n          key: x.id,\r\n          value: x.descricao + (x.entrega ? \" (\" + x.entrega!.nome + \")\" : \"\"),\r\n          data: x\r\n        })) || [];\r\n        this.cdRef.detectChanges();\r\n        this.form.controls.plano_trabalho_entrega_id.setValue(!planoTrabalhoEntregaId?.length && this.planosTrabalhos.length > 0 ? this.planosTrabalhos[0].key : planoTrabalhoEntregaId);\r\n      }\r\n    })();\r\n  }\r\n\r\n  public async loadData(entity: Atividade, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    if(!formValue.usuario_id?.length) {\r\n      formValue.usuario_id = this.auth.usuario?.id;\r\n    }\r\n    formValue.data_inicio = formValue.data_inicio || this.util.setStrTime(new Date(), this.auth.unidadeHora);\r\n    await this.usuario!.loadSearch(entity.usuario || formValue.usuario_id);\r\n    this.loadIniciadas(formValue.usuario_id);\r\n    if(entity.unidade_id != this.auth.unidade!.id) {\r\n      await this.auth.selecionaUnidade(entity.unidade_id);\r\n    }\r\n    form.patchValue(formValue);\r\n    this.onPlanoChange(new Event('change'));\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getById(this.urlParams!.get(\"id\")!, this.join))!;\r\n    await this.loadData(this.entity, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<boolean> {\r\n    return new Promise<boolean>((resolve, reject) => {\r\n      let atividade = this.util.fill(new Atividade(), this.entity!);\r\n      atividade = this.util.fillForm(atividade, this.form!.value);\r\n      atividade.id = this.entity!.id;\r\n      atividade.suspender = this.form!.controls.suspender.value;\r\n      this.dao!.iniciar(atividade).then(saved => resolve(saved)).catch(reject);\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"6\" [label]=\"lex.translate('Data de distribuição')\" controlName=\"data_distribuicao\" [control]=\"form!.controls.data_distribuicao\" disabled labelInfo=\"Data de cadastro da atividade\"></input-datetime>\r\n        <input-datetime [size]=\"6\" [label]=\"lex.translate('Prazo de entrega')\" controlName=\"prazo_entrega\" [control]=\"form!.controls.prazo_entrega\" disabled labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime>\r\n    </div>\r\n    <separator></separator>\r\n    <div class=\"row\">\r\n        <input-search label=\"Responsável\" #usuario [size]=\"12\" controlName=\"usuario_id\" [dao]=\"usuarioDao\" [join]=\"['planos_trabalho.tipo_modalidade:id,nome', 'planos_trabalho.entregas.entrega:id,nome']\" labelInfo=\"Responsável por executar a atividade\" (select)=\"onUsuarioSelect($event)\"></input-search>\r\n    </div>\r\n    <div class=\"row\">\r\n        <input-select [label]=\"lex.translate('Plano de trabalho')\" [size]=\"7\" controlName=\"plano_trabalho_id\" #planoTrabalho [control]=\"form!.controls.plano_trabalho_id\" [items]=\"planosTrabalhos\" (change)=\"onPlanoChange($event)\" [labelInfo]=\"lex.translate('Plano de trabalho')\"></input-select>\r\n        <input-select [label]=\"lex.translate('Entrega do plano')\" [size]=\"5\" controlName=\"plano_trabalho_entrega_id\" #entrega [control]=\"form!.controls.plano_trabalho_entrega_id\" [items]=\"planosTrabalhosEntregas\" [labelInfo]=\"lex.translate('Entrega') + ' do ' + lex.translate('plano de trabalho') + ' que a ' + lex.translate('atividade') + ' é referente'\"></input-select>\r\n    </div>\r\n    <separator></separator>\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"6\" label=\"Inicio\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Data em que o usuário iniciou a atividade\"></input-datetime>\r\n        <input-switch label=\"Suspender as demais\" [size]=\"6\" controlName=\"suspender\" [control]=\"form!.controls.suspender\" [disabled]=\"!iniciadas.length ? '' : undefined\" [labelInfo]=\"labelInfoSuspender\"></input-switch>\r\n    </div>\r\n</editable-form>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { AtividadeFormConcluirComponent } from './atividade-form-concluir/atividade-form-concluir.component';\r\nimport { AtividadeFormTarefaComponent } from './atividade-form-tarefa/atividade-form-tarefa.component';\r\nimport { AtividadeFormIniciarComponent } from './atividade-form-iniciar/atividade-form-iniciar.component';\r\nimport { AtividadeFormPausarComponent } from './atividade-form-pausar/atividade-form-pausar.component';\r\nimport { AtividadeFormProrrogarComponent } from './atividade-form-prorrogar/atividade-form-prorrogar.component';\r\nimport { AtividadeFormComponent } from './atividade-form/atividade-form.component';\r\nimport { AtividadeListTarefaComponent } from './atividade-list-tarefa/atividade-list-tarefa.component';\r\nimport { AtividadeListGridComponent } from './atividade-list-grid/atividade-list-grid.component';\r\nimport { AtividadeListComponent } from './atividade-list/atividade-list.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: AtividadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Atividades\" } },\r\n  { path: 'grid', component: AtividadeListGridComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Atividades\" } },\r\n  { path: 'new', component: AtividadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Inclusão de Atividade\", modal: true } },\r\n  { path: 'tarefa', component: AtividadeFormTarefaComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Tarefa da Atividade\", modal: true } },\r\n  { path: 'tarefa/concluir', component: AtividadeListTarefaComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Concluir Tarefa\", modal: true } },\r\n  { path: 'tarefa/:tarefa_id/comentar', component: AtividadeFormTarefaComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Comentários\", modal: true } },\r\n  { path: ':id/edit', component: AtividadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Edição da Atividade\", modal: true } },\r\n  { path: ':id/consult', component: AtividadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Consulta a Atividade\", modal: true } },\r\n  { path: ':id/clonar', component: AtividadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Clone de Atividade\", modal: true } },\r\n  { path: ':id/iniciar', component: AtividadeFormIniciarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Início de Atividade\", modal: true } },\r\n  { path: ':id/concluir', component: AtividadeFormConcluirComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Conclusão de Atividade\", modal: true } },\r\n  { path: ':id/pausar', component: AtividadeFormPausarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Suspensão de Atividade\", modal: true } },\r\n  { path: ':id/prorrogar', component: AtividadeFormProrrogarComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Prorrogação de Atividade\", modal: true } },\r\n  { path: ':id/comentar', component: AtividadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Comentários de Atividade\", modal: true } }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AtividadeRoutingModule { }\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { CalendarService, Efemerides } from 'src/app/services/calendar.service';\r\nimport { InputButtonComponent } from 'src/app/components/input/input-button/input-button.component';\r\nimport { TipoDocumentoDaoService } from 'src/app/dao/tipo-documento-dao.service';\r\nimport { TipoAtividadeDaoService } from 'src/app/dao/tipo-atividade-dao.service';\r\nimport { TipoAtividade } from 'src/app/models/tipo-atividade.model';\r\nimport { Documento } from 'src/app/models/documento.model';\r\n\r\n@Component({\r\n  selector: 'app-atividade-form-concluir',\r\n  templateUrl: './atividade-form-concluir.component.html',\r\n  styleUrls: ['./atividade-form-concluir.component.scss']\r\n})\r\nexport class AtividadeFormConcluirComponent extends PageFormBase<Atividade, AtividadeDaoService> implements OnInit {\r\n  @ViewChild('tipoAtividade', { static: false }) public tipoAtividade?: InputSearchComponent;\r\n  @ViewChild('docEntregue', { static: false }) public docEntregue?: InputButtonComponent;\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n\r\n  public tipoAtividadeDao: TipoAtividadeDaoService;\r\n  public tipoDocumentoDao: TipoDocumentoDaoService;\r\n  public form: FormGroup;\r\n  public efemerides?: Efemerides;\r\n  public modalWidth: number = 800;\r\n  public calendar: CalendarService;\r\n  public entregas: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Atividade, AtividadeDaoService);\r\n    this.tipoAtividadeDao = injector.get<TipoAtividadeDaoService>(TipoAtividadeDaoService);\r\n    this.tipoDocumentoDao = injector.get<TipoDocumentoDaoService>(TipoDocumentoDaoService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.form = this.fh.FormBuilder({\r\n      tipo_atividade_id: {default: null},\r\n      data_distribuicao: {default: null},\r\n      esforco: {default: 0},\r\n      progresso: {default: 0},\r\n      prazo_entrega: {default: null},\r\n      data_inicio: {default: null},\r\n      tempo_despendido: {default: 0},\r\n      data_entrega: {default: null},\r\n      arquivar: {default: true},\r\n      descricao_tecnica: {default: \"\"},\r\n      documento_entrega: {default: new Documento()},\r\n      documento_entrega_id: {default: null},\r\n      plano_trabalho_entrega_id: {default: null}\r\n    }, this.cdRef, this.validate);\r\n    this.join = [\"plano_trabalho.tipo_modalidade\", \"unidade\", \"plano_trabalho.entregas.entrega:id,nome\"];\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n\r\n    if((controlName == \"plano_trabalho_entrega_id\" && !control.value?.length) || \r\n      (controlName == \"data_entrega\" && !this.util.isDataValid(control.value))) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    \r\n    return result;\r\n  }\r\n\r\n  public async loadData(entity: Atividade, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    formValue.data_entrega = this.auth.hora;\r\n    formValue.progresso = 100;\r\n    await this.tipoAtividade!.loadSearch(entity.tipo_atividade || formValue.tipo_atividade_id);\r\n    if(entity.unidade_id != this.auth.unidade!.id) {\r\n      await this.auth.selecionaUnidade(entity.unidade_id);\r\n    }\r\n    this.entregas = entity.plano_trabalho?.entregas?.map(x => Object.assign({}, {\r\n      key: x.id,\r\n      value: x.descricao + (x.entrega ? \" (\" + x.entrega!.nome + \")\" : \"\"),\r\n      data: x\r\n    })) || [];\r\n    formValue.arquivar = true; //!!this.entity?.plano?.tipo_modalidade?.dispensa_avaliacao; \r\n    form.patchValue(formValue);\r\n    this.onDataEntregaChange();\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getAtividade(this.urlParams!.get(\"id\")!))!;\r\n    await this.loadData(this.entity, form);\r\n  }\r\n\r\n  public onDataEntregaChange(event?: Event) {\r\n    const entrega = this.form.controls.data_entrega.value;\r\n    const inicio = this.entity!.data_inicio!;\r\n    const cargaHoraria = this.entity!.carga_horaria;\r\n    const unidade = this.entity!.unidade!;\r\n    const pausas = this.entity!.pausas || [];\r\n    const afastamentos = this.entity!.usuario?.afastamentos || [];\r\n    this.efemerides = this.util.isDataValid(entrega) ? this.calendar.calculaDataTempoUnidade(inicio, entrega, cargaHoraria, unidade, \"ENTREGA\", pausas, afastamentos) : undefined;\r\n    if(this.efemerides) {\r\n      this.form.controls.tempo_despendido.setValue(this.efemerides.tempoUtil);\r\n      this.cdRef.detectChanges(); \r\n    } \r\n  }\r\n\r\n  public onTipoAtividadeSelect(item: SelectItem) {\r\n    const tipoAtividade: TipoAtividade | undefined = item.entity as TipoAtividade;\r\n    this.form.controls.esforco.setValue(tipoAtividade?.esforco || 0);\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<boolean> {\r\n    return new Promise<boolean>((resolve, reject) => {\r\n      let atividade = this.util.fill(new Atividade(), this.entity!);\r\n      atividade = this.util.fillForm(atividade, this.form!.value);\r\n      atividade.id = this.entity!.id;\r\n      atividade.descricao_tecnica = this.form!.controls.descricao_tecnica.value;\r\n      atividade.data_arquivamento = this.form!.controls.arquivar.value ? new Date() : null;\r\n      atividade.progresso = this.form!.controls.progresso.value;\r\n      atividade.produtividade = this.entity?.plano_trabalho?.tipo_modalidade?.atividade_tempo_despendido ? this.calendar.produtividade(atividade.esforco, atividade.tempo_despendido) : null;\r\n      this.dao!.concluir(atividade).then(saved => resolve(saved)).catch(reject);\r\n    });\r\n  }\r\n\r\n}","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <documento-link [documento]=\"form!.controls.documento_entrega.value\"></documento-link>\r\n    <div class=\"row\">\r\n        <input-search [label]=\"lex.translate('Tipo de Atividade')\" #tipoAtividade [emptyValue]=\"null\" [size]=\"5\" controlName=\"tipo_atividade_id\" [dao]=\"tipoAtividadeDao\" (select)=\"onTipoAtividadeSelect($event)\"></input-search>\r\n        <input-select [label]=\"lex.translate('Entrega do plano')\" [size]=\"5\" controlName=\"plano_trabalho_entrega_id\" #entrega [control]=\"form!.controls.plano_trabalho_entrega_id\" [items]=\"entregas\" [labelInfo]=\"lex.translate('Entrega do plano') + ' que a ' + lex.translate('atividade') + ' é referente'\"></input-select>\r\n        <input-switch label=\"Arquivar\" [size]=\"2\" controlName=\"arquivar\" [control]=\"form!.controls.arquivar\" labelInfo=\"Arquivar automaticamente após a conclusão (Somente se o plano dispensar avaliação)\"></input-switch>\r\n    </div>\r\n    <div class=\"row\">\r\n        <input-textarea [size]=\"12\" [rows]=\"2\" label=\"Descrição técnica\" controlName=\"descricao_tecnica\" [control]=\"form!.controls.descricao_tecnica\"></input-textarea>\r\n    </div>\r\n    <separator [title]=\"lex.translate('Tarefa da atividade')\" collapse [collapsed]=\"false\">\r\n        <atividade-list-tarefa persist [atividade]=\"entity\"></atividade-list-tarefa>\r\n    </separator>\r\n    <div *ngIf=\"!entity?.plano_trabalho?.tipo_modalidade?.atividade_esforco; else comEsforco\" class=\"row\">\r\n        <input-datetime noIcon [size]=\"4\" [label]=\"lex.translate('Distribuição')\" controlName=\"data_distribuicao\" [control]=\"form!.controls.data_distribuicao\" labelInfo=\"Data de inclusão/distribuição/lançamento\"></input-datetime>\r\n        <input-number [size]=\"4\" [decimals]=\"2\" label=\"Progresso\" disabled sufix=\"%\" icon=\"bi bi-clock\" controlName=\"progresso\" labelInfo=\"Progresso de execução (% Concluído). Sempre será 100% na conclusão!\"></input-number>\r\n        <input-datetime noIcon  [size]=\"4\" [label]=\"lex.translate('Prazo de entrega')\" controlName=\"prazo_entrega\" [control]=\"form!.controls.prazo_entrega\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime>\r\n    </div>\r\n    <ng-template #comEsforco>\r\n        <div class=\"row\">\r\n            <input-datetime noIcon [size]=\"3\" disabled [label]=\"lex.translate('Distribuição')\" controlName=\"data_distribuicao\" [control]=\"form!.controls.data_distribuicao\" labelInfo=\"Data de inclusão/distribuição/lançamento\"></input-datetime>\r\n            <input-timer [size]=\"3\" [label]=\"lex.translate('Esforço')\" icon=\"bi bi-stopwatch\" onlyHours controlName=\"esforco\" [control]=\"form!.controls.esforco\" labelInfo=\"Tempo estimado de execução\"></input-timer>\r\n            <input-number [size]=\"3\" [decimals]=\"2\" label=\"Progresso\" disabled sufix=\"%\" icon=\"bi bi-clock\" controlName=\"progresso\" labelInfo=\"Progresso de execução (% Concluído). Sempre será 100% na conclusão!\"></input-number>\r\n            <input-datetime noIcon  [size]=\"3\" disabled [label]=\"lex.translate('Prazo de entrega')\" controlName=\"prazo_entrega\" [control]=\"form!.controls.prazo_entrega\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime>\r\n        </div>\r\n    </ng-template>\r\n    <separator title=\"Conclusão\">\r\n        <div *ngIf=\"!entity?.plano_trabalho?.tipo_modalidade?.atividade_tempo_despendido; else comTempoDespendido\" class=\"row\">\r\n            <input-datetime noIcon [size]=\"4\" label=\"Inicio\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" disabled labelInfo=\"Data em que o usuário iniciou a atividade\"></input-datetime>\r\n            <input-datetime noIcon [size]=\"4\" label=\"Conclusão\" controlName=\"data_entrega\" [control]=\"form!.controls.data_entrega\" (change)=\"onDataEntregaChange($event)\" labelInfo=\"Data da conclusão da atividade\"></input-datetime>\r\n            <input-datetime [size]=\"4\" label=\"Data de arquivamento\" controlName=\"data_arquivamento\" [control]=\"form!.controls.data_inicio\" disabled labelInfo=\"Data de arquivamento da atividade\"></input-datetime>\r\n        </div>\r\n        <ng-template #comTempoDespendido>\r\n            <div class=\"row\">\r\n                <input-datetime noIcon [size]=\"4\" label=\"Inicio\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" disabled labelInfo=\"Data em que o usuário iniciou a atividade\"></input-datetime>\r\n                <input-datetime noIcon [size]=\"4\" label=\"Conclusão\" controlName=\"data_entrega\" [control]=\"form!.controls.data_entrega\" (change)=\"onDataEntregaChange($event)\" labelInfo=\"Data da conclusão da atividade\"></input-datetime>\r\n                <input-timer [size]=\"4\" label=\"Tempo despendido\" icon=\"bi bi-hourglass-bottom\" controlName=\"tempo_despendido\" [control]=\"form!.controls.tempo_despendido\" disabled labelInfo=\"Calculado no fim da atividade, sendo o tempo líquido (considerando pausas)\"></input-timer>\r\n                <input-datetime [size]=\"4\" label=\"Data de arquivamento\" controlName=\"data_arquivamento\" [control]=\"form!.controls.data_inicio\" disabled labelInfo=\"Data de arquivamento da atividade\"></input-datetime>\r\n            </div>\r\n        </ng-template>\r\n        <documento-link [documento]=\"form!.controls.documento_entrega.value\"></documento-link>\r\n    </separator>\r\n    <!--div *ngIf=\"!entity?.plano_trabalho?.tipo_modalidade?.atividade_tempo_despendido; else comTempoDespendido\" class=\"row\">\r\n        <input-timer onlyHours [size]=\"3\" [label]=\"lex.translate('Esforço')\" disabled controlName=\"esforco\" [control]=\"form!.controls.esforco\" labelInfo=\"Tempo necessário para execução da atividade\"></input-timer>\r\n        <input-datetime noIcon [size]=\"3\" [label]=\"lex.translate('Prazo de entrega')\" disabled controlName=\"prazo_entrega\" [control]=\"form!.controls.prazo_entrega\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime>\r\n        <input-datetime noIcon [size]=\"3\" label=\"Data de inicio\" disabled controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Data de inicio\"></input-datetime>\r\n        <input-datetime noIcon [size]=\"3\" label=\"Data de entrega\" #entrega controlName=\"data_entrega\" [control]=\"form!.controls.data_entrega\" (change)=\"onDataEntregaChange($event)\" labelInfo=\"Data e hora da entrega\"></input-datetime>\r\n    </div>\r\n    <ng-template #comTempoDespendido>\r\n        <div class=\"row\">\r\n            <input-datetime noIcon [size]=\"4\" [label]=\"lex.translate('Data de distribuição')\" disabled controlName=\"data_distribuicao\" [control]=\"form!.controls.data_distribuicao\" labelInfo=\"Data de cadastro da atividade\"></input-datetime>\r\n            <input-timer [label]=\"lex.translate('Tempo pactuado')\" icon=\"bi bi-stopwatch\" onlyHours [size]=\"4\" controlName=\"tempo_pactuado\" [control]=\"form!.controls.tempo_pactuado\" labelInfo=\"Tempo estimado de execução\"></input-timer>\r\n            <input-datetime noIcon [size]=\"4\" [label]=\"lex.translate('Prazo de entrega')\" disabled controlName=\"prazo_entrega\" [control]=\"form!.controls.prazo_entrega\" labelInfo=\"Data estipulada para entrega da atividade\"></input-datetime>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-datetime noIcon [size]=\"4\" label=\"Data de inicio\" disabled controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Data de inicio\"></input-datetime>\r\n            <input-timer label=\"Tempo despendido\" [size]=\"4\" icon=\"bi bi-hourglass-bottom\" disabled controlName=\"tempo_despendido\" [control]=\"form!.controls.tempo_despendido\" labelInfo=\"Tempo despendido na atividade (considerando fins de semana, feriados e afastamentos)\"></input-timer>\r\n            <input-datetime noIcon [size]=\"4\" label=\"Data de entrega\" #entrega controlName=\"data_entrega\" [control]=\"form!.controls.data_entrega\" (change)=\"onDataEntregaChange($event)\" labelInfo=\"Data e hora da entrega\"></input-datetime>\r\n        </div>\r\n    </ng-template//-->\r\n    <separator *ngIf=\"efemerides && entity?.plano_trabalho?.tipo_modalidade?.atividade_tempo_despendido\" title=\"Cálculos das horas\" collapse>\r\n        <calendar-efemerides [efemerides]=\"efemerides\"></calendar-efemerides>\r\n    </separator>\r\n</editable-form>\r\n","import { ChangeDetectorRef, Component, HostBinding, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { Chart, ChartData } from 'chart.js';\r\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\r\nimport { ChartDataSets, ChartOptions } from 'chart.js';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { UnidadeDaoService, UnidadeDashboard } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { PageBase } from 'src/app/modules/base/page-base';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { FormHelperService } from 'src/app/services/form-helper.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { UtilService } from 'src/app/services/util.service';\r\nimport { Programa } from '../../../../models/programa.model';\r\nimport { AtividadeListBase } from '../atividade-list-base';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ActivatedRouteSnapshot } from '@angular/router';\r\nimport { FullRoute } from 'src/app/services/navigate.service';\r\n\r\n@Component({\r\n  selector: 'atividade-dashboard',\r\n  templateUrl: './atividade-dashboard.component.html',\r\n  styleUrls: ['./atividade-dashboard.component.scss']\r\n})\r\nexport class AtividadeDashboardComponent extends AtividadeListBase implements OnInit {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('unidadesSubordinadas', { static: false }) public unidadesSubordinadas?: InputSwitchComponent;\r\n  @Input() snapshot?: ActivatedRouteSnapshot;\r\n  @Input() fixedFilter?: any[];\r\n\r\n  /*public static selectRoute?: FullRoute = { route: [\"gestao\", \"atividade\", \"grid\"] };\r\n  public programaSelecionado: Programa | null = null;\r\n  public totalPlanosAtivos: number = 0;\r\n  public totalServidores: number = 0;\r\n  public totalUnidades: number | undefined = 0;\r\n  public unidades: string[] | undefined;\r\n  public filter?: FormGroup;\r\n  public filterWhere?: (filter: FormGroup) => any[];\r\n  public programaDao: ProgramaDaoService;*/\r\n \r\n  // Variáveis associadas aos objetos gráficos\r\n  /*public opcoesGraficoNrPlanos: ChartOptions = {};\r\n  public opcoesGraficoServidores: ChartOptions = {};\r\n  public opcoesGraficoModalidades: ChartOptions = {};\r\n  public dadosGraficoNrPlanos: ChartData = {};\r\n  public dadosGraficoServidores: ChartData = {};\r\n  public dadosGraficoModalidades: ChartData = {};\r\n  public dashUnidades: UnidadeDashboard[] | null = [];\r\n  public labelsGraficosAreasEServidores: string[] = [];\r\n  public alturaAreaGrafico: string = '300px';*/\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    /* Inicializações */\r\n    //this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.title = this.lex.translate(\"Atividades\");\r\n    this.code = \"MOD_DMD\";\r\n    this.fh = this.injector.get<FormHelperService>(FormHelperService);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.filter = this.fh.FormBuilder({\r\n      programa_id: {default: \"\"},\r\n      unidadesSubordinadas: {default: false}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    /*if(controlName == 'programa_id' && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }*/\r\n    return result;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    /* TODO\r\n    Chart.plugins.register(ChartDataLabels);\r\n    this.unidades = this.auth.unidades?.map(x => x.id);\r\n    this.programaDao.query({where: [\r\n      [\"normativa\", \"!=\", null],\r\n      [\"unidade_id\", \"==\",this.auth.unidade!.id],\r\n      [\"data_fim\", \"==\", null],\r\n      //[\"data_fim_vigencia\", \">=\", Date.now()]\r\n    ]}).asPromise().then((programas) => {\r\n      this.programaSelecionado = programas.sort((a, b) => b.data_inicio_vigencia.getMilliseconds() - a.data_inicio_vigencia.getMilliseconds())[0];\r\n      this.programa?.loadSearch(this.programaSelecionado);\r\n    });\r\n    Promise.all([\r\n      this.programaDao.getById(this.filter!.controls.programa_id.value),\r\n      this.unidadeDao.dashboards(this.unidades!, this.filter!.controls.programa_id.value, this.filter!.controls.unidadesSubordinadas.value)\r\n    ]).then(results => {\r\n      this.programaSelecionado = results[0];\r\n      this.dashUnidades = results[1];\r\n      this.cdRef.detectChanges;\r\n      if (this.dashUnidades) {\r\n        this.construirGraficoAreas(this.dashUnidades);\r\n        this.construirGraficoServidores(this.dashUnidades);\r\n        this.construirGraficoModalidades(this.dashUnidades);\r\n      }\r\n    });*/\r\n  }\r\n\r\n  /*public construirGraficoAreas(dashUnidades: UnidadeDashboard[]){\r\n    let _dadosGraficoNrPlanos: number[] = [];\r\n    this.totalPlanosAtivos = 0;\r\n    this.labelsGraficosAreasEServidores = [];\r\n    dashUnidades!.forEach(element => {\r\n      this.labelsGraficosAreasEServidores.push(element.sigla);\r\n      _dadosGraficoNrPlanos.push(element.qdePTAtivos);\r\n      this.totalPlanosAtivos += element.qdePTAtivos;\r\n      });\r\n    this.totalUnidades = dashUnidades?.length;\r\n    this.height = 40 * this.totalUnidades;\r\n    this.dadosGraficoNrPlanos = {\r\n      datasets: [\r\n        {\r\n          label: 'Nr. de PT ativos',\r\n          data: _dadosGraficoNrPlanos,\r\n          backgroundColor: '#0000CD',\r\n          borderColor: '#212121',\r\n          hoverBackgroundColor: '#212121',\r\n          hoverBorderColor: '#0000CD',\r\n          borderWidth: 2,\r\n          //barPercentage: 1,\r\n          //categoryPercentage: 1,\r\n          barThickness: 'flex',\r\n          maxBarThickness: 30,\r\n          datalabels: {\r\n            display: 'auto',\r\n            align: 'start',\r\n            anchor: 'end',\r\n            color: 'white',\r\n            font: {\r\n              weight: 'bold'\r\n            },\r\n          }\r\n        }\r\n      ]\r\n    };\r\n    this.opcoesGraficoNrPlanos = {\r\n      legend: {\r\n        display: true,\r\n        position: 'top',\r\n        labels: {\r\n          fontColor: 'black',\r\n          fontStyle: 'bold'\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [{\r\n          //offset: false,\r\n          display: false,\r\n          gridLines: {\r\n            //borderDashOffset: 0.5,\r\n            //borderDash: [5, 15]\r\n            //offsetGridLines: false\r\n          },\r\n          stacked: false,\r\n          ticks: {\r\n            beginAtZero: true\r\n          }\r\n        }],\r\n        yAxes: [{\r\n            labels: this.labelsGraficosAreasEServidores,\r\n            display: true,\r\n            offset: true,             // se true, dimensiona o eixo para caber dentro da área do gráfico\r\n            type: 'category',\r\n            //stacked: false,\r\n            //id: '',\r\n            //position: '',\r\n            gridLines: {\r\n              display: true,\r\n              offsetGridLines: false, // se false, centraliza a linha de grade na barra do gráfico\r\n              lineWidth: 1,           // largura das linhas de grade\r\n              drawTicks: true         // se true, adiciona um espaçamento entre os labels e o eixo\r\n            },\r\n            scaleLabel: {\r\n              //lineHeight: \"3em\",\r\n              //fontColor: 'black',\r\n              //fontStyle: 'bold'\r\n              //display: true,\r\n              //labelString: 'EIXO Y'\r\n            },\r\n            ticks: {\r\n              fontColor: 'black',\r\n              fontStyle: 'bold'\r\n              //beginAtZero: true,\r\n              //min: ''\r\n            }\r\n        }],\r\n        ticks: {\r\n        }\r\n      },\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      //aspectRatio: 0.5\r\n    };\r\n  }*/\r\n\r\n  /*public construirGraficoServidores(dashUnidades: UnidadeDashboard[]){\r\n    let _dadosGraficoServidores: number[] = [];\r\n    this.totalServidores = 0;\r\n    dashUnidades.forEach(element => {\r\n      _dadosGraficoServidores.push(element.qdeServidores);\r\n      this.totalServidores += element.qdeServidores;\r\n      });\r\n    this.dadosGraficoServidores = {\r\n        datasets: [\r\n          {\r\n            label: 'Nr. de Servidores',\r\n            data: _dadosGraficoServidores,\r\n            backgroundColor: '#FF5722',\r\n            borderColor: '#DD2C00',\r\n            hoverBackgroundColor: '#DD2C00',\r\n            hoverBorderColor: '#FF5722',\r\n            borderWidth: 2,\r\n            //barPercentage: 1,\r\n            //categoryPercentage: 1,\r\n            barThickness: 'flex',\r\n            maxBarThickness: 30,\r\n            datalabels: {\r\n              display: 'auto',\r\n              align: 'start',\r\n              anchor: 'end',\r\n              color: 'black',\r\n              font: {\r\n                weight: 'bold'\r\n              }\r\n            }\r\n          }\r\n        ]\r\n    };\r\n    this.opcoesGraficoServidores = {\r\n      legend: {\r\n        display: true,\r\n        position: 'top',\r\n        labels: {\r\n          fontColor: 'black',\r\n          fontStyle: 'bold'\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [{\r\n            display: false,\r\n            gridLines: {\r\n              //borderDashOffset: 0.5,\r\n              //borderDash: [5, 15]\r\n              //offsetGridLines: false\r\n            },\r\n            stacked: false,\r\n            ticks: {\r\n              beginAtZero: true\r\n            }\r\n        }],\r\n        yAxes: [{\r\n            labels: this.labelsGraficosAreasEServidores,\r\n            display: true,\r\n            offset: true,             // se true, dimensiona o eixo para caber dentro da área do gráfico\r\n            type: 'category',\r\n            //stacked: false,\r\n            //id: '',\r\n            //position: '',\r\n            gridLines: {\r\n              display: true,\r\n              offsetGridLines: false, // se false, centraliza a linha de grade na barra do gráfico\r\n              lineWidth: 1,           // largura das linhas de grade\r\n              drawTicks: true         // se true, adiciona um espaçamento entre os labels e o eixo\r\n            },\r\n            scaleLabel: {\r\n            },\r\n            ticks: {\r\n              fontColor: 'black',\r\n              fontStyle: 'bold',\r\n              beginAtZero: true,\r\n            }\r\n\r\n        }]\r\n      },\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      //aspectRatio: 0.5\r\n    };\r\n  }*/\r\n\r\n  /*public construirGraficoModalidades(dashUnidades: UnidadeDashboard[]) {\r\n    let _labelsY: string[] = [];\r\n    let _dadosGraficoModalidades: number[] = [];\r\n    let modalidades: string[] = [];\r\n    dashUnidades.map(x => x.modalidadesPlanos).forEach(element => {\r\n      element.forEach(x => {modalidades.push(x)})\r\n    });\r\n    _labelsY = modalidades.filter(function(element, posicion){\r\n      return modalidades.indexOf(element) == posicion;\r\n    });\r\n    //this.height_m = 40 * _labelsY.length;\r\n    _labelsY.forEach(x => {\r\n      _dadosGraficoModalidades.push(modalidades.filter(function(element){return element == x}).length);\r\n    });\r\n    this.dadosGraficoModalidades = {\r\n      datasets: [\r\n        {\r\n          label: 'Servidores por Modalidade',\r\n          data: _dadosGraficoModalidades,\r\n          backgroundColor: '#66BB6A',\r\n          borderColor: '#00C853',\r\n          hoverBackgroundColor: '#00C853',\r\n          hoverBorderColor: '#66BB6A',\r\n          borderWidth: 2,\r\n          barThickness: 'flex',\r\n          maxBarThickness: 30,\r\n          datalabels: {\r\n            display: 'auto',\r\n            align: 'start',\r\n            anchor: 'end',\r\n            color: 'white',\r\n            font: {\r\n              weight: 'bold'\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    };\r\n    this.opcoesGraficoModalidades = {\r\n      legend: {\r\n        display: true,\r\n        position: 'top',\r\n        labels: {\r\n          fontColor: 'yelow',\r\n          fontStyle: 'bold'\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [{\r\n          labels: _labelsY,\r\n          offset: true,                 // se true, dimensiona o eixo X para caber dentro da área do gráfico\r\n          type: 'category',\r\n          display: true,\r\n          stacked: false,\r\n          //id: '',\r\n          //position: '',\r\n          gridLines: {                  // esse grupo de configurações altera o comportamento das linhas de grade perpendiculares ao eixo X\r\n            display: true,\r\n            offsetGridLines: false,     // se false, centraliza a linha de grade na barra do gráfico\r\n            lineWidth: 1,               // largura das linhas de grade\r\n            tickMarkLength: 10,      // define o comprimento das marcações sobre o eixo X\r\n            //drawTicks: true           // se true, adiciona um espaçamento entre os labels e o eixo\r\n            //borderDashOffset: 0.5,\r\n            //borderDash: [5, 15]\r\n          },\r\n          scaleLabel: {\r\n\r\n            //lineHeight: \"3em\",\r\n            //fontColor: 'black',\r\n            //fontStyle: 'bold'\r\n            //display: true,\r\n            //labelString: 'EIXO Y'\r\n          },\r\n          ticks: {\r\n            fontColor: 'black',\r\n            fontStyle: 'bold',\r\n            //beginAtZero: true         // não tem efeito se o tipo do eixo for 'category'\r\n          }\r\n        }],\r\n        yAxes: [{\r\n            //labels: _labelsY,\r\n            offset: true,             // se true, dimensiona o eixo Y para caber dentro da área do gráfico\r\n            type: 'linear',\r\n            display: true,\r\n            stacked: false,\r\n            //id: '',\r\n            //position: '',\r\n            gridLines: {              // esse grupo de configurações altera o comportamento das linhas de grade perpendiculares ao eixo Y\r\n              display: true,          // se false, não exibe as linhas de grade perpendiculares ao eixo Y\r\n              //color: 'blue',          // define a cor das linhas de grade\r\n              offsetGridLines: false, // se false, centraliza a linha de grade na barra do gráfico\r\n              lineWidth: 1,           // largura das linhas de grade\r\n              tickMarkLength: 10,      // define o comprimento das marcações sobre o eixo Y\r\n              //borderDash: [25, 10],   // torna as linhas de grade tracejadas: ['comprimento do traço', 'distância entre os traços']\r\n              //drawTicks: true\r\n              //borderDashOffset: 5,\r\n              //zeroLineBorderDashOffset: 5,\r\n              //zeroLineBorderDash: [50, 50],\r\n              //zeroLineWidth: 20,\r\n              //zeroLineColor: 'blue',\r\n              //circular\r\n              //drawBorder\r\n              //drawOnChartArea\r\n              //z\r\n            },\r\n            scaleLabel: {\r\n\r\n              //lineHeight: \"3em\",\r\n              //fontColor: 'black',\r\n              //fontStyle: 'bold'\r\n              //display: true,\r\n              //labelString: 'EIXO Y'\r\n            },\r\n            ticks: {                  // esse grupo de informações refere-se às etiquetas (números ou strings)\r\n              display: true,          // exibidas ao lado do eixo, correspondente às linhas de grade\r\n              //suggestedMax: this.utils.max(_dadosGraficoModalidades),\r\n              //suggestedMin          // valor sugerido como mínimo, para a escala do eixo Y\r\n              //fontColor: 'red',     // cor da fonte utilizada nos labels do eixo Y\r\n              //fontStyle: 'bold',    // estilo da fonte utilizada nos labels do eixo Y\r\n              beginAtZero: true,      // define se a escala do eixo Y iniciará ou não a partir do zero\r\n              stepSize: 0.5,\r\n              //precision: 0,           // se a propriedade 'stepSize' não estiver definida, aqui se define o nr. de casas decimais do passo da escala do eixo Y\r\n              //maxTicksLimit\r\n              //min: 0                // valor mínimo do eixo Y. Entre essa propriedade e a 'suggestedMin', prevalecerá a menor.\r\n              //max: 1                // valor máximo do eixo Y. Entre essa propriedade e a 'suggestedMax', prevalecerá a maior.\r\n            }\r\n        }],\r\n        ticks: {\r\n          //padding: 5,\r\n        }\r\n      },\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      //aspectRatio: 0.5\r\n    };\r\n  }*/\r\n\r\n}","import { Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { AtividadeTarefaDaoService } from 'src/app/dao/atividade-tarefa-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { Comentario } from 'src/app/models/comentario';\r\nimport { AtividadeTarefa } from 'src/app/models/atividade-tarefa.model';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { PageBase } from 'src/app/modules/base/page-base';\r\n\r\n@Component({\r\n  selector: 'atividade-list-tarefa',\r\n  templateUrl: './atividade-list-tarefa.component.html',\r\n  styleUrls: ['./atividade-list-tarefa.component.scss']\r\n})\r\nexport class AtividadeListTarefaComponent extends PageBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @Input() control: AbstractControl = new FormControl();\r\n  @Input() persist?: string;\r\n  @Input() disabled: boolean = false;\r\n  @Input() editable: boolean = true;\r\n  @Input() selectable: boolean = false;\r\n  @Input() id_processo: number = 0;\r\n  @Input() set atividade(value: Atividade | undefined) {\r\n    if(this._atividade != value) {\r\n      this._atividade = value;\r\n      if(this.isPersist && value?.tarefas) {\r\n        this.control.setValue(value?.tarefas);\r\n      }\r\n    }\r\n  }\r\n  get atividade(): Atividade | undefined {\r\n    return this._atividade;\r\n  }\r\n\r\n  public formEdit: FormGroup;\r\n  public dao: AtividadeTarefaDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public join: string[];\r\n  public addComentarioButton: ToolbarButton = {\r\n    icon: \"bi bi-plus-circle\",\r\n    hint: \"Incluir comentário\"\r\n  }\r\n\r\n  private _atividade?: Atividade;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<AtividadeTarefaDaoService>(AtividadeTarefaDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.formEdit = this.fh.FormBuilder({\r\n      concluido: {default: false}\r\n    });\r\n    this.join = [\"tipo_tarefa\", \"comentarios.usuario\"];\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    if(this.queryParams?.id_processo) {\r\n      this.id_processo = this.queryParams?.id_processo;\r\n    }\r\n    if(this.isPersist && this.atividade?.tarefas) {\r\n      this.control.setValue(this.atividade?.tarefas);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    super.ngAfterViewInit();\r\n    if(this.id_processo) {\r\n      this.loading = true;\r\n      this.dao!.query({where: [[\"id_processo\", \"==\", this.id_processo]]}).asPromise().then(tarefas => {\r\n        this.control.setValue(tarefas || []);\r\n        this.cdRef.detectChanges();\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      })\r\n    }\r\n  }\r\n\r\n  public get isPersist(): boolean {\r\n    return this.persist != undefined;\r\n  }\r\n\r\n  public async addTarefa() {\r\n    const tarefa = new AtividadeTarefa();\r\n    tarefa.id = this.dao!.generateUuid();\r\n    tarefa.usuario = this.auth.usuario;\r\n    tarefa.usuario_id = this.auth.usuario!.id;\r\n    tarefa.atividade_id = this.atividade?.id || \"\";\r\n    tarefa.comentarios = [];\r\n    tarefa._status = \"ADD\";\r\n    this.go.navigate({route: ['gestao', 'atividade', 'tarefa']}, {metadata: {tarefa: tarefa, atividade: this.atividade}, modalClose: (modalResult) => {\r\n      if(modalResult) {\r\n        (async () => {\r\n          const tarefas = (this.control!.value || []) as AtividadeTarefa[];\r\n          if(this.isPersist && this.atividade?.tarefas) {\r\n            this.grid!.error = undefined;\r\n            try {\r\n              this.dialog.showSppinerOverlay(\"Salvando dados do formulário\");\r\n              modalResult = await this.dao.save(modalResult, this.join);\r\n            } catch (error: any) {\r\n              this.grid!.error = error.message ? error.message : error;\r\n              modalResult = undefined;\r\n            } finally {\r\n              this.dialog.closeSppinerOverlay();\r\n            }\r\n          }\r\n          if(modalResult) {\r\n            tarefas.push(modalResult);\r\n            this.control!.setValue(tarefas);\r\n          }\r\n          this.cdRef.detectChanges();\r\n        })();\r\n      }\r\n    }});\r\n    return undefined;\r\n  }\r\n\r\n  public editEntrega = async (row: any) => {\r\n    this.go.navigate({route: ['gestao', 'atividade', 'tarefa']}, {metadata: {tarefa: row, atividade: this.atividade}, modalClose: (modalResult) => {\r\n      if(modalResult) {\r\n        (async () => {\r\n          const tarefas = this.control!.value as AtividadeTarefa[];\r\n          const index = tarefas.findIndex(x => x.id == row.id);\r\n          if(index >= 0) {\r\n            modalResult._status = modalResult._status == \"ADD\" ? \"ADD\" : \"EDIT\";\r\n            if(this.isPersist && this.atividade?.tarefas) {\r\n              this.grid!.error = undefined;\r\n              try {\r\n                this.dialog.showSppinerOverlay(\"Salvando dados do formulário\");\r\n                modalResult = await this.dao.save(modalResult, this.join);\r\n              } catch (error: any) {\r\n                this.grid!.error = error.message ? error.message : error;\r\n                modalResult = undefined;\r\n              } finally {\r\n                this.dialog.closeSppinerOverlay();\r\n              }\r\n            }\r\n            if(modalResult) {\r\n              tarefas[index] = modalResult;\r\n              this.control!.setValue(tarefas);\r\n            }\r\n          }\r\n          this.cdRef.detectChanges();\r\n        })();\r\n      }\r\n    }});\r\n    return undefined;\r\n  }\r\n\r\n  public async deleteEntrega(row: any) {\r\n    const confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\");\r\n    this.grid!.error = undefined;\r\n    if(confirm) {\r\n      try {\r\n        if((this.isPersist && this.atividade?.tarefas) || row._status == \"ADD\") {\r\n          const tarefas = this.control!.value as AtividadeTarefa[];\r\n          const index = tarefas.findIndex(x => x.id == row.id);\r\n          if(this.isPersist && this.atividade?.tarefas) await this.dao!.delete(row);\r\n          if(index >= 0) {\r\n            tarefas.splice(index, 1);\r\n            this.control!.setValue(tarefas);\r\n          }\r\n        } else {\r\n          row._status = \"DELETE\";\r\n        }\r\n        this.dialog.alert(\"Sucesso\", \"Registro excluído com sucesso!\");\r\n        this.cdRef.detectChanges();\r\n      } catch (error: any) {\r\n        this.grid!.error = error?.message ? error?.message : error;\r\n      }\r\n    }\r\n  }\r\n\r\n  /*public comentarioClick(element: HTMLSpanElement) {\r\n    const value = element.getAttribute(\"data-expanded\");\r\n    element.setAttribute(\"data-expanded\", value == \"true\" ? \"false\" : \"true\");\r\n  }*/\r\n\r\n  /*public addComentarioClick(row: any) {\r\n    this.go.navigate({route: ['gestao', 'atividade', 'entrega', row.id, 'comentar']}, {modal: true, metadata: {entrega: row, atividade: this.atividade}, modalClose: this.addComentarioResult.bind(this)});\r\n  }*/\r\n\r\n  public async onColumnConcluidoEdit(row: any) {\r\n    this.formEdit.controls.concluido.setValue(row.concluido);\r\n  }\r\n\r\n  public async onColumnConcluidoSave(row: any) {\r\n    try {\r\n      const saved = await this.dao!.update(row.id, {\r\n        concluido: this.formEdit.controls.concluido.value\r\n      });\r\n      row.concluido = this.formEdit.controls.concluido.value;\r\n      return !!saved;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public addComentarioResult(modalResult: AtividadeTarefa) {\r\n    if(modalResult) {\r\n      if(this.isPersist) {\r\n        this.dao!.getById(modalResult.id, this.join).then(tarefa => {\r\n          if (tarefa) {\r\n            const tarefas = this.control.value || [];\r\n            const index = tarefas.findIndex((x: AtividadeTarefa) => x.id = tarefa.id);\r\n            if(index >= 0) {\r\n              tarefas[index] = tarefa;\r\n              this.control.setValue(tarefas);\r\n              this.cdRef.detectChanges();\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        const changed = modalResult.comentarios.filter((x: Comentario) => [\"ADD\", \"EDIT\", \"DELETE\"].includes(x._status || \"\")).length > 0;\r\n        modalResult._status = changed && ![\"ADD\", \"EDIT\", \"DELETE\"].includes(modalResult._status || \"\") ? \"EDIT\" : modalResult._status;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","<grid [control]=\"control\" [add]=\"addTarefa.bind(this)\" [disabled]=\"disabled ? 'true' : undefined\" [minHeight]=\"isPersist ? 50 : 300\" [hasDelete]=\"true\" [editable]=\"editable ? 'true' : undefined\">\r\n    <columns>\r\n        <column [title]=\"lex.translate('Tipo de Tarefa') + ' e Descrição'\" [template]=\"tipoTarefaDescricao\">\r\n            <ng-template let-row=\"row\" #tipoTarefaDescricao>\r\n                <strong *ngIf=\"row.tipo_tarefa?.nome?.length\" class=\"d-block\">{{row.tipo_tarefa?.nome || \"\"}}</strong>\r\n                {{row.descricao}}\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"timer\" title=\"Tempo estimado\" onlyHours field=\"tempo_estimado\"></column>\r\n        <column title=\"Documento\" [template]=\"documento\">\r\n            <ng-template let-row=\"row\" #documento>\r\n                <documentos-badge [documento]=\"row.documento\"></documentos-badge>\r\n                <!--span class=\"badge bg-light text-dark\" [attr.role]=\"row.numero_processo?.length ? 'button' : undefined\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" (click)=\"documentoService.onProcessoClick(row)\" [title]=\"allPages.getButtonTitle(row.numero_processo, row.numero_documento)\">\r\n                    <i [class]=\"'bi ' + (row.numero_processo?.length ? 'bi bi-folder-symlink' : 'bi bi-x-lg')\"></i>\r\n                    {{row.numero_processo?.length ? row.numero_processo : \"Não atribuído\"}}\r\n                    <small *ngIf=\"row.numero_documento?.length\"><br>Sei nº {{row.numero_documento}}</small>\r\n                </span/-->\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Concluído\" [align]=\"'center'\" [template]=\"concluido\" [editTemplate]=\"editConcluido\" [edit]=\"editable ? onColumnConcluidoEdit.bind(this) : undefined\" [save]=\"editable ? onColumnConcluidoSave.bind(this) : undefined\">\r\n            <ng-template let-row=\"row\" #concluido>\r\n                <div class=\"text-center\"><i *ngIf=\"row.concluido\" class=\"bi bi-check-circle\"></i></div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editConcluido>\r\n                <input-switch [size]=\"12\" controlName=\"concluido\" [control]=\"formEdit!.controls.concluido\"></input-switch>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Informações adicionais\" [template]=\"tarefaComentarios\">\r\n            <ng-template let-row=\"row\" #tarefaComentarios>\r\n                <comentarios-widget [entity]=\"row\" [noPersist]=\"isPersist ? undefined : 'true'\" [selectable]=\"selectable\" origem=\"ATIVIDADE_TAREFA\" [grid]=\"grid\" [save]=\"addComentarioResult.bind(this)\"></comentarios-widget>\r\n                <!--separator title=\"Comentários\" small [button]=\"!selectable ? addComentarioButton : undefined\" (buttonClick)=\"addComentarioClick(row)\"></separator>\r\n                <span *ngFor=\"let comentario of row.comentarios\" #badge class=\"badge bg-light text-dark comentario-badge\" role=\"button\" (click)=\"comentarioClick(badge)\" data-expanded=\"false\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" [title]=\"lookup.getValue(lookup.COMENTARIO_TIPO, comentario.tipo)\">\r\n                    {{\"• \".repeat(comentario.path?.includes(\"/\") ? comentario.path.split(\"/\").length-1 : 0)}}\r\n                    <i [class]=\"'me-1 ' + lookup.getIcon(lookup.COMENTARIO_TIPO, comentario.tipo)\"></i>\r\n                    <span class=\"comentario-title\">\r\n                        <strong>{{util.shortName(util.apelidoOuNome(comentario.usuario)!)}}</strong>\r\n                        • {{util.getDateTimeFormatted(comentario.data_hora)}}<br>\r\n                    </span>\r\n                    <span class=\"comentario-text\">\r\n                        {{comentario.texto}}\r\n                    </span>\r\n                </span//-->\r\n            </ng-template>\r\n        </column>\r\n        <column *ngIf=\"editable && !selectable && !id_processo\" type=\"options\" [onEdit]=\"editEntrega.bind(this)\" [onDelete]=\"deleteEntrega.bind(this)\"></column>\r\n    </columns>\r\n</grid>\r\n","import { Component, Injector, OnInit } from '@angular/core';\r\nimport { PageBase } from 'src/app/modules/base/page-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\n\r\n@Component({\r\n  selector: 'app-atividade-list',\r\n  templateUrl: './atividade-list.component.html',\r\n  styleUrls: ['./atividade-list.component.scss']\r\n})\r\nexport class AtividadeListComponent extends PageBase implements OnInit {\r\n  public activeTab: string = \"TABELA\";\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    /* Inicializações */\r\n    this.title = this.lex.translate(\"Atividades\");\r\n    this.code = \"MOD_DMD\";\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    this.activeTab = this.usuarioConfig.active_tab || \"TABELA\";\r\n  }\r\n\r\n  public async onSelectTab(tab: LookupItem) {\r\n    this.activeTab = tab.key;\r\n    this.saveUsuarioConfig({active_tab: this.activeTab});\r\n  }\r\n\r\n}","<tabs right [title]=\"isModal ? '' : title\" [select]=\"onSelectTab.bind(this)\" [active]=\"activeTab\">\r\n    <tab key=\"TABELA\" icon=\"bi bi-table\" label=\"Lista\" [template]=\"grid\">\r\n        <ng-template #grid>\r\n            <atividade-list-grid [snapshot]=\"snapshot || modalRoute || route.snapshot\"></atividade-list-grid>\r\n        </ng-template>\r\n    </tab>\r\n    <tab key=\"KANBAN\" icon=\"bi bi-card-heading\" label=\"Quadro\" [template]=\"kanban\">\r\n        <ng-template #kanban>\r\n            <atividade-list-kanban [snapshot]=\"snapshot || modalRoute || route.snapshot\"></atividade-list-kanban>\r\n        </ng-template>\r\n    </tab>\r\n    <tab *ngIf=\"false && auth.hasPermissionTo('DASH_PRG')\" key=\"DASHBOARD\" icon=\"bi bi-file-earmark-bar-graph\" label=\"Dashboard\" [template]=\"dashboard\">\r\n        <ng-template #dashboard>\r\n            <atividade-dashboard [snapshot]=\"snapshot || modalRoute || route.snapshot\"></atividade-dashboard>\r\n        </ng-template>\r\n    </tab>\r\n</tabs>"],"sourceRoot":"webpack:///"}