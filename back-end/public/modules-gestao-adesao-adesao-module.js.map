{"version":3,"sources":["./src/app/models/adesao.model.ts","./src/app/models/adesao-unidade.model.ts","./src/app/modules/gestao/adesao/adesao-list/adesao-list.component.ts","./src/app/modules/gestao/adesao/adesao-list/adesao-list.component.html","./src/app/modules/gestao/adesao/adesao-routing.module.ts","./src/app/models/adesao-usuario.model.ts","./src/app/modules/gestao/adesao/adesao.module.ts","./src/app/modules/gestao/adesao/adesao-form-termo/adesao-form-termo.component.ts","./src/app/modules/gestao/adesao/adesao-form-termo/adesao-form-termo.component.html","./src/app/modules/gestao/adesao/adesao-form/adesao-form.component.ts","./src/app/modules/gestao/adesao/adesao-form/adesao-form.component.html","./src/app/modules/gestao/adesao/adesao.service.ts"],"names":[],"mappings":"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","file":"modules-gestao-adesao-adesao-module.js","sourcesContent":["import { Base } from './base.model';\r\nimport { TipoModalidade } from './tipo-modalidade.model';\r\nimport { Programa } from './programa.model';\r\nimport { Documento, HasDocumentos } from './documento.model';\r\nimport { Entidade } from './entidade.model';\r\nimport { AdesaoUsuario } from './adesao-usuario.model';\r\nimport { AdesaoUnidade } from './adesao-unidade.model';\r\n\r\nexport type Status = \"SOLICITADO\" | \"HOMOLOGADO\" | \"CANCELADO\";\r\n\r\nexport class Adesao extends Base implements HasDocumentos{\r\n    public tipo_modalidade?: TipoModalidade;\r\n    public unidades?: AdesaoUnidade[];\r\n    public usuarios?: AdesaoUsuario[];\r\n    public programa?: Programa;\r\n    public entidade?: Entidade;\r\n    public documento?: Documento;\r\n\r\n\r\n    public status: Status = \"SOLICITADO\"; //tempo_total menos os afastamentos\r\n    public data_inicio_vigencia: Date = new Date(); //Inicio do plano\r\n    public data_fim_vigencia: Date = new Date(); //Fim do plano\r\n    public data_inicio: Date = new Date(); /* Data de início */\r\n    public data_fim: Date | null = null; /* Data do fim */\r\n    public programa_id: string = \"\";\r\n    public usuario_id: string = \"\";\r\n    public unidade_id: string = \"\";\r\n    public entidade_id: string = \"\";\r\n    public tipo_modalidade_id: string = \"\";\r\n    public documento_id: string | null = null;\r\n    public documentos: Documento[] = []; /*TCR*/\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}\r\n","import { Base } from './base.model';\r\nimport { Unidade } from './unidade.model';\r\n\r\nimport { Adesao } from './adesao.model';\r\n\r\n\r\nexport class AdesaoUnidade extends Base {\r\n    public adesao?: Adesao;\r\n    public unidade?: Unidade;\r\n\r\n    public unidade_id: string = \"\";\r\n    public programa_adesao_id: string = \"\";\r\n    \r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { PageListBase } from \"../../../base/page-list-base\";\r\nimport { GridComponent } from \"../../../../components/grid/grid.component\";\r\nimport { FullRoute } from \"../../../../services/navigate.service\";\r\nimport { UnidadeDaoService } from \"../../../../dao/unidade-dao.service\";\r\nimport { DocumentoDaoService } from \"../../../../dao/documento-dao-service\";\r\nimport { ProgramaDaoService } from \"../../../../dao/programa-dao.service\";\r\nimport { UsuarioDaoService } from \"../../../../dao/usuario-dao.service\";\r\nimport { ListenerAllPagesService } from \"../../../../listeners/listener-all-pages.service\";\r\nimport { TipoModalidadeDaoService } from \"../../../../dao/tipo-modalidade-dao.service\";\r\nimport { LookupItem } from \"../../../../services/lookup.service\";\r\nimport { AbstractControl, FormGroup } from \"@angular/forms\";\r\nimport { IIndexable } from \"../../../../models/base.model\";\r\nimport { ToolbarButton } from \"../../../../components/toolbar/toolbar.component\";\r\nimport { Adesao } from \"../../../../models/adesao.model\";\r\nimport { AdesaoDaoService } from \"../../../../dao/adesao-dao.service\";\r\nimport { AdesaoService } from '../adesao.service';\r\n\r\n@Component({\r\n  selector: 'app-adesao-list',\r\n  templateUrl: './adesao-list.component.html',\r\n  styleUrls: ['./adesao-list.component.scss']\r\n})\r\nexport class AdesaoListComponent extends PageListBase<Adesao, AdesaoDaoService> {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n\r\n  public static selectRoute?: FullRoute = { route: [\"gestao\", \"adesao\"] };\r\n  public unidadeDao: UnidadeDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public adesaoService: AdesaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n  public multiselectAllFields: string[] = [\"tipo_modalidade_id\", \"usuario_id\", \"unidade_id\", \"documento_id\"];\r\n  public SITUACAO_FILTRO: LookupItem[] = [\r\n    { key: \"SOLICITADO\", value: \"Solicitado\" },\r\n    { key: \"HOMOLOGADO\", value: \"Homologado\" },\r\n    { key: \"CANCELADO\", value: \"Cancelado\" }\r\n  ];\r\n  constructor(public injector: Injector) {\r\n    super(injector, Adesao, AdesaoDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.adesaoService = injector.get<AdesaoService>(AdesaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    /* Inicializações */\r\n    this.title = this.lex.noun(\"adesao\", true);\r\n    this.code = \"MOD_ADES\";\r\n    this.filter = this.fh.FormBuilder({\r\n      usuario_id: { default: null },\r\n      unidade_id: { default: null },\r\n      tipo_modalidade_id: { default: null },\r\n      data_filtro: { default: null },\r\n      data_filtro_inicio: { default: new Date() },\r\n      data_filtro_fim: { default: new Date() }\r\n    }, this.cdRef, this.filterValidate);\r\n    this.join = [\"unidade.entidade\", \"usuarios.usuario:id,nome,url,apelido\", \"unidades.unidade:id,nome,sigla\", \"programa\", \"documento.assinaturas\", \"tipo_modalidade\"];\r\n    // Testa se o usuário possui permissão para exibir dados do plano de trabalho\r\n    if (this.auth.hasPermissionTo(\"MOD_ADES_CONS\")) {\r\n      this.options.push({\r\n        icon: \"bi bi-info-circle\",\r\n        label: \"Informações\",\r\n        onClick: this.consult.bind(this)\r\n      });\r\n    }\r\n    // Testa se o usuário possui permissão para excluir o plano de trabalho\r\n    if (this.auth.hasPermissionTo(\"MOD_ADES_EXCL\")) {\r\n      this.options.push({\r\n        icon: \"bi bi-trash\",\r\n        label: \"Cancelar\",\r\n        onClick: this.cancel.bind(this)\r\n      });\r\n    }\r\n    this.options.push({\r\n      label: \"Termo\",\r\n      icon: \"bi bi-file-earmark-check\",\r\n      onClick: ((row: Adesao) => this.go.navigate({ route: ['uteis', 'documentos', 'TCR', row.id, 'new' ] }, { modalClose: (modalResult) => console.log(modalResult?.conteudo), metadata: this.adesaoService.metadados(row) })).bind(this)\r\n    });\r\n  }\r\n\r\n  public filterValidate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n\r\n    if (controlName == \"data_filtro_inicio\" && control.value > this.filter?.controls.data_filtro_fim.value) {\r\n      result = \"Maior que fim\";\r\n    } else if (controlName == \"data_filtro_fim\" && control.value < this.filter?.controls.data_filtro_inicio.value) {\r\n      result = \"Menor que início\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public filterClear(filter: FormGroup) {\r\n    filter.controls.usuario.setValue(\"\");\r\n    filter.controls.unidade_id.setValue(null);\r\n    filter.controls.tipo_modalidade_id.setValue(null);\r\n    filter.controls.data_filtro.setValue(null);\r\n    filter.controls.data_filtro_inicio.setValue(new Date());\r\n    filter.controls.data_filtro_fim.setValue(new Date());\r\n    super.filterClear(filter);\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let result: any[] = [];\r\n    let form: any = filter.value;\r\n    if (form.tipo_modalidade_id?.length) {\r\n      result.push([\"tipo_modalidade_id\", \"==\", form.tipo_modalidade_id]);\r\n    }\r\n    if (form.data_filtro) {\r\n      result.push([\"data_filtro\", \"==\", form.data_filtro]);\r\n      result.push([\"data_filtro_inicio\", \"==\", form.data_filtro_inicio]);\r\n      result.push([\"data_filtro_fim\", \"==\", form.data_filtro_fim]);\r\n    }\r\n    if (form.usuario?.length) {\r\n      result.push([\"usuarios.usuario_id\", \"==\", form.usuario_id]);\r\n    }\r\n    if (form.unidade_id?.length) {\r\n      result.push([\"unidades.unidade_id\", \"==\", form.unidade_id]);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  public onAgruparChange(event: Event) {\r\n    const agrupar = this.filter!.controls.agrupar.value;\r\n    if ((agrupar && !this.groupBy?.length) || (!agrupar && this.groupBy?.length)) {\r\n      this.groupBy = agrupar ? [{ field: \"unidade.sigla\", label: \"Unidade\" }] : [];\r\n      this.grid!.reloadFilter();\r\n    }\r\n  }\r\n\r\n  public onProcessoClick(row: any) {\r\n    this.allPages.openDocumentoSei(row.documento.id_processo, row.documento.id_documento);\r\n  }\r\n\r\n  public needSign(adesao: Adesao): boolean {\r\n    return !!adesao.documento && this.adesaoService.needSign(adesao, adesao.documento);\r\n  }\r\n\r\n  public dynamicMultiselectMenu = (multiselected: IIndexable): ToolbarButton[] => {\r\n    let assinar = !!Object.keys(multiselected).length;\r\n    let menu = [];\r\n    Object.entries(multiselected).forEach(([key, value]) => {\r\n      if (!this.needSign(value)) assinar = false;\r\n    });\r\n    if (assinar) menu.push({ label: \"Assinar\", icon: \"bi bi-pen\", onClick: this.assinar.bind(this) });\r\n    return menu;\r\n  }\r\n\r\n  public afterAdd = (modalResult: any) => {\r\n    this.dialog.confirm(\"Gerar TCR\", \"Deseja gerar o Termo de Ciência e Responsabilidade?\").then(confirm => {\r\n      if(confirm && typeof modalResult == \"string\" && modalResult.length) {\r\n        const adesao = this.grid?.items.find(x => x.id == modalResult) as Adesao;\r\n        this.go.navigate({ route: ['uteis', 'documentos', 'TCR', modalResult, 'new' ] }, { modalClose: (modalResult) => console.log(modalResult?.conteudo), metadata: this.adesaoService.metadados(adesao) })\r\n      } \r\n    });\r\n  }\r\n\r\n  public assinar() {\r\n    if (!this.grid!.multiselectedCount) {\r\n      this.dialog.alert(\"Selecione\", \"Nenhum plano seleciono\");\r\n    } else {\r\n      this.dialog.confirm(\"Assinar\", \"Deseja realmente assinar \" + this.grid!.multiselectedCount + \" documento\" + (this.grid!.multiselectedCount > 1 ? \"s\" : \"\") + \"?\").then(response => {\r\n        if (response) {\r\n          this.loading = true;\r\n          this.documentoDao.assinar(Object.keys(this.grid!.multiselected)).then(response => {\r\n            if (response?.length) {\r\n              this.dialog.alert(\"Assinados\", response.length > 1 ? \"Foram assinados \" + response.length + \" documentos!\" : \"Documento assinado com sucesso!\");\r\n              this.refresh();\r\n            }\r\n          }).finally(() => this.loading = false);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n","<!--<h3 *ngIf=\"!isModal\" class=\"my-2\">{{title}}</h3>-->\r\n<grid multiselect [dao]=\"dao\" [add]=\"add\" [title]=\"isModal ? '' : title\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [selectable]=\"selectable\" (select)=\"onSelect($event)\" [dynamicMultiselectMenu]=\"dynamicMultiselectMenu.bind(this)\" [multiselectAllFields]=\"multiselectAllFields\"\r\n    [hasAdd]=\"auth.hasPermissionTo('MOD_ADES_INCL')\" \r\n    [hasEdit]=\"auth.hasPermissionTo('MOD_ADES_EDT')\">\r\n    <toolbar *ngIf=\"!selectable\">\r\n    </toolbar>\r\n    <filter [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && filterCollapsed\">\r\n        <div class=\"row\">\r\n            <input-search [size]=\"6\" label=\"Usuário\" controlName=\"usuario_id\" [control]=\"filter!.controls.usuario_id\" [dao]=\"usuarioDao\" [selectRoute]=\"{route: ['configuracoes', 'usuario']}\"></input-search>\r\n            <input-search [size]=\"6\" label=\"Unidade\" controlName=\"unidade_id\" [control]=\"filter!.controls.unidade_id\" [dao]=\"unidadeDao\" [selectRoute]=\"{route: ['configuracoes', 'unidade']}\"></input-search>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-search [size]=\"6\" label=\"Tipo de modalidade\" controlName=\"tipo_modalidade_id\" [control]=\"filter!.controls.tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\" [selectRoute]=\"{route: ['cadastros', 'tipo-modalidade']}\"></input-search>\r\n            <input-select [size]=\"2\" label=\"Data\" itemTodos=\"- Nenhum -\" [valueTodos]=\"null\" controlName=\"data_filtro\" [control]=\"filter!.controls.data_filtro\" [items]=\"SITUACAO_FILTRO\"></input-select>\r\n            <input-datetime [size]=\"2\" date [disabled]=\"filter!.controls.data_filtro.value == null ? 'true' : undefined\" label=\"Início\" controlName=\"data_filtro_inicio\" [control]=\"filter!.controls.data_filtro_inicio\" labelInfo=\"Data início do período\"></input-datetime>\r\n            <input-datetime [size]=\"2\" date [disabled]=\"filter!.controls.data_filtro.value == null ? 'true' : undefined\" label=\"Fim\" controlName=\"data_filtro_fim\" [control]=\"filter!.controls.data_filtro_fim\" labelInfo=\"Data fim do período\"></input-datetime>\r\n        </div>\r\n    </filter>\r\n    <columns>\r\n        <column [titleTemplate]=\"titleNumero\" field=\"numero\" [minWidth]=\"50\">\r\n            <ng-template let-header=\"header\" #titleNumero>\r\n                <order by=\"numero\" [header]=\"header\">#ID</order>\r\n            </ng-template>\r\n        </column>\r\n        <!--column [titleTemplate]=\"titleUsuario\" [template]=\"columnUsuario\">\r\n            <ng-template let-header=\"header\" #titleUsuario>\r\n                <order by=\"usuario.nome\" [header]=\"header\">Usuário</order>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnUsuario>\r\n                <span> {{row.usuario?.nome || \"\"}}</span>\r\n            </ng-template>\r\n        </column//-->\r\n        <column title=\"Status\" [template]=\"columnStatus\">\r\n            <ng-template let-row=\"row\" #columnStatus>\r\n                <span class=\"text-wrap\">\r\n                    <badge [class]=\"lookup.getColor(lookup.ADESAO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.ADESAO_STATUS, row.status)\"></badge>\r\n                    <badge *ngIf=\"row.fase\" [color]=\"row.fase.cor\" [label]=\"row.fase.nome\"></badge>\r\n                </span>\r\n            </ng-template>\r\n        </column>\r\n        <!--column title=\"Programa/Unidade\" [template]=\"columnProgramaUnidade\">\r\n            <ng-template let-row=\"row\" #columnProgramaUnidade>\r\n                <span *ngIf=\"row.programa\" class=\"badge bg-light text-dark\">\r\n                    <i class=\"fas fa-university\"></i>\r\n                    {{row.programa?.nome}}\r\n                </span>\r\n                <span *ngIf=\"row.unidade\" class=\"badge bg-light text-dark\">\r\n                    <i class=\"bi bi-briefcase\"></i>\r\n                    {{row.unidade.sigla}}\r\n                </span>\r\n            </ng-template>\r\n        </column//-->\r\n        <column title=\"Modalidade\" [template]=\"columnModalidade\">\r\n            <ng-template let-row=\"row\" #columnModalidade>\r\n                <span> {{row.tipo_modalidade?.nome || \"\"}}</span>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Usuários\" [template]=\"columnUsuario\">\r\n            <ng-template let-row=\"row\" #columnUsuario>\r\n                <profile-picture *ngFor=\"let usuario of row.usuarios\" [url]=\"usuario.usuario?.url_foto\" [hint]=\"util.apelidoOuNome(usuario.usuario)\"></profile-picture>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Unidades\" [template]=\"columnUnidades\">\r\n            <ng-template let-row=\"row\" #columnUnidades>\r\n                <div class=\"text-nowrap\">\r\n                    <badge *ngFor=\"let unidade of row.unidades\" color=\"light\" icon=\"fa-unity fab\" [label]=\"unidade.unidade.sigla\"></badge>\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column [titleTemplate]=\"titleVigencia\" [template]=\"columnInicioVigencia\">\r\n            <ng-template let-header=\"header\" #titleVigencia>\r\n                Vigência de<br>\r\n                <order by=\"data_inicio_vigencia\" [header]=\"header\">Início</order> a\r\n                <order by=\"data_fim_vigencia\" [header]=\"header\">Fim</order>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #columnInicioVigencia>\r\n                <badge color=\"light\" icon=\"bi bi-box-arrow-right\" [label]=\"util.getDateTimeFormatted(row.data_inicio_vigencia)\" hint=\"Data de início\"></badge><br>\r\n                <badge color=\"light\" icon=\"bi bi-box-arrow-in-right\" [label]=\"util.getDateTimeFormatted(row.data_fim_vigencia)\" hint=\"Data de término\"></badge>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Termo\" [template]=\"documento\">\r\n            <ng-template let-row=\"row\" #documento>\r\n                <span *ngIf=\"row.documento?.numero_processo?.length\" class=\"badge bg-light text-dark\" [attr.role]=\"row.documento?.numero_processo?.length ? 'button' : undefined\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" (click)=\"onProcessoClick(row)\" [title]=\"allPages.getButtonTitle(row.documento?.numero_processo, row.documento?.numero_documento)\">\r\n                    <i [class]=\"'bi ' + (row.documento?.numero_processo?.length ? 'bi bi-folder-symlink' : 'bi bi-x-lg')\"></i>\r\n                    {{row.documento?.numero_processo?.length ? row.documento?.numero_processo : \"Não atribuído\"}}\r\n                    <small *ngIf=\"row.documento?.numero_documento?.length\"><br>Sei nº {{row.documento?.numero_documento}}</small>\r\n                </span>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\" [onEdit]=\"edit\" [options]=\"options\"></column>\r\n    </columns>\r\n    <report>\r\n        <column title=\"Numero\" [template]=\"reportNumero\"><ng-template  let-row=\"row\" #reportNumero>{{row.numero}}</ng-template></column>\r\n        <column title=\"Matricula usuário\" [template]=\"reportMatricula\"><ng-template  let-row=\"row\" #reportMatricula>{{row.usuario?.matricula || \"\"}}</ng-template></column>\r\n        <column title=\"Programa\" [template]=\"reportPrograma\"><ng-template  let-row=\"row\" #reportPrograma>{{row.programa?.nome || \"\"}}</ng-template></column>\r\n        <column title=\"Unidade\" [template]=\"reportUnidade\"><ng-template  let-row=\"row\" #reportUnidade>{{row.unidade?.nome || \"\"}}</ng-template></column>\r\n        <column title=\"Modalidade\" [template]=\"reportModalidade\"><ng-template  let-row=\"row\" #reportModalidade>{{row.tipo_modalidade?.nome || \"\"}}</ng-template></column>\r\n        <column title=\"Início vigência\" [template]=\"reportInicioVigencia\"><ng-template  let-row=\"row\" #reportInicioVigencia>{{util.getDateTimeFormatted(row.data_inicio_vigencia)}}</ng-template></column>\r\n        <column title=\"Fim vigência\" [template]=\"reportFimVigencia\"><ng-template  let-row=\"row\" #reportFimVigencia>{{util.getDateTimeFormatted(row.data_fim_vigencia)}}</ng-template></column>\r\n        <column title=\"Termo de Adesão\" [template]=\"reportTermoAdesao\"><ng-template  let-row=\"row\" #reportTermoAdesao>{{row.documento?.numero_processo?.length ? row.documento?.numero_processo : \"Não atribuído\"}}</ng-template></column>\r\n    </report>\r\n    <pagination [rows]=\"rowsLimit\"></pagination>\r\n</grid>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {AuthGuard} from \"../../../guards/auth.guard\";\r\nimport {ConfigResolver} from \"../../../resolvies/config.resolver\";\r\nimport {AdesaoListComponent} from \"./adesao-list/adesao-list.component\";\r\nimport {AdesaoFormComponent} from \"./adesao-form/adesao-form.component\";\r\nimport {AdesaoFormTermoComponent} from \"./adesao-form-termo/adesao-form-termo.component\";\r\nimport { DocumentosComponent } from '../../uteis/documentos/documentos.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: AdesaoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Adesão\" } },\r\n  { path: 'new', component: AdesaoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão\", modal: true } },\r\n  { path: 'termo', component: AdesaoFormTermoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Termo de Ciência e Reponsabilidade\", modal: true } },\r\n  { path: ':id/edit', component: AdesaoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição\", modal: true } },\r\n  { path: ':id/consult', component: AdesaoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consultar\", modal: true } },\r\n  { path: ':id/termos', component: DocumentosComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, data: { title: \"Termos de Ciência e Reponsabilidade\", modal: true } }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AdesaoRoutingModule { }\r\n","import { Base } from './base.model';\r\nimport { Adesao } from './adesao.model';\r\nimport { Usuario } from './usuario.model';\r\n\r\n\r\nexport class AdesaoUsuario extends Base {\r\n    public adesao?: Adesao;\r\n    public usuario?: Usuario;\r\n\r\n    public usuario_id: string = \"\";\r\n    public programa_adesao_id: string = \"\";\r\n    \r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AdesaoRoutingModule } from './adesao-routing.module';\r\nimport { AdesaoListComponent } from './adesao-list/adesao-list.component';\r\nimport { AdesaoFormComponent } from './adesao-form/adesao-form.component';\r\nimport {ComponentsModule} from \"../../../components/components.module\";\r\nimport {ReactiveFormsModule} from \"@angular/forms\";\r\nimport {UteisModule} from \"../../uteis/uteis.module\";\r\nimport { AdesaoFormTermoComponent } from './adesao-form-termo/adesao-form-termo.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AdesaoListComponent,\r\n    AdesaoFormComponent,\r\n    AdesaoFormTermoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    ReactiveFormsModule,\r\n    UteisModule,\r\n    AdesaoRoutingModule\r\n  ]\r\n})\r\nexport class AdesaoModule { }\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { AdesaoDaoService } from 'src/app/dao/adesao-dao.service';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoDocumentoDaoService } from 'src/app/dao/tipo-documento-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { Adesao } from 'src/app/models/adesao.model';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { TipoDocumento } from 'src/app/models/tipo-documento.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NavigateResult } from 'src/app/services/navigate.service';\r\n\r\n@Component({\r\n  selector: 'app-adesao-form-termo',\r\n  templateUrl: './adesao-form-termo.component.html',\r\n  styleUrls: ['./adesao-form-termo.component.scss']\r\n})\r\n\r\nexport class AdesaoFormTermoComponent  extends PageFormBase<Adesao, AdesaoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('tipoDocumento', { static: false }) public tipoDocumento?: InputSearchComponent;\r\n  @ViewChild('tipo_modalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n  @ViewChild('termo', { static: false }) public termo?: AdesaoFormTermoComponent;\r\n  @ViewChild('entidade', { static: false }) public entidade?: InputSearchComponent;\r\n  processo: any;\r\n\r\n\r\n  public unidadeDao: UnidadeDaoService;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n  public tipoDocumentoDao: TipoDocumentoDaoService;\r\n  \r\n  constructor(public injector: Injector) {\r\n    super(injector, Adesao, AdesaoDaoService);\r\n    this.join = [\"unidade\", \"usuario\", \"programa\", \"tipo_modalidade\", \"documento\", \"documentos\"];\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.tipoDocumentoDao = injector.get<TipoDocumentoDaoService>(TipoDocumentoDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n\r\n    this.form = this.fh.FormBuilder({\r\n      data_inicio_vigencia: {default: new Date()},\r\n      data_fim_vigencia: {default: new Date()},\r\n      data_inicio: {default: \"\"},\r\n      data_fim: {default: \"\"},\r\n      programa_id: {default: \"\"},\r\n      usuario_id: {default: \"\"},\r\n      unidade_id: {default: \"\"},\r\n      documento_id: {default: \"\"},\r\n      documentos: {default: []},\r\n      tipo_documento_id: {default: \"\"},\r\n      numero_processo: {default: \"\"},\r\n      tipo_modalidade_id: {default: \"\"},\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == \"tipo_documento_id\" && !control?.value?.length && this.form?.controls?.numero_processo?.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    if(!this.tipoDocumento?.searchObj && form?.controls.tipo_documento_id.value?.length) {\r\n      return \"Aguarde o carregamento do tipo de documento\";\r\n    }\r\n    return undefined;\r\n  } \r\n\r\n  public onVinculadasChange(event: Event) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: Adesao, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    await Promise.all ([\r\n      //this.unidade!.loadSearch(entity.unidade || entity.unidade_id),\r\n      //this.usuario!.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.programa!.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade!.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    if(this.processo) {\r\n      formValue.id_processo = this.processo.id_processo;\r\n      formValue.numero_processo = this.processo.numero_processo;\r\n    }\r\n    formValue.data_inicio = this.auth.hora;\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getById(this.metadata.adesao.id, this.join))!;\r\n    this.processo = this.metadata?.processo;\r\n    await this.loadData(this.entity!, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<NavigateResult | undefined> {\r\n    return new Promise<NavigateResult | undefined>((resolve, reject) => {\r\n      //if(this.processo) {\r\n      resolve(new NavigateResult(Object.assign(this.form!.value, {\r\n        // termo: this.termo,\r\n        // atividades_termo_adesao: this.termo!.atividades.map(x => this.util.removeAcentos(x.nome.toLowerCase())),\r\n        // codigo_tipo_documento: (this.tipoDocumento?.searchObj as TipoDocumento)?.codigo\r\n      })));\r\n      /*} else {\r\n        const documento = Object.assign(new Documento(), {\r\n          especie: \"TERMO_ADESAO\",\r\n          conteudo: this.termo!.conteudo,\r\n          plano_id: this.entity!.id,\r\n          status: \"GERADO\"\r\n        });\r\n        this.documentoDao.save(documento).then(doc => resolve(undefined)).catch(reject);\r\n      }*/\r\n    });\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria?.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public titleEdit = (entity: Adesao): string => {\r\n    return \"Editando \" ;//+ (entity?.nome || \"\");\r\n  }\r\n\r\n}\r\n","\r\n<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [title]=\"isModal ? '' : title\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n        <div class=\"row\">\r\n            <input-search #programa [size]=\"4\" disabled label=\"Programa\" icon=\"bi bi-layout-text-window-reverse\" controlName=\"programa_id\" [control]=\"form!.controls.programa_id\" [dao]=\"programaDao\"></input-search>\r\n            <input-datetime [size]=\"4\" disabled label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio_vigencia\" [control]=\"form!.controls.data_inicio_vigencia\" labelInfo=\"Início da Vigência do Programa\"></input-datetime>\r\n            <input-datetime [size]=\"4\" disabled label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim_vigencia\" [control]=\"form!.controls.data_fim_vigencia\" labelInfo=\"Final da Vigência do Programa\"></input-datetime>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-multiselect label=\"Usuários\" controlName=\"usuarios\" [size]=\"6\">\r\n            <input-text label=\"Usuário\" icon=\"far fa-edit\" controlName=\"usuario_id\"></input-text>\r\n          </input-multiselect>\r\n          <input-multiselect label=\"Unidades\" controlName=\"unidades\" [size]=\"6\">\r\n            <input-text label=\"Usuário\" icon=\"far fa-edit\" controlName=\"unidade_id\"></input-text>\r\n          </input-multiselect>\r\n        </div>\r\n    <separator title=\"Pré-visualização do termo de ciêcia e responsabilidade\" collapse [collapsed]=\"true\">\r\n        <input-editor></input-editor>\r\n    </separator>\r\n</editable-form>\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { PageFormBase } from \"../../../base/page-form-base\";\r\nimport { EditableFormComponent } from \"../../../../components/editable-form/editable-form.component\";\r\nimport { GridComponent } from \"../../../../components/grid/grid.component\";\r\nimport { TabsComponent } from \"../../../../components/tabs/tabs.component\";\r\nimport { InputSearchComponent } from \"../../../../components/input/input-search/input-search.component\";\r\nimport { AbstractControl, FormGroup } from \"@angular/forms\";\r\nimport { UnidadeDaoService } from \"../../../../dao/unidade-dao.service\";\r\nimport { ProgramaDaoService } from \"../../../../dao/programa-dao.service\";\r\nimport { UsuarioDaoService } from \"../../../../dao/usuario-dao.service\";\r\nimport { AtividadeDaoService } from \"../../../../dao/atividade-dao.service\";\r\nimport { DocumentoDaoService } from \"../../../../dao/documento-dao-service\";\r\nimport { ListenerAllPagesService } from \"../../../../listeners/listener-all-pages.service\";\r\nimport { CalendarService, Efemerides } from \"../../../../services/calendar.service\";\r\nimport { TipoModalidadeDaoService } from \"../../../../dao/tipo-modalidade-dao.service\";\r\nimport { SelectItem } from \"../../../../components/input/input-base\";\r\nimport { TipoModalidade } from \"../../../../models/tipo-modalidade.model\";\r\nimport { Unidade } from \"../../../../models/unidade.model\";\r\nimport { Usuario } from \"../../../../models/usuario.model\";\r\nimport { IIndexable } from \"../../../../models/base.model\";\r\nimport { ToolbarButton } from \"../../../../components/toolbar/toolbar.component\";\r\nimport { Documento } from \"../../../../models/documento.model\";\r\nimport { AdesaoDaoService } from \"../../../../dao/adesao-dao.service\";\r\nimport { Adesao } from \"../../../../models/adesao.model\";\r\nimport { EntidadeDaoService } from \"../../../../dao/entidade-dao.service\";\r\nimport { LookupItem } from \"../../../../services/lookup.service\";\r\nimport { AdesaoUsuario } from 'src/app/models/adesao-usuario.model';\r\nimport { AdesaoUnidade } from 'src/app/models/adesao-unidade.model';\r\n@Component({\r\n  selector: 'app-adesao-form',\r\n  templateUrl: './adesao-form.component.html',\r\n  styleUrls: ['./adesao-form.component.scss']\r\n})\r\nexport class AdesaoFormComponent extends PageFormBase<Adesao, AdesaoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridDocumentos', { static: false }) public gridDocumentos?: GridComponent;\r\n  @ViewChild('tabs', { static: false }) public tabs?: TabsComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('entidade', { static: false }) public entidade?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('tipo_modalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n\r\n  public unidadeDao: UnidadeDaoService;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public atividadeDao: AtividadeDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public calendar: CalendarService;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n  public listaUsuarios: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Adesao, AdesaoDaoService);\r\n    this.join = [\"unidade.entidade\", \"usuarios.usuario:id,nome\", \"unidades.unidade:id,nome\", \"programa\", \"tipo_modalidade\", \"documento\", \"documentos.assinaturas.usuario:id,nome,apelido\", \"entidade\"];\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.atividadeDao = injector.get<AtividadeDaoService>(AtividadeDaoService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      data_inicio_vigencia: { default: new Date() },\r\n      data_fim_vigencia: { default: new Date() },\r\n      data_inicio: { default: \"\" },\r\n      data_fim: { default: \"\" },\r\n      status: { default: \"SOLICITADO\" },\r\n      programa_id: { default: \"\" },\r\n      usuarios_id: { default: \"\" },\r\n      unidades_id: { default: \"\" },\r\n      entidade_id: { default: \"\" },\r\n      tipo_modalidade_id: { default: \"\" },\r\n      documentos: { default: [] },\r\n      usuarios_list: { default: [] },\r\n      unidades_list: { default: [] },\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public ngOnInit() {\r\n    super.ngOnInit();\r\n    const segment = (this.url ? this.url[this.url.length - 1]?.path : \"\") || \"\";\r\n    this.action = [\"termos\"].includes(segment) ? segment : this.action;\r\n  }\r\n\r\n  public get isTermos(): boolean {\r\n    return this.action == \"termos\";\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n\r\n    // TODO: Implementar validações\r\n\r\n    // if(['usuario_id', 'unidade_id', 'programa_id', 'tipo_modalidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n    //   result = \"Obrigatório\";\r\n    // } else if(['carga_horaria'].indexOf(controlName) >= 0 && !control.value) {\r\n    //   result = \"Valor não pode ser zero.\";\r\n    // } else if(['data_inicio_vigencia', 'data_fim_vigencia'].includes(controlName)) {\r\n    //   if(!this.util.isDataValid(control.value)) {\r\n    //     result = \"Inválido\";\r\n    //   } else if(!this.programa?.searchObj) {\r\n    //     result = \"Selecionar programa\";\r\n    //   } else if(controlName == 'data_inicio_vigencia' && (control.value as Date).getTime() < (this.programa!.searchObj! as Programa).data_inicio_vigencia.getTime()) {\r\n    //     result = \"Menor que programa\";\r\n    //   } else if(controlName == 'data_fim_vigencia' && (control.value as Date).getTime() > (this.programa!.searchObj! as Programa).data_fim_vigencia.getTime()) {\r\n    //     result = \"Maior que programa\";\r\n    //   }\r\n    // }\r\n\r\n    return result;\r\n  }\r\n\r\n  public onProgramaSelect(selected: SelectItem) {\r\n    this.form?.controls.data_inicio_vigencia.updateValueAndValidity();\r\n    this.form?.controls.data_fim_vigencia.updateValueAndValidity();\r\n  }\r\n\r\n  public onTipoModalidadeSelect(selected: SelectItem) {\r\n    /*const tipoModalidade = this.tipoModalidade?.searchObj as TipoModalidade;\r\n    if (tipoModalidade) this.form?.controls.ganho_produtividade.setValue(tipoModalidade.ganho_produtividade);*/\r\n  }\r\n\r\n  public onUsuarioSelect(selected: SelectItem) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onDataInicioChange(event: Event) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onDataFimChange(event: Event) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onUnidadeSelect(selected: SelectItem) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onEntidadeSelect(selected: SelectItem) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: Adesao, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    await Promise.all([\r\n      this.programa?.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade?.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    form.patchValue(this.util.fillForm(formValue, entity));\r\n    form.controls.usuarios_list.setValue((entity.usuarios || []).map(x => Object.assign({}, {\r\n      key: x.id, /* id do AdesaoUsuario e não do Usuario */\r\n      data: x.usuario,\r\n      value: x.usuario?.id || \"Desconhecido\"\r\n    })));\r\n    form.controls.unidades_list.setValue((entity.unidades || []).map(x => Object.assign({}, {\r\n      key: x.id, /* id do AdesaoUnidade e não da Unidade */\r\n      data: x.unidade,\r\n      value: x.unidade?.id || \"Desconhecido\"\r\n    })));\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    if (this.isTermos) {\r\n      this.entity = (await this.dao!.getById(this.urlParams!.get(\"id\")!, this.join))!;\r\n    } else {\r\n      this.entity = new Adesao();\r\n      this.entity.entidade = this.auth.unidade!.entidade;\r\n      this.entity.usuario_id = this.auth.usuario!.id; /* Apenas para registrar quem incluiu a adesão */\r\n      this.entity.unidade_id = this.auth.unidade!.id; /* Lotação do usuário que registrou a desão */\r\n      this.entity.entidade_id = this.auth.unidade!.entidade_id!;\r\n    }\r\n    this.loadData(this.entity, this.form!);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<Adesao> {\r\n    return new Promise<Adesao>((resolve, reject) => {\r\n      let adesao = this.util.fill(new Adesao(), this.entity!);\r\n      adesao = this.util.fillForm(adesao, this.form!.value);\r\n      adesao.usuarios = (this.form?.controls.usuarios_list.value || []).map((x: LookupItem) => new AdesaoUsuario({id: x.key, usuario_id: x.data.usuario_id}));\r\n      adesao.unidades = (this.form?.controls.unidades_list.value || []).map((x: LookupItem) => new AdesaoUnidade({id: x.key, unidade_id: x.data.unidade_id}));\r\n      resolve(adesao);\r\n    });\r\n  }\r\n\r\n  public titleEdit = (entity: Adesao): string => {\r\n    return \"Editando \";//+ (entity?.nome || \"\");\r\n  }\r\n\r\n  /*public documentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let documento: Documento = row as Documento;\r\n\r\n    if (this.isTermos && this.needSign(documento)) {\r\n      result.push({ hint: \"Assinar\", icon: \"bi bi-pen\", onClick: this.signDocumento.bind(this) });\r\n    }\r\n    result.push({ hint: \"Preview\", icon: \"bi bi-zoom-in\", onClick: ((documento: Documento) => { this.dialog.html({ title: \"Termo de ciência e responsabilidade\", modalWidth: 1000 }, documento.conteudo || \"\"); }).bind(this) });\r\n\r\n    return result;\r\n  }\r\n\r\n  public needSign(documento: Documento): boolean {\r\n    const tipoModalidade = this.entity!.tipo_modalidade!; //(this.tipoModalidade?.searchObj as TipoModalidade);\r\n//    const usuario = this.entity!.usuario!; // (this.usuario?.searchObj as Usuario);\r\n//    const unidade = this.entity!.unidade!; // (this.unidade?.searchObj as Unidade);\r\n    const entidade = unidade?.entidade;\r\n    const alredySigned = !!documento.assinaturas.find(x => x.usuario_id == this.auth.usuario!.id);\r\n    let ids: string[] = [];\r\n    if (tipoModalidade?.exige_assinatura && usuario) ids.push(usuario.id);\r\n    if (tipoModalidade?.exige_assinatura_gestor_unidade && unidade) ids.push(unidade.gestor_id || \"\", unidade.gestor_substituto_id || \"\");\r\n    if (tipoModalidade?.exige_assinatura_gestor_entidade && entidade) ids.push(entidade.gestor_id || \"\", entidade.gestor_substituto_id || \"\");\r\n    return !alredySigned && tipoModalidade && ids.includes(this.auth.usuario!.id);\r\n  }\r\n\r\n  public signDocumento(documento: Documento) {\r\n    this.dialog.confirm(\"Assinar\", \"Deseja realmente assinar o documento?\").then(response => {\r\n      if (response) {\r\n        this.loading = true;\r\n        this.documentoDao.assinar([documento.id]).then(response => {\r\n          if (response?.length) {\r\n            let documentos = (this.form!.controls.documentos.value || []) as Documento[];\r\n            let found = documentos.find(x => x.id == documento?.id);\r\n            if (found) found.assinaturas = response[0].assinaturas;\r\n            this.form!.controls.documentos.setValue(documentos);\r\n            this.gridDocumentos?.reset();\r\n          }\r\n        }).finally(() => this.loading = false);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  public async addDocumento() {\r\n    const documento = new Documento();\r\n    documento.id = this.dao!.generateUuid();\r\n    documento.plano_id = this.entity!.id;\r\n    documento._status = \"ADD\";\r\n    this.go.navigate({ route: ['gestao', 'adesao', 'termo'] }, {\r\n      metadata: { documento: documento, adesao: this.entity }, modalClose: (modalResult) => {\r\n        if (modalResult) {\r\n          (async () => {\r\n            let documentos = (this.form!.controls.documentos.value || []) as Documento[];\r\n            if (this.isTermos) {\r\n              this.clearErros();\r\n              this.dialog.showSppinerOverlay(\"Salvando dados do formulário\");\r\n              try {\r\n                modalResult = await this.documentoDao.save(Object.assign(new Documento(), {\r\n                  especie: \"TCR\",\r\n                  conteudo: modalResult?.termo,\r\n                  metadados: { atividades_termo_adesao: modalResult.atividades_termo_adesao },\r\n                  programa_adesao_id: this.entity!.id,\r\n                  status: \"GERADO\"\r\n                }), [\"assinaturas.usuario:id,nome,apelido\"]);\r\n              } catch (error: any) {\r\n                this.error(error.message ? error.message : error);\r\n                modalResult = undefined;\r\n              } finally {\r\n                this.dialog.closeSppinerOverlay();\r\n              }\r\n            }\r\n            if (modalResult) {\r\n              documentos.push(modalResult);\r\n              this.form!.controls.documentos.setValue(documentos);\r\n              this.dialog.showSppinerOverlay(\"Recarregando dados do plano\");\r\n              await this.initializeData(this.form!);\r\n              this.dialog.closeSppinerOverlay();\r\n            }\r\n            this.cdRef.detectChanges();\r\n          })();\r\n        }\r\n      }\r\n    });\r\n    return undefined;\r\n  }\r\n\r\n  public isVigente(documento: Documento): boolean {\r\n    return this.form!.controls.documento_id.value == documento.id;\r\n  }\r\n\r\n  public onProcessoClick(row: any) {\r\n    this.allPages.openDocumentoSei(row.id_processo, row.id_documento);\r\n  }*/\r\n\r\n  public addUsuarioHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const key = this.dao!.generateUuid();\r\n    if (this.form!.controls.usuarios_id.value?.length && this.util.validateLookupItem(this.form!.controls.usuarios_list.value, key)) {\r\n      result = {\r\n        key: key,\r\n        data: this.usuario?.selectedItem?.entity,\r\n        value: (this.usuario?.selectedItem?.entity as Usuario).nome\r\n      };\r\n      this.form!.controls.usuarios_list.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public addUnidadeHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const key = this.dao!.generateUuid();\r\n    if (this.form!.controls.unidades_id.value?.length && this.util.validateLookupItem(this.form!.controls.unidades_list.value, key)) {\r\n      result = {\r\n        key: key,\r\n        data: this.unidade?.selectedItem?.entity,\r\n        value: (this.unidade?.selectedItem?.entity as Unidade).nome\r\n      };\r\n      this.form!.controls.unidades_list.setValue(\"\");\r\n    }\r\n    return result;\r\n  }\r\n}\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [noButtons]=\"isTermos ? 'true' : undefined\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n  <tabs #tabs display right [hidden]=\"isTermos ? 'true' : undefined\" [title]=\"!isModal ? title : ''\">\r\n    <tab *ngIf=\"!isTermos\" key=\"DADOS\" label=\"Dados\">\r\n      <div class=\"row\">\r\n        <input-search #programa [size]=\"4\" label=\"Programa\" icon=\"bi bi-layout-text-window-reverse\" controlName=\"programa_id\" [control]=\"form!.controls.programa_id\" [dao]=\"programaDao\" (select)=\"onProgramaSelect($event)\" [selectRoute]=\"{route: ['cadastros', 'programa']}\"></input-search>\r\n        <input-search #tipo_modalidade [size]=\"4\" label=\"Modalidade\" icon=\"bi bi-cast\" controlName=\"tipo_modalidade_id\" [control]=\"form!.controls.tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\" (select)=\"onTipoModalidadeSelect($event)\" [selectRoute]=\"{route: ['cadastros', 'tipo-modalidade']}\"></input-search>\r\n        <input-text #status [size]=\"4\" label=\"Status\" controlName=\"status\" [control]=\"form!.controls.status\" disabled></input-text>\r\n      </div>\r\n      <div class=\"row\">\r\n        <input-datetime [size]=\"6\" label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio_vigencia\" [control]=\"form!.controls.data_inicio_vigencia\" (change)=\"onDataInicioChange($event)\" labelInfo=\"Início da Vigência do Plano de Trabalho\"></input-datetime>\r\n        <input-datetime [size]=\"6\" label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim_vigencia\" [control]=\"form!.controls.data_fim_vigencia\" (change)=\"onDataFimChange($event)\" labelInfo=\"Final da Vigência do Plano de Trabalho\"></input-datetime>\r\n      </div>\r\n      <div class=\"row\">\r\n        <input-multiselect label=\"Usuários\" controlName=\"usuarios_list\" [size]=\"6\" [addItemHandle]=\"addUsuarioHandle.bind(this)\">\r\n          <input-search #usuario label=\"Usuário\" icon=\"far fa-edit\" controlName=\"usuarios_id\" [dao]=\"usuarioDao\" [join]=\"['afastamentos']\" (select)=\"onUsuarioSelect($event)\" [selectRoute]=\"{route: ['configuracoes', 'usuario']}\"></input-search>\r\n        </input-multiselect>\r\n        <input-multiselect label=\"Unidades\" controlName=\"unidades_list\" [size]=\"6\" [addItemHandle]=\"addUnidadeHandle.bind(this)\">\r\n          <input-search #unidade label=\"Unidade\" icon=\"far fa-edit\" controlName=\"unidades_id\" [dao]=\"unidadeDao\" [join]=\"['entidade']\" [dao]=\"unidadeDao\" (select)=\"onUnidadeSelect($event)\" [selectRoute]=\"{route: ['configuracoes', 'unidade']}\"></input-search>\r\n        </input-multiselect>\r\n      </div>\r\n    </tab>\r\n    <tab *ngIf=\"isTermos || !isNew\" key=\"TERMO\" label=\"Termo de Ciência e Responsabilidade\">\r\n      <top-alert *ngIf=\"!isTermos\" type=\"warning\" message=\"Para [INSERIR] ou [ASSINAR] termos escolha opção TCR o na tela de listagem\"></top-alert>\r\n      <div clss=\"row\">\r\n        <!--documentos [control]=\"form!.controls.documentos\" ></documentos//-->\r\n        <!--grid [control]=\"form!.controls.documentos\" #gridDocumentos [disabled]=\"undefined\" #documentos [hasEdit]=\"false\" [hasDelete]=\"false\" [hasAdd]=\"isTermos\" [add]=\"isTermos ? addDocumento.bind(this) : undefined\" editable>\r\n          <columns>\r\n            <column title=\"Data\" [template]=\"dataInicio\">\r\n              <ng-template let-row=\"row\" #dataInicio>\r\n                <span class=\"badge bg-light text-dark\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Data da inclusão\">\r\n                  <i class=\"bi bi-calendar-plus\"></i>\r\n                  {{util.getDateTimeFormatted(row.data_inicio)}}\r\n                </span>\r\n                <span *ngIf=\"row.data_fim\" class=\"badge bg-light text-dark\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Data substituição\">\r\n                  <i class=\"bi bi-calendar-x\"></i>\r\n                  {{util.getDateTimeFormatted(row.data_fim)}}\r\n                </span>\r\n              </ng-template>\r\n            </column>\r\n            <column title=\"Status\" [template]=\"vigente\">\r\n              <ng-template let-row=\"row\" #vigente>\r\n                <span [class]=\"lookup.getColor(lookup.DOCUMENTO_STATUS, row.status)\">\r\n                  <i [class]=\"lookup.getIcon(lookup.DOCUMENTO_STATUS, row.status)\"></i>\r\n                  {{lookup.getValue(lookup.DOCUMENTO_STATUS, row.status)}}\r\n                </span>\r\n                <span *ngIf=\"isVigente(row)\" class=\"badge rounded-pill bg-info text-dark\">\r\n                  <i class=\"bi bi-clipboard-check\"></i>\r\n                  Vigente\r\n                </span>\r\n                <div class=\"d-block\">\r\n                  <span *ngFor=\"let assinatura of row.assinaturas\" class=\"badge rounded-pill bg-primary\">\r\n                    <i class=\"bi bi-pen\"></i>\r\n                    {{util.apelidoOuNome(assinatura.usuario)}}\r\n                  </span>\r\n                </div>\r\n              </ng-template>\r\n            </column>\r\n            <column type=\"options\" [dynamicButtons]=\"documentoDynamicButtons.bind(this)\"></column>\r\n          </columns>\r\n        </grid//-->\r\n      </div>\r\n    </tab>\r\n  </tabs>\r\n</editable-form>","import { Injectable } from '@angular/core';\r\nimport { TemplateDataset } from 'src/app/components/input/input-editor/input-editor.component';\r\nimport { AdesaoDaoService } from 'src/app/dao/adesao-dao.service';\r\nimport { Adesao } from 'src/app/models/adesao.model';\r\nimport { Documento, HasDocumentos } from 'src/app/models/documento.model';\r\nimport { Template } from 'src/app/models/template.model';\r\nimport { TipoModalidade } from 'src/app/models/tipo-modalidade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AdesaoService {\r\n  \r\n  constructor(\r\n    public auth: AuthService,\r\n    public adesaoDao: AdesaoDaoService\r\n  ) { }\r\n\r\n  public metadados(adesao: Adesao) {\r\n    return {\r\n      needSign: this.needSign.bind(this),\r\n      extraTags: this.extraTags.bind(this),\r\n      especie: \"TCR\",\r\n      dataset: this.adesaoDao.dataset(),\r\n      datasource: this.adesaoDao.datasource(adesao),\r\n      template: this.auth.unidade?.entidade?.template_adesao,\r\n      template_id: this.auth.unidade?.entidade?.template_adesao_id\r\n    };\r\n  }\r\n\r\n  public needSign(adesao: Adesao, documento: Documento): boolean {\r\n    const tipoModalidade = adesao.tipo_modalidade; \r\n    const entidade = this.auth.unidade?.entidade;\r\n    const alredySigned = !!documento.assinaturas.find(x => x.usuario_id == this.auth.usuario!.id);\r\n    let ids: string[] = [];\r\n    if (tipoModalidade?.exige_assinatura) ids.push(...adesao.usuarios!.map(x => x.id));\r\n    if (tipoModalidade?.exige_assinatura_gestor_unidade) ids.push(...adesao.unidades!.map(x => x.unidade?.gestor_id || \"\"), ...adesao.unidades!.map(x => x.unidade?.gestor_substituto_id || \"\"));\r\n    if (tipoModalidade?.exige_assinatura_gestor_entidade && entidade) ids.push(entidade.gestor_id || \"\", entidade.gestor_substituto_id || \"\");\r\n    return !alredySigned && !!tipoModalidade && ids.includes(this.auth.usuario!.id);\r\n  }\r\n\r\n  public extraTags(adesao: Adesao, documento: Documento, metadado: any): LookupItem[] {\r\n    let tags: LookupItem[] = [];\r\n    if(adesao.documento_id == documento.id) tags.push({ key: documento.id, value: \"Vigente\", icon: \"bi bi-check-all\", color: \"primary\" }) \r\n    if(JSON.stringify(metadado.tags) != JSON.stringify(tags)) metadado.tags = tags;\r\n    return metadado.tags; \r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}