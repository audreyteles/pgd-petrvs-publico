{"version":3,"sources":["./src/app/models/plano-trabalho-entrega.model.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho.module.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form-termo/plano-trabalho-form-termo.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-form/plano-trabalho-form.component.html","./src/app/models/plano-trabalho-atividade.model.ts","./src/app/dao/plano-trabalho-entrega-dao.service.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.ts","./src/app/modules/gestao/plano-trabalho/plano-trabalho-list-entrega/plano-trabalho-list-entrega.component.html","./src/app/modules/gestao/plano-trabalho/plano-trabalho-routing.module.ts"],"names":[],"mappings":"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","file":"modules-gestao-plano-trabalho-plano-trabalho-module.js","sourcesContent":["import { Base } from './base.model';\r\nimport { Entrega } from './entrega.model';\r\nimport { PlanoEntregaEntrega } from './plano-entrega-entrega.model';\r\nimport { PlanoTrabalho } from './plano-trabalho.model';\r\n\r\nexport class PlanoTrabalhoEntrega extends Base {\r\n    public plano_trabalho?: PlanoTrabalho;\r\n    public entrega?: Entrega;\r\n    public plano_entrega_entrega?: PlanoEntregaEntrega;\r\n\r\n    public descricao: string = \"\";\r\n    public forca_trabalho: string = \"1\";\r\n\r\n    public plano_trabalho_id: string = \"\";\r\n    public entrega_id: string | null = null;\r\n    public plano_entrega_entrega_id: string | null = null;\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PlanoTrabalhoRoutingModule } from './plano-trabalho-routing.module';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PlanoTrabalhoFormComponent,\r\n    PlanoTrabalhoListComponent,\r\n    PlanoTrabalhoListEntregaComponent,\r\n    PlanoTrabalhoFormTermoComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    ReactiveFormsModule,\r\n    PlanoTrabalhoRoutingModule,\r\n    UteisModule\r\n  ]\r\n})\r\nexport class PlanoTrabalhoModule { }\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoDocumentoDaoService } from 'src/app/dao/tipo-documento-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { SeiKeys } from 'src/app/listeners/procedimento-trabalhar/procedimento-trabalhar.component';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { TipoDocumento } from 'src/app/models/tipo-documento.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NavigateResult } from 'src/app/services/navigate.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form-termo',\r\n  templateUrl: './plano-trabalho-form-termo.component.html',\r\n  styleUrls: ['./plano-trabalho-form-termo.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormTermoComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @ViewChild('programa', { static: false }) public programa?: InputSearchComponent;\r\n  @ViewChild('tipoDocumento', { static: false }) public tipoDocumento?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n\r\n  public unidadeDao: UnidadeDaoService;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public tipoDocumentoDao: TipoDocumentoDaoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public processo?: SeiKeys;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\"unidade\", \"usuario\", \"programa.template_tcr\", \"tipo_modalidade\", \"documento\", \"documentos\", \"atividades.atividade\"];\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.tipoDocumentoDao = injector.get<TipoDocumentoDaoService>(TipoDocumentoDaoService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: {default: \"\"},\r\n      tempo_total: {default: \"\"},\r\n      tempo_proporcional: {default: \"\"},\r\n      data_inicio_vigencia: {default: new Date()},\r\n      data_fim_vigencia: {default: new Date()},\r\n      programa_id: {default: \"\"},\r\n      usuario_id: {default: \"\"},\r\n      unidade_id: {default: \"\"},\r\n      documento_id: {default: \"\"},\r\n      documentos: {default: []},\r\n      tipo_documento_id: {default: \"\"},\r\n      numero_processo: {default: \"\"},\r\n      vinculadas: {default: true},\r\n      tipo_modalidade_id: {default: \"\"},\r\n      forma_contagem_carga_horaria: {default: \"DIA\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == \"tipo_documento_id\" && !control?.value?.length && this.form?.controls?.numero_processo?.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    if(!this.tipoDocumento?.searchObj && form?.controls.tipo_documento_id.value?.length) {\r\n      return \"Aguarde o carregamento do tipo de documento\";\r\n    }\r\n    return undefined;\r\n  } \r\n\r\n  public onVinculadasChange(event: Event) {\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    formValue = this.util.fillForm(formValue, entity);\r\n    await Promise.all ([\r\n      this.unidade!.loadSearch(entity.unidade || entity.unidade_id),\r\n      this.usuario!.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.programa!.loadSearch(entity.programa || entity.programa_id),\r\n      this.tipoModalidade!.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id)\r\n    ]);\r\n    if(this.processo) {\r\n      formValue.id_processo = this.processo.id_processo;\r\n      formValue.numero_processo = this.processo.numero_processo;\r\n    }\r\n    formValue.data_inicio = this.auth.hora;\r\n    form.patchValue(formValue);\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    this.entity = (await this.dao!.getById(this.metadata.plano_trabalho.id, this.join))!;\r\n    this.processo = this.metadata?.processo;\r\n    await this.loadData(this.entity!, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<NavigateResult | undefined> {\r\n    return new Promise<NavigateResult | undefined>((resolve, reject) => {\r\n      //if(this.processo) {\r\n      resolve(new NavigateResult(Object.assign(this.form!.value, {\r\n        /* TODO Gerar documento do TCR\r\n        termo: this.termo!.conteudo,\r\n        atividades_termo_adesao: this.termo!.atividades.map((x: { nome: string; }) => this.util.removeAcentos(x.nome.toLowerCase())),*/\r\n        codigo_tipo_documento: (this.tipoDocumento?.searchObj as TipoDocumento)?.codigo\r\n      })));\r\n      /*} else {\r\n        const documento = Object.assign(new Documento(), {\r\n          especie: \"TERMO_ADESAO\",\r\n          conteudo: this.termo!.conteudo,\r\n          plano_id: this.entity!.id,\r\n          status: \"GERADO\"\r\n        });\r\n        this.documentoDao.save(documento).then(doc => resolve(undefined)).catch(reject);\r\n      }*/\r\n    });\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria?.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" ;//+ (entity?.nome || \"\");\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [title]=\"isModal ? '' : title\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <separator [title]=\"lex.noun('Plano de trabalho')\" collapse [collapsed]=\"false\">\r\n        <div class=\"row\">\r\n            <input-search #programa [size]=\"6\" disabled controlName=\"programa_id\" [dao]=\"programaDao\"></input-search>\r\n            <input-search #usuario [size]=\"6\" disabled  controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-search #unidade [size]=\"5\" disabled controlName=\"unidade_id\" [dao]=\"unidadeDao\" ></input-search>\r\n            <input-search #tipoModalidade disabled [size]=\"3\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\"></input-search>\r\n            <input-text numbers disabled [size]=\"2\" label=\"% prod.\" icon=\"bi bi-hourglass-split\" controlName=\"ganho_produtividade\" [control]=\"form!.controls.ganho_produtividade\" [labelInfo]=\"'Percentual de ganho de produtividade (Será descontado do ' + lex.noun('tempo pactuado')+')'\"></input-text>\r\n            <input-display [size]=\"2\" label=\"H. Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-display>\r\n        </div>\r\n        <div class=\"row\">\r\n            <input-datetime [size]=\"3\" disabled label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio_vigencia\" [control]=\"form!.controls.data_inicio_vigencia\" labelInfo=\"Início da Vigência do Programa\"></input-datetime>\r\n            <input-datetime [size]=\"3\" disabled label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim_vigencia\" [control]=\"form!.controls.data_fim_vigencia\" labelInfo=\"Final da Vigência do Programa\"></input-datetime>\r\n            <input-workload [size]=\"3\" disabled [unit]=\"formaContagemCargaHoraria\" label=\"C. Horária\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" labelInfo=\"Carga horária do usuário\"></input-workload>\r\n            <input-display [size]=\"3\" label=\"H. Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas úteis de trabalho no período de vigência considerando a carga horária, feriados e fins de semana\"></input-display>\r\n        </div>\r\n    </separator>\r\n    <div class=\"row\">\r\n        <input-datetime [size]=\"3\" disabled label=\"Data e hora\" controlName=\"data_inicio\" [control]=\"form!.controls.data_inicio\" labelInfo=\"Data de cadastro do termo\"></input-datetime>\r\n        <input-text [label]=\"'Número ' + lex.noun('Processo')\" [size]=\"3\" controlName=\"numero_processo\" [control]=\"form!.controls.numero_processo\" disabled labelInfo=\"Número do processo, com a formatação de origem\"></input-text>\r\n        <input-search [size]=\"4\" #tipoDocumento [disabled]=\"!form!.controls.numero_processo.value?.length ? 'true' : undefined\" controlName=\"tipo_documento_id\" [dao]=\"tipoDocumentoDao\"></input-search>\r\n        <input-switch label=\"Vinculadas\" [disabled]=\"entity?.atividades?.length ? 'true' : undefined\" [size]=\"2\" controlName=\"vinculadas\" [control]=\"form!.controls.vinculadas\" (change)=\"onVinculadasChange($event)\" labelInfo=\"Se inclui as atividades das unidades vinculadas a unidade do plano\"></input-switch>\r\n    </div>\r\n    <!--separator title=\"Pré-visualização do termo de adesão\" collapse [collapsed]=\"true\">\r\n        <plano-termo-adesao #termo [plano]=\"entity\" [vinculadas]=\"!!form?.controls?.vinculadas?.value\"></plano-termo-adesao>\r\n    </separator/-->\r\n</editable-form>\r\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { SelectItem } from 'src/app/components/input/input-base';\r\nimport { TemplateDataset } from 'src/app/components/input/input-editor/input-editor.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { UnitWorkload } from 'src/app/components/input/input-workload/input-workload.component';\r\nimport { TabsComponent } from 'src/app/components/tabs/tabs.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { AtividadeDaoService } from 'src/app/dao/atividade-dao.service';\r\nimport { DocumentoDaoService } from 'src/app/dao/documento-dao-service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { PlanoEntregaDaoService } from 'src/app/dao/plano-entrega-dao.service';\r\nimport { ProgramaDaoService } from 'src/app/dao/programa-dao.service';\r\nimport { TipoModalidadeDaoService } from 'src/app/dao/tipo-modalidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { ListenerAllPagesService } from 'src/app/listeners/listener-all-pages.service';\r\nimport { Atividade } from 'src/app/models/atividade.model';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Documento } from 'src/app/models/documento.model';\r\nimport { PlanoTrabalhoAtividade } from 'src/app/models/plano-trabalho-atividade.model';\r\nimport { PlanoEntrega } from 'src/app/models/plano-entrega.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { Programa } from 'src/app/models/programa.model';\r\nimport { Template } from 'src/app/models/template.model';\r\nimport { TipoModalidade } from 'src/app/models/tipo-modalidade.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { DocumentoService } from 'src/app/modules/uteis/documentos/documento.service';\r\nimport { DocumentosComponent } from 'src/app/modules/uteis/documentos/documentos.component';\r\nimport { CalendarService, Efemerides } from 'src/app/services/calendar.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { PlanoTrabalhoService } from '../plano-trabalho.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-form',\r\n  templateUrl: './plano-trabalho-form.component.html',\r\n  styleUrls: ['./plano-trabalho-form.component.scss']\r\n})\r\n\r\nexport class PlanoTrabalhoFormComponent extends PageFormBase<PlanoTrabalho, PlanoTrabalhoDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('gridAtividades', { static: false }) public gridAtividades?: GridComponent;\r\n  @ViewChild('gridDocumentos', { static: false }) public gridDocumentos?: GridComponent;\r\n  @ViewChild('tabs', { static: false }) public tabs?: TabsComponent;\r\n  @ViewChild('usuario', { static: false }) public usuario?: InputSearchComponent;\r\n  @ViewChild('tipoModalidade', { static: false }) public tipoModalidade?: InputSearchComponent;\r\n  @ViewChild('planoEntrega', { static: false }) public planoEntrega?: InputSearchComponent;\r\n  @ViewChild('atividade', { static: false }) public atividade?: InputSearchComponent;\r\n  @ViewChild('entrega', { static: false }) public entrega?: InputSelectComponent;\r\n  @ViewChild('documentos', { static: false }) public documentos?: DocumentosComponent;\r\n\r\n  public formAtividades: FormGroup;\r\n  public formEntregas: FormGroup;\r\n  public programaDao: ProgramaDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public atividadeDao: AtividadeDaoService;\r\n  public documentoDao: DocumentoDaoService;\r\n  public documentoService: DocumentoService;\r\n  public allPages: ListenerAllPagesService;\r\n  public calendar: CalendarService;\r\n  public tipoModalidadeDao: TipoModalidadeDaoService;\r\n  public planoEntregaDao: PlanoEntregaDaoService;\r\n  public planoTrabalhoService: PlanoTrabalhoService;\r\n  public horasTotais?: Efemerides;\r\n  public horasParciais?: Efemerides;\r\n  public planoDataset: TemplateDataset[];\r\n  public documentoId?: string;\r\n  public entregas: LookupItem[] = [];\r\n  public programa?: Programa;\r\n  public unidade?: Unidade;\r\n\r\n  private _datasource: any;\r\n  private _entityDocumentos: PlanoTrabalho = new PlanoTrabalho();\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, PlanoTrabalho, PlanoTrabalhoDaoService);\r\n    this.join = [\"unidade.entidade\", \"entregas.entrega\", \"entregas.plano_entrega_entrega:id,plano_entrega_id\", \"plano_entrega.entregas.entrega\", \"plano_entrega.unidade.entidade\", \"plano_entrega.programa\", \r\n                \"usuario\", \"programa.template_tcr\", \"tipo_modalidade\", \"documento\", \"documentos.assinaturas.usuario:id,nome,apelido\", \"atividades.atividade\", \"entregas.plano_entrega_entrega.entrega\"];\r\n    this.programaDao = injector.get<ProgramaDaoService>(ProgramaDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.atividadeDao = injector.get<AtividadeDaoService>(AtividadeDaoService);\r\n    this.planoEntregaDao = injector.get<PlanoEntregaDaoService>(PlanoEntregaDaoService);\r\n    this.documentoService = injector.get<DocumentoService>(DocumentoService);\r\n    this.calendar = injector.get<CalendarService>(CalendarService);\r\n    this.allPages = injector.get<ListenerAllPagesService>(ListenerAllPagesService);\r\n    this.tipoModalidadeDao = injector.get<TipoModalidadeDaoService>(TipoModalidadeDaoService);\r\n    this.documentoDao = injector.get<DocumentoDaoService>(DocumentoDaoService);\r\n    this.planoTrabalhoService = injector.get<PlanoTrabalhoService>(PlanoTrabalhoService);\r\n    this.modalWidth = 1200;\r\n    this.planoDataset = this.dao!.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      carga_horaria: {default: \"\"},\r\n      tempo_total: {default: \"\"},\r\n      tempo_proporcional: {default: \"\"},\r\n      data_inicio_vigencia: {default: new Date()},\r\n      data_fim_vigencia: {default: new Date()},\r\n      usuario_id: {default: \"\"},\r\n      plano_entrega_id: {default: \"\"},\r\n      documento_id: {default: null},\r\n      documentos: {default: []},\r\n      atividades: {default: []},\r\n      entregas: {default: []},\r\n      tipo_modalidade_id: {default: \"\"},\r\n      forma_contagem_carga_horaria: {default: \"DIA\"},\r\n      editar_texto_complementar_unidade: {default: false},\r\n      editar_texto_complementar_usuario: {default: false},\r\n      unidade_texto_complementar: {default: \"\"},\r\n      usuario_texto_complementar: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n    this.formAtividades = this.fh.FormBuilder({\r\n      atividade_id: {default: \"\"}\r\n    }, this.cdRef, this.validateAtividades);\r\n    this.formEntregas = this.fh.FormBuilder({\r\n      nome: {default: \"\"},\r\n      entrega_id: {default: \"\"}\r\n    }, this.cdRef, this.validateEntregas);\r\n  }\r\n\r\n  public ngOnInit() {\r\n    super.ngOnInit();\r\n    const segment = (this.url ? this.url[this.url.length-1]?.path : \"\") || \"\";\r\n    this.action = [\"termos\"].includes(segment) ? segment : this.action;\r\n  }\r\n\r\n  public get datasource(): any {\r\n    /* _entityDocumentos é atualizado pelo angular na chamada do get entityDocumentos() */\r\n    let data = this.dao!.datasource(this._entityDocumentos);\r\n    /* Atualiza os campos de texto complementar do usuário e da unidade */\r\n    data.usuario.texto_complementar_plano = this.form!.controls.usuario_texto_complementar.value || \"\";\r\n    data.unidade.texto_complementar_plano = this.form!.controls.unidade_texto_complementar.value || \"\";\r\n    if(JSON.stringify(data) != this.JSON.stringify(this._datasource)) {\r\n      this._datasource = data;\r\n      /* Se o termo for um documento obrigatório, então será gerado um termo automaticamente */\r\n      this.documentoId = undefined;\r\n      if(this.programa?.termo_obrigatorio) {\r\n        this.documentoId = this.form!.controls.documento_id.value;\r\n        let documentos: Documento[] = this.form!.controls.documentos.value || [];\r\n        let documento = documentos?.find((x: Documento) => x.id == this.documentoId);\r\n        if(!this.documentoId?.length || !documento || documento.assinaturas?.length || documento.tipo == \"LINK\") {\r\n          this.documentoId = this.dao?.generateUuid(),\r\n          documentos.push(new Documento({\r\n            id: this.documentoId, \r\n            tipo: \"HTML\",\r\n            especie: \"TCR\",\r\n            titulo_documento: \"Termo de Ciência e Responsabilidade\",\r\n            conteudo: \"\",\r\n            status: \"GERADO\",\r\n            _status: \"ADD\",\r\n            template: this.programa.template_tcr?.conteudo,\r\n            dataset: this.dao!.dataset(),\r\n            datasource: this.datasource,\r\n            entidade_id: this.auth.entidade?.id,\r\n            plano_trabalho_id: this.entity?.id,\r\n            template_id: this.programa.template_tcr_id\r\n          }));\r\n          this.form!.controls.documento_id.setValue(this.documentoId);\r\n          this.form!.controls.documentos.setValue(documentos);\r\n        }\r\n      }\r\n    }\r\n    return this._datasource;\r\n  }\r\n\r\n  public get template(): Template | undefined {\r\n    /* _entityDocumentos é atualizado pelo angular na chamada do get entityDocumentos() */\r\n    return this.planoTrabalhoService.template(this._entityDocumentos);\r\n  }\r\n\r\n  public get isTermos(): boolean {\r\n    return this.action == \"termos\";\r\n  }\r\n\r\n  public validateAtividades = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == 'atividade_id' && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validateEntregas = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(controlName == 'entrega_id' && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n\r\n    if(['usuario_id', 'plano_entrega_id', 'tipo_modalidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    if(['carga_horaria'].indexOf(controlName) >= 0 && !control.value) {\r\n      result = \"Valor não pode ser zero.\";\r\n    } \r\n    if(['data_inicio_vigencia', 'data_fim_vigencia'].includes(controlName)) {\r\n      if(!this.util.isDataValid(control.value)) {\r\n        result = \"Inválido\";\r\n      }\r\n    } else if(this.programa && controlName == 'data_inicio_vigencia' && (control.value as Date).getTime() < this.programa!.data_inicio_vigencia.getTime()) {\r\n        result = \"Menor que programa\";\r\n    } else if(this.programa && controlName == 'data_fim_vigencia' && (control.value as Date).getTime() > this.programa!.data_fim_vigencia.getTime()) {\r\n        result = \"Maior que programa\";\r\n    } \r\n\r\n    return result;\r\n  }\r\n\r\n  public formValidation = (form?: FormGroup) => {\r\n    if(this.gridAtividades?.editing) {\r\n      this.tabs!.active = \"ATIVIDADES\";\r\n      return \"Salve ou cancele o registro atual em edição\";\r\n    }\r\n    // Validar se o unidade & programa & plano de entrega são interlidados\r\n    // Validar se as entregas pertencem ao plano de entregas da unidade\r\n    // Validar o período está dentro do plano de entregas\r\n    // Validar se o usuários está habilitado no programa\r\n    return undefined;\r\n  };\r\n\r\n  public updateEntregas(planoEntrega: PlanoEntrega | undefined) {\r\n    this.entregas = planoEntrega?.entregas?.map(x => Object.assign({}, { key: x.id, value: x.entrega?.nome || x.descricao, data: x })) || [];\r\n  }\r\n\r\n  public onPlanoEntregaSelect(selected: SelectItem) {\r\n    let planoEntrega = selected.entity as PlanoEntrega;\r\n    this.updateEntregas(planoEntrega);\r\n    this.form?.controls.data_inicio_vigencia.updateValueAndValidity();\r\n    this.form?.controls.data_fim_vigencia.updateValueAndValidity();\r\n    this.programa = planoEntrega?.programa as Programa;\r\n    this.unidade = planoEntrega?.unidade as Unidade;\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(this.unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\");\r\n    this.form!.controls.unidade_texto_complementar.setValue(this.unidade?.texto_complementar_plano || \"\");\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onUsuarioSelect(selected: SelectItem) {\r\n    this.form!.controls.usuario_texto_complementar.setValue((selected.entity as Usuario)?.texto_complementar_plano || \"\");\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public onDataInicioChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onDataFimChange(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public onCargaHorariaChenge(event: Event) {\r\n    this.calculaTempos();\r\n  }\r\n\r\n  public calculaTempos() {\r\n    const inicio = this.form?.controls.data_inicio_vigencia.value;\r\n    const fim = this.form?.controls.data_fim_vigencia.value;\r\n    const carga = this.form?.controls.carga_horaria.value || 8;\r\n    const usuario = this.usuario?.searchObj as Usuario;\r\n    if(usuario && this.unidade && this.util.isDataValid(inicio) && this.util.isDataValid(fim)) {\r\n      this.calendar.loadFeriadosCadastrados(this.unidade.id).then((feriados) => {\r\n        this.horasTotais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, this.unidade!, \"ENTREGA\", [], []);\r\n        this.horasParciais = this.calendar.calculaDataTempoUnidade(inicio, fim, carga, this.unidade!, \"ENTREGA\", [], usuario.afastamentos);\r\n        this.form?.controls.tempo_total.setValue(this.horasTotais.tempoUtil);\r\n        this.form?.controls.tempo_proporcional.setValue(this.horasParciais.tempoUtil);\r\n      });\r\n    }\r\n  }\r\n\r\n  public async loadData(entity: PlanoTrabalho, form: FormGroup) {\r\n    this.updateEntregas(entity.plano_entrega);\r\n    await Promise.all([\r\n      this.calendar.loadFeriadosCadastrados(entity.unidade_id),\r\n      this.usuario?.loadSearch(entity.usuario || entity.usuario_id),\r\n      this.tipoModalidade?.loadSearch(entity.tipo_modalidade || entity.tipo_modalidade_id),\r\n      this.planoEntrega?.loadSearch(entity.plano_entrega || entity.plano_entrega_id)\r\n    ]);\r\n    let formValue = Object.assign({}, form.value);\r\n    form.patchValue(this.util.fillForm(formValue, entity));\r\n    let documento = entity.documentos.find(x => x.id == entity.documento_id);\r\n    if(documento) this._datasource = documento.datasource;\r\n    this.calculaTempos();\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public async initializeData(form: FormGroup) {\r\n    if(this.isTermos) {\r\n      this.entity = (await this.dao!.getById(this.urlParams!.get(\"id\")!, this.join))!;\r\n    } else {\r\n      this.entity = new PlanoTrabalho();\r\n      this.entity.carga_horaria = this.auth.entidade?.carga_horaria_padrao || 8;\r\n      this.entity.forma_contagem_carga_horaria = this.auth.entidade?.forma_contagem_carga_horaria || \"DIA\";\r\n    }\r\n    await this.loadData(this.entity, this.form!);\r\n  }\r\n\r\n  /* Atividades */  \r\n  public async addAtividades() {\r\n    return new PlanoTrabalhoAtividade({ plano_trabalho_id: this.entity?.id, _status: \"ADD\" }) as IIndexable;\r\n  }\r\n\r\n  public async loadAtividades(form: FormGroup, row: any) {\r\n    form.controls.atividade_id.setValue(row.atividade_id);\r\n  }\r\n\r\n  public async removeAtividades(row: any) {\r\n    row._status = \"DELETE\";\r\n    return false;\r\n  }\r\n \r\n  public async saveAtividades(form: FormGroup, row: any) {\r\n    row.atividade_id = form.controls.atividade_id.value;\r\n    row.atividade = this.atividade?.searchObj as Atividade;\r\n    row._status = row._status == \"ADD\" ? row._status : \"EDIT\";\r\n    /*this.dialog.showSppinerOverlay(\"Carregando dados da atividade...\");\r\n    try {\r\n      row.atividade = await this.atividadeDao?.getById(row.atividade_id)!;\r\n    } finally {\r\n      this.dialog.closeSppinerOverlay();\r\n    }*/\r\n    return row;\r\n  }\r\n\r\n  /* Entregas */\r\n  public async addEntregas() {\r\n    return new PlanoTrabalhoEntrega({ plano_trabalho_id: this.entity?.id, _status: \"ADD\" }) as IIndexable;\r\n  }\r\n\r\n  public async loadEntregas(form: FormGroup, row: any) {\r\n    form.controls.entrega_id.setValue(row.entrega_id);\r\n    form.controls.nome.setValue(row.nome);\r\n  }\r\n\r\n  public async removeEntregas(row: any) {\r\n    row._status = \"DELETE\";\r\n    return false;\r\n  }\r\n \r\n  public async saveEntregas(form: FormGroup, row: any) {\r\n    row.entrega_id = form.controls.entrega_id.value;\r\n    row.entrega = this.entrega?.selectedItem?.data as PlanoTrabalhoEntrega;\r\n    row.nome = form.controls.nome.value;\r\n    row._status = row._status == \"ADD\" ? row._status : \"EDIT\";\r\n    return row;\r\n  }\r\n\r\n  /* Gera o objeto entity baseado nas informações atuais do formulário para ser utilizado por Documentos */\r\n  public get entityDocumentos(): PlanoTrabalho {\r\n    let plano = this.loadEntity();\r\n    /* Remove campo de documentos para comparar */\r\n    plano.documentos = [];\r\n    this._entityDocumentos.documentos = [];\r\n    if(JSON.stringify(plano) != JSON.stringify(this._entityDocumentos)) {\r\n      this._entityDocumentos = plano;  \r\n    }\r\n    /* Atribui novamente o campo de documentos */\r\n    this._entityDocumentos.documentos = this.form!.controls.documentos.value;\r\n    return this._entityDocumentos;\r\n  }\r\n\r\n  /* Cria um objeto Plano baseado nos dados do formulário */\r\n  public loadEntity(): PlanoTrabalho {\r\n    let plano: PlanoTrabalho = this.util.fill(new PlanoTrabalho(), this.entity!);\r\n    plano = this.util.fillForm(plano, this.form!.value);\r\n    plano.usuario = this.usuario!.searchObj as Usuario;\r\n    plano.unidade = (this.entity?.unidade || this.unidade) as Unidade;\r\n    plano.programa = (this.entity?.programa || this.programa) as Programa;\r\n    plano.tipo_modalidade = this.tipoModalidade!.searchObj as TipoModalidade;\r\n    return plano;\r\n  }\r\n\r\n  public async saveData(form: IIndexable): Promise<PlanoTrabalho | boolean> {\r\n    let plano = this.loadEntity();\r\n    /* Confirma dados do documento */\r\n    this.documentos?.saveData();\r\n    /* Remove os ids gerados para os novos unidades_origem_atividades, será gerado pelo servidor como UUID */\r\n/*     plano.atividades = plano.atividades.filter((atividade: PlanoAtividade) => {\r\n      atividade.id = atividade.id.includes(\"-\") ? atividade.id : \"\";\r\n      return [\"ADD\", \"EDIT\", \"DELETE\"].includes(atividade._status || \"\")\r\n    }); */\r\n    plano.documentos = plano.documentos.filter((documento: Documento) => {\r\n      return [\"ADD\", \"EDIT\", \"DELETE\"].includes(documento._status || \"\")\r\n    });\r\n    /* Salva separadamente as informações do plano */\r\n    this.entity = await this.dao!.save(plano);\r\n    if(this.form!.controls.editar_texto_complementar_unidade.value) {\r\n      await this.unidadeDao.update(plano.unidade_id, {texto_complementar_plano: this.form!.controls.unidade_texto_complementar.value});\r\n    }\r\n    if(this.form!.controls.editar_texto_complementar_usuario.value) {\r\n      await this.usuarioDao.update(plano.unidade_id, {texto_complementar_plano: this.form!.controls.usuario_texto_complementar.value});\r\n    }\r\n    return true;\r\n  }\r\n\r\n  public titleEdit = (entity: PlanoTrabalho): string => {\r\n    return \"Editando \" ;//+ (entity?.nome || \"\");\r\n  }\r\n\r\n  public documentoDynamicButtons(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let documento: Documento = row as Documento;\r\n\r\n    if(this.isTermos && this.planoTrabalhoService.needSign(this.entity, documento)) {\r\n      result.push({hint: \"Assinar\", icon: \"bi bi-pen\", onClick: this.signDocumento.bind(this) });\r\n    }\r\n    result.push({hint: \"Preview\", icon: \"bi bi-zoom-in\", onClick: ((documento: Documento) => { this.dialog.html({title: \"Termo de adesão\", modalWidth: 1000}, documento.conteudo || \"\"); }).bind(this) });\r\n\r\n    return result;\r\n  }\r\n\r\n  /*public needSign(documento: Documento): boolean {\r\n    const tipoModalidade = this.entity!.tipo_modalidade!; //(this.tipoModalidade?.searchObj as TipoModalidade);\r\n    const usuario = this.entity!.usuario!; // (this.usuario?.searchObj as Usuario);\r\n    const unidade = this.entity!.unidade!; // (this.unidade?.searchObj as Unidade);\r\n    const entidade = unidade?.entidade;\r\n    const alredySigned = !!documento.assinaturas.find(x => x.usuario_id == this.auth.usuario!.id);\r\n    let ids: string[] = [];\r\n    if(tipoModalidade?.exige_assinatura && usuario) ids.push(usuario.id);\r\n    if(tipoModalidade?.exige_assinatura_gestor_unidade && unidade) ids.push(unidade.gestor_id || \"\", unidade.gestor_substituto_id || \"\");\r\n    if(tipoModalidade?.exige_assinatura_gestor_entidade && entidade) ids.push(entidade.gestor_id || \"\", entidade.gestor_substituto_id || \"\");\r\n    return !alredySigned && tipoModalidade && ids.includes(this.auth.usuario!.id);\r\n  }*/\r\n\r\n  public async signDocumento(documento: Documento) {\r\n    await this.documentoService.sign([documento]);\r\n    this.cdRef.detectChanges();\r\n    /*this.dialog.confirm(\"Assinar\", \"Deseja realmente assinar o documento?\").then(response => {\r\n      if(response) {\r\n        this.loading = true;\r\n        this.documentoDao.assinar([documento.id]).then(response => {\r\n          if(response?.length) {\r\n            let documentos = (this.form!.controls.documentos.value || []) as Documento[];\r\n            let found = documentos.find(x => x.id == documento?.id);\r\n            if(found) found.assinaturas = response[0].assinaturas;\r\n            this.form!.controls.documentos.setValue(documentos);\r\n            this.gridDocumentos?.reset();\r\n          }\r\n        }).finally(() => this.loading = false);\r\n      }\r\n    });*/\r\n  }\r\n\r\n  public get formaContagemCargaHoraria(): UnitWorkload {\r\n    //const forma = (this.unidade?.searchObj as Unidade)?.entidade?.forma_contagem_carga_horaria || this.auth.unidade?.entidade?.forma_contagem_carga_horaria || \"DIA\";\r\n    //console.log(\"FORMA: \", (this.unidade?.searchObj as Unidade)?.entidade?.forma_contagem_carga_horaria, this.auth.unidade?.entidade?.forma_contagem_carga_horaria);\r\n    const forma = this.form?.controls.forma_contagem_carga_horaria.value || \"DIA\";\r\n    return forma == \"DIA\" ? \"day\" : forma == \"SEMANA\" ? \"week\" : \"mouth\";\r\n  }\r\n\r\n  public onFormaContagemCargaHorariaChange(unit: UnitWorkload) {\r\n    this.form!.controls.forma_contagem_carga_horaria.setValue(unit == \"day\" ? \"DIA\" : unit == \"week\" ? \"SEMANA\" : \"MES\");\r\n  }\r\n\r\n  public async addDocumento() {\r\n    const documento = new Documento();\r\n    documento.id = this.dao!.generateUuid();\r\n    documento.plano_trabalho_id = this.entity!.id;\r\n    documento.especie = \"TCR\";\r\n    documento._status = \"ADD\";\r\n    this.go.navigate({route: ['gestao', 'plano', 'termo']}, {metadata: {documento: documento, plano_trabalho: this.entity}, modalClose: (modalResult) => {\r\n      if(modalResult) {\r\n        (async () => {\r\n          let documentos = (this.form!.controls.documentos.value || []) as Documento[];\r\n          if(this.isTermos) {\r\n            this.clearErros();\r\n            this.dialog.showSppinerOverlay(\"Salvando dados do formulário\");\r\n            try {\r\n              modalResult = await this.documentoDao.save(Object.assign(new Documento(), {\r\n                especie: \"TCR\",\r\n                conteudo: modalResult?.termo,\r\n                plano_trabalho_id: this.entity!.id,\r\n                status: \"GERADO\"\r\n              }), [\"assinaturas.usuario:id,nome,apelido\"]);\r\n            } catch (error: any) {\r\n              this.error(error.message ? error.message : error);\r\n              modalResult = undefined;\r\n            } finally {\r\n              this.dialog.closeSppinerOverlay();\r\n            }\r\n          }\r\n          if(modalResult) {\r\n            documentos.push(modalResult);\r\n            this.form!.controls.documentos.setValue(documentos);\r\n            this.dialog.showSppinerOverlay(\"Recarregando dados do plano\");\r\n            await this.initializeData(this.form!);\r\n            this.dialog.closeSppinerOverlay();\r\n          }\r\n          this.cdRef.detectChanges();\r\n        })();\r\n      }\r\n    }});\r\n    return undefined;\r\n  }\r\n\r\n  public isVigente(documento: Documento): boolean {\r\n    return this.form!.controls.documento_id.value == documento.id;\r\n  }\r\n\r\n  public onProcessoClick(row: any) {\r\n    this.allPages.openDocumentoSei(row.id_processo, row.id_documento);\r\n  }\r\n\r\n}\r\n\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [noButtons]=\"isTermos ? 'true' : undefined\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\"><!--</editable-form>(submit)=\"onSaveData()\" (cancel)=\"onCancel()\">-->\r\n    <tabs #tabs display right [hidden]=\"isTermos ? 'true' : undefined\" [title]=\"!isModal ? title : ''\">\r\n        <tab key=\"DADOS\" label=\"Dados\">\r\n            <div class=\"row\">\r\n                <!-- (RI_PTR_1) No formulário de inclusão/edição de um plano de trabalho, o input-search de plano de entregas deve ficar desabilitado nas edições e habilitado apenas nas inclusões; -->\r\n                <input-search #planoEntrega [size]=\"6\" [disabled]=\"action == 'new' ? undefined : 'true'\" controlName=\"plano_entrega_id\" [dao]=\"planoEntregaDao\" [join]=\"['entregas.entrega','unidade.entidade','programa']\" (select)=\"onPlanoEntregaSelect($event)\"></input-search>\r\n                <input-search #usuario [size]=\"6\" controlName=\"usuario_id\" [dao]=\"usuarioDao\" [join]=\"['afastamentos']\" (select)=\"onUsuarioSelect($event)\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-datetime [size]=\"3\" label=\"Início\" icon=\"bi bi-calendar-date\" controlName=\"data_inicio_vigencia\" [control]=\"form!.controls.data_inicio_vigencia\" (change)=\"onDataInicioChange($event)\" labelInfo=\"'Início da Vigência do '+ lex.noun('Plano de trabalho')\"></input-datetime>\r\n                <input-datetime [size]=\"3\" label=\"Final\" icon=\"bi bi-calendar-date\" controlName=\"data_fim_vigencia\" [control]=\"form!.controls.data_fim_vigencia\" (change)=\"onDataFimChange($event)\" labelInfo=\"'Final da Vigência do ' +lex.noun('Plano de trabalho')\"></input-datetime>\r\n                <input-search #tipoModalidade [size]=\"6\" controlName=\"tipo_modalidade_id\" [dao]=\"tipoModalidadeDao\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-workload [size]=\"3\" [unit]=\"formaContagemCargaHoraria\" label=\"Carga Horária\" icon=\"bi bi-hourglass-split\" controlName=\"carga_horaria\" [control]=\"form!.controls.carga_horaria\" [unitChange]=\"onFormaContagemCargaHorariaChange.bind(this)\" (change)=\"onCargaHorariaChenge($event)\" labelInfo=\"Carga horária do usuário (Máx.: diária 24 horas; semana 24*5=240 horas; mensal 24*20=480 horas)\"></input-workload>\r\n                <input-timer onlyHours disabled [size]=\"3\" label=\"Horas Totais\" icon=\"bi bi-clock\" controlName=\"tempo_total\" [control]=\"form!.controls.tempo_total\" labelInfo=\"Horas úteis de trabalho no período de vigência considerando a carga horária, feriados e fins de semana\"></input-timer>\r\n                <input-timer onlyHours disabled [size]=\"3\" label=\"Horas Parciais\" icon=\"bi bi-clock\" controlName=\"tempo_proporcional\" [control]=\"form!.controls.tempo_proporcional\" labelInfo=\"Total de horas menos os afastamentos.\"></input-timer>\r\n                <input-text numbers [size]=\"3\" label=\"% Ganho produtividade\" icon=\"bi bi-hourglass-split\" controlName=\"ganho_produtividade\" [control]=\"form!.controls.ganho_produtividade\" [labelInfo]=\"'Percentual de ganho de produtividade (Será descontado do '+ lex.noun('tempo pactuado')+')'\"></input-text>\r\n            </div>\r\n            <separator *ngIf=\"horasTotais\" title=\"Cálculos das horas totais\" collapse>\r\n                <calendar-efemerides [efemerides]=\"horasTotais\" [partial]=\"false\"></calendar-efemerides>\r\n            </separator>\r\n            <separator *ngIf=\"horasParciais\" title=\"Cálculos das horas parciais\" collapse>\r\n                <calendar-efemerides [efemerides]=\"horasParciais\"></calendar-efemerides>\r\n            </separator>\r\n        </tab>\r\n        <tab key=\"ATIVIDADES\" label=\"Atividades\">\r\n            <top-alert type=\"warning\" message=\"Caso a lista fique vazia, será considerado as atividades da unidade (e subordinadas)\"></top-alert>\r\n            <div clss=\"row\">\r\n                <grid #gridAtividades [control]=\"form!.controls.atividades\" [form]=\"formAtividades\" [add]=\"addAtividades.bind(this)\" [load]=\"loadAtividades.bind(this)\" [hasDelete]=\"true\" [remove]=\"removeAtividades.bind(this)\" [save]=\"saveAtividades.bind(this)\" editable>\r\n                    <columns>\r\n                        <column [title]=\"lex.noun('Atividade')\" [titleHint]=\"lex.noun('Atividade') + ' autorizada para o ' + lex.noun('Plano de trabalho')\" [template]=\"columnAtividade\" [editTemplate]=\"editAtividade\">\r\n                            <ng-template let-row=\"row\" #columnAtividade>\r\n                                <span> {{row.atividade?.nome || \"\"}}</span>\r\n                            </ng-template>\r\n                            <ng-template let-row=\"row\" #editAtividade>\r\n                                <input-search #atividade [size]=\"12\" label icon controlName=\"atividade_id\" [control]=\"formAtividades!.controls.atividade_id\" [dao]=\"atividadeDao\"></input-search>\r\n                            </ng-template>\r\n                        </column>\r\n                        <column type=\"options\"></column>\r\n                    </columns>\r\n                </grid>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"ENTREGAS\" [label]=\"lex.noun('Entrega', true)\">\r\n            <top-alert *ngIf=\"!form!.controls.plano_entrega_id.value?.length\" type=\"warning\" [message]=\"'Antes de incluir ' + lex.noun('entrega',true) + ' neste ' + lex.noun('Plano de Trabalho') + ', é necessário selecionar um ' + lex.noun('Plano de Entregas') + '!'\"></top-alert>\r\n            <div *ngIf=\"form!.controls.plano_entrega_id.value?.length\">\r\n                <editable-form [form]=\"formEntregas!\"  [noButtons]=\"'true'\">\r\n                    <plano-trabalho-list-entrega noPersist [entity]=\"entity\" [entregasDoPlanoEntrega]=\"entregas\"></plano-trabalho-list-entrega>\r\n                </editable-form>\r\n            </div>\r\n        </tab>\r\n        <tab *ngIf=\"checkFilled(['usuario_id'])\" key=\"MENSAGENS\" label=\"Texto Complementar\">\r\n            <separator [title]=\"'Texto complementar da '+ lex.noun('unidade')\">\r\n                <input-switch controlName=\"editar_texto_complementar_unidade\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar na '+ lex.noun('unidade')\"></input-switch>\r\n                <input-editor controlName=\"unidade_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_unidade.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n            </separator>\r\n            <separator title=\"Texto complementar do usuario\">\r\n                <input-switch controlName=\"editar_texto_complementar_usuario\" [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Editar texto complementar do '+ lex.noun('usuário')\"></input-switch>\r\n                <input-editor controlName=\"usuario_texto_complementar\" [disabled]=\"form!.controls.editar_texto_complementar_usuario.value ? undefined : 'true'\" [dataset]=\"planoDataset\"></input-editor>\r\n            </separator>\r\n        </tab>\r\n        <tab *ngIf=\"checkFilled(['usuario_id', 'tipo_modalidade_id'])\" key=\"TERMO\" label=\"Termo\">\r\n            <!--top-alert *ngIf=\"!isTermos\" type=\"warning\" message=\"Para [INSERIR] ou [ASSINAR] termos escolha opção Termos de adesão na tela de listagem, ou utilize o Sei\"></top-alert/-->\r\n            <div clss=\"row\">\r\n                <documentos #documentos [entity]=\"entityDocumentos\" noPersist [cdRef]=\"cdRef\" [needSign]=\"planoTrabalhoService.needSign\" [extraTags]=\"planoTrabalhoService.extraTags\" especie=\"TCR\" \r\n                [editingId]=\"documentoId\" [datasource]=\"datasource\" [template]=\"template\"></documentos>\r\n                <!--grid [control]=\"form!.controls.documentos\" #gridDocumentos [disabled]=\"undefined\" #documentos [hasEdit]=\"false\" [hasDelete]=\"false\" [hasAdd]=\"isTermos\" [add]=\"isTermos ? addDocumento.bind(this) : undefined\" editable>\r\n                    <columns>\r\n                        <column title=\"Data\" [template]=\"dataInicio\">\r\n                            <ng-template let-row=\"row\" #dataInicio>\r\n                                <span class=\"badge bg-light text-dark\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Data da inclusão\">\r\n                                    <i class=\"bi bi-calendar-plus\"></i>\r\n                                    {{util.getDateTimeFormatted(row.data_inicio)}}\r\n                                </span>\r\n                                <span *ngIf=\"row.data_fim\" class=\"badge bg-light text-dark\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Data substituição\">\r\n                                    <i class=\"bi bi-calendar-x\"></i>\r\n                                    {{util.getDateTimeFormatted(row.data_fim)}}\r\n                                </span>\r\n                            </ng-template>\r\n                        </column>\r\n                        <column title=\"Documento Sei\" [template]=\"documento\">\r\n                            <ng-template let-row=\"row\" #documento>\r\n                                <span *ngIf=\"row.numero_processo?.length\" class=\"badge bg-light text-dark\" [attr.role]=\"row.numero_processo?.length ? 'button' : undefined\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" (click)=\"onProcessoClick(row)\" [title]=\"allPages.getButtonTitle(row.numero_processo, row.numero_documento)\">\r\n                                    <i [class]=\"'bi ' + (row.numero_processo?.length ? 'bi bi-folder-symlink' : 'bi bi-x-lg')\"></i>\r\n                                    {{row.numero_processo?.length ? row.numero_processo : \"Não atribuído\"}}\r\n                                    <small *ngIf=\"row.numero_documento?.length\"><br>Sei nº {{row.numero_documento}}</small>\r\n                                </span>\r\n                            </ng-template>\r\n                        </column>\r\n                        <column title=\"Status\" [template]=\"vigente\">\r\n                            <ng-template let-row=\"row\" #vigente>\r\n                                <badge [color]=\"lookup.getColor(lookup.DOCUMENTO_STATUS, row.status)\" [icon]=\"lookup.getIcon(lookup.DOCUMENTO_STATUS, row.status)\" [label]=\"lookup.getValue(lookup.DOCUMENTO_STATUS, row.status)\"></badge>\r\n                                <span *ngIf=\"isVigente(row)\" class=\"badge rounded-pill bg-info text-dark\">\r\n                                    <i class=\"bi bi-clipboard-check\"></i>\r\n                                    Vigente\r\n                                </span>\r\n                                <div class=\"d-block\">\r\n                                    <span *ngFor=\"let assinatura of row.assinaturas\" class=\"badge rounded-pill bg-primary\">\r\n                                        <i class=\"bi bi-pen\"></i>\r\n                                        {{util.apelidoOuNome(assinatura.usuario)}}\r\n                                    </span>\r\n                                </div>\r\n                            </ng-template>\r\n                        </column>\r\n                        <column type=\"options\" [dynamicButtons]=\"documentoDynamicButtons.bind(this)\"></column>\r\n                    </columns>\r\n                </grid//-->\r\n            </div>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { Base } from './base.model';\r\nimport { Atividade } from './atividade.model';\r\nimport { PlanoTrabalho } from './plano-trabalho.model';\r\n\r\nexport class PlanoTrabalhoAtividade extends Base {\r\n    public plano_trabalho?: PlanoTrabalho;\r\n    public atividade?: Atividade;\r\n\r\n    public plano_trabalho_id: string = \"\";\r\n    public atividade_id: string = \"\";\r\n\r\n    public constructor(data?: any) { super(); this.initialization(data); }\r\n}\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { PlanoTrabalhoEntrega } from '../models/plano-trabalho-entrega.model';\r\nimport { DaoBaseService } from './dao-base.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PlanoTrabalhoEntregaDaoService extends DaoBaseService<PlanoTrabalhoEntrega> {\r\n\r\n  constructor(protected injector: Injector) {\r\n    super(\"PlanoTrabalhoEntrega\", injector);\r\n  }\r\n}\r\n\r\n","import { ChangeDetectorRef, Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { PlanoTrabalho } from 'src/app/models/plano-trabalho.model';\r\nimport { PlanoTrabalhoEntrega } from 'src/app/models/plano-trabalho-entrega.model';\r\nimport { PlanoTrabalhoEntregaDaoService } from 'src/app/dao/plano-trabalho-entrega-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { EntregaDaoService } from 'src/app/dao/entrega-dao.service';\r\nimport { InputSelectComponent } from 'src/app/components/input/input-select/input-select.component';\r\nimport { PlanoEntregaDaoService } from 'src/app/dao/plano-entrega-dao.service';\r\nimport { PlanoEntregaEntregaDaoService } from 'src/app/dao/plano-entrega-entrega-dao.service';\r\nimport { PlanoEntrega } from 'src/app/models/plano-entrega.model';\r\n\r\nexport type badgeEntrega = {\r\n  label: string,\r\n  cor: string,\r\n  nome: string\r\n}\r\n\r\n@Component({\r\n  selector: 'plano-trabalho-list-entrega',\r\n  templateUrl: './plano-trabalho-list-entrega.component.html',\r\n  styleUrls: ['./plano-trabalho-list-entrega.component.scss']\r\n})\r\nexport class PlanoTrabalhoListEntregaComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('origem', { static: false }) public origem?: InputSelectComponent;\r\n  @ViewChild('entregaMesmaUnidade', { static: false }) public entregaMesmaUnidade?: InputSelectComponent;\r\n  @ViewChild('entregaOutraUnidade', { static: false }) public entregaOutraUnidade?: InputSelectComponent;\r\n  @ViewChild('entregaCatalogo', { static: false }) public entregaCatalogo?: InputSelectComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: PlanoTrabalho | undefined) { super.entity = value; } get entity(): PlanoTrabalho | undefined { return super.entity; }\r\n  @Input() set disabled(value: boolean) { if (this._disabled != value) this._disabled = value; } get disabled(): boolean { return this._disabled; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n  @Input() cdRef: ChangeDetectorRef;\r\n  @Input() set entregasDoPlanoEntrega(value: LookupItem[]) { \r\n    if(JSON.stringify(value) != JSON.stringify(this._entregasDoPlanoEntrega)) {\r\n      this._entregasDoPlanoEntrega = value;\r\n      this.entregasMesmaUnidade = this.carregarEntregasMesmaUnidade();\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n  get entregasDoPlanoEntrega(): LookupItem[] { return this._entregasDoPlanoEntrega; }\r\n\r\n  public get items(): PlanoTrabalhoEntrega[] {\r\n    if (!this.gridControl.value) this.gridControl.setValue(new PlanoTrabalho());\r\n    if (!this.gridControl.value.entregas) this.gridControl.value.entregas = [];\r\n    return this.gridControl.value.entregas;\r\n  }\r\n  public options: ToolbarButton[] = [];\r\n  public entregaDao?: EntregaDaoService;\r\n  public planoTrabalhoDao?: PlanoTrabalhoDaoService;\r\n  public planoEntregaDao?: PlanoEntregaDaoService;\r\n  public peeDao?: PlanoEntregaEntregaDaoService;\r\n  public totalForcaTrabalho: number = 0;\r\n  public entregasMesmaUnidade: LookupItem[] = [];\r\n  public entregasOutraUnidade: LookupItem[] = [];\r\n  public entregasCatalogo: LookupItem[] = [];\r\n  public planoEntregaOutraUnidade?: PlanoEntrega | null;\r\n  public novaEntrega?: PlanoTrabalhoEntrega;\r\n\r\n  private _disabled: boolean = false;\r\n  private _entregasDoPlanoEntrega: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<PlanoTrabalhoEntregaDaoService>(PlanoTrabalhoEntregaDaoService);\r\n    this.cdRef = injector.get<ChangeDetectorRef>(ChangeDetectorRef);\r\n    this.entregaDao = injector.get<EntregaDaoService>(EntregaDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.planoEntregaDao = injector.get<PlanoEntregaDaoService>(PlanoEntregaDaoService);\r\n    this.peeDao = injector.get<PlanoEntregaEntregaDaoService>(PlanoEntregaEntregaDaoService);\r\n    this.join = [\"entrega\", \"plano_entrega_entrega.entrega\"];\r\n    this.form = this.fh.FormBuilder({\r\n      origem: {default: null},\r\n      entregaMesmaUnidade: {default: null},\r\n      entregaOutraUnidade: {default: null},\r\n      entregaCatalogo: {default: null},\r\n      descricao: {default: \"\"},\r\n      forca_trabalho: {default: 1},\r\n      plano_trabalho_id: {default: null},\r\n      entrega_id: {default: null},\r\n      plano_entrega_entrega_id: {default: null}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a validação dos campos do formulário, por ocasião da edição ou inserção de itens.\r\n   * @param control \r\n   * @param controlName \r\n   * @returns \r\n   */\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(['descricao','forca_trabalho'].indexOf(controlName) >= 0 && !control.value?.length) result = \"Obrigatório!\";\r\n    if(['forca_trabalho'].indexOf(controlName) >= 0 && (control.value < 1 || control.value > 100)) result = \"Deve estar entre 1 e 100\";\r\n    if(['entrega_id'].indexOf(controlName) >= 0) {\r\n      if(this.form?.controls.origem.value == 'CATALOGO' && !control.value) result = \"Este campo não pode ser nulo!\";\r\n      let cont = this.entity?.entregas?.filter(e => !!e.entrega_id && !e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).map(e => e.entrega_id).reduce((acc, id) => { if(id === control.value) return acc + 1; else return acc; }, 0) || 0; // (*1)\r\n      if(cont > 0) result = \"Esta entrega está em duplicidade!\";\r\n    }\r\n    if(['plano_entrega_entrega_id'].indexOf(controlName) >= 0) {\r\n      if(['MESMA_UNIDADE','OUTRA_UNIDADE'].includes(this.form?.controls.origem.value) && !control.value) result = \"Este campo não pode ser nulo!\";\r\n      let cont = this.entity?.entregas?.filter(e => !e.entrega_id && !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).map(e => e.plano_entrega_entrega_id).reduce((acc, id) => { if(id === control.value) return acc + 1; else return acc; }, 0) || 0; // (*2)\r\n      if(cont > 0) result = \"Esta entrega está em duplicidade!\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente. Neste momento são carregadas as entregas do catálogo e as entregas da mesma unidade do plano de trabalho,\r\n   * visto que esses itens não se alteram durante a vida do componente e poderão ser utilizados durante sua utilização.\r\n   */\r\n  async ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity = this.metadata?.entity || this.entity;\r\n    this.totalForcaTrabalho = Math.round(this.somaForcaTrabalho(this.entity?.entregas) * 100)/100;\r\n    this.entregasCatalogo = await this.carregarEntregasCatalogo();\r\n    this.entregasMesmaUnidade = this.carregarEntregasMesmaUnidade();\r\n  }\r\n\r\n  /**\r\n   * Método chamado para inserir uma entrega de plano de trabalho no grid, seja este persistente ou não.\r\n   * @returns \r\n   */\r\n  public async addEntrega() {\r\n    return Object.assign(new PlanoTrabalhoEntrega(), { \r\n      _status: this.isNoPersist ? \"ADD\" : \"\",\r\n      id: this.dao!.generateUuid(),\r\n      plano_trabalho_id: this.entity?.id\r\n    }) as IIndexable;\r\n  }\r\n\r\n  /**\r\n   * Método utilizado durante a inclusão/alteração de uma entrega de plano de trabalho no grid, seja ele persistente ou não\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadEntrega(form: FormGroup, row: any) {\r\n    form.controls.descricao.setValue(row.descricao);\r\n    form.controls.forca_trabalho.setValue(row.forca_trabalho);\r\n    form.controls.plano_trabalho_id.setValue(row.plano_trabalho_id);\r\n    if(!row.entrega_id?.length && !row.plano_entrega_entrega_id?.length){ // É uma nova entrega\r\n      form.controls.origem.setValue('MESMA_UNIDADE');\r\n      form.controls.entrega_id.setValue(null);\r\n      form.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if(!row.plano_entrega_entrega_id?.length && !!row.entrega_id?.length){ // É uma entrega do tipo catálogo\r\n      form.controls.origem.setValue('CATALOGO');\r\n      form.controls.entrega_id.setValue(row.entrega_id);\r\n      form.controls.plano_entrega_entrega_id.setValue(null);\r\n    } else if(!row.entrega_id?.length && !!row.plano_entrega_entrega_id?.length && (row.objeto?.plano_entrega_id || row.plano_entrega_entrega?.plano_entrega_id) == this.entity?.plano_entrega_id) {\r\n      form.controls.origem.setValue('MESMA_UNIDADE');\r\n      form.controls.entrega_id.setValue(null);      \r\n      form.controls.plano_entrega_entrega_id.setValue(row.plano_entrega_entrega_id);\r\n    } else if(!row.entrega_id?.length && !!row.plano_entrega_entrega_id?.length && (row.objeto?.plano_entrega_id || row.plano_entrega_entrega?.plano_entrega_id) != this.entity?.plano_entrega_id) {\r\n      form.controls.origem.setValue('OUTRA_UNIDADE');\r\n      form.controls.entrega_id.setValue(null);\r\n      await this.carregarEntregasOutraUnidade(row.plano_entrega_entrega?.plano_entrega_id);\r\n      form.controls.plano_entrega_entrega_id.setValue(row.plano_entrega_entrega_id);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Método chamado para somar os percentuais das forças de trabalho do array de entregas passado como parâmetro.\r\n   * @param entregas Array de entregas do plano de trabalho\r\n   * @returns \r\n   */\r\n  public somaForcaTrabalho(entregas: PlanoTrabalhoEntrega[] = []): number {\r\n    return entregas.map(x => parseFloat(x.forca_trabalho)).reduce((a,b) => a + b, 0);\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a exclusão de uma entrega de plano de trabalho do grid, seja este persistente ou não. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeEntrega(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\");\r\n    if(confirm) {\r\n      this.loading = true;\r\n      try {\r\n        this.isNoPersist ? Object.assign(row, { _status: \"DELETE\" }) : await this.dao?.delete(row.id);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      this.totalForcaTrabalho = Math.round((this.totalForcaTrabalho - parseFloat((row as PlanoTrabalhoEntrega).forca_trabalho)) * 100) / 100;\r\n      return this.isNoPersist ? false : true; // (*3)\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Método chamado no salvamento de uma entrega do plano de trabalho do grid, seja este persistente ou não.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveEntrega(form: FormGroup, row: any) {\r\n    this.novaEntrega = row as PlanoTrabalhoEntrega;\r\n    this.novaEntrega.entrega_id = this.form?.controls.entrega_id.value ?? null;\r\n    this.novaEntrega.plano_entrega_entrega_id = this.form?.controls.plano_entrega_entrega_id.value;\r\n    this.novaEntrega.descricao = this.form?.controls.descricao.value;\r\n    this.novaEntrega.forca_trabalho = this.form?.controls.forca_trabalho.value;\r\n    this.loading = true;\r\n    try {\r\n      if(!this.isNoPersist) {\r\n        this.novaEntrega = await (this.dao as PlanoTrabalhoEntregaDaoService).save(this.novaEntrega, this.join); \r\n        if(this.grid?.adding) this.grid!.items[this.grid!.items.length-1].id = '';  // (*4)\r\n      }\r\n    } catch (e: any) {\r\n      this.error(e.message ? e.message : e.toString() || e);\r\n    } finally {\r\n      this.totalForcaTrabalho = Math.round((this.totalForcaTrabalho + parseFloat((row as PlanoTrabalhoEntrega).forca_trabalho)) * 100) / 100;\r\n      row.objeto = this.entregaCatalogo?.selectedItem?.data || this.entregaMesmaUnidade?.selectedItem?.data || this.entregaOutraUnidade?.selectedItem?.data; // (*)\r\n      this.loading = false;\r\n    }\r\n    return this.novaEntrega;\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente para armazenar as entregas da mesma unidade do plano de trabalho.\r\n   * @returns \r\n   */\r\n  public carregarEntregasMesmaUnidade(): LookupItem[] {\r\n    if(!this.entity?.id?.length) return this.entregasDoPlanoEntrega; // (*5)\r\n    let entregasPlanoEntrega = this.entity?.plano_entrega?.entregas || [];\r\n    let result = entregasPlanoEntrega.map(epe => Object.assign({}, {key: epe.id, value: epe.entrega?.nome || epe.descricao, data: epe}));\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para carregar as entregas de uma outra unidade, com base no seu plano de entregas passado como parâmetro.\r\n   * @param idPlanoOuPlano ID do plano de entregas ou o seu objeto completo.\r\n   */\r\n  public async carregarEntregasOutraUnidade(idPlanoOuPlano: string | PlanoEntrega): Promise<void> {\r\n    this.cdRef.detectChanges();\r\n    this.planoEntregaOutraUnidade = typeof idPlanoOuPlano == 'string' ? await this.planoEntregaDao!.getById(idPlanoOuPlano, [\"entregas.entrega\", \"unidade\"]) : idPlanoOuPlano;\r\n    this.entregasOutraUnidade = this.planoEntregaOutraUnidade?.entregas.map(epe => Object.assign({}, {key: epe.id, value: epe.entrega?.nome || epe.descricao, data: epe})) || [];\r\n  }\r\n\r\n  /**\r\n   * Método chamado para carregar as entregas existentes no Catálogo de Entregas.\r\n   * @returns \r\n   */\r\n  public async carregarEntregasCatalogo(): Promise<LookupItem[]>{\r\n    let result: LookupItem[] = [];\r\n    result = (await this.entregaDao?.query().getAll())?.map(ee => Object.assign({}, {key: ee.id, value: ee.nome, data: ee})) || [];\r\n    return result;\r\n  }\r\n\r\n  public tipoEntrega(row: any): badgeEntrega {\r\n    if(!!row.entrega_id?.length) return {label: 'Catálogo', cor: 'secondary', nome: !!row.objeto?.id?.length ? row.objeto?.nome || \"Desconhecido\" : row.entrega?.nome || \"Desconhecido1\"};\r\n    let IdDoPlanoEntregaDoPlanoTrabalho:string, IdDoPlanoEntregaDaEntrega:string, badge:string, nome:string, cor:string;\r\n    IdDoPlanoEntregaDoPlanoTrabalho = this.entity?.plano_entrega_id || this.entregasDoPlanoEntrega[0]?.data.plano_entrega_id || 'Desconhecido2';\r\n    IdDoPlanoEntregaDaEntrega = !!row.objeto?.id.length ? row.objeto?.plano_entrega_id || \"Desconhecido3\" : row.plano_entrega_entrega.plano_entrega_id || \"Desconhecido4\";   \r\n    [badge,cor] = IdDoPlanoEntregaDoPlanoTrabalho == IdDoPlanoEntregaDaEntrega ? ['Mesma unidade', 'success'] : ['Outra unidade','primary'];\r\n    nome = !!row.objeto?.id.length ? row.objeto?.entrega.nome || \"Desconhecido5\" : row.plano_entrega_entrega?.entrega.nome || \"Desconhecido6\";   \r\n    return {label: badge, cor: cor, nome: nome};\r\n  }\r\n\r\n  /* ---------  TRATAMENTO DOS EVENTOS ----------- */\r\n\r\n  public onOrigemChange(row: any){\r\n    let value = this.form!.controls.origem.value;\r\n    if(['MESMA_UNIDADE','OUTRA_UNIDADE'].includes(value)){\r\n      this.form?.controls.entrega_id.setValue(null);\r\n      this.cdRef.detectChanges();\r\n      if(value == \"OUTRA_UNIDADE\") this.entregaOutraUnidade?.onSearchClick(this.entregaOutraUnidade?.searchRoute);\r\n    } else if(value == 'CATALOGO'){\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(null);\r\n    }\r\n  }\r\n\r\n  public onEntregaMesmaUnidadeChange(event: Event){\r\n    if(this.entregaMesmaUnidade?.selectedItem) {\r\n      this.form?.controls.descricao.setValue(this.entregaMesmaUnidade?.selectedItem?.value || '');\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(this.entregaMesmaUnidade?.selectedItem?.key);\r\n      this.cdRef.detectChanges();    \r\n    }\r\n  }\r\n\r\n  public onEntregaOutraUnidadeChange(event: Event){\r\n    if(this.entregaOutraUnidade?.selectedItem) {\r\n      this.form?.controls.descricao.setValue(this.entregaOutraUnidade?.selectedItem?.value || '');\r\n      this.form?.controls.plano_entrega_entrega_id.setValue(this.entregaOutraUnidade?.selectedItem?.key);\r\n      this.cdRef.detectChanges();    \r\n    }\r\n  }\r\n  \r\n  public onEntregaCatalogoChange(event: Event){\r\n    if(this.entregaCatalogo?.selectedItem) {\r\n      this.form?.controls.descricao.setValue(this.entregaCatalogo?.selectedItem?.value || '');\r\n      this.form?.controls.entrega_id.setValue(this.entregaCatalogo?.selectedItem?.key);\r\n      this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  public onForcaTrabalhoChange(row: any){\r\n    let index = this.items.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n    this.totalForcaTrabalho = Math.round((this.somaForcaTrabalho(this.grid?.items as PlanoTrabalhoEntrega[]) - parseFloat(this.items[index].forca_trabalho) + parseFloat(this.form?.controls.forca_trabalho.value)) * 100) / 100;\r\n  }\r\n}\r\n\r\n  /*\r\n  PROBLEMAS:\r\n\r\n  - O evento de selecionar o conteúdo do input-text ou pressionar TAB está desviando o fluxo para a homepage;\r\n  - O maxWidth da coluna \"Entrega\" funciona para a exibição mas não para a edição, seja o grid persistente ou não\r\n  - Na chamada do input-search de planos de entreda de outra unidade não pode vir o plano de entrega da própria unidade\r\n  - Ao editar uma entrega de outra unidade, que acabou de ser salva, no grid persistente, o inputSelect de nome da entrega não se atualiza\r\n\r\n\r\n  plano_trabalho.id: 3ddb0d3d-7e51-4091-ac01-9f312b8c70b3\r\n  entregas_plano_trabalho.id                plano_entrega_entrega_id                  entrega_id\r\n  7f396cc7-b09f-4b92-bd46-909cc2a8b8fb      54a584f7-0b89-11ee-975a-0242ac120002      NULL\r\n  ba43a0e6-6255-4f99-b09a-e06ccf6c997c      NULL                                      6f76cc53-7088-463f-b854-0c2c826f0317\r\n  dcce5d96-bd78-477c-bc81-a1252ac2de76      9281a3f6-5c61-4ca5-9a84-194eba161c99      NULL\r\n  de955a65-7d01-4a3d-8c29-33a062648db6      5d3546cf-0b89-11ee-975a-0242ac120002      NULL\r\n  fb9cc220-5198-48c4-a7ff-2566cf3f191d      NULL                                      9675f1c5-c4fa-44cc-b8d8-5dda4a550382\r\n  \r\n  Soluções:\r\n  $pt = Plano::find(\"3ddb0d3d-7e51-4091-ac01-9f312b8c70b3\")->with('entregas.entrega:id','entregas.planoEntregaEntrega:id')->get(): o obj planoEntregaEntrega associado à entrega \r\n  $x = PlanoTrabalhoEntrega::where(\"id\",\"=\",\"e738e620-0177-445c-a26b-a05a787b3cc1\")->with('entrega','planoEntregaEntrega')->get()\r\n  */\r\n\r\n  /*\r\n  TESTES\r\n\r\n                                                    GRID PERSISTENTE                      GRID NÃO-PERSISTENTE\r\n                                                Fluxo Feliz    Validações                Fluxo Feliz    Validações\r\n  Inclusão Entrega Catálogo                          \r\n  Inclusão Entrega Mesma Unidade                     \r\n  Inclusão Entrega Outra Unidade                     \r\n  Alteração Entrega Catálogo                         \r\n  Alteração Entrega Mesma Unidade                    \r\n  Alteração Entrega Outra Unidade                    \r\n  Cancelamento Entrega Catálogo                      \r\n  Cancelamento Entrega Mesma Unidade                 \r\n  Cancelamento Entrega Outra Unidade                 \r\n  Exclusão Entrega Catálogo                          \r\n  Exclusão Entrega Mesma Unidade                     \r\n  Exclusão Entrega Outra Unidade                     \r\n\r\n  */\r\n\r\n/*\r\nOBSERVAÇÕES:\r\n\r\n(*1)  let cont = this.entity?.entregas?.filter(e => !!e.entrega_id && !e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).map(e => e.entrega_id).reduce((acc, id) => { if(id === control.value) return acc + 1; else return acc; }, 0) || 0;\r\nFiltra as entregas da mesma unidade do plano de trabalho excluindo a entrega que está sendo editada. Em seguida conta aquelas que possuem o mesmo ID da que está sendo editada e dessa forma o resultado deve ser igual a 0, caso contrário a entrega editada\r\njá existe no grid.\r\n\r\n(*2)  let cont = this.entity?.entregas?.filter(e => !e.entrega_id && !!e.plano_entrega_entrega_id && e.id != this.grid?.editing?.id).map(e => e.plano_entrega_entrega_id).reduce((acc, id) => { if(id === control.value) return acc + 1; else return acc; }, 0) || 0;\r\nIdem à obs 1, em relação às entregas de outras unidades.\r\n\r\n(*3)  return this.isNoPersist ? false : true;\r\nApós confirmada a remoção pelo usuário, a entrega é setada com _status = \"DELETE\" e é excluída da tela e sua confirmação é retornada para o método onDeleteItem() do gridComponent, que a excluirá também dos items do grid.\r\nEntretanto, quando se trata de um grid não persistente, ela não deve ser excluída dos items do grid, pois sua exclusão só se efetivará quando entity for salva, levando\r\ntodas as suas entregas para o back-end, que finalmente excluirá as que possuírem _status = \"DELETE\".\r\n\r\n(*4)  if(this.grid?.adding) this.grid!.items[this.grid!.items.length-1].id = '';\r\n\r\n\r\n(*5)  if(!this.entity?.id?.length) return this.entregasPlanoEntrega;\r\nQuando o componente for chamado por um plano de trabalho (entity) que já existe, não poderá haver alteração no seu plano de entregas, portanto as entregas da mesma unidade do plano de trabalho serão lidas\r\nna própria entity. No entanto, quando o plano de trabalho (entity) ainda não existir (!this.entity?.id?.length), essas entregas vão variar de acordo com o plano de entregas\r\nselecionado no inputSelectComponent, e portanto elas serão lidas na variável que reflete essa escolha (this.entregasPlanoEntrega), e essa reflexão ocorre por causa do bind @Input() set/get entregasPlanoEntrega.\r\n\r\n\r\n----------------------+--------------------------------------+----------------------------+--------+--------+------------------------------------\r\nID do Plano           |       Pode ser que a 'row'           |  Características           | Possui | inputs | entrega_id \r\nde Trabalho           |                                      |                            | objeto | search | plano_entrega_entrega_id\r\n----------------------+--------------------------------------+----------------------------+--------+--------+-------------------------------------\r\n                      | - Já tenha vindo do banco (TIPO I)   |                            |   NÃO  | nenhum | um dos dois\r\n                      |   (foi carregada junto com o Plano)  |                            |        |        |\r\n                      |--------------------------------------+----------------------------+--------+--------+--------------------------------------\r\n  EXISTE              | - Tenho sido salva agora no banco    |                            |   SIM  | um dos | um dos dois\r\n  - Então o Grid é    |   (TIPO II)                          |                            |        | três   |\r\n    Persistente       |--------------------------------------+----------------------------+--------+--------+------------------------------------\r\n                      | - Esteja sendo criada agora          | addEntrega loadEntrega     |   NÃO  | um dos | nenhum\r\n                      |                                      |                            |        | três   |\r\n                      |--------------------------------------+----------------------------+--------+--------+-----------------------------------     \r\n                      | - Seja do TIPO I e esteja sendo      | loadEntrega                |   NÃO  | um dos | um dos dois\r\n                      |   editada agora                      |                            |        | três   |\r\n                      +--------------------------------------+----------------------------+--------+--------+------------------------------------\r\n                      | - Seja do TIPO II e esteja sendo     | loadEntrega                |   SIM  | um dos | um dos dois\r\n                      |   editada agora                      |                            |        | três   |\r\n----------------------+--------------------------------------+----------------------------+--------+--------+-----------------------------------------\r\n  NÃO                 | - Já exista nos itens do grid        |                            |   SIM  | nenhum | um dos dois\r\n  EXISTE              |   (foi salva agora, não no banco)    | Possui _status == \"ADD\"    |        |        |\r\n  - Então o Grid é    |--------------------------------------+----------------------------+--------+--------+---------------------------------------\r\n    Não-persistente   | - Esteja sendo criada agora          | Possui _status == \"ADD\"    |   NÃO  | um dos | nenhum\r\n                      |                                      | addEntrega loadEntrega     |        | três   |\r\n                      |--------------------------------------+----------------------------+--------+--------+---------------------------------------\r\n                      | - Tenha acabado de ser criada e      | Possui _status == \"ADD\"    |   SIM  | um dos | um dos dois\r\n                      |   já está sendo editada              | loadEntrega                |        | três   |\r\n------------------------------------------------------------------------------------------+--------+--------+--------------------------------------\r\n(*) O ADD é inserido pelo método addEntrega e só sai quando persiste no banco e volta\r\n(*) O objeto é inserido pelo método saveEntrega e permanece mesmo depois de persistida no banco\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n*/","<editable-form noButtons [form]=\"form!\" [disabled]=\"formDisabled\">\r\n    <div class=\"row\">\r\n        <grid [items]=\"items\" [form]=\"form!\" #gridEntregas editable [selectable]=\"false\" [minHeight]=\"items.length > 2 ? 0 : 220\" [join]=\"join\" [groupBy]=\"groupBy\"\r\n            [add]=\"addEntrega.bind(this)\" [remove]=\"removeEntrega.bind(this)\" [save]=\"saveEntrega.bind(this)\" [load]=\"loadEntrega.bind(this)\"\r\n            [hasDelete]=\"true\" [hasEdit]=\"true\" [hasAdd]=\"!disabled\">\r\n            <columns>\r\n                <column [titleTemplate]=\"titleOrigem\" [template]=\"columnOrigem\" [editTemplate]=\"editOrigem\" [verticalAlign]=\"'middle'\" [width]=\"125\" [align]=\"'center'\">\r\n                    <ng-template let-header=\"header\" #titleOrigem><div class=\"text-center\"><span><strong>Origem</strong></span></div></ng-template>\r\n                    <ng-template let-row=\"row\" #columnOrigem><span><small><badge [label]=\"tipoEntrega(row).label\" [color]=\"tipoEntrega(row).cor\"></badge></small></span></ng-template>\r\n                    <ng-template let-row=\"row\" #editOrigem><input-select #origem controlName=\"origem\" controlName=\"origem\" [control]=\"form!.controls.origem\" [items]=\"lookup.ORIGENS_ENTREGAS_PLANO_TRABALHO\" (change)=\"onOrigemChange(row)\"></input-select></ng-template>\r\n                </column>\r\n                <column [maxWidth]=\"350\" [titleTemplate]=\"titleEntrega\" [template]=\"columnEntrega\" [editTemplate]=\"editEntrega\" [verticalAlign]=\"'middle'\">\r\n                    <ng-template let-header=\"header\" #titleEntrega><span><strong>Entrega</strong></span></ng-template>\r\n                    <ng-template let-row=\"row\" #columnEntrega><small>{{ tipoEntrega(row).nome }}</small></ng-template>\r\n                    <ng-template let-row=\"row\" #editEntrega>\r\n                        <input-select *ngIf=\"origem?.value == 'MESMA_UNIDADE'\" #entregaMesmaUnidade nullable itemNull=\"- Selecione -\" controlName=\"plano_entrega_entrega_id\" [control]=\"form!.controls.plano_entrega_entrega_id\" [items]=\"entregasMesmaUnidade\" (change)=\"onEntregaMesmaUnidadeChange($event)\"></input-select>\r\n                        <input-select *ngIf=\"origem?.value == 'OUTRA_UNIDADE'\" #entregaOutraUnidade nullable itemNull=\"- Selecione -\" controlName=\"plano_entrega_entrega_id\" [control]=\"form!.controls.plano_entrega_entrega_id\" [items]=\"entregasOutraUnidade\" (change)=\"onEntregaOutraUnidadeChange($event)\" searchButton [sufix]=\"planoEntregaOutraUnidade?.unidade?.sigla\" [searchRoute]=\"{route: ['gestao', 'plano-entrega']}\" [afterSearch]=\"carregarEntregasOutraUnidade.bind(this)\"></input-select>\r\n                        <input-select *ngIf=\"origem?.value == 'CATALOGO'\" #entregaCatalogo nullable itemNull=\"- Selecione -\" controlName=\"entrega_id\" [control]=\"form!.controls.entrega_id\" [items]=\"entregasCatalogo\" (change)=\"onEntregaCatalogoChange($event)\"></input-select>\r\n                    </ng-template>\r\n                </column>\r\n                <column [titleTemplate]=\"titleForcaTrabalho\" [template]=\"columnForcaTrabalho\" [editTemplate]=\"editForcaTrabalho\" [width]=\"125\" [align]=\"'center'\">\r\n                    <ng-template let-header=\"header\" #titleForcaTrabalho>\r\n                        <div class=\"text-center\">\r\n                            <small><strong>% Força Trab.</strong></small><br>\r\n                            <small><badge icon=\"bi bi-calculator\" [color]=\"totalForcaTrabalho == 100 ? 'success' : 'warning'\" [label]=\"totalForcaTrabalho + '%'\"></badge></small>\r\n                        </div>\r\n                    </ng-template>\r\n                    <ng-template let-row=\"row\" #columnForcaTrabalho><small>{{  row.forca_trabalho + '%' }}</small></ng-template>\r\n                    <ng-template let-row=\"row\" #editForcaTrabalho><input-text number sufix=\"%\" controlName=\"forca_trabalho\" [control]=\"form!.controls.forca_trabalho\" (change)=\"onForcaTrabalhoChange(row)\"></input-text></ng-template>\r\n                </column>\r\n                <column [maxWidth]=\"250\" [titleTemplate]=\"titleDescricao\" [template]=\"columnDescricao\" [editTemplate]=\"editDescricao\" [verticalAlign]=\"'middle'\">\r\n                    <ng-template let-header=\"header\" #titleDescricao><div class=\"text-center\"><span><strong>Detalhamento</strong></span></div></ng-template>\r\n                    <ng-template let-row=\"row\" #columnDescricao><small>{{ row.descricao }}</small></ng-template>\r\n                    <ng-template let-row=\"row\" #editDescricao><input-text controlName=\"descricao\" [control]=\"form!.controls.descricao\"></input-text></ng-template>\r\n                </column>\r\n                <column type=\"options\"></column>\r\n            </columns>\r\n        </grid>\r\n    </div>\r\n</editable-form>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { PlanoTrabalhoFormTermoComponent } from './plano-trabalho-form-termo/plano-trabalho-form-termo.component';\r\nimport { PlanoTrabalhoFormComponent } from './plano-trabalho-form/plano-trabalho-form.component';\r\nimport { PlanoTrabalhoListComponent } from './plano-trabalho-list/plano-trabalho-list.component';\r\nimport { PlanoTrabalhoListEntregaComponent } from './plano-trabalho-list-entrega/plano-trabalho-list-entrega.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: PlanoTrabalhoListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Plano de Trabalho\" } },\r\n  { path: 'new', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão\", modal: true } },\r\n  { path: 'termo', component: PlanoTrabalhoFormTermoComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Termo de adesão\", modal: true } },\r\n  { path: ':id/edit', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição\", modal: true } },\r\n  { path: ':id/consult', component: PlanoTrabalhoFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consultar\", modal: true } },\r\n  { path: 'entregaList', component: PlanoTrabalhoListEntregaComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Lista de Entregas\", modal: true } },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PlanoTrabalhoRoutingModule { }\r\n"],"sourceRoot":"webpack:///"}