"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[472],{7472:(w,m,n)=>{n.r(m),n.d(m,{CapacidadeModule:()=>W});var r=n(6733),f=n(5579),c=n(1391),p=n(2314),T=n(8239),u=n(4040),h=n(6994),d=n(3164),A=n(1184),C=n(6150),g=n(5298),a=n(755),y=n(8967),O=n(4603);const Q=["tipo_capacidade"];function D(i,l){if(1&i&&(a.TgZ(0,"h3",6),a._uU(1),a.qZA()),2&i){const e=a.oxw();a.xp6(1),a.Oqu(e.title)}}let v=(()=>{class i extends A.F{constructor(e){super(e,d.O,h.W),this.injector=e,this.validate=(o,t)=>{let s=null;return["perfil_id"].indexOf(t)>=0&&!o.value?.length&&(s="Obrigat\xf3rio"),s},this.titleEdit=o=>"Editando "+this.lex.translate("Capacidade")+": "+(o?.perfil?.nome||"")+": "+(o?.tipo_capacidade?.codigo||""),this.tipoCapacidadeDao=e.get(C.r),this.perfilDao=e.get(g.r),this.form=this.fh.FormBuilder({perfil_id:{default:""},tipo_capacidade_id:{default:""}},this.cdRef,this.validate),this.join=["tipo_capacidade"]}loadData(e,o){var t=this;return(0,T.Z)(function*(){let s=Object.assign({},o.value);yield Promise.all([t.tipoCapacidade.loadSearch(e.tipo_capacidade||e.tipo_capacidade_id)]),o.patchValue(t.util.fillForm(s,e))})()}initializeData(e){e.patchValue(new d.O)}saveData(e){return new Promise((o,t)=>{const s=this.util.fill(new d.O,this.entity);o(this.util.fillForm(s,this.form.value))})}static#a=this.\u0275fac=function(o){return new(o||i)(a.Y36(a.zs3))};static#t=this.\u0275cmp=a.Xpm({type:i,selectors:[["app-capacidade-form"]],viewQuery:function(o,t){if(1&o&&(a.Gf(u.Q,5),a.Gf(Q,5)),2&o){let s;a.iGM(s=a.CRH())&&(t.editableForm=s.first),a.iGM(s=a.CRH())&&(t.tipoCapacidade=s.first)}},features:[a.qOj],decls:7,vars:7,consts:[["class","my-2",4,"ngIf"],["initialFocus","tipo_capacidade_id",3,"form","submit","cancel"],[1,"row"],["controlName","tipo_capacidade_id",3,"size","dao"],["tipo_capacidade",""],["controlName","perfil_id","required","",3,"size","label","dao"],[1,"my-2"]],template:function(o,t){1&o&&(a.YNc(0,D,2,1,"h3",0),a.TgZ(1,"editable-form",1),a.NdJ("submit",function(){return t.onSaveData()})("cancel",function(){return t.onCancel()}),a.TgZ(2,"div",2),a._UZ(3,"input-search",3,4),a.qZA(),a.TgZ(5,"div",2),a._UZ(6,"input-select",5),a.qZA()()),2&o&&(a.Q6J("ngIf",!t.isModal),a.xp6(1),a.Q6J("form",t.form),a.xp6(2),a.Q6J("size",12)("dao",t.tipoCapacidadeDao),a.xp6(3),a.Q6J("size",6)("label",t.lex.translate("Perfil"))("dao",t.perfilDao))},dependencies:[r.O5,u.Q,y.V,O.p]})}return i})();var Z=n(3150),F=n(8509),M=n(7224),J=n(3351),P=n(7765),I=n(5512),z=n(2704),B=n(2392);function U(i,l){if(1&i&&(a.TgZ(0,"h3",12),a._uU(1),a.qZA()),2&i){const e=a.oxw();a.xp6(1),a.Oqu(e.title)}}function L(i,l){if(1&i&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&i){const e=l.row;a.xp6(1),a.hij(" ",e.perfil.nome,"")}}function b(i,l){if(1&i&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&i){const e=l.row;a.xp6(1),a.hij(" ",e.tipo_capacidade.codigo,"")}}function j(i,l){if(1&i&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&i){const e=l.row;a.xp6(1),a.hij(" ",e.tipo_capacidade.descricao,"")}}const G=[{path:"",component:(()=>{class i extends F.E{constructor(e){super(e,d.O,h.W),this.injector=e,this.filterWhere=o=>{let t=[];return o.value.descricao?.length&&t.push(["perfil_id","=",this.urlParams?.get("perfil_id")]),t},this.join=["tipo_capacidade","perfil"],this.tipoCapacidadeDao=e.get(C.r),this.perfilDao=e.get(g.r),this.title=this.lex.translate("Capacidades"),this.code="MOD_TIPO_CAP",this.filter=this.fh.FormBuilder({descricao:{default:""}}),this.auth.hasPermissionTo("MOD_TIPO_CAP")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_TIPO_CAP_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)})}ngOnInit(){super.ngOnInit(),this.perfilDao.getById(this.urlParams.get("perfil_id")).then(e=>{this.title=this.lex.translate("Capacidades")+" do perfil "+e?.nome,this.cdRef.detectChanges()})}filterClear(e){e.controls.descricao.setValue(""),super.filterClear(e)}static#a=this.\u0275fac=function(o){return new(o||i)(a.Y36(a.zs3))};static#t=this.\u0275cmp=a.Xpm({type:i,selectors:[["app-capacidade-list"]],viewQuery:function(o,t){if(1&o&&a.Gf(Z.M,5),2&o){let s;a.iGM(s=a.CRH())&&(t.grid=s.first)}},features:[a.qOj],decls:18,vars:25,consts:[["class","my-2",4,"ngIf"],[3,"dao","add","orderBy","groupBy","join"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","descricao",3,"size","label","control"],[3,"title","template"],["columnPerfil",""],["title","C\xf3digo",3,"template"],["columnCodCapacidade",""],["columnTipoCapacidade",""],["type","options",3,"onEdit","onDelete"],[3,"rows"],[1,"my-2"]],template:function(o,t){if(1&o&&(a.YNc(0,U,2,1,"h3",0),a.TgZ(1,"grid",1),a._UZ(2,"toolbar"),a.TgZ(3,"filter",2)(4,"div",3),a._UZ(5,"input-text",4),a.qZA()(),a.TgZ(6,"columns")(7,"column",5),a.YNc(8,L,2,1,"ng-template",null,6,a.W1O),a.qZA(),a.TgZ(10,"column",7),a.YNc(11,b,2,1,"ng-template",null,8,a.W1O),a.qZA(),a.TgZ(13,"column",5),a.YNc(14,j,2,1,"ng-template",null,9,a.W1O),a.qZA(),a._UZ(16,"column",10),a.qZA(),a._UZ(17,"pagination",11),a.qZA()),2&o){const s=a.MAs(9),Y=a.MAs(12),x=a.MAs(15);a.Q6J("ngIf",!t.isModal),a.xp6(1),a.Q6J("dao",t.dao)("add",t.add)("orderBy",t.orderBy)("groupBy",t.groupBy)("join",t.join),a.xp6(2),a.Q6J("deleted",t.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",t.filter)("where",t.filterWhere)("submit",t.filterSubmit.bind(t))("clear",t.filterClear.bind(t))("collapseChange",t.filterCollapseChange.bind(t))("collapsed",t.filterCollapsed),a.xp6(2),a.Q6J("size",12)("label",t.lex.translate("Capacidade"))("control",t.filter.controls.descricao),a.uIk("maxlength",250),a.xp6(2),a.Q6J("title",t.lex.translate("Perfil"))("template",s),a.xp6(3),a.Q6J("template",Y),a.xp6(3),a.Q6J("title",t.lex.translate("Capacidade"))("template",x),a.xp6(3),a.Q6J("onEdit",t.edit)("onDelete",t.delete),a.xp6(1),a.Q6J("rows",t.rowsLimit)}},dependencies:[r.O5,Z.M,M.a,J.b,P.z,I.n,z.Q,B.m]})}return i})(),canActivate:[c.a],resolve:{config:p.o},runGuardsAndResolvers:"always",data:{title:"Capacidades"}},{path:"new",component:v,canActivate:[c.a],resolve:{config:p.o},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Capacidade",modal:!0}},{path:":id/edit",component:v,canActivate:[c.a],resolve:{config:p.o},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Capacidade",modal:!0}}];let E=(()=>{class i{static#a=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=a.oAB({type:i});static#e=this.\u0275inj=a.cJS({imports:[f.Bz.forChild(G),f.Bz]})}return i})();var N=n(2662),R=n(2133);let W=(()=>{class i{static#a=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=a.oAB({type:i});static#e=this.\u0275inj=a.cJS({imports:[r.ez,N.K,R.UX,E]})}return i})()}}]);