"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[5796],{75796:(mt,v,l)=>{l.r(v),l.d(v,{TipoAtividadeModule:()=>Q});var h=l(76733),g=l(55579),c=l(1391),u=l(2314),T=l(8239),A=l(74040),_=l(22981),q=l(64368);class p extends q.X{constructor(o){super(),this.nome="",this.esforco=8,this.dias_planejado=0,this.etiquetas=[],this.checklist=[],this.comentario="",this.initialization(o)}}var d,x=l(1184),t=l(20755),C=l(92392),J=l(74508),N=l(64603),E=l(66848),I=l(17819),y=l(25560);class f extends x.F{constructor(o){super(o,p,_.Y),this.injector=o,this.validate=(e,n)=>{let a=null;return["nome"].indexOf(n)>=0&&!e.value?.length&&(a="Obrigat\xf3rio"),a},this.titleEdit=e=>"Editando "+this.lex.translate("Tipo de Atividade")+": "+(e?.nome||""),this.title=this.lex.translate("Tipo de Atividade"),this.form=this.fh.FormBuilder({nome:{default:""},esforco:{default:48},dias_planejado:{default:""},etiquetas:{default:[]},checklist:{default:[]},comentario:{default:""},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null},checklist_texto:{default:""}},this.cdRef,this.validate)}addItemHandleChecklist(){let o;const e=this.form.controls.checklist_texto.value,n=this.util.textHash(e);return e?.length&&this.util.validateLookupItem(this.form.controls.checklist.value,n)&&(o={key:n,value:this.form.controls.checklist_texto.value},this.form.controls.checklist_texto.setValue("")),o}addItemHandleEtiquetas(){let o;const e=this.form.controls.etiqueta_texto.value,n=this.util.textHash(e);return e?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,n)&&(o={key:n,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),o}loadData(o,e){var n=this;return(0,T.Z)(function*(){let a=Object.assign({},e.value);e.patchValue(n.util.fillForm(a,o))})()}initializeData(o){this.entity=new p,this.loadData(this.entity,o)}saveData(o){var e=this;return(0,T.Z)(function*(){let n=e.util.fill(new p,e.entity);return e.util.fillForm(n,e.form.value)})()}}(d=f).\u0275fac=function(o){return new(o||d)(t.Y36(t.zs3))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-tipo-atividade-form"]],viewQuery:function(o,e){if(1&o&&t.Gf(A.Q,5),2&o){let n;t.iGM(n=t.CRH())&&(e.editableForm=n.first)}},features:[t.qOj],decls:13,vars:18,consts:[["initialFocus","nome",3,"form","disabled","title","submit","cancel"],[1,"row"],["label","Nome","controlName","nome","required","",3,"size"],["title","Etiquetas/Check-list/Coment\xe1rio"],["label","Etiquetas","controlName","etiquetas",3,"size","addItemHandle"],["label","Texto","controlName","etiqueta_texto",3,"size"],["label","\xcdcone","icon","fas fa-sign-out-alt","controlName","etiqueta_icone","liveSearch","",3,"size","items"],["label","Cor","controlName","etiqueta_cor",3,"size"],["label","Checklists","controlName","checklist",3,"size","addItemHandle"],["controlName","checklist_texto",3,"size"],["label","Coment\xe1rios","controlName","comentario","labelInfo","Coment\xe1rio que ser\xe1 adicionado automaticamente",3,"size","rows"]],template:function(o,e){1&o&&(t.TgZ(0,"editable-form",0),t.NdJ("submit",function(){return e.onSaveData()})("cancel",function(){return e.onCancel()}),t.TgZ(1,"div",1),t._UZ(2,"input-text",2),t.qZA(),t._UZ(3,"separator",3),t.TgZ(4,"div",1)(5,"input-multiselect",4),t._UZ(6,"input-text",5)(7,"input-select",6)(8,"input-color",7),t.qZA(),t.TgZ(9,"input-multiselect",8),t._UZ(10,"input-text",9),t.qZA()(),t.TgZ(11,"div",1),t._UZ(12,"input-textarea",10),t.qZA()()),2&o&&(t.Q6J("form",e.form)("disabled",e.formDisabled)("title",e.isModal?"":e.title),t.xp6(2),t.Q6J("size",12),t.uIk("maxlength",250),t.xp6(3),t.Q6J("size",8)("addItemHandle",e.addItemHandleEtiquetas.bind(e)),t.xp6(1),t.Q6J("size",5),t.uIk("maxlength",250),t.xp6(1),t.Q6J("size",3)("items",e.lookup.ICONES),t.xp6(1),t.Q6J("size",4),t.xp6(1),t.Q6J("size",4)("addItemHandle",e.addItemHandleChecklist.bind(e)),t.xp6(1),t.Q6J("size",12),t.uIk("maxlength",250),t.xp6(2),t.Q6J("size",12)("rows",3))},dependencies:[A.Q,C.m,J.Q,N.p,E.z,I.p,y.N]});var m,s,Z=l(73150),z=l(78509),M=l(57224),L=l(83351),F=l(57765),U=l(45512),D=l(42704),Y=l(58252),k=l(95489);function w(i,o){1&i&&t._UZ(0,"toolbar")}function j(i,o){if(1&i&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&i){const e=t.oxw().row;t.xp6(1),t.Oqu(e.comentario)}}function B(i,o){if(1&i&&(t.TgZ(0,"span",23),t._uU(1),t.qZA(),t.YNc(2,j,2,1,"small",1)),2&i){const e=o.row;t.xp6(1),t.Oqu(e.nome),t.xp6(1),t.Q6J("ngIf",e.comentario)}}function H(i,o){if(1&i&&t._UZ(0,"badge",26),2&i){const e=o.$implicit;t.Q6J("icon",e.icon)("label",e.value)("color",e.color)}}function V(i,o){if(1&i&&(t.TgZ(0,"div",24),t.YNc(1,H,1,3,"badge",25),t.qZA()),2&i){const e=o.row;t.xp6(1),t.Q6J("ngForOf",e.etiquetas)}}function P(i,o){if(1&i&&t._UZ(0,"badge",28),2&i){const e=o.$implicit;t.Q6J("label",e.value)}}function W(i,o){if(1&i&&(t.TgZ(0,"div",24),t.YNc(1,P,1,1,"badge",27),t.qZA()),2&i){const e=o.row;t.xp6(1),t.Q6J("ngForOf",e.checklist)}}function R(i,o){if(1&i&&t._uU(0),2&i){const e=o.row;t.Oqu(e.nome)}}function S(i,o){if(1&i&&t._uU(0),2&i){const e=o.row;t.Oqu(e.esforco)}}function G(i,o){if(1&i&&t._uU(0),2&i){const e=o.row;t.Oqu(e.dias_planejado)}}function X(i,o){if(1&i&&t._uU(0),2&i){const e=o.row,n=t.oxw();t.Oqu(n.getReportEtiquetas(e))}}function $(i,o){if(1&i&&t._uU(0),2&i){const e=o.row,n=t.oxw();t.Oqu(n.getReportChecklist(e))}}function K(i,o){if(1&i&&t._uU(0),2&i){const e=o.row;t.Oqu(e.comentario_predefinido)}}class O extends z.E{constructor(o){super(o,p,_.Y),this.injector=o,this.filterWhere=e=>{let n=e.value,a=[];return n.nome?.length&&a.push(["nome","like","%"+n.nome.trim().replace(" ","%")+"%"]),a},this.title=this.lex.translate("Tipos de Atividades"),this.code="MOD_TIPO_ATV",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.auth.hasPermissionTo("MOD_TIPO_ATV")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_ATV_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(o){o.controls.nome.setValue(""),super.filterClear(o)}getReportEtiquetas(o){let e="";return o.etiquetas.forEach(n=>{e+=n.value+";\n"}),e}getReportChecklist(o){let e="";return o.checklist.forEach(n=>{e+=n.value+";\n"}),e}}(m=O).\u0275fac=function(o){return new(o||m)(t.Y36(t.zs3))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-tipo-atividade-list"]],viewQuery:function(o,e){if(1&o&&t.Gf(Z.M,5),2&o){let n;t.iGM(n=t.CRH())&&(e.grid=n.first)}},features:[t.qOj],decls:36,vars:31,consts:[[3,"dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit","select"],[4,"ngIf"],[3,"deleted","form","where","submit","clear"],[1,"row"],["label","Nome","controlName","nome",3,"size","control"],["title","Nome",3,"template"],["columnNome",""],["title","Etiquetas",3,"template"],["columnEtiquetas",""],["title","Checklist",3,"template"],["columnChecklist",""],["type","options",3,"onEdit","options"],["reportNome",""],[3,"title","template"],["reportEsforco",""],["title","Dias planejamento",3,"template"],["reportDiasPlanejado",""],["reportEtiquetas",""],["title","Check-list",3,"template"],["reportChecklist",""],["title","Coment\xe1rio",3,"template"],["reportComentario",""],[3,"rows"],[1,"d-block"],[1,"one-per-line","text-break","w-100"],[3,"icon","label","color",4,"ngFor","ngForOf"],[3,"icon","label","color"],["color","light","icon","bi bi-check2-square",3,"label",4,"ngFor","ngForOf"],["color","light","icon","bi bi-check2-square",3,"label"]],template:function(o,e){if(1&o&&(t.TgZ(0,"grid",0),t.NdJ("select",function(a){return e.onSelect(a)}),t.YNc(1,w,1,0,"toolbar",1),t.TgZ(2,"filter",2)(3,"div",3),t._UZ(4,"input-text",4),t.qZA()(),t.TgZ(5,"columns")(6,"column",5),t.YNc(7,B,3,2,"ng-template",null,6,t.W1O),t.qZA(),t.TgZ(9,"column",7),t.YNc(10,V,2,1,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(12,"column",9),t.YNc(13,W,2,1,"ng-template",null,10,t.W1O),t.qZA(),t._UZ(15,"column",11),t.qZA(),t.TgZ(16,"report")(17,"column",5),t.YNc(18,R,1,1,"ng-template",null,12,t.W1O),t.qZA(),t.TgZ(20,"column",13),t.YNc(21,S,1,1,"ng-template",null,14,t.W1O),t.qZA(),t.TgZ(23,"column",15),t.YNc(24,G,1,1,"ng-template",null,16,t.W1O),t.qZA(),t.TgZ(26,"column",7),t.YNc(27,X,1,1,"ng-template",null,17,t.W1O),t.qZA(),t.TgZ(29,"column",18),t.YNc(30,$,1,1,"ng-template",null,19,t.W1O),t.qZA(),t.TgZ(32,"column",20),t.YNc(33,K,1,1,"ng-template",null,21,t.W1O),t.qZA()(),t._UZ(35,"pagination",22),t.qZA()),2&o){const n=t.MAs(8),a=t.MAs(11),it=t.MAs(14),nt=t.MAs(19),lt=t.MAs(22),at=t.MAs(25),st=t.MAs(28),rt=t.MAs(31),dt=t.MAs(34);t.Q6J("dao",e.dao)("add",e.add)("title",e.isModal?"":e.title)("orderBy",e.orderBy)("groupBy",e.groupBy)("join",e.join)("selectable",e.selectable)("hasAdd",e.auth.hasPermissionTo("MOD_TIPO_ATV_INCL"))("hasEdit",e.auth.hasPermissionTo("MOD_TIPO_ATV_EDT")),t.xp6(1),t.Q6J("ngIf",!e.selectable),t.xp6(1),t.Q6J("deleted",e.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",e.filter)("where",e.filterWhere)("submit",e.filterSubmit.bind(e))("clear",e.filterClear.bind(e)),t.xp6(2),t.Q6J("size",12)("control",e.filter.controls.nome),t.uIk("maxlength",250),t.xp6(2),t.Q6J("template",n),t.xp6(3),t.Q6J("template",a),t.xp6(3),t.Q6J("template",it),t.xp6(3),t.Q6J("onEdit",e.edit)("options",e.options),t.xp6(2),t.Q6J("template",nt),t.xp6(3),t.Q6J("title",e.lex.translate("Esfor\xe7o"))("template",lt),t.xp6(3),t.Q6J("template",at),t.xp6(3),t.Q6J("template",st),t.xp6(3),t.Q6J("template",rt),t.xp6(3),t.Q6J("template",dt),t.xp6(3),t.Q6J("rows",e.rowsLimit)}},dependencies:[h.sg,h.O5,Z.M,M.a,L.b,F.z,U.n,D.Q,C.m,Y.Y,k.F]});const tt=[{path:"",component:O,canActivate:[c.a],resolve:{config:u.o},data:{title:"Atividades"}},{path:"new",component:f,canActivate:[c.a],resolve:{config:u.o},data:{title:"Inclus\xe3o de Atividade",modal:!0}},{path:":id/edit",component:f,canActivate:[c.a],resolve:{config:u.o},data:{title:"Edi\xe7\xe3o de Atividade",modal:!0}},{path:":id/consult",component:f,canActivate:[c.a],resolve:{config:u.o},data:{title:"Consulta a Atividade",modal:!0}}];class b{}(s=b).\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[g.Bz.forChild(tt),g.Bz]});var r,et=l(58568),ot=l(72133);class Q{}(r=Q).\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[h.ez,et.K,ot.UX,b]})}}]);