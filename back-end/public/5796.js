"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[5796],{75796:(st,v,l)=>{l.r(v),l.d(v,{TipoAtividadeModule:()=>p});var f=l(76733),g=l(55579),r=l(1391),c=l(2314),T=l(8239),A=l(74040),_=l(22981),O=l(64368);class m extends O.X{constructor(i){super(),this.nome="",this.esforco=8,this.dias_planejado=0,this.etiquetas=[],this.checklist=[],this.comentario="",this.initialization(i)}}var b=l(1184),t=l(20755),Z=l(92392),Q=l(74508),q=l(64603),x=l(66848),J=l(17819),N=l(25560);class s extends b.F{constructor(i){super(i,m,_.Y),this.injector=i,this.validate=(e,o)=>{let a=null;return["nome"].indexOf(o)>=0&&!e.value?.length&&(a="Obrigat\xf3rio"),a},this.titleEdit=e=>"Editando "+this.lex.translate("Tipo de Atividade")+": "+(e?.nome||""),this.title=this.lex.translate("Tipo de Atividade"),this.form=this.fh.FormBuilder({nome:{default:""},esforco:{default:48},dias_planejado:{default:""},etiquetas:{default:[]},checklist:{default:[]},comentario:{default:""},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null},checklist_texto:{default:""}},this.cdRef,this.validate)}addItemHandleChecklist(){let i;const e=this.form.controls.checklist_texto.value,o=this.util.textHash(e);return e?.length&&this.util.validateLookupItem(this.form.controls.checklist.value,o)&&(i={key:o,value:this.form.controls.checklist_texto.value},this.form.controls.checklist_texto.setValue("")),i}addItemHandleEtiquetas(){let i;const e=this.form.controls.etiqueta_texto.value,o=this.util.textHash(e);return e?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,o)&&(i={key:o,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),i}loadData(i,e){var o=this;return(0,T.Z)(function*(){let a=Object.assign({},e.value);e.patchValue(o.util.fillForm(a,i))})()}initializeData(i){this.entity=new m,this.loadData(this.entity,i)}saveData(i){var e=this;return(0,T.Z)(function*(){let o=e.util.fill(new m,e.entity);return e.util.fillForm(o,e.form.value)})()}static#t=this.\u0275fac=function(e){return new(e||s)(t.Y36(t.zs3))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-tipo-atividade-form"]],viewQuery:function(e,o){if(1&e&&t.Gf(A.Q,5),2&e){let a;t.iGM(a=t.CRH())&&(o.editableForm=a.first)}},features:[t.qOj],decls:13,vars:18,consts:[["initialFocus","nome",3,"form","disabled","title","submit","cancel"],[1,"row"],["label","Nome","controlName","nome","required","",3,"size"],["title","Etiquetas/Check-list/Coment\xe1rio"],["label","Etiquetas","controlName","etiquetas",3,"size","addItemHandle"],["label","Texto","controlName","etiqueta_texto",3,"size"],["label","\xcdcone","icon","fas fa-sign-out-alt","controlName","etiqueta_icone","liveSearch","",3,"size","items"],["label","Cor","controlName","etiqueta_cor",3,"size"],["label","Checklists","controlName","checklist",3,"size","addItemHandle"],["controlName","checklist_texto",3,"size"],["label","Coment\xe1rios","controlName","comentario","labelInfo","Coment\xe1rio que ser\xe1 adicionado automaticamente",3,"size","rows"]],template:function(e,o){1&e&&(t.TgZ(0,"editable-form",0),t.NdJ("submit",function(){return o.onSaveData()})("cancel",function(){return o.onCancel()}),t.TgZ(1,"div",1),t._UZ(2,"input-text",2),t.qZA(),t._UZ(3,"separator",3),t.TgZ(4,"div",1)(5,"input-multiselect",4),t._UZ(6,"input-text",5)(7,"input-select",6)(8,"input-color",7),t.qZA(),t.TgZ(9,"input-multiselect",8),t._UZ(10,"input-text",9),t.qZA()(),t.TgZ(11,"div",1),t._UZ(12,"input-textarea",10),t.qZA()()),2&e&&(t.Q6J("form",o.form)("disabled",o.formDisabled)("title",o.isModal?"":o.title),t.xp6(2),t.Q6J("size",12),t.uIk("maxlength",250),t.xp6(3),t.Q6J("size",8)("addItemHandle",o.addItemHandleEtiquetas.bind(o)),t.xp6(1),t.Q6J("size",5),t.uIk("maxlength",250),t.xp6(1),t.Q6J("size",3)("items",o.lookup.ICONES),t.xp6(1),t.Q6J("size",4),t.xp6(1),t.Q6J("size",4)("addItemHandle",o.addItemHandleChecklist.bind(o)),t.xp6(1),t.Q6J("size",12),t.uIk("maxlength",250),t.xp6(2),t.Q6J("size",12)("rows",3))},dependencies:[A.Q,Z.m,Q.Q,q.p,x.z,J.p,N.N]})}var C=l(73150),E=l(78509),I=l(57224),y=l(83351),z=l(57765),L=l(45512),M=l(42704),F=l(58252),U=l(95489);function D(n,i){1&n&&t._UZ(0,"toolbar")}function Y(n,i){if(1&n&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&n){const e=t.oxw().row;t.xp6(1),t.Oqu(e.comentario)}}function k(n,i){if(1&n&&(t.TgZ(0,"span",23),t._uU(1),t.qZA(),t.YNc(2,Y,2,1,"small",1)),2&n){const e=i.row;t.xp6(1),t.Oqu(e.nome),t.xp6(1),t.Q6J("ngIf",e.comentario)}}function w(n,i){if(1&n&&t._UZ(0,"badge",26),2&n){const e=i.$implicit;t.Q6J("icon",e.icon)("label",e.value)("color",e.color)}}function j(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,w,1,3,"badge",25),t.qZA()),2&n){const e=i.row;t.xp6(1),t.Q6J("ngForOf",e.etiquetas)}}function B(n,i){if(1&n&&t._UZ(0,"badge",28),2&n){const e=i.$implicit;t.Q6J("label",e.value)}}function H(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,B,1,1,"badge",27),t.qZA()),2&n){const e=i.row;t.xp6(1),t.Q6J("ngForOf",e.checklist)}}function V(n,i){if(1&n&&t._uU(0),2&n){const e=i.row;t.Oqu(e.nome)}}function P(n,i){if(1&n&&t._uU(0),2&n){const e=i.row;t.Oqu(e.esforco)}}function W(n,i){if(1&n&&t._uU(0),2&n){const e=i.row;t.Oqu(e.dias_planejado)}}function S(n,i){if(1&n&&t._uU(0),2&n){const e=i.row,o=t.oxw();t.Oqu(o.getReportEtiquetas(e))}}function G(n,i){if(1&n&&t._uU(0),2&n){const e=i.row,o=t.oxw();t.Oqu(o.getReportChecklist(e))}}function R(n,i){if(1&n&&t._uU(0),2&n){const e=i.row;t.Oqu(e.comentario_predefinido)}}class u extends E.E{constructor(i){super(i,m,_.Y),this.injector=i,this.filterWhere=e=>{let o=e.value,a=[];return o.nome?.length&&a.push(["nome","like","%"+o.nome.trim().replace(" ","%")+"%"]),a},this.title=this.lex.translate("Tipos de Atividades"),this.code="MOD_TIPO_ATV",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.auth.hasPermissionTo("MOD_TIPO_ATV")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_ATV_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(i){i.controls.nome.setValue(""),super.filterClear(i)}getReportEtiquetas(i){let e="";return i.etiquetas.forEach(o=>{e+=o.value+";\n"}),e}getReportChecklist(i){let e="";return i.checklist.forEach(o=>{e+=o.value+";\n"}),e}static#t=this.\u0275fac=function(e){return new(e||u)(t.Y36(t.zs3))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["app-tipo-atividade-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(C.M,5),2&e){let a;t.iGM(a=t.CRH())&&(o.grid=a.first)}},features:[t.qOj],decls:36,vars:31,consts:[[3,"dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit","select"],[4,"ngIf"],[3,"deleted","form","where","submit","clear"],[1,"row"],["label","Nome","controlName","nome",3,"size","control"],["title","Nome",3,"template"],["columnNome",""],["title","Etiquetas",3,"template"],["columnEtiquetas",""],["title","Checklist",3,"template"],["columnChecklist",""],["type","options",3,"onEdit","options"],["reportNome",""],[3,"title","template"],["reportEsforco",""],["title","Dias planejamento",3,"template"],["reportDiasPlanejado",""],["reportEtiquetas",""],["title","Check-list",3,"template"],["reportChecklist",""],["title","Coment\xe1rio",3,"template"],["reportComentario",""],[3,"rows"],[1,"d-block"],[1,"one-per-line","text-break","w-100"],[3,"icon","label","color",4,"ngFor","ngForOf"],[3,"icon","label","color"],["color","light","icon","bi bi-check2-square",3,"label",4,"ngFor","ngForOf"],["color","light","icon","bi bi-check2-square",3,"label"]],template:function(e,o){if(1&e&&(t.TgZ(0,"grid",0),t.NdJ("select",function(h){return o.onSelect(h)}),t.YNc(1,D,1,0,"toolbar",1),t.TgZ(2,"filter",2)(3,"div",3),t._UZ(4,"input-text",4),t.qZA()(),t.TgZ(5,"columns")(6,"column",5),t.YNc(7,k,3,2,"ng-template",null,6,t.W1O),t.qZA(),t.TgZ(9,"column",7),t.YNc(10,j,2,1,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(12,"column",9),t.YNc(13,H,2,1,"ng-template",null,10,t.W1O),t.qZA(),t._UZ(15,"column",11),t.qZA(),t.TgZ(16,"report")(17,"column",5),t.YNc(18,V,1,1,"ng-template",null,12,t.W1O),t.qZA(),t.TgZ(20,"column",13),t.YNc(21,P,1,1,"ng-template",null,14,t.W1O),t.qZA(),t.TgZ(23,"column",15),t.YNc(24,W,1,1,"ng-template",null,16,t.W1O),t.qZA(),t.TgZ(26,"column",7),t.YNc(27,S,1,1,"ng-template",null,17,t.W1O),t.qZA(),t.TgZ(29,"column",18),t.YNc(30,G,1,1,"ng-template",null,19,t.W1O),t.qZA(),t.TgZ(32,"column",20),t.YNc(33,R,1,1,"ng-template",null,21,t.W1O),t.qZA()(),t._UZ(35,"pagination",22),t.qZA()),2&e){const a=t.MAs(8),h=t.MAs(11),tt=t.MAs(14),et=t.MAs(19),ot=t.MAs(22),it=t.MAs(25),nt=t.MAs(28),lt=t.MAs(31),at=t.MAs(34);t.Q6J("dao",o.dao)("add",o.add)("title",o.isModal?"":o.title)("orderBy",o.orderBy)("groupBy",o.groupBy)("join",o.join)("selectable",o.selectable)("hasAdd",o.auth.hasPermissionTo("MOD_TIPO_ATV_INCL"))("hasEdit",o.auth.hasPermissionTo("MOD_TIPO_ATV_EDT")),t.xp6(1),t.Q6J("ngIf",!o.selectable),t.xp6(1),t.Q6J("deleted",o.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",o.filter)("where",o.filterWhere)("submit",o.filterSubmit.bind(o))("clear",o.filterClear.bind(o)),t.xp6(2),t.Q6J("size",12)("control",o.filter.controls.nome),t.uIk("maxlength",250),t.xp6(2),t.Q6J("template",a),t.xp6(3),t.Q6J("template",h),t.xp6(3),t.Q6J("template",tt),t.xp6(3),t.Q6J("onEdit",o.edit)("options",o.options),t.xp6(2),t.Q6J("template",et),t.xp6(3),t.Q6J("title",o.lex.translate("Esfor\xe7o"))("template",ot),t.xp6(3),t.Q6J("template",it),t.xp6(3),t.Q6J("template",nt),t.xp6(3),t.Q6J("template",lt),t.xp6(3),t.Q6J("template",at),t.xp6(3),t.Q6J("rows",o.rowsLimit)}},dependencies:[f.sg,f.O5,C.M,I.a,y.b,z.z,L.n,M.Q,Z.m,F.Y,U.F]})}const X=[{path:"",component:u,canActivate:[r.a],resolve:{config:c.o},data:{title:"Atividades"}},{path:"new",component:s,canActivate:[r.a],resolve:{config:c.o},data:{title:"Inclus\xe3o de Atividade",modal:!0}},{path:":id/edit",component:s,canActivate:[r.a],resolve:{config:c.o},data:{title:"Edi\xe7\xe3o de Atividade",modal:!0}},{path:":id/consult",component:s,canActivate:[r.a],resolve:{config:c.o},data:{title:"Consulta a Atividade",modal:!0}}];class d{static#t=this.\u0275fac=function(e){return new(e||d)};static#e=this.\u0275mod=t.oAB({type:d});static#o=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(X),g.Bz]})}var $=l(58568),K=l(72133);class p{static#t=this.\u0275fac=function(e){return new(e||p)};static#e=this.\u0275mod=t.oAB({type:p});static#o=this.\u0275inj=t.cJS({imports:[f.ez,$.K,K.UX,d]})}}}]);