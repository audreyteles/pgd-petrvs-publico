import{n as de}from"./chunk-5IAOL3IR.js";import"./chunk-IVBXO46K.js";import{a as q}from"./chunk-UFS3OPCG.js";import"./chunk-76VPKZU2.js";import{a as Q,b as x}from"./chunk-RMYSPY7H.js";import{b as oe,d as ae,fa as me,i as ne,j as se,n as le,s as d,t as ue,w as j,x as R}from"./chunk-XHTD5OAS.js";import{b as V,n as re}from"./chunk-KODYKPWY.js";import"./chunk-ORJB5SCJ.js";import{Ba as F,Bb as P,Da as J,Fa as l,Fb as W,Ga as u,Ha as m,La as K,Ma as I,Na as D,Nc as $,Oc as O,P as U,Qc as ee,Sc as te,U as b,Ua as c,Ud as ie,V as T,Va as p,Wa as h,Ya as N,Z as B,_ as M,ba as g,h as f,ic as X,ma as s,na as _,oc as A,sc as Y,tc as E,uc as Z,va as C,xa as v,ya as L,za as n}from"./chunk-6YMI2QVU.js";var ye=["notificacoes"];function be(r,o){r&1&&(l(0,"div",11)(1,"div",12),m(2,"span",13),u()())}function ge(r,o){if(r&1&&(l(0,"div",14)(1,"separator",15)(2,"div",4),m(3,"input-switch",16)(4,"input-switch",17),u()(),l(5,"separator",18),m(6,"input-select",19),u()()),r&2){let y=D();s(),n("title","Prefer\xEAncias de exibi\xE7\xE3o "+y.lex.translate("usu\xE1rio")),s(2),n("size",12)("label","Ocultar menu lateral do sei no Controle de "+y.lex.translate("Processo")),s(),n("size",12),s(2),n("items",y.lookup.THEMES)}}function _e(r,o){if(r&1&&(l(0,"separator",20),m(1,"notificacoes-config",21,0),u()),r&2){let y=D();s(),n("entity",y.entity)("disabled",y.formDisabled)}}var w=(()=>{let o=class o extends q{constructor(i){super(i,Z,$),this.injector=i,this.etiquetas=!1,this.carregando=!1,this.toolbarButtons=[{label:"Resetar",icon:"bi bi-backspace",onClick:()=>{this.loading=!0,this.dao.update(this.usuarioId,{config:new E}).then(t=>{this.initializeData(this.form)}).finally(()=>{this.loading=!1})}}],this.validate=(t,e)=>null,this.titleEdit=t=>"Editando "+this.lex.translate("Prefer\xEAncia")+" "+this.lex.translate("do Usu\xE1rio")+": "+(t?.apelido||""),this.form=this.fh.FormBuilder({etiquetas:{default:[]},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null},theme:{default:null},ocultar_menu_sei:{default:!0},ocultar_container_petrvs:{default:!1}},this.cdRef,this.validate)}get isPanel(){return this.panel!=null}ngOnInit(){super.ngOnInit(),this.urlParams.get("id")&&(this.usuarioId=this.urlParams.get("id")),this.etiquetas=!!this.queryParams.etiquetas}loadData(i,t){return f(this,null,function*(){let e=Object.assign({},t.value);e=this.util.fillForm(e,i.config||{}),e=this.util.fillForm(e,i.notificacoes||{}),t.patchValue(e)})}initializeData(i){return f(this,null,function*(){this.carregando=!0;try{this.entity=yield this.dao.getById(this.usuarioId),yield this.loadData(this.entity,i)}finally{this.carregando=!1}})}saveData(i){return new Promise((t,e)=>{this.notificacoes?.saveData();let a=this.util.fill(new E,this.form.value);Promise.all([this.auth.updateUsuarioConfig(this.usuarioId,a),this.auth.updateUsuarioNotificacoes(this.usuarioId,this.entity.notificacoes)]).then(z=>{this.usuarioId==this.auth.usuario.id?this.auth.authSession().then(he=>t(!this.isPanel)).catch(e):t(!this.isPanel)}).catch(e)})}addItemHandleEtiquetas(){let i,t=this.form.controls.etiqueta_texto.value,e=this.util.textHash(t);return t?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,e)&&(i={key:e,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),i}};o.\u0275fac=function(t){return new(t||o)(_(g))},o.\u0275cmp=b({type:o,selectors:[["preferencia-form-usuario"]],viewQuery:function(t,e){if(t&1&&(c(d,5),c(ye,5)),t&2){let a;p(a=h())&&(e.editableForm=a.first),p(a=h())&&(e.notificacoes=a.first)}},inputs:{panel:"panel",usuarioId:"usuarioId"},features:[C],decls:12,vars:17,consts:[["notificacoes",""],["class","d-flex justify-content-center",4,"ngIf"],[3,"buttons"],[3,"submit","cancel","form","noButtons"],[1,"row"],["class","col-md-6",4,"ngIf"],["label","Etiquetas","multiselectStyle","inline","controlName","etiquetas",3,"size","addItemHandle"],["label","Texto","controlName","etiqueta_texto",3,"size"],["label","\xCDcone","icon","fas fa-sign-out-alt","controlName","etiqueta_icone","liveSearch","",3,"size","items"],["label","Cor","controlName","etiqueta_cor",3,"size"],["transparent","","title","Notifica\xE7\xF5es",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"col-md-6"],["transparent","",3,"title"],["scale","small","labelPosition","right","controlName","ocultar_menu_sei",3,"size","label"],["scale","small","labelPosition","right","label","Ocultar o container Petrvs","controlName","ocultar_container_petrvs",3,"size"],["transparent","","title","Tema"],["controlName","theme",3,"items"],["transparent","","title","Notifica\xE7\xF5es"],[3,"entity","disabled"]],template:function(t,e){t&1&&(v(0,be,3,0,"div",1),l(1,"div"),m(2,"toolbar",2),l(3,"editable-form",3),I("submit",function(){return e.onSaveData()})("cancel",function(){return e.onCancel()}),l(4,"div",4),v(5,ge,7,5,"div",5),l(6,"div")(7,"input-multiselect",6),m(8,"input-text",7)(9,"input-select",8)(10,"input-color",9),u()()(),v(11,_e,3,2,"separator",10),u()()),t&2&&(n("ngIf",e.carregando),s(),F("d-none",e.carregando),s(),n("buttons",e.toolbarButtons),s(),n("form",e.form)("noButtons",e.isPanel?"true":void 0),s(2),n("ngIf",!e.etiquetas),s(),J(e.etiquetas?"col-md-12":"col-md-6"),s(),n("size",12)("addItemHandle",e.addItemHandleEtiquetas.bind(e)),s(),n("size",5),L("maxlength",250),s(),n("size",3)("items",e.lookup.ICONES),s(),n("size",4),s(),n("ngIf",e.entity&&!e.etiquetas))},dependencies:[P,V,d,le,oe,ne,ae,se,ue,re]});let r=o;return r})();function Ie(r,o){r&1&&(l(0,"div",2)(1,"div",3),m(2,"span",4),u()())}var k=(()=>{let o=class o extends q{constructor(i){super(i,O,ee),this.injector=i,this.carregando=!1,this.validate=(t,e)=>null,this.titleEdit=t=>"Editando "+this.lex.translate("Prefer\xEAncia")+" "+this.lex.translate("da Entidade")+": "+(t?.nome||""),this.form=this.fh.FormBuilder({},this.cdRef,this.validate)}get isPanel(){return this.panel!=null}loadData(i,t){return f(this,null,function*(){let e=Object.assign({},t.value);t.patchValue(this.util.fillForm(e,i))})}initializeData(i){return f(this,null,function*(){this.carregando=!0;try{this.entity=new O,yield this.loadData(this.entity,i)}finally{this.carregando=!1}})}saveData(i){return new Promise((t,e)=>{t(!this.isPanel)})}};o.\u0275fac=function(t){return new(t||o)(_(g))},o.\u0275cmp=b({type:o,selectors:[["preferencia-form-petrvs"]],viewQuery:function(t,e){if(t&1&&c(d,5),t&2){let a;p(a=h())&&(e.editableForm=a.first)}},inputs:{panel:"panel"},features:[C],decls:4,vars:5,consts:[["class","d-flex justify-content-center",4,"ngIf"],[3,"submit","cancel","form","noButtons"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,e){t&1&&(v(0,Ie,3,0,"div",0),l(1,"div")(2,"editable-form",1),I("submit",function(){return e.onSaveData()})("cancel",function(){return e.onCancel()}),N(3," Em desenvolvimento "),u()()),t&2&&(n("ngIf",e.carregando),s(),F("d-none",e.carregando),s(),n("form",e.form)("noButtons",e.isPanel?"true":void 0))},dependencies:[P,d]});let r=o;return r})();function qe(r,o){if(r&1&&(l(0,"tab",9),N(1," Em desenvolvimento "),u()),r&2){let y=D();n("label",y.lex.translate("Entidade"))}}var fe=(()=>{let o=class o extends ie{constructor(i){super(i),this.injector=i,this.mensagemCarregando="Carregando dados do formul\xE1rio...",this.mensagemSalvando="Salvando dados do formul\xE1rio...",this.form=this.fh.FormBuilder({})}get forceInvalid(){return!!this.petrvs?.form?.invalid||!!this.usuario?.form?.invalid}onSaveData(){return f(this,null,function*(){if(this.forceInvalid)this.petrvs?.form?.invalid||(this.editableForm.error="Form Petrvs com erro"),this.usuario?.form?.invalid||(this.editableForm.error="Form do usu\xE1rio com erro");else{this.submitting=!0;try{yield Promise.all([this.petrvs?.onSaveData(),this.usuario?.onSaveData()]),this.dialog.alert("Aten\xE7\xE3o",`Algumas modifica\xE7\xF5es s\xF3 surtir\xE3o efeito ap\xF3s atualizar a p\xE1gina.
Por motivos de seguran\xE7a esse procedimento, de atualizar a pagina, dever\xE1 ser executado pelo usu\xE1rio.`),this.go.back()}catch(i){this.editableForm.error=i.message?i.message:i}finally{this.submitting=!1}}})}onCancel(){this.close()}};o.\u0275fac=function(t){return new(t||o)(_(g))},o.\u0275cmp=b({type:o,selectors:[["app-preferencia-form"]],viewQuery:function(t,e){if(t&1&&(c(d,5),c(k,5),c(w,5)),t&2){let a;p(a=h())&&(e.editableForm=a.first),p(a=h())&&(e.petrvs=a.first),p(a=h())&&(e.usuario=a.first)}},features:[C],decls:9,vars:6,consts:[["usuario",""],["petrvs",""],[3,"submit","cancel","form","forceInvalid","title"],["display","","right",""],["key","USUARIO",3,"label"],["panel","",3,"usuarioId"],["key","PETRVS","label","Petrvs"],["panel",""],["key","ENTIDADE",3,"label",4,"ngIf"],["key","ENTIDADE",3,"label"]],template:function(t,e){if(t&1){let a=K();l(0,"editable-form",2),I("submit",function(){return B(a),M(e.onSaveData())})("cancel",function(){return B(a),M(e.onCancel())}),l(1,"tabs",3)(2,"tab",4),m(3,"preferencia-form-usuario",5,0),u(),l(5,"tab",6),m(6,"preferencia-form-petrvs",7,1),u(),v(8,qe,2,1,"tab",8),u()()}t&2&&(n("form",e.form)("forceInvalid",e.forceInvalid)("title",e.isModal?"":e.title),s(2),n("label",e.lex.translate("Usu\xE1rio")),s(),n("usuarioId",e.auth.usuario.id),s(5),n("ngIf",e.auth.entidade))},dependencies:[P,d,R,j,k,w]});let r=o;return r})();function we(r,o){r&1&&(l(0,"div",6)(1,"div",7),m(2,"span",8),u()())}var ce=(()=>{let o=class o extends q{constructor(i){super(i,Y,te),this.injector=i,this.etiquetas=!1,this.carregando=!1,this.toolbarButtons=[{label:"Resetar",icon:"bi bi-backspace",onClick:()=>{this.loading=!0,this.dao.update(this.usuarioId,{config:new E}).then(t=>{this.initializeData(this.form)}).finally(()=>{this.loading=!1})}}],this.validate=(t,e)=>null,this.form=this.fh.FormBuilder({etiquetas:{default:[]},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null},theme:{default:null},ocultar_menu_sei:{default:!0},ocultar_container_petrvs:{default:!1}},this.cdRef,this.validate)}get isPanel(){return this.panel!=null}ngOnInit(){super.ngOnInit(),this.urlParams.get("id")&&(this.usuarioId=this.urlParams.get("id")),this.etiquetas=!!this.queryParams.etiquetas}loadData(i,t){return f(this,null,function*(){let e=Object.assign({},t.value);t.patchValue(e)})}initializeData(i){return f(this,null,function*(){this.carregando=!0;try{this.entity=yield this.dao.getById(this.usuarioId),yield this.loadData(this.entity,i)}finally{this.carregando=!1}})}saveData(i){return new Promise((t,e)=>{let a=this.util.fill(new E,this.form.value);Promise.all([this.auth.updateUsuarioConfig(this.usuarioId,a),this.auth.updateUsuarioNotificacoes(this.usuarioId,this.entity.notificacoes)]).then(z=>{this.usuarioId==this.auth.usuario.id?this.auth.authSession().then(he=>t(!this.isPanel)).catch(e):t(!this.isPanel)}).catch(e)})}addItemHandleEtiquetas(){let i,t=this.form.controls.etiqueta_texto.value,e=this.util.textHash(t);return t?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,e)&&(i={key:e,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),i}};o.\u0275fac=function(t){return new(t||o)(_(g))},o.\u0275cmp=b({type:o,selectors:[["app-preferencia-form-unidade"]],viewQuery:function(t,e){if(t&1&&c(d,5),t&2){let a;p(a=h())&&(e.editableForm=a.first)}},inputs:{panel:"panel",usuarioId:"usuarioId"},features:[C],decls:7,vars:7,consts:[["class","d-flex justify-content-center",4,"ngIf"],[3,"buttons"],[3,"submit","cancel","title","form","disabled"],["display","","right",""],["key","ETIQUETAS","label","Etiquetas"],["key","ATRIBUICOES","label","Atribui\xE7\xF5es"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,e){t&1&&(v(0,we,3,0,"div",0),l(1,"div"),m(2,"toolbar",1),l(3,"editable-form",2),I("submit",function(){return e.onSaveData()})("cancel",function(){return e.onCancel()}),l(4,"tabs",3),m(5,"tab",4)(6,"tab",5),u()()()),t&2&&(n("ngIf",e.carregando),s(),F("d-none",e.carregando),s(),n("buttons",e.toolbarButtons),s(),n("title",e.isModal?"":e.title)("form",e.form)("disabled",e.formDisabled))},dependencies:[P,V,d,R,j]});let r=o;return r})();var De=[{path:"",component:fe,canActivate:[Q],resolve:{config:x},runGuardsAndResolvers:"always",data:{title:"Prefer\xEAncias"}},{path:"usuario/:id",component:w,canActivate:[Q],resolve:{config:x},runGuardsAndResolvers:"always",data:{title:"Prefer\xEAncias do Usu\xE1rio"}},{path:"unidade/:id",component:ce,canActivate:[Q],resolve:{config:x},runGuardsAndResolvers:"always",data:{title:"Prefer\xEAncias da Unidade"}}],pe=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=T({type:o}),o.\u0275inj=U({imports:[A.forChild(De),A]});let r=o;return r})();var Et=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=T({type:o}),o.\u0275inj=U({imports:[W,me,X,pe,de]});let r=o;return r})();export{Et as PreferenciaModule};
