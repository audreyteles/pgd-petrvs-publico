import{a as et}from"./chunk-UFS3OPCG.js";import{b as it}from"./chunk-76VPKZU2.js";import{a as _,b as g}from"./chunk-RMYSPY7H.js";import{b as W,fa as at,i as Y,j as Z,o as tt,s as F,v as ot}from"./chunk-XHTD5OAS.js";import{b as X,c as $,d as J,h as K,s as O}from"./chunk-KODYKPWY.js";import"./chunk-ORJB5SCJ.js";import{Ab as x,Bb as Q,Fa as s,Fb as z,Ga as m,Ha as u,La as k,Ma as w,Na as B,P as y,Sc as T,U as E,Ua as f,V as C,Va as h,Wa as v,Xa as G,Ya as j,Z as S,_ as V,ba as I,h as M,ic as U,ma as l,na as b,oc as L,pc as H,sb as P,va as q,vd as D,xa as p,ya as A,za as n}from"./chunk-6YMI2QVU.js";var d=class extends H{constructor(i){super(),this.nome="",this.descricao="",this.tipo_indicador="PORCENTAGEM",this.lista_qualitativos=[],this.etiquetas=[],this.checklist=[],this.unidade_id=null,this.initialization(i)}};var mt=["itemQualitativo"];function ut(a,i){if(a&1&&(s(0,"div",6)(1,"div",7)(2,"label",8),j(3,"\xA0"),m(),s(4,"input-multiselect",9),u(5,"input-text",10),m()()()),a&2){let c=B();l(4),n("addItemHandle",c.addItemHandleItemQualitativo.bind(c)),l(),A("maxlength",250)}}var N=(()=>{let i=class i extends et{constructor(o){super(o,d,D),this.injector=o,this.listaQualitativos=[],this.etiquetas=[],this.checklist=[],this.validate=(e,t)=>{let r=null;return["nome","tipo_indicador","descricao"].indexOf(t)>=0&&!e.value?.length&&(r="Obrigat\xF3rio"),r},this.formValidation=e=>{let t=null;return this.form?.controls.tipo_indicador.value=="QUALITATIVO"&&!this.form?.controls.lista_qualitativos.value.length&&(t="Quando o tipo da entrega for Qualitativo, \xE9 necess\xE1ria a inclus\xE3o de ao menos um item de qualitativo!"),t},this.titleEdit=e=>"Editando "+this.lex.translate("Entrega")+": "+(e?.nome||""),this.unidadeDao=o.get(T),this.modalWidth=900,this.title="Inclus\xE3o de "+this.lex.translate("Entregas"),this.join=["unidade"],this.form=this.fh.FormBuilder({nome:{default:""},descricao:{default:""},tipo_indicador:{default:""},qualitativo:{default:""},lista_qualitativos:{default:[]},item_qualitativo:{default:""},unidade_id:{default:null},etiquetas:{default:[]},checklist:{default:[]},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null}},this.cdRef,this.validate),this.formChecklist=this.fh.FormBuilder({id:{default:""},texto:{default:""},checked:{default:!1}},this.cdRef)}loadData(o,e){let t=Object.assign({},e.value);e.patchValue(this.util.fillForm(t,o)),this.loadListaQualitativos()}initializeData(o){o.patchValue(new d)}saveData(o){return M(this,null,function*(){return new Promise((e,t)=>{let r=this.util.fill(new d,this.entity);e(this.util.fillForm(r,this.form.value))})})}incluirQualitativo(o){let e=o.trim().replace(" ","%"),t=this.form.controls.lista_qualitativos.value;!t.find(r=>r==e)&&e.length&&(this.clearErros(),t.push(e),this.form.controls.lista_qualitativos.setValue(t),this.form?.controls.qualitativo.setValue(""),this.loadListaQualitativos())}excluirQualitativo(o){let e=this.form.controls.lista_qualitativos.value;e.find(t=>t==o)&&(this.form.controls.lista_qualitativos.setValue(e.filter(t=>t!=o)),this.loadListaQualitativos())}loadListaQualitativos(){this.listaQualitativos=this.form.controls.lista_qualitativos.value||[]}addItemHandleItemQualitativo(){let o,e=this.form.controls.item_qualitativo.value,t=this.util.onlyAlphanumeric(e).toUpperCase();return e?.length&&this.util.validateLookupItem(this.form.controls.lista_qualitativos.value,t)&&(o={key:t,value:this.form.controls.item_qualitativo.value},this.form.controls.item_qualitativo.setValue("")),o}addItemHandleEtiquetas(){let o,e=this.form.controls.etiqueta_texto.value,t=this.util.textHash(e);return e?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,t)&&(o={key:t,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),o}};i.\u0275fac=function(e){return new(e||i)(b(I))},i.\u0275cmp=E({type:i,selectors:[["app-entrega-form"]],viewQuery:function(e,t){if(e&1&&(f(F,5),f(mt,5)),e&2){let r;h(r=v())&&(t.editableForm=r.first),h(r=v())&&(t.itemQualitativo=r.first)}},features:[q],decls:8,vars:13,consts:[["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],["controlName","nome","required","",3,"size","label"],["controlName","descricao","required","",3,"size","rows","label"],["icon","bi bi-arrow-up-right-circle","controlName","tipo_indicador",3,"size","label","items"],["class","row col-6",4,"ngIf"],[1,"row","col-6"],[1,"col-12"],["for","itemQualitativo",1,"radio","control-label"],["label","Itens Qualitativos","controlName","lista_qualitativos",3,"addItemHandle"],["icon","far fa-edit","controlName","item_qualitativo"]],template:function(e,t){e&1&&(s(0,"editable-form",0),w("submit",function(){return t.onSaveData()})("cancel",function(){return t.onCancel()}),s(1,"div",1)(2,"div",1),u(3,"input-text",2),m(),s(4,"div",1),u(5,"input-textarea",3)(6,"input-select",4),p(7,ut,6,2,"div",5),m()()()),e&2&&(n("form",t.form)("disabled",t.formDisabled)("title",t.isModal?"":t.title),l(3),n("size",12)("label","Nome "+t.lex.translate("entrega")),A("maxlength",1e3),l(2),n("size",7)("rows",2)("label","Descri\xE7\xE3o "+t.lex.translate("entrega")),l(),n("size",5)("label",t.lex.translate("Tipo de indicador"))("items",t.lookup.TIPO_INDICADOR),l(),n("ngIf",(t.form==null?null:t.form.controls.tipo_indicador.value)=="QUALITATIVO"||null))},dependencies:[Q,F,W,tt,Y,Z]});let a=i;return a})();function dt(a,i){a&1&&u(0,"toolbar")}function ct(a,i){if(a&1&&u(0,"badge",11),a&2){let c=i.$implicit;n("label",c.value)}}function pt(a,i){if(a&1&&(s(0,"div",9),p(1,ct,1,1,"badge",10),m()),a&2){let c=i.row;l(),n("ngForOf",c.lista_qualitativos)}}var rt=(()=>{let i=class i extends it{constructor(o){super(o,d,D),this.injector=o,this.filterWhere=e=>{let t=[],r=e.value;return r.nome?.length&&t.push(["nome","like","%"+r.nome.trim().replace(" ","%")+"%"]),r.tipo_indicador?.length&&t.push(["tipo_indicador","==",r.tipo_indicador]),t},this.join=["unidade:id,sigla,nome"],this.title=this.lex.translate("Modelos de Entregas"),this.code="MOD_ENTRG",this.unidadeDao=o.get(T),this.filter=this.fh.FormBuilder({nome:{default:""},tipo_indicador:{default:null}}),this.addOption(this.OPTION_INFORMACOES),this.addOption(this.OPTION_EXCLUIR,"MOD_ENTRG_EXCL"),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}};i.\u0275fac=function(e){return new(e||i)(b(I))},i.\u0275cmp=E({type:i,selectors:[["app-entrega-list"]],viewQuery:function(e,t){if(e&1&&f(O,5),e&2){let r;h(r=v())&&(t.grid=r.first)}},features:[q],decls:11,vars:16,consts:[["columnQualitativos",""],[3,"select","dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit"],[4,"ngIf"],["title","Nome","field","nome","orderBy","nome"],["title","Descri\xE7\xE3o","field","descricao","orderBy","descricao"],["type","select","field","tipo_indicador",3,"title","items"],["title","N\xEDveis",3,"template"],["type","options",3,"onEdit","options"],[3,"rows"],[1,"one-per-line"],["color","light","icon","bi bi-check2-square",3,"label",4,"ngFor","ngForOf"],["color","light","icon","bi bi-check2-square",3,"label"]],template:function(e,t){if(e&1){let r=k();s(0,"grid",1),w("select",function(lt){return S(r),V(t.onSelect(lt))}),p(1,dt,1,0,"toolbar",2),s(2,"columns"),u(3,"column",3)(4,"column",4)(5,"column",5),s(6,"column",6),p(7,pt,2,1,"ng-template",null,0,P),m(),u(9,"column",7),m(),u(10,"pagination",8),m()}if(e&2){let r=G(8);n("dao",t.dao)("add",t.add)("title",t.isModal?"":t.title)("orderBy",t.orderBy)("groupBy",t.groupBy)("join",t.join)("selectable",t.selectable)("hasAdd",t.auth.hasPermissionTo("MOD_ENTRG_INCL"))("hasEdit",t.auth.hasPermissionTo("MOD_ENTRG_EDT")),l(),n("ngIf",!t.selectable),l(4),n("title",t.lex.translate("Tipo do indicador"))("items",t.lookup.TIPO_INDICADOR),l(),n("template",r),l(3),n("onEdit",t.edit)("options",t.options),l(),n("rows",t.rowsLimit)}},dependencies:[x,Q,O,J,$,X,K,ot]});let a=i;return a})();var ft=[{path:"",component:rt,canActivate:[_],resolve:{config:g},runGuardsAndResolvers:"always",data:{title:"Entregas"}},{path:"new",component:N,canActivate:[_],resolve:{config:g},runGuardsAndResolvers:"always",data:{title:"Inclus\xE3o de Entrega",modal:!0}},{path:":id/edit",component:N,canActivate:[_],resolve:{config:g},runGuardsAndResolvers:"always",data:{title:"Edi\xE7\xE3o de Entrega",modal:!0}},{path:":id/consult",component:N,canActivate:[_],resolve:{config:g},runGuardsAndResolvers:"always",data:{title:"Consulta a Entrega",modal:!0}}],nt=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=C({type:i}),i.\u0275inj=y({imports:[L.forChild(ft),L]});let a=i;return a})();var ie=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=C({type:i}),i.\u0275inj=y({imports:[z,at,U,nt]});let a=i;return a})();export{ie as EntregaModule};
