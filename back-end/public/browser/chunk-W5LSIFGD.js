import{a as u}from"./chunk-CMOAXLFN.js";import{a as ae}from"./chunk-3OQ5NXFP.js";import{b as oe}from"./chunk-GEQ4G77C.js";import{a as M,b as L}from"./chunk-72ETMCRT.js";import{b as J,fa as re,h as ie,i as te,s as B}from"./chunk-JEWU6XZO.js";import{b as K,c as Y,d as Z,e as $,h as ee,s as A}from"./chunk-OWVQDN4P.js";import"./chunk-P4ZMML75.js";import{Bb as T,Bd as j,Fa as p,Fb as X,Ga as d,Ha as s,La as W,Ma as U,Na as I,P as v,U as g,Ua as h,V as y,Va as C,Wa as _,Xa as E,Ya as f,Z as x,Za as F,Zc as R,_ as Q,_a as S,ba as w,h as q,ic as H,ma as n,na as b,oc as N,rd as O,sb as P,va as D,xa as c,ya as k,za as l}from"./chunk-SDCVQHKS.js";var me=["tipo_capacidade"];function se(a,i){if(a&1&&(p(0,"h3",6),f(1),d()),a&2){let m=I();n(),F(m.title)}}var G=(()=>{let i=class i extends ae{constructor(o){super(o,u,O),this.injector=o,this.validate=(t,e)=>{let r=null;return["perfil_id"].indexOf(e)>=0&&!t.value?.length&&(r="Obrigat\xF3rio"),r},this.titleEdit=t=>"Editando "+this.lex.translate("Capacidade")+": "+(t?.perfil?.nome||"")+": "+(t?.tipo_capacidade?.codigo||""),this.tipoCapacidadeDao=o.get(j),this.perfilDao=o.get(R),this.form=this.fh.FormBuilder({perfil_id:{default:""},tipo_capacidade_id:{default:""}},this.cdRef,this.validate),this.join=["tipo_capacidade"]}loadData(o,t){return q(this,null,function*(){let e=Object.assign({},t.value);yield Promise.all([this.tipoCapacidade.loadSearch(o.tipo_capacidade||o.tipo_capacidade_id)]),t.patchValue(this.util.fillForm(e,o))})}initializeData(o){o.patchValue(new u)}saveData(o){return new Promise((t,e)=>{let r=this.util.fill(new u,this.entity);t(this.util.fillForm(r,this.form.value))})}};i.\u0275fac=function(t){return new(t||i)(b(w))},i.\u0275cmp=g({type:i,selectors:[["app-capacidade-form"]],viewQuery:function(t,e){if(t&1&&(h(B,5),h(me,5)),t&2){let r;C(r=_())&&(e.editableForm=r.first),C(r=_())&&(e.tipoCapacidade=r.first)}},features:[D],decls:7,vars:7,consts:[["tipo_capacidade",""],["class","my-2",4,"ngIf"],["initialFocus","tipo_capacidade_id",3,"submit","cancel","form"],[1,"row"],["controlName","tipo_capacidade_id",3,"size","dao"],["controlName","perfil_id","required","",3,"size","label","dao"],[1,"my-2"]],template:function(t,e){if(t&1){let r=W();c(0,se,2,1,"h3",1),p(1,"editable-form",2),U("submit",function(){return x(r),Q(e.onSaveData())})("cancel",function(){return x(r),Q(e.onCancel())}),p(2,"div",3),s(3,"input-search",4,0),d(),p(5,"div",3),s(6,"input-select",5),d()()}t&2&&(l("ngIf",!e.isModal),n(),l("form",e.form),n(2),l("size",12)("dao",e.tipoCapacidadeDao),n(3),l("size",6)("label",e.lex.translate("Perfil"))("dao",e.perfilDao))},dependencies:[T,B,ie,te]});let a=i;return a})();function ce(a,i){if(a&1&&(p(0,"h3",12),f(1),d()),a&2){let m=I();n(),F(m.title)}}function fe(a,i){if(a&1&&(p(0,"span"),f(1),d()),a&2){let m=i.row;n(),S(" ",m.perfil.nome,"")}}function ue(a,i){if(a&1&&(p(0,"span"),f(1),d()),a&2){let m=i.row;n(),S(" ",m.tipo_capacidade.codigo,"")}}function he(a,i){if(a&1&&(p(0,"span"),f(1),d()),a&2){let m=i.row;n(),S(" ",m.tipo_capacidade.descricao,"")}}var ne=(()=>{let i=class i extends oe{constructor(o){super(o,u,O),this.injector=o,this.filterWhere=t=>{let e=[];return t.value.descricao?.length&&e.push(["perfil_id","=",this.urlParams?.get("perfil_id")]),e},this.join=["tipo_capacidade","perfil"],this.tipoCapacidadeDao=o.get(j),this.perfilDao=o.get(R),this.title=this.lex.translate("Capacidades"),this.code="MOD_TIPO_CAP",this.filter=this.fh.FormBuilder({descricao:{default:""}}),this.auth.hasPermissionTo("MOD_TIPO_CAP")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xE7\xF5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_TIPO_CAP_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)})}ngOnInit(){super.ngOnInit(),this.perfilDao.getById(this.urlParams.get("perfil_id")).then(o=>{this.title=this.lex.translate("Capacidades")+" do perfil "+o?.nome,this.cdRef.detectChanges()})}filterClear(o){o.controls.descricao.setValue(""),super.filterClear(o)}};i.\u0275fac=function(t){return new(t||i)(b(w))},i.\u0275cmp=g({type:i,selectors:[["app-capacidade-list"]],viewQuery:function(t,e){if(t&1&&h(A,5),t&2){let r;C(r=_())&&(e.grid=r.first)}},features:[D],decls:18,vars:25,consts:[["columnPerfil",""],["columnCodCapacidade",""],["columnTipoCapacidade",""],["class","my-2",4,"ngIf"],[3,"dao","add","orderBy","groupBy","join"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","descricao",3,"size","label","control"],[3,"title","template"],["title","C\xF3digo",3,"template"],["type","options",3,"onEdit","onDelete"],[3,"rows"],[1,"my-2"]],template:function(t,e){if(t&1&&(c(0,ce,2,1,"h3",3),p(1,"grid",4),s(2,"toolbar"),p(3,"filter",5)(4,"div",6),s(5,"input-text",7),d()(),p(6,"columns")(7,"column",8),c(8,fe,2,1,"ng-template",null,0,P),d(),p(10,"column",9),c(11,ue,2,1,"ng-template",null,1,P),d(),p(13,"column",8),c(14,he,2,1,"ng-template",null,2,P),d(),s(16,"column",10),d(),s(17,"pagination",11),d()),t&2){let r=E(9),V=E(12),pe=E(15);l("ngIf",!e.isModal),n(),l("dao",e.dao)("add",e.add)("orderBy",e.orderBy)("groupBy",e.groupBy)("join",e.join),n(2),l("deleted",e.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",e.filter)("where",e.filterWhere)("submit",e.filterSubmit.bind(e))("clear",e.filterClear.bind(e))("collapseChange",e.filterCollapseChange.bind(e))("collapsed",e.filterCollapsed),n(2),l("size",12)("label",e.lex.translate("Capacidade"))("control",e.filter.controls.descricao),k("maxlength",250),n(2),l("title",e.lex.translate("Perfil"))("template",r),n(3),l("template",V),n(3),l("title",e.lex.translate("Capacidade"))("template",pe),n(3),l("onEdit",e.edit)("onDelete",e.delete),n(),l("rows",e.rowsLimit)}},dependencies:[T,A,Z,Y,$,K,ee,J]});let a=i;return a})();var Ce=[{path:"",component:ne,canActivate:[M],resolve:{config:L},runGuardsAndResolvers:"always",data:{title:"Capacidades"}},{path:"new",component:G,canActivate:[M],resolve:{config:L},runGuardsAndResolvers:"always",data:{title:"Inclus\xE3o de Capacidade",modal:!0}},{path:":id/edit",component:G,canActivate:[M],resolve:{config:L},runGuardsAndResolvers:"always",data:{title:"Edi\xE7\xE3o de Capacidade",modal:!0}}],le=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y({type:i}),i.\u0275inj=v({imports:[N.forChild(Ce),N]});let a=i;return a})();var ti=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y({type:i}),i.\u0275inj=v({imports:[X,re,H,le]});let a=i;return a})();export{ti as CapacidadeModule};
