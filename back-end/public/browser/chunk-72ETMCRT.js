import{Ec as m,O as h,R as c,Wc as P,ba as g,lc as _,n as b,o as j,xc as y,yc as l}from"./chunk-SDCVQHKS.js";var O=(()=>{let e=class e{get gb(){return this._gb=this._gb||this.injector.get(l),this._gb}get auth(){return this._auth=this._auth||this.injector.get(P),this._auth}get dialogs(){return this._dialogs=this._dialogs||this.injector.get(m),this._dialogs}get router(){return this._router=this._router||this.injector.get(_),this._router}constructor(t){this.injector=t}canActivate(t,o){let s=!!this.auth.usuario,r=s;return t.data.login?r=s?this.router.parseUrl(this.gb.initialRoute.join("/")):!0:!s&&this.gb.requireLogged?r=new Promise((a,I)=>{let f=d=>{if(d)a(!0);else if(this.gb.isToolbar)a(!this.gb.requireLogged);else{let p=this.router.parseUrl("/login"),q=Object.entries(t.queryParams||{}).reduce((n,u)=>(u[0]!="idroute"&&(n[u[0]]=u[1]),n),{}),S={route:t.url.map(n=>n.path),params:q};p.queryParams={redirectTo:JSON.stringify(S),noSession:!0},a(p)}};t.queryParams?.context&&this.gb.setContexto(t.queryParams?.context,!1),this.auth.authSession().then(f).catch(d=>f(!1))}):t.data.permission&&!this.auth.hasPermissionTo(t.data.permission)&&(this.dialogs.alert("Permiss\xE3o negada","O usu\xE1rio n\xE3o tem permiss\xE3o para acessar esse recurso"),r=!1),r}};e.\u0275fac=function(o){return new(o||e)(c(g))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var N=(()=>{let e=class e{get gb(){return this._gb=this._gb||this.injector.get(l),this._gb}get go(){return this._go=this._go||this.injector.get(y),this._go}get dialog(){return this._dialog=this._dialog||this.injector.get(m),this._dialog}constructor(t){this.injector=t}resolve(t,o){let s=j(!0),r=!1;return t.queryParams?.idroute?.length&&(!this.go.first&&(t.data.modal&&this.gb.useModals||t.queryParams?.modal)&&(this.dialog.modal(t),r=!0,s=b),this.go.config(t.queryParams?.idroute,{title:t.data.title,modal:r,path:t.pathFromRoot.map(a=>a.routeConfig?.path||"").join("/")})),s}};e.\u0275fac=function(o){return new(o||e)(c(g))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{O as a,N as b};
