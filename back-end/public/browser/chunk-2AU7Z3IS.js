import{a as W}from"./chunk-UFS3OPCG.js";import{b as X}from"./chunk-76VPKZU2.js";import{a as c,b as f}from"./chunk-RMYSPY7H.js";import{b as E,d as Q,fa as J,i as x,j as U,s as D}from"./chunk-XHTD5OAS.js";import{b as R,c as B,d as j,e as H,h as G,q as V,s as w}from"./chunk-KODYKPWY.js";import"./chunk-ORJB5SCJ.js";import{Bb as k,Fa as l,Fb as M,Ga as d,Ha as m,Ma as _,P as h,U as v,Ua as P,V as C,Va as T,Wa as I,ba as g,h as N,ic as A,ma as a,na as b,oc as q,od as O,pc as L,va as y,xa as S,ya as u,za as n}from"./chunk-6YMI2QVU.js";var p=class extends L{constructor(i){super(),this.nome="",this.codigo="",this.etiquetas=[],this.checklist=[],this.initialization(i)}};var F=(()=>{let i=class i extends W{constructor(o){super(o,p,O),this.injector=o,this.validate=(t,e)=>{let s=null;return["nome","codigo"].indexOf(e)>=0&&!t.value?.length&&(s="Obrigat\xF3rio"),s},this.titleEdit=t=>"Editando "+this.lex.translate("Tipo de Processo")+": "+(t?.nome||""),this.form=this.fh.FormBuilder({nome:{default:""},codigo:{default:""},etiquetas:{default:[]},checklist:{default:[]},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null},checklist_texto:{default:""}},this.cdRef,this.validate)}loadData(o,t){let e=Object.assign({},t.value);t.patchValue(this.util.fillForm(e,o))}initializeData(o){o.patchValue(new p)}saveData(o){return new Promise((t,e)=>{let s=this.util.fill(new p,this.entity);t(this.util.fillForm(s,this.form.value))})}addItemHandleChecklist(){let o,t=this.form.controls.checklist_texto.value,e=this.util.textHash(t);return t?.length&&this.util.validateLookupItem(this.form.controls.checklist.value,e)&&(o={key:e,value:this.form.controls.checklist_texto.value},this.form.controls.checklist_texto.setValue("")),o}addItemHandleEtiquetas(){let o,t=this.form.controls.etiqueta_texto.value,e=this.util.textHash(t);return t?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,e)&&(o={key:e,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),o}};i.\u0275fac=function(t){return new(t||i)(b(g))},i.\u0275cmp=v({type:i,selectors:[["app-tipo-processo-form"]],viewQuery:function(t,e){if(t&1&&P(D,5),t&2){let s;T(s=I())&&(e.editableForm=s.first)}},features:[y],decls:11,vars:18,consts:[["initialFocus","codigo",3,"submit","cancel","form","disabled","title"],[1,"row"],["label","C\xF3digo","controlName","codigo","required","",3,"size"],["label","Nome","controlName","nome","required","",3,"size"],["label","Etiquetas","controlName","etiquetas",3,"size","addItemHandle"],["label","Texto","controlName","etiqueta_texto",3,"size"],["label","\xCDcone","icon","fas fa-sign-out-alt","controlName","etiqueta_icone","liveSearch","",3,"size","items"],["label","Cor","controlName","etiqueta_cor",3,"size"],["label","Checklists","controlName","checklist",3,"size","addItemHandle"],["controlName","checklist_texto",3,"size"]],template:function(t,e){t&1&&(l(0,"editable-form",0),_("submit",function(){return e.onSaveData()})("cancel",function(){return e.onCancel()}),l(1,"div",1),m(2,"input-text",2)(3,"input-text",3),d(),l(4,"div",1)(5,"input-multiselect",4),m(6,"input-text",5)(7,"input-select",6)(8,"input-color",7),d(),l(9,"input-multiselect",8),m(10,"input-text",9),d()()()),t&2&&(n("form",e.form)("disabled",e.formDisabled)("title",e.isModal?"":e.title),a(2),n("size",3),u("maxlength",250),a(),n("size",9),u("maxlength",250),a(2),n("size",8)("addItemHandle",e.addItemHandleEtiquetas.bind(e)),a(),n("size",5),u("maxlength",250),a(),n("size",3)("items",e.lookup.ICONES),a(),n("size",4),a(),n("size",4)("addItemHandle",e.addItemHandleChecklist.bind(e)),a(),n("size",12),u("maxlength",250))},dependencies:[D,E,x,Q,U]});let r=i;return r})();function ee(r,i){r&1&&m(0,"toolbar")}var K=(()=>{let i=class i extends X{constructor(o){super(o,p,O),this.injector=o,this.toolbarButtons=[],this.filterWhere=t=>{let e=[],s=t.value;return s.nome?.length&&e.push(["nome","like","%"+s.nome.trim().replace(" ","%")+"%"]),e},this.allPages=o.get(V),this.title=this.lex.translate("Tipos de Processo"),this.code="MOD_TIPO_PROC",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.gb.isEmbedded&&this.toolbarButtons.push({icon:"bi bi-arrow-repeat",color:"btn-outline-primary",label:"Atualizar",onClick:this.atualizarPeloSei.bind(this)}),this.addOption(this.OPTION_INFORMACOES),this.addOption(this.OPTION_EXCLUIR,"MOD_TIPO_PROC_EXCL"),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}atualizarPeloSei(){return N(this,null,function*(){try{let o=yield this.allPages.getTiposProcessos()}catch{this.dialog.alert("Erro ao consultar Sei","Erro ao tentar obter a lista de Tipos de Processos do Sei!")}})}};i.\u0275fac=function(t){return new(t||i)(b(g))},i.\u0275cmp=v({type:i,selectors:[["app-tipo-processo-list"]],viewQuery:function(t,e){if(t&1&&P(w,5),t&2){let s;T(s=I())&&(e.grid=s.first)}},features:[y],decls:10,vars:22,consts:[[3,"select","dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit"],[4,"ngIf"],[3,"deleted","form","where","submit","collapseChange","collapsed"],[1,"row"],["controlName","nome","placeholder","Nome...",3,"size","label"],["title","C\xF3digo","field","codigo"],["title","Descri\xE7\xE3o","field","nome"],["type","options",3,"onEdit","options"],[3,"rows"]],template:function(t,e){t&1&&(l(0,"grid",0),_("select",function(Z){return e.onSelect(Z)}),S(1,ee,1,0,"toolbar",1),l(2,"filter",2)(3,"div",3),m(4,"input-text",4),d()(),l(5,"columns"),m(6,"column",5)(7,"column",6)(8,"column",7),d(),m(9,"pagination",8),d()),t&2&&(n("dao",e.dao)("add",e.add)("title",e.isModal?"":e.title)("orderBy",e.orderBy)("groupBy",e.groupBy)("join",e.join)("selectable",e.selectable)("hasAdd",e.auth.hasPermissionTo("MOD_TIPO_PROC_INCL"))("hasEdit",e.auth.hasPermissionTo("MOD_TIPO_PROC_EDT")),a(),n("ngIf",!e.selectable),a(),n("deleted",e.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",e.filter)("where",e.filterWhere)("submit",e.filterSubmit.bind(e))("collapseChange",e.filterCollapseChange.bind(e))("collapsed",!e.selectable&&e.filterCollapsed),a(2),n("size",12)("label","Nome "+e.lex.translate("tipo de documento")),u("maxlength",250),a(4),n("onEdit",e.edit)("options",e.options),a(),n("rows",e.rowsLimit))},dependencies:[k,w,j,B,H,R,G,E]});let r=i;return r})();var te=[{path:"",component:K,canActivate:[c],resolve:{config:f},runGuardsAndResolvers:"always",data:{title:"Tipos de Processo"}},{path:"new",component:F,canActivate:[c],resolve:{config:f},runGuardsAndResolvers:"always",data:{title:"Inclus\xE3o de Tipo de Processo",modal:!0}},{path:":id/edit",component:F,canActivate:[c],resolve:{config:f},runGuardsAndResolvers:"always",data:{title:"Edi\xE7\xE3o de Tipo de Processo",modal:!0}},{path:":id/consult",component:F,canActivate:[c],resolve:{config:f},runGuardsAndResolvers:"always",data:{title:"Consulta a Tipo de Processo",modal:!0}}],Y=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=C({type:i}),i.\u0275inj=h({imports:[q.forChild(te),q]});let r=i;return r})();var He=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=C({type:i}),i.\u0275inj=h({imports:[M,J,A,Y]});let r=i;return r})();export{He as TipoProcessoModule};
