import{a as _e}from"./chunk-4FFFIQPI.js";import{b as pe}from"./chunk-GEQ4G77C.js";import{r as ce,s as me}from"./chunk-OWVQDN4P.js";import{$a as te,$c as le,Dc as ie,Fa as s,Ga as d,Ha as A,La as N,Ma as D,Na as g,Nc as ae,Sc as oe,U as W,Ua as Y,Va as $,Vc as ne,Wa as ee,Xa as p,Ya as m,Z as y,Za as T,_ as L,_a as C,a as Q,ad as re,b as j,ba as J,bd as se,fd as de,ma as r,na as X,sb as _,td as ue,va as Z,xa as c,ya as K,za as l}from"./chunk-SDCVQHKS.js";function he(a,n){if(a&1){let o=N();s(0,"input-switch",49),D("change",function(e){y(o);let t=g(2);return L(t.onLotadosMinhaUnidadeChange(e))}),d()}if(a&2){let o=g(2);l("size",4)("control",o.filter.controls.lotados_minha_unidade)}}function Ae(a,n){if(a&1){let o=N();s(0,"toolbar"),c(1,he,1,2,"input-switch",47),s(2,"input-switch",48),D("change",function(e){y(o);let t=g();return L(t.onAgruparChange(e))}),d()()}if(a&2){let o=g();r(),l("ngIf",o.temAtribuicaoChefia),r(),l("size",4)("control",o.filter.controls.agrupar)}}function ge(a,n){if(a&1&&(s(0,"span",52),A(1,"i",53),m(2),d()),a&2){let o=g().row;r(2),C(" ",o.entregas==null?null:o.entregas.length,"")}}function fe(a,n){if(a&1&&c(0,ge,3,1,"span",51),a&2){let o=n.row;l("ngIf",o.entregas==null?null:o.entregas.length)}}function Te(a,n){if(a&1){let o=N();s(0,"plano-trabalho-list-entrega",54),D("atualizaPlanoTrabalhoEvent",function(e){y(o);let t=g(2);return L(((t.grid==null?null:t.grid.query)||t.query)==null?null:((t.grid==null?null:t.grid.query)||t.query).refreshId(e))}),d()}if(a&2){let o=n.row;l("entity",o)("planoTrabalhoEditavel",o._metadata.editavel||!1)}}function be(a,n){if(a&1&&(s(0,"column",50),c(1,fe,1,1,"ng-template",null,18,_)(3,Te,1,2,"ng-template",null,19,_),d()),a&2){let o=p(2),i=p(4),e=g();l("align","center")("hint",e.lex.translate("Entrega"))("template",o)("expandTemplate",i)}}function Oe(a,n){if(a&1&&(s(0,"order",55),m(1,"#ID"),d()),a&2){let o=n.header;l("header",o)}}function Se(a,n){if(a&1&&(s(0,"span"),m(1),d()),a&2){let o=n.row;r(),C(" ","#"+o.numero,"")}}function ve(a,n){if(a&1&&(s(0,"order",56),m(1,"Usu\xE1rio"),d(),A(2,"br"),m(3,"Programa ")),a&2){let o=n.header;l("header",o)}}function Ce(a,n){if(a&1&&(s(0,"span"),m(1),d(),A(2,"br")(3,"badge",57)),a&2){let o=n.row;r(),C(" ",(o.usuario==null?null:o.usuario.nome)||"",""),r(2),l("label",(o.programa==null?null:o.programa.nome)||"")}}function Ee(a,n){if(a&1&&(s(0,"span"),m(1),d()),a&2){let o=n.row;r(),C(" ",(o.unidade==null?null:o.unidade.sigla)||"","")}}function Re(a,n){if(a&1&&(s(0,"span"),m(1),d()),a&2){let o=n.row;r(),C(" ",(o.tipo_modalidade==null?null:o.tipo_modalidade.nome)||"","")}}function Ie(a,n){if(a&1&&(m(0," Vig\xEAncia de"),A(1,"br"),s(2,"order",58),m(3,"In\xEDcio"),d(),m(4,"a"),s(5,"order",59),m(6,"Fim"),d()),a&2){let o=n.header;r(2),l("header",o),r(3),l("header",o)}}function Pe(a,n){a&1&&A(0,"badge",62)}function ye(a,n){if(a&1&&(s(0,"small"),m(1),d(),s(2,"div",60),c(3,Pe,1,0,"badge",61),d()),a&2){let o=n.row,i=g();r(),te(" ",i.dao.getDateFormatted(o.data_inicio)," "," at\xE9 "+i.dao.getDateFormatted(o.data_fim),""),r(2),l("ngIf",i.planoTrabalhoService.estaVigente(o))}}function Le(a,n){if(a&1&&A(0,"documentos-badge",63),a&2){let o=n.row;l("documento",o.documento)("maxWidth",200)}}function Ne(a,n){a&1&&A(0,"badge",67)}function De(a,n){a&1&&A(0,"badge",68)}function Ue(a,n){if(a&1&&(A(0,"badge",64)(1,"br"),c(2,Ne,1,0,"badge",65)(3,De,1,0,"badge",66)),a&2){let o=n.row,i=g();l("color",i.lookup.getColor(i.lookup.PLANO_TRABALHO_STATUS,o.status))("icon",i.lookup.getIcon(i.lookup.PLANO_TRABALHO_STATUS,o.status))("label",i.lookup.getValue(i.lookup.PLANO_TRABALHO_STATUS,o.status)),r(2),l("ngIf",o.data_arquivamento),r(),l("ngIf",o.deleted_at)}}function Be(a,n){if(a&1&&m(0),a&2){let o=n.row;T(o.numero)}}function ke(a,n){if(a&1&&m(0),a&2){let o=n.row;T((o.usuario==null?null:o.usuario.matricula)||"")}}function xe(a,n){if(a&1&&m(0),a&2){let o=n.row;T((o.programa==null?null:o.programa.nome)||"")}}function Ve(a,n){if(a&1&&m(0),a&2){let o=n.row;T((o.unidade==null?null:o.unidade.nome)||"")}}function we(a,n){if(a&1&&m(0),a&2){let o=n.row;T((o.tipo_modalidade==null?null:o.tipo_modalidade.nome)||"")}}function qe(a,n){if(a&1&&m(0),a&2){let o=n.row,i=g();T(i.util.getDateTimeFormatted(o.data_inicio))}}function Me(a,n){if(a&1&&m(0),a&2){let o=n.row,i=g();T(i.util.getDateTimeFormatted(o.data_fim))}}function Fe(a,n){if(a&1&&m(0),a&2){let o=n.row;T(!(o.documento==null||o.documento.numero_processo==null)&&o.documento.numero_processo.length?o.documento==null?null:o.documento.numero_processo:"N\xE3o atribu\xEDdo")}}var nt=(()=>{let n=class n extends pe{constructor(i){super(i,le,de),this.injector=i,this.temAtribuicaoChefia=!1,this.routeStatus={route:["uteis","status"]},this.multiselectAllFields=["tipo_modalidade_id","usuario_id","unidade_id","documento_id"],this.relatorios=[{key:"PTR_LISTA",value:"Lista Planos de Trabalhos"}],this.botoes=[],this.planoTrabalhoEditavel=!1,this.DATAS_FILTRO=[{key:"VIGENTE",value:"Vigente"},{key:"NAOVIGENTE",value:"N\xE3o vigente"},{key:"INICIAM",value:"Iniciam"},{key:"FINALIZAM",value:"Finalizam"}],this.filterValidate=(e,t)=>{let u=null;return t=="data_filtro_inicio"&&e.value>this.filter?.controls.data_filtro_fim.value?u="Maior que fim":t=="data_filtro_fim"&&e.value<this.filter?.controls.data_filtro_inicio.value&&(u="Menor que in\xEDcio"),u},this.filterWhere=e=>{let t=[],u=e.value;return u.tipo_modalidade_id?.length&&t.push(["tipo_modalidade_id","==",u.tipo_modalidade_id]),u.data_filtro&&(t.push(["data_filtro","==",u.data_filtro]),t.push(["data_filtro_inicio","==",u.data_filtro_inicio]),t.push(["data_filtro_fim","==",u.data_filtro_fim])),u.usuario?.length&&t.push(["usuario.nome","like","%"+u.usuario.trim().replace(" ","%")+"%"]),u.unidade_id?.length&&t.push(["unidade_id","==",u.unidade_id]),u.status&&t.push(["status","==",u.status]),u.lotados_minha_unidade&&t.push(["lotados_minha_unidade","==",!0]),t.push(["incluir_arquivados","==",this.filter.controls.arquivados.value]),t},this.dynamicMultiselectMenu=e=>{let t=!!Object.keys(e).length,u=[];return Object.entries(e).forEach(([b,O])=>{this.planoTrabalhoService.needSign(O)||(t=!1)}),t&&u.push({label:"Assinar",icon:"bi bi-pen",onClick:this.assinar.bind(this)}),u},this.unidadeDao=i.get(oe),this.programaDao=i.get(se),this.documentoDao=i.get(ue),this.documentoService=i.get(ce),this.unidadeService=i.get(ne),this.utilService=i.get(ie),this.usuarioDao=i.get(ae),this.planoTrabalhoService=i.get(_e),this.tipoModalidadeDao=i.get(re),this.title=this.lex.translate("Planos de Trabalho"),this.code="MOD_PTR",this.filter=this.fh.FormBuilder({agrupar:{default:!0},lotados_minha_unidade:{default:!1},usuario:{default:""},status:{default:""},unidade_id:{default:null},arquivados:{default:!1},tipo_modalidade_id:{default:null},data_filtro:{default:null},data_filtro_inicio:{default:new Date},data_filtro_fim:{default:new Date}},this.cdRef,this.filterValidate),this.join=["unidade.entidade","unidade.gestor.usuario:id","usuario","programa.template_tcr","documento.assinaturas.usuario:id,nome,url_foto","tipo_modalidade","entregas.plano_entrega_entrega.entrega","entregas.plano_entrega_entrega.plano_entrega:id,unidade_id","entregas.plano_entrega_entrega.plano_entrega.unidade","entregas.entrega","entregas.reacoes.usuario:id,nome,apelido"],this.temAtribuicaoChefia=this.auth.isGestorAlgumaAreaTrabalho(!1),this.groupBy=[{field:"unidade.sigla",label:"Unidade"}],this.BOTAO_ALTERAR={label:"Alterar",icon:"bi bi-pencil-square",color:"btn-outline-info",onClick:this.edit.bind(this)},this.BOTAO_ARQUIVAR={label:"Arquivar",icon:"bi bi-inboxes",onClick:this.arquivar.bind(this)},this.BOTAO_ASSINAR={label:"Assinar",icon:"bi bi-pen",onClick:this.assinar.bind(this)},this.BOTAO_ATIVAR={label:"Ativar",icon:this.lookup.getIcon(this.lookup.PLANO_TRABALHO_STATUS,"ATIVO"),color:this.lookup.getColor(this.lookup.PLANO_TRABALHO_STATUS,"ATIVO"),onClick:this.ativar.bind(this)},this.BOTAO_CANCELAR_ASSINATURA={label:"Cancelar assinatura",icon:this.lookup.getIcon(this.lookup.PLANO_TRABALHO_STATUS,"AGUARDANDO_ASSINATURA ou INCLUIDO"),color:this.lookup.getColor(this.lookup.PLANO_TRABALHO_STATUS,"AGUARDANDO_ASSINATURA ou INCLUIDO"),onClick:this.cancelarAssinatura.bind(this)},this.BOTAO_CANCELAR_PLANO={label:"Cancelar plano",icon:this.lookup.getIcon(this.lookup.PLANO_TRABALHO_STATUS,"CANCELADO"),color:this.lookup.getColor(this.lookup.PLANO_TRABALHO_STATUS,"CANCELADO"),onClick:this.cancelarPlano.bind(this)},this.BOTAO_DESARQUIVAR={label:"Desarquivar",icon:"bi bi-reply",onClick:this.desarquivar.bind(this)},this.BOTAO_ENVIAR_ASSINATURA={label:"Enviar para assinatura",icon:this.lookup.getIcon(this.lookup.PLANO_TRABALHO_STATUS,"AGUARDANDO_ASSINATURA"),color:this.lookup.getColor(this.lookup.PLANO_TRABALHO_STATUS,"AGUARDANDO_ASSINATURA"),onClick:this.enviarParaAssinatura.bind(this)},this.BOTAO_INFORMACOES={label:"Informa\xE7\xF5es",icon:"bi bi-info-circle",onClick:this.consult.bind(this)},this.BOTAO_RELATORIO={label:"Relat\xF3rio",icon:"bi bi-file-pdf",onClick:e=>this.report(e,"PTR_LISTA_ENTREGAS")},this.BOTAO_TERMOS={label:"Termos",icon:"bi bi-file-earmark-check",onClick:(e=>this.go.navigate({route:["uteis","documentos","TCR",e.id]},{modalClose:t=>(this.grid?.query||this.query).refreshId(e.id),metadata:this.planoTrabalhoService.metadados(e)})).bind(this)},this.BOTAO_CONSOLIDACOES={label:"Consolida\xE7\xF5es",icon:this.entityService.getIcon("PlanoTrabalhoConsolidacao"),onClick:(e=>this.go.navigate({route:["gestao","plano-trabalho","consolidacao",e.usuario_id,e.id]},{modalClose:t=>(this.grid?.query||this.query).refreshId(e.id),modal:!0})).bind(this)},this.BOTAO_REATIVAR={label:"Reativar",icon:this.lookup.getIcon(this.lookup.PLANO_TRABALHO_STATUS,"ATIVO"),color:this.lookup.getColor(this.lookup.PLANO_TRABALHO_STATUS,"ATIVO"),onClick:this.reativar.bind(this)},this.BOTAO_SUSPENDER={label:"Suspender",icon:this.lookup.getIcon(this.lookup.PLANO_TRABALHO_STATUS,"SUSPENSO"),color:this.lookup.getColor(this.lookup.PLANO_TRABALHO_STATUS,"SUSPENSO"),onClick:this.suspender.bind(this)},this.botoes=[this.BOTAO_ALTERAR,this.BOTAO_ARQUIVAR,this.BOTAO_ASSINAR,this.BOTAO_ATIVAR,this.BOTAO_CANCELAR_ASSINATURA,this.BOTAO_CANCELAR_PLANO,this.BOTAO_DESARQUIVAR,this.BOTAO_ENVIAR_ASSINATURA,this.BOTAO_INFORMACOES,this.BOTAO_RELATORIO,this.BOTAO_TERMOS,this.BOTAO_CONSOLIDACOES,this.BOTAO_REATIVAR,this.BOTAO_SUSPENDER]}ngOnInit(){super.ngOnInit(),this.metadata?.minha_unidade&&this.filter?.controls.unidade_id.setValue(this.auth.unidade?.id),this.route.queryParams.subscribe(i=>{i.context=="EXECUCAO"&&this.filter&&this.filter?.controls.usuario.setValue(this.auth.usuario?.nome),i.context=="GESTAO"&&this.filter&&this.filter?.controls.unidade_id.setValue(this.auth.unidade?.id)})}dynamicOptions(i){let e=[];return this.botoes.forEach(t=>{this.botaoAtendeCondicoes(t,i)&&e.push(t)}),e.push(this.BOTAO_RELATORIO),e}dynamicButtons(i){let e=[],t=i;switch(this.planoTrabalhoService.situacaoPlano(t)){case"INCLUIDO":this.botaoAtendeCondicoes(this.BOTAO_ASSINAR,i)?e.push(this.BOTAO_ASSINAR):this.botaoAtendeCondicoes(this.BOTAO_ATIVAR,i)?e.push(this.BOTAO_ATIVAR):this.botaoAtendeCondicoes(this.BOTAO_ENVIAR_ASSINATURA,i)&&e.push(this.BOTAO_ENVIAR_ASSINATURA);break;case"AGUARDANDO_ASSINATURA":this.botaoAtendeCondicoes(this.BOTAO_ASSINAR,i)&&e.push(this.BOTAO_ASSINAR);break;case"ATIVO":break;case"CONCLUIDO":this.botaoAtendeCondicoes(this.BOTAO_ARQUIVAR,i)&&e.push(this.BOTAO_ARQUIVAR);break;case"SUSPENSO":break;case"ARQUIVADO":break;case"CANCELADO":this.botaoAtendeCondicoes(this.BOTAO_ARQUIVAR,i)&&e.push(this.BOTAO_ARQUIVAR);break}return e.length||e.push(this.BOTAO_INFORMACOES),e}filterClear(i){i.controls.usuario.setValue(""),i.controls.unidade_id.setValue(null),i.controls.status.setValue(null),i.controls.arquivados.setValue(!1),i.controls.tipo_modalidade_id.setValue(null),i.controls.data_filtro.setValue(null),i.controls.data_filtro_inicio.setValue(new Date),i.controls.data_filtro_fim.setValue(new Date),super.filterClear(i)}onAgruparChange(i){let e=this.filter.controls.agrupar.value;(e&&!this.groupBy?.length||!e&&this.groupBy?.length)&&(this.groupBy=e?[{field:"unidade.sigla",label:"Unidade"}]:[],this.grid.reloadFilter())}onLotadosMinhaUnidadeChange(i){this.grid.reloadFilter()}botaoAtendeCondicoes(i,e){let t=e._metadata?.assinaturasExigidas,u=[...t.gestores_entidade,...t.gestores_unidade_executora,...t.gestores_unidade_lotacao,...t.participante],b=this.planoTrabalhoService.assinaturasFaltantes(e._metadata?.assinaturasExigidas,e._metadata?.jaAssinaramTCR),O=!!b.participante.length||!!b.gestores_unidade_executora.length||!!b.gestores_unidade_lotacao.length||!!b.gestores_entidade.length,S=this.unidadeService.isGestorUnidade(e.unidade_id),E=this.planoTrabalhoService.usuarioAssinou(e._metadata?.jaAssinaramTCR),U=!!u?.includes(this.auth.usuario?.id),v=this.planoTrabalhoService.situacaoPlano(e)=="INCLUIDO",f=this.auth.usuario?.id==e.usuario_id,R=this.planoTrabalhoService.situacaoPlano(e)=="AGUARDANDO_ASSINATURA",B=this.planoTrabalhoService.situacaoPlano(e)=="ATIVO",V=this.planoTrabalhoService.situacaoPlano(e)=="CONCLUIDO",w=this.planoTrabalhoService.situacaoPlano(e)=="CANCELADO",q=this.planoTrabalhoService.situacaoPlano(e)=="EXCLUIDO",k=this.planoTrabalhoService.situacaoPlano(e)=="ARQUIVADO",M=this.planoTrabalhoService.situacaoPlano(e)=="SUSPENSO",I=e.entregas.length>0;if(i==this.BOTAO_INFORMACOES&&this.auth.hasPermissionTo("MOD_PTR"))return!0;if(q)return!1;{let h=!1,P=e._metadata?.atribuicoesLogadoUnidadeSuperior.gestor||e._metadata?.atribuicoesLogadoUnidadeSuperior.gestorSubstituto,x=e._metadata?.atribuicoesLogado.gestor||e._metadata?.atribuicoesLogado.gestorSubstituto;switch(i){case this.BOTAO_ALTERAR:f?h=e._metadata?.usuarioEhParticipanteHabilitado:e._metadata?.atribuicoesParticipante.gestor?h=P:e._metadata?.atribuicoesParticipante.gestorSubstituto?h=P||e._metadata?.atribuicoesLogado.gestor:e._metadata?.atribuicoesParticipante.gestorDelegado?h=x:h=x||e._metadata?.atribuicoesLogado.gestorDelegado;let F=this.auth.hasPermissionTo("MOD_PTR_EDT"),z=this.planoTrabalhoService.isValido(e),H=(v||R)&&h,G=B&&h&&this.auth.hasPermissionTo("MOD_PTR_EDT_ATV");return e._metadata=j(Q({},e._metadata),{editavel:F&&z&&(H||G)}),F&&z&&(H||G);case this.BOTAO_ARQUIVAR:return(V||w)&&!k&&(f||S);case this.BOTAO_ASSINAR:return(v||R)&&I&&(U&&!E);case this.BOTAO_ATIVAR:return e._metadata?.atribuicoesParticipante.gestor?h=P||e._metadata?.usuarioEhParticipanteHabilitado:e._metadata?.atribuicoesParticipante.gestorSubstituto?h=e._metadata?.atribuicoesLogado.gestor||f&&e._metadata?.usuarioEhParticipanteHabilitado||!f&&e._metadata?.atribuicoesLogado.gestorSubstituto:e._metadata?.atribuicoesParticipante.gestorDelegado?h=e._metadata?.atribuicoesLogado.gestor||e._metadata?.atribuicoesLogado.gestorSubstituto||f&&e._metadata?.usuarioEhParticipanteHabilitado:f?h=x||e._metadata?.usuarioEhParticipanteHabilitado:h=x,v&&h&&!t?.todas?.length&&I;case this.BOTAO_CANCELAR_ASSINATURA:return R&&E;case this.BOTAO_CANCELAR_PLANO:return!!e._metadata?.podeCancelar;case this.BOTAO_DESARQUIVAR:return k&&(f||S);case this.BOTAO_ENVIAR_ASSINATURA:return v&&(!U||E)&&O&&I&&(f||S);case this.BOTAO_REATIVAR:return M&&S;case this.BOTAO_SUSPENDER:return B&&S;case this.BOTAO_TERMOS:return this.auth.hasPermissionTo("MOD_PTR");case this.BOTAO_CONSOLIDACOES:return!0}}return!1}arquivar(i){this.go.navigate(this.routeStatus,{metadata:{tipo:"PlanoTrabalho",entity:Object.assign({},i,{arquivar:!0}),novoStatus:i.status,onClick:this.dao.arquivar.bind(this.dao)},title:"Arquivar Plano de Trabalho",modalClose:e=>{e&&(this.grid?.query||this.query).refreshId(i.id)}})}assinar(i){let e=i?[i.id]:Object.keys(this.grid.multiselected||{}),t=this.grid.items.filter(u=>e.includes(u.id)&&u.documento_id?.length).map(u=>u.documento);t.length?this.documentoService.sign(t).then(()=>(this.grid?.query||this.query).refreshId(i.id)):this.dialog.alert("Selecione","Nenhum plano selecionado!")}ativar(i){this.go.navigate(this.routeStatus,{metadata:{tipo:"PlanoTrabalho",entity:i,novoStatus:"ATIVO",onClick:this.dao.ativar.bind(this.dao)},title:"Ativar Plano de Trabalho",modalClose:e=>{e&&(this.grid?.query||this.query).refreshId(i.id)}})}cancelarAssinatura(i){this.go.navigate(this.routeStatus,{metadata:{tipo:"PlanoTrabalho",entity:i,novoStatus:"AGUARDANDO_ASSINATURA",onClick:this.dao.cancelarAssinatura.bind(this.dao)},title:"Cancelar Assinatura do TCR",modalClose:e=>{e&&(this.grid?.query||this.query).refreshId(i.id)}})}cancelarPlano(i){this.go.navigate(this.routeStatus,{metadata:{tipo:"PlanoTrabalho",entity:Object.assign({},i,{arquivar:!0}),exigeJustificativa:!0,novoStatus:"CANCELADO",onClick:this.dao.cancelarPlano.bind(this.dao)},title:"Cancelar Plano de Trabalho",modalClose:e=>{e&&(this.grid?.query||this.query).refreshId(i.id)}})}desarquivar(i){this.go.navigate(this.routeStatus,{metadata:{tipo:"PlanoTrabalho",entity:Object.assign({},i,{arquivar:!1}),novoStatus:i.status,onClick:this.dao.arquivar.bind(this.dao)},title:"Desarquivar Plano de Trabalho",modalClose:e=>{e&&(this.grid?.query||this.query).refreshId(i.id)}})}report(i,e){let t={id:i.id,join:["unidade.entidade","unidade.gestor.usuario:id","usuario","programa.template_tcr","tipo_modalidade","entregas.plano_entrega_entrega.entrega","entregas.plano_entrega_entrega.plano_entrega:id,unidade_id","entregas.plano_entrega_entrega.plano_entrega.unidade","entregas.entrega"]};this.grid?.buildRowReport(e,t)}enviarParaAssinatura(i){this.go.navigate(this.routeStatus,{metadata:{tipo:"PlanoTrabalho",entity:i,novoStatus:"AGUARDANDO_ASSINATURA",onClick:this.dao.enviarParaAssinatura.bind(this.dao)},title:"Disponibilizar Plano de Trabalho para assinatura",modalClose:e=>{e&&(this.grid?.query||this.query).refreshId(i.id)}})}reativar(i){this.go.navigate(this.routeStatus,{metadata:{tipo:"PlanoTrabalho",entity:i,novoStatus:"ATIVO",onClick:this.dao.reativar.bind(this.dao)},title:"Reativar Plano de Trabalho",modalClose:e=>{e&&(this.grid?.query||this.query).refreshId(i.id)}})}suspender(i){this.go.navigate(this.routeStatus,{metadata:{tipo:"PlanoTrabalho",entity:i,novoStatus:"SUSPENSO",onClick:this.dao.suspender.bind(this.dao)},title:"Suspender Plano de Trabalho",modalClose:e=>{e&&(this.grid?.query||this.query).refreshId(i.id)}})}};n.\u0275fac=function(e){return new(e||n)(X(J))},n.\u0275cmp=W({type:n,selectors:[["plano-trabalho-list"]],viewQuery:function(e,t){if(e&1&&Y(me,5),e&2){let u;$(u=ee())&&(t.grid=u.first)}},features:[Z],decls:69,vars:71,consts:[["titleNumero",""],["columnNumero",""],["titleUsuario",""],["columnUsuario",""],["columnUnidade",""],["columnModalidade",""],["titleVigencia",""],["columnInicioVigencia",""],["documento",""],["columnStatus",""],["reportNumero",""],["reportMatricula",""],["reportPrograma",""],["reportUnidade",""],["reportModalidade",""],["reportInicioVigencia",""],["reportFimVigencia",""],["reportTermoAdesao",""],["columnEntregas",""],["columnExpandedEntregas",""],["multiselect","",3,"select","dao","add","title","orderBy","groupBy","join","selectable","relatorios","hasDelete","hasAdd","hasEdit","dynamicMultiselectMenu","multiselectAllFields"],[4,"ngIf"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","usuario","placeholder","Usu\xE1rio",3,"size","label","control"],["controlName","unidade_id",3,"size","control","dao"],["label","Status","controlName","status","itemTodos","- Todos -",3,"size","items","control","valueTodos"],["label","Arquivados","controlName","arquivados","labelInfo","Listar tamb\xE9m os planos de trabalho arquivados",3,"size","control"],["controlName","tipo_modalidade_id",3,"size","control","dao"],["label","Data","itemTodos","- Nenhum -","controlName","data_filtro",3,"size","valueTodos","control","items"],["date","","label","In\xEDcio","controlName","data_filtro_inicio","labelInfo","Data in\xEDcio do per\xEDodo",3,"size","disabled","control"],["date","","label","Fim","controlName","data_filtro_fim","labelInfo","Data fim do per\xEDodo",3,"size","disabled","control"],["type","expand","icon","bi bi-list-check",3,"align","hint","template","expandTemplate",4,"ngIf"],[3,"titleTemplate","template","minWidth"],[3,"titleTemplate","template"],["title","Unidade",3,"template"],["title","Modalidade",3,"template"],[3,"title","template"],["title","Status",3,"template"],["type","options",3,"dynamicOptions","dynamicButtons"],["title","Numero",3,"template"],["title","Matricula usu\xE1rio",3,"template"],["title","Programa",3,"template"],["title","In\xEDcio vig\xEAncia",3,"template"],["title","Fim vig\xEAncia",3,"template"],["title","Termo de Ades\xE3o",3,"template"],[3,"rows"],["labelPosition","left","label","Lotados em minha unidade","controlName","lotados_minha_unidade",3,"size","control","change",4,"ngIf"],["labelPosition","left","label","Agrupar por unidade","controlName","agrupar",3,"change","size","control"],["labelPosition","left","label","Lotados em minha unidade","controlName","lotados_minha_unidade",3,"change","size","control"],["type","expand","icon","bi bi-list-check",3,"align","hint","template","expandTemplate"],["class","badge rounded-pill bg-light text-dark",4,"ngIf"],[1,"badge","rounded-pill","bg-light","text-dark"],[1,"bi","bi-list-check"],[3,"atualizaPlanoTrabalhoEvent","entity","planoTrabalhoEditavel"],["by","numero",3,"header"],["by","usuario.nome",3,"header"],["color","light","icon","bi bi-file-bar-graph",3,"label"],["by","data_inicio",3,"header"],["by","data_fim",3,"header"],[1,"d-block"],["color","#5362fb","icon","bi bi-calendar-check-fill","label","Vigente","hint","Vigente",4,"ngIf"],["color","#5362fb","icon","bi bi-calendar-check-fill","label","Vigente","hint","Vigente"],["signatures","","noRounded","","withLink","",3,"documento","maxWidth"],[3,"color","icon","label"],["color","warning","icon","bi bi-inboxes","label","Arquivado",4,"ngIf"],["color","danger","icon","bi bi-trash3","label","Exclu\xEDdo",4,"ngIf"],["color","warning","icon","bi bi-inboxes","label","Arquivado"],["color","danger","icon","bi bi-trash3","label","Exclu\xEDdo"]],template:function(e,t){if(e&1){let u=N();s(0,"grid",20),D("select",function(O){return y(u),L(t.onSelect(O))}),c(1,Ae,3,3,"toolbar",21),s(2,"filter",22)(3,"div",23),A(4,"input-text",24)(5,"input-search",25)(6,"input-select",26)(7,"input-switch",27),d(),s(8,"div",23),A(9,"input-search",28)(10,"input-select",29)(11,"input-datetime",30)(12,"input-datetime",31),d()(),s(13,"columns"),c(14,be,5,4,"column",32),s(15,"column",33),c(16,Oe,2,1,"ng-template",null,0,_)(18,Se,2,1,"ng-template",null,1,_),d(),s(20,"column",34),c(21,ve,4,1,"ng-template",null,2,_)(23,Ce,4,2,"ng-template",null,3,_),d(),s(25,"column",35),c(26,Ee,2,1,"ng-template",null,4,_),d(),s(28,"column",36),c(29,Re,2,1,"ng-template",null,5,_),d(),s(31,"column",34),c(32,Ie,7,2,"ng-template",null,6,_)(34,ye,4,3,"ng-template",null,7,_),d(),s(36,"column",37),c(37,Le,1,2,"ng-template",null,8,_),d(),s(39,"column",38),c(40,Ue,4,5,"ng-template",null,9,_),d(),A(42,"column",39),d(),s(43,"report")(44,"column",40),c(45,Be,1,1,"ng-template",null,10,_),d(),s(47,"column",41),c(48,ke,1,1,"ng-template",null,11,_),d(),s(50,"column",42),c(51,xe,1,1,"ng-template",null,12,_),d(),s(53,"column",35),c(54,Ve,1,1,"ng-template",null,13,_),d(),s(56,"column",36),c(57,we,1,1,"ng-template",null,14,_),d(),s(59,"column",43),c(60,qe,1,1,"ng-template",null,15,_),d(),s(62,"column",44),c(63,Me,1,1,"ng-template",null,16,_),d(),s(65,"column",45),c(66,Fe,1,1,"ng-template",null,17,_),d()(),A(68,"pagination",46),d()}if(e&2){let u=p(17),b=p(19),O=p(22),S=p(24),E=p(27),U=p(30),v=p(33),f=p(35),R=p(38),B=p(41),V=p(46),w=p(49),q=p(52),k=p(55),M=p(58),I=p(61),h=p(64),P=p(67);l("dao",t.dao)("add",t.add)("title",t.isModal?"":t.title)("orderBy",t.orderBy)("groupBy",t.groupBy)("join",t.join)("selectable",t.selectable)("relatorios",t.relatorios)("hasDelete",!1)("hasAdd",t.auth.hasPermissionTo("MOD_PTR_INCL"))("hasEdit",!1)("dynamicMultiselectMenu",t.dynamicMultiselectMenu.bind(t))("multiselectAllFields",t.multiselectAllFields),r(),l("ngIf",!t.selectable),r(),l("deleted",t.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",t.filter)("where",t.filterWhere)("submit",t.filterSubmit.bind(t))("clear",t.filterClear.bind(t))("collapseChange",t.filterCollapseChange.bind(t))("collapsed",!t.selectable&&t.filterCollapsed),r(2),l("size",4)("label",t.lex.translate("Usu\xE1rio"))("control",t.filter.controls.usuario),K("maxlength",250),r(),l("size",4)("control",t.filter.controls.unidade_id)("dao",t.unidadeDao),r(),l("size",2)("items",t.lookup.PLANO_TRABALHO_STATUS)("control",t.filter.controls.status)("valueTodos",null),r(),l("size",2)("control",t.filter.controls.arquivados),r(2),l("size",6)("control",t.filter.controls.tipo_modalidade_id)("dao",t.tipoModalidadeDao),r(),l("size",2)("valueTodos",null)("control",t.filter.controls.data_filtro)("items",t.DATAS_FILTRO),r(),l("size",2)("disabled",t.filter.controls.data_filtro.value==null?"true":void 0)("control",t.filter.controls.data_filtro_inicio),r(),l("size",2)("disabled",t.filter.controls.data_filtro.value==null?"true":void 0)("control",t.filter.controls.data_filtro_fim),r(2),l("ngIf",!t.selectable),r(),l("titleTemplate",u)("template",b)("minWidth",50),r(5),l("titleTemplate",O)("template",S),r(5),l("template",E),r(3),l("template",U),r(3),l("titleTemplate",v)("template",f),r(5),l("title",`Termo
Assinaturas`)("template",R),r(3),l("template",B),r(3),l("dynamicOptions",t.dynamicOptions.bind(t))("dynamicButtons",t.dynamicButtons.bind(t)),r(2),l("template",V),r(3),l("template",w),r(3),l("template",q),r(3),l("template",k),r(3),l("template",M),r(3),l("template",I),r(3),l("template",h),r(3),l("template",P),r(3),l("rows",t.rowsLimit)}}});let a=n;return a})();export{nt as a};
