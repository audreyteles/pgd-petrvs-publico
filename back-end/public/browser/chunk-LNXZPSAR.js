import{a as b}from"./chunk-2GPU6TK3.js";import{a as ee}from"./chunk-3OQ5NXFP.js";import{b as ie}from"./chunk-GEQ4G77C.js";import{a as g,b as y}from"./chunk-72ETMCRT.js";import{b as w,fa as te,g as Y,h as Z,i as $,l as x,s as N}from"./chunk-JEWU6XZO.js";import{b as W,c as X,d as H,e as J,h as K,s as A}from"./chunk-OWVQDN4P.js";import"./chunk-P4ZMML75.js";import{Bb as B,Fa as d,Fb as V,Ga as m,Ha as s,La as P,Ma as Q,Na as R,P as F,Pc as U,Qc as q,U as _,Ua as c,V as D,Va as u,Wa as f,Z as M,_ as T,ba as E,h as L,hd as h,ic as G,ma as l,na as v,oc as O,va as I,xa as j,ya as C,za as n}from"./chunk-SDCVQHKS.js";var ne=["cidade"],le=["entidade"];function se(a,i){if(a&1&&s(0,"input-search",14,1),a&2){let S=R();n("size",6)("dao",S.cidadeDao)}}function de(a,i){if(a&1&&s(0,"input-select",15),a&2){let S=R();n("size",6)("items",S.lookup.UF)}}function me(a,i){a&1&&s(0,"input-display",16),a&2&&n("size",6)}var z=(()=>{let i=class i extends ee{constructor(r){super(r,b,h),this.injector=r,this.validate=(t,e)=>{let o=null;return["nome"].indexOf(e)>=0&&!t.value?.length?o="Obrigat\xF3rio":e=="ano"&&this.form?.controls.recorrente.value==0&&!this.util.between(parseInt(t.value||0),{start:2e3,end:2100})&&(o="Inv\xE1lido"),o},this.titleEdit=t=>"Editando "+this.lex.translate("Feriado")+": "+(t?.nome||""),this.entidadeDao=r.get(q),this.cidadeDao=r.get(U),this.form=this.fh.FormBuilder({nome:{default:""},dia:{default:""},mes:{default:""},ano:{default:null},recorrente:{default:1},abrangencia:{default:"NACIONAL"},codigo_ibge:{default:null},cidade_id:{default:null},uf:{default:null},entidade_id:{default:null},data_inicio:{default:new Date},data_fim:{default:new Date}},this.cdRef,this.validate),this.join=["cidade","entidade"]}checkAnoDisabled(){let r=!this.form?.controls.recorrente.value;return!r&&this.form?.controls.ano.value!=null&&(this.form?.controls.ano.setValue(null),this.cdRef.markForCheck()),r?void 0:"true"}loadData(r,t){return L(this,null,function*(){let e=Object.assign({},t.value),o=this.util.fillForm(e,r);yield Promise.all([this.cidade?.loadSearch(r.cidade||r.cidade_id),this.entidade.loadSearch(r.entidade||r.entidade_id)]),t.patchValue(o)})}initializeData(r){this.loadData(new b,r)}saveData(r){return new Promise((t,e)=>{let o=this.util.fill(new b,this.entity);o=this.util.fillForm(o,this.form.value),o.abrangencia=="MUNICIPAL"&&this.cidade?.selectedEntity?o.codigo_ibge=(this.cidade?.selectedEntity).codigo_ibge:o.abrangencia=="ESTADUAL"?o.codigo_ibge=this.lookup.UF.find(p=>p.key==o.uf)?.code:o.codigo_ibge=null,t(o)})}};i.\u0275fac=function(t){return new(t||i)(v(E))},i.\u0275cmp=_({type:i,selectors:[["app-feriado-form"]],viewQuery:function(t,e){if(t&1&&(c(N,5),c(ne,5),c(le,5)),t&2){let o;u(o=f())&&(e.editableForm=o.first),u(o=f())&&(e.cidade=o.first),u(o=f())&&(e.entidade=o.first)}},features:[I],decls:15,vars:21,consts:[["entidade",""],["cidade",""],["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],["label","Descri\xE7\xE3o","icon","far fa-edit","controlName","nome","required","",3,"size"],["label","Abrang\xEAncia","controlName","abrangencia","icon","bi bi-globe-americas",3,"size","items"],["label","Recorrente","icon","fas fa-redo","controlName","recorrente","labelInfo","Se o feriado \xE9 recorrente todos os anos... se n\xE3o, informar o ano.",3,"size","items"],["label","Dia","icon","bi bi-calendar-date","controlName","dia",3,"size","items"],["label","M\xEAs","icon","bi bi-calendar-date","controlName","mes",3,"size","items"],["numbers","","label","Ano","icon","bi bi-calendar-date","controlName","ano",3,"size","disabled"],["controlName","cidade_id",3,"size","dao",4,"ngIf"],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items",4,"ngIf"],["label","\xC2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size",4,"ngIf"],["controlName","entidade_id",3,"size","dao"],["controlName","cidade_id",3,"size","dao"],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items"],["label","\xC2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size"]],template:function(t,e){if(t&1){let o=P();d(0,"editable-form",2),Q("submit",function(){return M(o),T(e.onSaveData())})("cancel",function(){return M(o),T(e.onCancel())}),d(1,"div",3),s(2,"input-text",4)(3,"input-select",5),m(),d(4,"div",3),s(5,"input-radio",6)(6,"input-select",7)(7,"input-select",8)(8,"input-text",9),m(),d(9,"div",3),j(10,se,2,2,"input-search",10)(11,de,1,2,"input-select",11)(12,me,1,1,"input-display",12),s(13,"input-search",13,0),m()()}t&2&&(n("form",e.form)("disabled",e.formDisabled)("title",e.isModal?"":e.title),l(2),n("size",8),C("maxlength",250),l(),n("size",4)("items",e.lookup.ABRANGENCIA),l(2),n("size",3)("items",e.lookup.SIMNAO),l(),n("size",3)("items",e.lookup.DIA_MES),l(),n("size",3)("items",e.lookup.MESES),l(),n("size",3)("disabled",e.checkAnoDisabled()),C("maxlength",250),l(2),n("ngIf",e.form.controls.abrangencia.value=="MUNICIPAL"),l(),n("ngIf",e.form.controls.abrangencia.value=="ESTADUAL"),l(),n("ngIf",e.form.controls.abrangencia.value=="NACIONAL"),l(),n("size",6)("dao",e.entidadeDao))},dependencies:[B,N,Y,Z,w,x,$]});let a=i;return a})();var oe=(()=>{let i=class i extends ie{constructor(r,t){super(r,b,h),this.injector=r,this.filterWhere=e=>{let o=[],p=e.value;return p.nome?.length&&o.push(["nome","like","%"+p.nome.trim().replace(" ","%")+"%"]),o},this.dao=t,this.title=this.lex.translate("Feriados"),this.code="MOD_FER",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.auth.hasPermissionTo("MOD_FER")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xE7\xF5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_FER_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(r){r.controls.nome.setValue(""),super.filterClear(r)}};i.\u0275fac=function(t){return new(t||i)(v(E),v(h))},i.\u0275cmp=_({type:i,selectors:[["app-feriado-list"]],viewQuery:function(t,e){if(t&1&&c(A,5),t&2){let o;u(o=f())&&(e.grid=o.first)}},features:[I],decls:12,vars:23,consts:[[3,"dao","add","title","orderBy","groupBy","join","hasAdd","hasEdit"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","nome",3,"size","label","control","placeholder"],["title","Descri\xE7\xE3o","field","nome"],["title","Dia","field","dia"],["title","M\xEAs","field","mes"],["title","Ano","field","ano"],["type","options",3,"onEdit","options"],[3,"rows"]],template:function(t,e){t&1&&(d(0,"grid",0),s(1,"toolbar"),d(2,"filter",1)(3,"div",2),s(4,"input-text",3),m()(),d(5,"columns"),s(6,"column",4)(7,"column",5)(8,"column",6)(9,"column",7)(10,"column",8),m(),s(11,"pagination",9),m()),t&2&&(n("dao",e.dao)("add",e.add)("title",e.isModal?"":e.title)("orderBy",e.orderBy)("groupBy",e.groupBy)("join",e.join)("hasAdd",e.auth.hasPermissionTo("MOD_FER_INCL"))("hasEdit",e.auth.hasPermissionTo("MOD_FER_EDT")),l(2),n("deleted",e.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",e.filter)("where",e.filterWhere)("submit",e.filterSubmit.bind(e))("clear",e.filterClear.bind(e))("collapseChange",e.filterCollapseChange.bind(e))("collapsed",e.filterCollapsed),l(2),n("size",12)("label","Nome "+e.lex.translate("Feriado"))("control",e.filter.controls.nome)("placeholder","Nome "+e.lex.translate("feriado")),C("maxlength",250),l(6),n("onEdit",e.edit)("options",e.options),l(),n("rows",e.rowsLimit))},dependencies:[A,H,X,J,W,K,w]});let a=i;return a})();var pe=[{path:"",component:oe,canActivate:[g],resolve:{config:y},runGuardsAndResolvers:"always",data:{title:"Feriados"}},{path:"new",component:z,canActivate:[g],resolve:{config:y},runGuardsAndResolvers:"always",data:{title:"Inclus\xE3o de Feriado",modal:!0}},{path:":id/edit",component:z,canActivate:[g],resolve:{config:y},runGuardsAndResolvers:"always",data:{title:"Edi\xE7\xE3o de Feriado",modal:!0}},{path:":id/consult",component:z,canActivate:[g],resolve:{config:y},runGuardsAndResolvers:"always",data:{title:"Consulta a Feriado",modal:!0}}],re=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=D({type:i}),i.\u0275inj=F({imports:[O.forChild(pe),O]});let a=i;return a})();var $e=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=D({type:i}),i.\u0275inj=F({imports:[V,te,G,re]});let a=i;return a})();export{$e as FeriadoModule};
