"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[20],{7020:(H,f,n)=>{n.r(f),n.d(f,{FeriadoModule:()=>X});var h=n(6610),p=n(1260),r=n(1620),d=n(6819),C=n(3308),v=n(1641),c=n(1143),G=n(7509),m=n(3844),E=n(24),A=n(9337),e=n(3279),D=n(4734),y=n(7363),b=n(16),N=n(9742),R=n(3678);const z=["cidade"],I=["entidade"];function M(l,F){if(1&l&&e.nrm(0,"input-search",14,1),2&l){const t=e.XpG();e.Y8G("size",6)("dao",t.cidadeDao)}}function j(l,F){if(1&l&&e.nrm(0,"input-select",15),2&l){const t=e.XpG();e.Y8G("size",6)("items",t.lookup.UF)}}function T(l,F){1&l&&e.nrm(0,"input-display",16),2&l&&e.Y8G("size",6)}let u=(()=>{class l extends E.n{constructor(t){super(t,m.j,c.E),this.injector=t,this.validate=(o,i)=>{let a=null;return["nome"].indexOf(i)>=0&&!o.value?.length?a="Obrigat\xf3rio":"ano"==i&&0==this.form?.controls.recorrente.value&&!this.util.between(parseInt(o.value||0),{start:2e3,end:2100})&&(a="Inv\xe1lido"),a},this.titleEdit=o=>"Editando "+this.lex.translate("Feriado")+": "+(o?.nome||""),this.entidadeDao=t.get(G.M),this.cidadeDao=t.get(A.a),this.form=this.fh.FormBuilder({nome:{default:""},dia:{default:""},mes:{default:""},ano:{default:null},recorrente:{default:1},abrangencia:{default:"NACIONAL"},codigo_ibge:{default:null},cidade_id:{default:null},uf:{default:null},entidade_id:{default:null},data_inicio:{default:new Date},data_fim:{default:new Date}},this.cdRef,this.validate),this.join=["cidade","entidade"]}checkAnoDisabled(){const t=!this.form?.controls.recorrente.value;return!t&&null!=this.form?.controls.ano.value&&(this.form?.controls.ano.setValue(null),this.cdRef.markForCheck()),t?void 0:"true"}loadData(t,o){var i=this;return(0,C.A)(function*(){let a=Object.assign({},o.value),s=i.util.fillForm(a,t);yield Promise.all([i.cidade?.loadSearch(t.cidade||t.cidade_id),i.entidade.loadSearch(t.entidade||t.entidade_id)]),o.patchValue(s)})()}initializeData(t){this.loadData(new m.j,t)}saveData(t){return new Promise((o,i)=>{let a=this.util.fill(new m.j,this.entity);a=this.util.fillForm(a,this.form.value),a.codigo_ibge="MUNICIPAL"==a.abrangencia&&this.cidade?.selectedEntity?(this.cidade?.selectedEntity).codigo_ibge:"ESTADUAL"==a.abrangencia?this.lookup.UF.find(s=>s.key==a.uf)?.code:null,o(a)})}static#e=this.\u0275fac=function(o){return new(o||l)(e.rXU(e.zZn))};static#i=this.\u0275cmp=e.VBU({type:l,selectors:[["app-feriado-form"]],viewQuery:function(o,i){if(1&o&&(e.GBs(v.Q,5),e.GBs(z,5),e.GBs(I,5)),2&o){let a;e.mGM(a=e.lsd())&&(i.editableForm=a.first),e.mGM(a=e.lsd())&&(i.cidade=a.first),e.mGM(a=e.lsd())&&(i.entidade=a.first)}},features:[e.Vt3],decls:15,vars:21,consts:[["entidade",""],["cidade",""],["initialFocus","nome",3,"submit","cancel","form","disabled","title"],[1,"row"],["label","Descri\xe7\xe3o","icon","far fa-edit","controlName","nome","required","",3,"size"],["label","Abrang\xeancia","controlName","abrangencia","icon","bi bi-globe-americas",3,"size","items"],["label","Recorrente","icon","fas fa-redo","controlName","recorrente","labelInfo","Se o feriado \xe9 recorrente todos os anos... se n\xe3o, informar o ano.",3,"size","items"],["label","Dia","icon","bi bi-calendar-date","controlName","dia",3,"size","items"],["label","M\xeas","icon","bi bi-calendar-date","controlName","mes",3,"size","items"],["numbers","","label","Ano","icon","bi bi-calendar-date","controlName","ano",3,"size","disabled"],["controlName","cidade_id",3,"size","dao",4,"ngIf"],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items",4,"ngIf"],["label","\xc2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size",4,"ngIf"],["controlName","entidade_id",3,"size","dao"],["controlName","cidade_id",3,"size","dao"],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items"],["label","\xc2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size"]],template:function(o,i){if(1&o){const a=e.RV6();e.j41(0,"editable-form",2),e.bIt("submit",function(){return e.eBV(a),e.Njj(i.onSaveData())})("cancel",function(){return e.eBV(a),e.Njj(i.onCancel())}),e.j41(1,"div",3),e.nrm(2,"input-text",4)(3,"input-select",5),e.k0s(),e.j41(4,"div",3),e.nrm(5,"input-radio",6)(6,"input-select",7)(7,"input-select",8)(8,"input-text",9),e.k0s(),e.j41(9,"div",3),e.DNE(10,M,2,2,"input-search",10)(11,j,1,2,"input-select",11)(12,T,1,1,"input-display",12),e.nrm(13,"input-search",13,0),e.k0s()()}2&o&&(e.Y8G("form",i.form)("disabled",i.formDisabled)("title",i.isModal?"":i.title),e.R7$(2),e.Y8G("size",8),e.BMQ("maxlength",250),e.R7$(),e.Y8G("size",4)("items",i.lookup.ABRANGENCIA),e.R7$(2),e.Y8G("size",3)("items",i.lookup.SIMNAO),e.R7$(),e.Y8G("size",3)("items",i.lookup.DIA_MES),e.R7$(),e.Y8G("size",3)("items",i.lookup.MESES),e.R7$(),e.Y8G("size",3)("disabled",i.checkAnoDisabled()),e.BMQ("maxlength",250),e.R7$(2),e.Y8G("ngIf","MUNICIPAL"==i.form.controls.abrangencia.value),e.R7$(),e.Y8G("ngIf","ESTADUAL"==i.form.controls.abrangencia.value),e.R7$(),e.Y8G("ngIf","NACIONAL"==i.form.controls.abrangencia.value),e.R7$(),e.Y8G("size",6)("dao",i.entidadeDao))},dependencies:[h.bT,v.Q,D.Q,y.O,b.H,N.t,R.K]})}return l})();var g=n(5611),B=n(9062),L=n(2034),O=n(5852),Y=n(7772),$=n(2305),U=n(6764);const S=[{path:"",component:(()=>{class l extends B.P{constructor(t,o){super(t,m.j,c.E),this.injector=t,this.filterWhere=i=>{let a=[],s=i.value;return s.nome?.length&&a.push(["nome","like","%"+s.nome.trim().replace(" ","%")+"%"]),a},this.dao=o,this.title=this.lex.translate("Feriados"),this.code="MOD_FER",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.auth.hasPermissionTo("MOD_FER")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_FER_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(t){t.controls.nome.setValue(""),super.filterClear(t)}static#e=this.\u0275fac=function(o){return new(o||l)(e.rXU(e.zZn),e.rXU(c.E))};static#i=this.\u0275cmp=e.VBU({type:l,selectors:[["app-feriado-list"]],viewQuery:function(o,i){if(1&o&&e.GBs(g._,5),2&o){let a;e.mGM(a=e.lsd())&&(i.grid=a.first)}},features:[e.Vt3],decls:12,vars:23,consts:[[3,"dao","add","title","orderBy","groupBy","join","hasAdd","hasEdit"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","nome",3,"size","label","control","placeholder"],["title","Descri\xe7\xe3o","field","nome"],["title","Dia","field","dia"],["title","M\xeas","field","mes"],["title","Ano","field","ano"],["type","options",3,"onEdit","options"],[3,"rows"]],template:function(o,i){1&o&&(e.j41(0,"grid",0),e.nrm(1,"toolbar"),e.j41(2,"filter",1)(3,"div",2),e.nrm(4,"input-text",3),e.k0s()(),e.j41(5,"columns"),e.nrm(6,"column",4)(7,"column",5)(8,"column",6)(9,"column",7)(10,"column",8),e.k0s(),e.nrm(11,"pagination",9),e.k0s()),2&o&&(e.Y8G("dao",i.dao)("add",i.add)("title",i.isModal?"":i.title)("orderBy",i.orderBy)("groupBy",i.groupBy)("join",i.join)("hasAdd",i.auth.hasPermissionTo("MOD_FER_INCL"))("hasEdit",i.auth.hasPermissionTo("MOD_FER_EDT")),e.R7$(2),e.Y8G("deleted",i.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",i.filter)("where",i.filterWhere)("submit",i.filterSubmit.bind(i))("clear",i.filterClear.bind(i))("collapseChange",i.filterCollapseChange.bind(i))("collapsed",i.filterCollapsed),e.R7$(2),e.Y8G("size",12)("label","Nome "+i.lex.translate("Feriado"))("control",i.filter.controls.nome)("placeholder","Nome "+i.lex.translate("feriado")),e.BMQ("maxlength",250),e.R7$(6),e.Y8G("onEdit",i.edit)("options",i.options),e.R7$(),e.Y8G("rows",i.rowsLimit))},dependencies:[g._,L.T,O.I,Y.i,$.H,U.e,b.H]})}return l})(),canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Feriados"}},{path:"new",component:u,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Feriado",modal:!0}},{path:":id/edit",component:u,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Feriado",modal:!0}},{path:":id/consult",component:u,canActivate:[r.q],resolve:{config:d.L},runGuardsAndResolvers:"always",data:{title:"Consulta a Feriado",modal:!0}}];let P=(()=>{class l{static#e=this.\u0275fac=function(o){return new(o||l)};static#i=this.\u0275mod=e.$C({type:l});static#t=this.\u0275inj=e.G2t({imports:[p.iI.forChild(S),p.iI]})}return l})();var V=n(8425),Q=n(8832);let X=(()=>{class l{static#e=this.\u0275fac=function(o){return new(o||l)};static#i=this.\u0275mod=e.$C({type:l});static#t=this.\u0275inj=e.G2t({imports:[h.MD,V.h,Q.X1,P]})}return l})()}}]);