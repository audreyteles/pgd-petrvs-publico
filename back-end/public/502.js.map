{"version":3,"file":"502.js","mappings":"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","sources":["./src/app/dao/unidade-integrante-atribuicao-dao.service.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.ts","./src/app/modules/configuracoes/unidade/unidade-form/unidade-form.component.html","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.ts","./src/app/modules/configuracoes/unidade/unidade-integrante/unidade-integrante.component.html","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-grid/unidade-list-grid.component.html","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.ts","./src/app/modules/configuracoes/unidade/unidade-list-map/unidade-list-map.component.html","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.ts","./src/app/modules/configuracoes/unidade/unidade-list/unidade-list.component.html","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.ts","./src/app/modules/configuracoes/unidade/unidade-merge/unidade-merge.component.html","./src/app/modules/configuracoes/unidade/unidade-routing.module.ts","./src/app/modules/configuracoes/unidade/unidade.module.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\nimport { DaoBaseService } from './dao-base.service';\nimport { IntegranteConsolidado } from '../models/unidade-integrante.model';\nimport { Unidade } from '../models/unidade.model';\nimport { Usuario } from '../models/usuario.model';\nimport { UnidadeIntegranteAtribuicao } from '../models/unidade-integrante-atribuicao.model';\n\nexport type LoadIntegrantesResult = {\n  integrantes: IntegranteConsolidado[],\n  unidade?: Unidade,\n  usuario?: Usuario\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UnidadeIntegranteAtribuicaoDaoService extends DaoBaseService<UnidadeIntegranteAtribuicao> {\n\n  constructor(protected injector: Injector) { \n    super(\"UnidadeIntegranteAtribuicao\", injector);\n    this.searchFields = [];\n  }  \n}\n\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { InputSwitchComponent } from 'src/app/components/input/input-switch/input-switch.component';\r\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UnidadeIntegranteAtribuicaoDaoService } from 'src/app/dao/unidade-integrante-atribuicao-dao.service';\r\nimport { UnidadeIntegranteDaoService } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Expediente } from 'src/app/models/expediente.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { NotificacaoService } from 'src/app/modules/uteis/notificacoes/notificacao.service';\r\nimport { NotificacoesConfigComponent } from 'src/app/modules/uteis/notificacoes/notificacoes-config/notificacoes-config.component';\r\nimport { TemplateDataset } from 'src/app/modules/uteis/templates/template.service';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\n\r\n@Component({\r\n  selector: 'app-unidade-form',\r\n  templateUrl: './unidade-form.component.html',\r\n  styleUrls: ['./unidade-form.component.scss']\r\n})\r\n\r\nexport class UnidadeFormComponent extends PageFormBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('unidade_pai', { static: false }) public unidadePai?: InputSearchComponent;\r\n  @ViewChild('cidade', { static: false }) public cidade?: InputSearchComponent;\r\n  @ViewChild('gestor', { static: false }) public gestor?: InputSearchComponent;\r\n  @ViewChild('gestorSubstituto', { static: false }) public gestorSubstituto?: InputSearchComponent;\r\n  @ViewChild('entidade', { static: false }) public entidade?: InputSearchComponent;\r\n  @ViewChild('notificacoes', { static: false }) public notificacoes?: NotificacoesConfigComponent;\r\n  @ViewChild('instituidora', { static: false }) public instituidora?: InputSwitchComponent;\r\n\r\n  public form: FormGroup;\r\n  public formGestor: FormGroup;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public cidadeDao: CidadeDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public planoTrabalhoDao: PlanoTrabalhoDaoService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public integranteAtribuicaoDao: UnidadeIntegranteAtribuicaoDaoService;\r\n  public notificacao: NotificacaoService;\r\n  public planoDataset: TemplateDataset[];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.integranteAtribuicaoDao = injector.get<UnidadeIntegranteAtribuicaoDaoService>(UnidadeIntegranteAtribuicaoDaoService);\r\n    this.notificacao = injector.get<NotificacaoService>(NotificacaoService);\r\n    this.modalWidth = 1200;\r\n    this.planoDataset = this.planoTrabalhoDao.dataset();\r\n    this.form = this.fh.FormBuilder({\r\n      codigo: {default: \"\"},\r\n      sigla: {default: \"\"},\r\n      nome: {default: \"\"},\r\n      path: {default: \"\"},\r\n      cidade_id: {default: \"\"},\r\n      uf: {default: \"\"},\r\n      instituidora: {default: 0},\r\n      atividades_arquivamento_automatico: {default: 1},\r\n      distribuicao_forma_contagem_prazos: {default: \"DIAS_UTEIS\"},\r\n      entrega_forma_contagem_prazos: {default: \"HORAS_UTEIS\"},\r\n      notificacoes: {default: {}},\r\n      etiquetas: {default: []},\r\n      unidade_pai_id: {default: \"\"},\r\n      entidade_id: {default: this.auth.unidade?.entidade_id},\r\n      etiqueta_texto: {default: \"\"},\r\n      etiqueta_icone: {default: null},\r\n      etiqueta_cor: {default: null},\r\n      expediente24: {default: true},\r\n      expediente: {default: null},\r\n      usar_expediente_entidade: {default: false},\r\n      texto_complementar_plano: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n    this.formGestor = this.fh.FormBuilder({\r\n      gestor_id: {default: \"\"},\r\n      gestor_substituto_id: {default: \"\"}\r\n    }, this.cdRef);\r\n    this.join =  [\"cidade\", \"entidade\", \"gestor.usuario:id,nome\", \"gestor_substituto.usuario:id,nome\", \"notificacoes_templates\", \"gestor.gestor:id\", \"gestor_substituto.gestor_substituto:id\"];\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if(['codigo', 'sigla', 'nome', 'cidade_id', 'entidade_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public get is24hrs(): string | undefined {\r\n    return this.form?.controls.expediente24.value ? \"\" : undefined;\r\n  }\r\n\r\n  public onUsarExpedienteEntidadeChange() {\r\n    this.form.controls.expediente.setValue( this.form.controls.usar_expediente_entidade.value ? null : this.form.controls.expediente.value || new Expediente());\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.form.controls.etiqueta_texto.value;\r\n    const key = this.util.textHash(value);\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.etiquetas.value, key)) {\r\n      result = {\r\n        key: key,\r\n        value: this.form.controls.etiqueta_texto.value,\r\n        color: this.form.controls.etiqueta_cor.value,\r\n        icon: this.form.controls.etiqueta_icone.value\r\n      };\r\n      this.form.controls.etiqueta_texto.setValue(\"\");\r\n      this.form.controls.etiqueta_icone.setValue(null);\r\n      this.form.controls.etiqueta_cor.setValue(null);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  public async loadData(entity: Unidade, form: FormGroup) {\r\n    let formValue = Object.assign({}, form.value);\r\n    await Promise.all ([\r\n      this.unidadePai!.loadSearch(entity.unidade_pai || entity.unidade_pai_id),\r\n      this.cidade!.loadSearch(entity.cidade || entity.cidade_id),\r\n      this.gestor!.loadSearch(entity?.gestor?.usuario || entity.gestor?.usuario!.id),\r\n      this.gestorSubstituto!.loadSearch(entity?.gestor_substituto?.usuario || entity.gestor_substituto?.usuario!.id),\r\n      this.entidade!.loadSearch(entity.entidade || entity.entidade_id)\r\n    ]);\r\n    this.form.patchValue(this.util.fillForm(formValue, {...entity, ...{\r\n    }}));\r\n  }\r\n\r\n  public initializeData(form: FormGroup): void {\r\n    this.entity = new Unidade({ entidade_id: this.auth.unidade?.entidade_id, entidade: this.auth.unidade?.entidade });\r\n    this.loadData(this.entity, form);\r\n  }\r\n\r\n  public saveData(form: IIndexable): Promise<boolean> {\r\n    return new Promise<boolean>((resolve, reject) => {\r\n      this.notificacoes!.saveData();\r\n      let unidade: Unidade = this.util.fill(new Unidade(), this.entity!);\r\n      unidade = this.util.fillForm(unidade, this.form!.value);\r\n      unidade.notificacoes = this.entity!.notificacoes;\r\n      let salvarGestor = !!this.formGestor!.controls.gestor_id?.value && (!this.entity?.gestor?.id.length || (!!this.entity?.gestor?.id.length && this.entity?.gestor?.usuario?.id != this.formGestor!.controls.gestor_id?.value));\r\n      let salvarGestorSubstituto = !!this.formGestor!.controls.gestor_substituto_id?.value && (!this.entity?.gestor_substituto?.id.length || (!!this.entity?.gestor_substituto?.id.length && this.entity?.gestor_substituto?.usuario?.id != this.formGestor!.controls.gestor_substituto_id?.value));\r\n      let apagarGestor = !this.formGestor!.controls.gestor_id?.value && !!this.entity?.gestor?.id.length;\r\n      let apagarGestorSubstituto = !this.formGestor!.controls.gestor_substituto_id?.value && !!this.entity?.gestor_substituto?.id.length;\r\n      this.dao?.save(unidade, [\"gestor.gestor:id\",\"gestor_substituto.gestor_substituto:id\"]).then(async unidade => {\r\n        this.entity = unidade;\r\n        if(salvarGestor) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_id!.value, 'atribuicoes': [\"GESTOR\"]}]);\r\n        if(salvarGestorSubstituto) await this.integranteDao.saveIntegrante([{'unidade_id': this.entity.id, 'usuario_id': this.formGestor!.controls.gestor_substituto_id!.value, 'atribuicoes': [\"GESTOR_SUBSTITUTO\"]}]);\r\n        if(apagarGestor) await this.integranteAtribuicaoDao.delete(this.entity?.gestor!.gestor!.id);\r\n        if(apagarGestorSubstituto) await this.integranteAtribuicaoDao.delete(this.entity?.gestor_substituto!.gestor_substituto!.id);\r\n        resolve(true);\r\n      });\r\n    });\r\n  }\r\n\r\n  public titleEdit = (entity: Unidade): string => {\r\n    return \"Editando \" + this.lex.translate(\"Unidade\") + ': ' + (entity?.sigla || \"\");\r\n  }\r\n\r\n  public onChangeInstituidora(){\r\n\r\n  }\r\n\r\n}\r\n","<editable-form [title]=\"isModal ? '' : title\" [form]=\"form!\" [disabled]=\"formDisabled\" initialFocus=\"codigo\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <tabs display right>\r\n        <tab key=\"PRINCIPAL\" label=\"Principal\">\r\n            <div class=\"row\">\r\n                <input-switch #instituidora [size]=\"1\" [label]=\"instituidora.value ? 'Instit.' : 'Exec.'\" labelClass=\"text-nowrap\" controlName=\"instituidora\" [labelInfo]=\"'Se a ' + lex.noun('unidade') + ' é instituidora ou executora de Programas.'\" (change)=\"onChangeInstituidora()\"></input-switch>\r\n                <input-text [size]=\"2\" label=\"Código\" controlName=\"codigo\" required></input-text>\r\n                <input-text [size]=\"2\" label=\"Sigla\" controlName=\"sigla\" required></input-text>\r\n                <input-text [size]=\"7\" label=\"Nome\" controlName=\"nome\" required></input-text>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #gestor label=\"Gestor\" [size]=\"6\" [emptyValue]=\"null\" [control]=\"formGestor!.controls.gestor_id\" controlName=\"gestor_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável pela unidade\"></input-search>\r\n                <input-search #gestorSubstituto label=\"Gestor Substituto\" [size]=\"6\" [emptyValue]=\"null\" [control]=\"formGestor!.controls.gestor_substituto_id\" controlName=\"gestor_substituto_id\" [dao]=\"usuarioDao\" labelInfo=\"Responsável substituto pela unidade\"></input-search>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-search #cidade [size]=\"4\" controlName=\"cidade_id\" [dao]=\"cidadeDao\" required></input-search>\r\n                <input-search #unidade_pai [size]=\"4\" [label]=\"lex.translate('Unidade') + ' pai'\" controlName=\"unidade_pai_id\" [where]=\"[['entidade_id', '==', form.controls.entidade_id.value]]\" [dao]=\"dao!\"></input-search>\r\n                <input-search #entidade [size]=\"4\" disabled controlName=\"entidade_id\" [dao]=\"entidadeDao\" required></input-search>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"CONFIGURACOES\" label=\"Configurações\">\r\n            <div class=\"row\">\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Distribuição')\" controlName=\"distribuicao_forma_contagem_prazos\" [items]=\"lookup.DIA_HORA_CORRIDOS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos para a distribuição (lançamento da demanda).\"></input-select>\r\n                <input-select [size]=\"4\" [label]=\"'Contagem ' + lex.translate('Prazo de Entrega')\" controlName=\"entrega_forma_contagem_prazos\" [items]=\"lookup.HORAS_CORRIDAS_OU_UTEIS\" labelInfo=\"A forma da contagem dos prazos na entrega da demanda (data da entrega e tempo despendido)\"></input-select>\r\n                <input-radio [size]=\"4\" label=\"Arquivamento automático\" controlName=\"atividades_arquivamento_automatico\" [items]=\"lookup.SIMNAO\" labelInfo=\"Se após a avaliação, arquivará automaticamente a atividade.\"></input-radio>\r\n            </div>\r\n            <separator></separator>\r\n            <div clss=\"row\">\r\n                <input-multiselect label=\"Etiquetas\" multiselectStyle=\"inline\" [maxItemWidth]=\"250\" controlName=\"etiquetas\" [size]=\"12\" [addItemHandle]=\"addItemHandle.bind(this)\">\r\n                    <input-text [size]=\"6\" label=\"Texto\" controlName=\"etiqueta_texto\"></input-text>\r\n                    <input-select [size]=\"3\" label=\"Ícone\" controlName=\"etiqueta_icone\" [items]=\"lookup.ICONES\"></input-select>\r\n                    <input-color [size]=\"3\" label=\"Cor\" controlName=\"etiqueta_cor\"></input-color>\r\n                </input-multiselect>\r\n            </div>\r\n            <separator></separator>\r\n            <div class=\"row\">\r\n                <input-editor [label]=\"'Texto complementar ' + lex.translate('Plano de Trabalho')\" controlName=\"texto_complementar_plano\" [dataset]=\"planoDataset\"></input-editor>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"EXPEDIENTE\" label=\"Expediente\">\r\n            <div class=\"row\">\r\n                <input-switch #usarExpedienteEntidade [label]=\"'Usar o calendário ' + lex.translate('entidade')\" labelPosition=\"right\" icon=\"bi bi-check2\" [size]=\"12\" (change)=\"onUsarExpedienteEntidadeChange()\" controlName=\"usar_expediente_entidade\" labelInfo=\"Se utiliza o expediente configurado na entidade ao invés de especificar na unidade\"></input-switch>\r\n            </div>\r\n            <calendar-expediente #expediente [disabled]=\"form!.controls.usar_expediente_entidade.value ? undefined : 'true'\" [expedienteDisabled]=\"entity?.entidade?.expediente\" [control]=\"form!.controls.expediente\"></calendar-expediente>\r\n        </tab>\r\n        <tab *ngIf=\"entity\" key=\"NOTIFICACOES\" label=\"Notificações\">\r\n            <notificacoes-config #notificacoes [unidadeId]=\"entity.id.length ? entity!.id : 'ADD'\" [entity]=\"entity!\" [disabled]=\"formDisabled\"></notificacoes-config>\r\n            <!--div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                    <separator transparent title=\"Meios de notificação\"></separator>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" label=\"Notificar no Petrvs\" controlName=\"enviar_petrvs\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" label=\"Notificar por e-mail\" controlName=\"enviar_email\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" label=\"Notificar por Whatsapp\" controlName=\"enviar_whatsapp\"></input-switch>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                    <separator transparent title=\"Tipos de notificação\"></separator>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar distribuição ' + lex.translate('demanda')\" controlName=\"notifica_demanda_distribuicao\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar conclusão ' + lex.translate('demanda')\" controlName=\"notifica_demanda_conclusao\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar avaliação ' + lex.translate('demanda')\" controlName=\"notifica_demanda_avaliacao\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar modificação ' + lex.translate('demanda')\" controlName=\"notifica_demanda_modificacao\"></input-switch>\r\n                    <input-switch [size]=\"12\" scale=\"small\" labelPosition=\"right\" [label]=\"'Notificar comentário ' + lex.translate('demanda')\" controlName=\"notifica_demanda_comentario\"></input-switch>\r\n                </div>\r\n            </div>\r\n            <separator transparent [title]=\"lex.translate('Template',true) + ' das mensagens'\"></separator>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na criação ' + lex.translate('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaDistribuicao\" controlName=\"template_demanda_distribuicao\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na conclusão ' + lex.translate('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaConclusao\" controlName=\"template_demanda_conclusao\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na avaliação ' + lex.translate('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaAvaliacao\" controlName=\"template_demanda_avaliacao\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na modificação ' + lex.translate('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaModificacao\" controlName=\"template_demanda_modificacao\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div>\r\n            <div class=\"row\">\r\n                <input-textarea [size]=\"12\" [rows]=\"3\" [label]=\"'Texto na inclusão de comentário ' + lex.translate('demanda', false, true)\" [labelInfo]=\"notificacao.hintDemandaComentario\" controlName=\"template_demanda_comentario\" placeholder=\"Caso em branco, será utilizado a configuração da Entidade...\"></input-textarea>\r\n            </div/-->\r\n        </tab>\r\n    </tabs>\r\n</editable-form>\r\n","import { Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { UnidadeIntegranteDaoService } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { IntegranteConsolidado } from 'src/app/models/unidade-integrante.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\n\r\n@Component({\r\n  selector: 'app-unidade-integrante',\r\n  templateUrl: './unidade-integrante.component.html',\r\n  styleUrls: ['./unidade-integrante.component.scss']\r\n})\r\nexport class UnidadeIntegranteComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @Input() public unidadeId: string = \"\";\r\n\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public usuarioDao: UsuarioDaoService;\r\n  public items: IntegranteConsolidado[] = [];\r\n  \r\n  public unidade?: Unidade;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.usuarioDao = injector.get<UsuarioDaoService>(UsuarioDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      usuario_id: {default: \"\"},\r\n      atribuicoes: {default: undefined},\r\n      atribuicao: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    this.unidadeId = this.urlParams?.has(\"idUnidade\") ? this.urlParams!.get(\"idUnidade\") : this.metadata?.idUnidade || this.unidadeId;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    (async () => {\r\n      await this.loadData({}, this.form);\r\n    })();\r\n  }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente para carregar todos os integrantes da unidade.\r\n   * @param entity \r\n   * @param form \r\n   */\r\n  public async loadData(entity: IIndexable, form?: FormGroup | undefined) {\r\n    this.grid!.loading = true;\r\n    try {\r\n      let result = await this.integranteDao!.loadIntegrantes(this.unidadeId, \"\");\r\n      this.items = result.integrantes.filter(x => x.atribuicoes.length > 0);\r\n      this.unidade = result.unidade;\r\n    } finally {\r\n      this.grid!.loading = false;\r\n    }\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if([\"usuario_id\", \"atribuicoes\"].includes(controlName) && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public async addIntegrante() {\r\n    return {\r\n      id: this.integranteDao!.generateUuid(),\r\n      usuario_id: \"\",\r\n      atribuicoes: []\r\n    } as IIndexable;\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n    const key = this.form!.controls.atribuicao.value;\r\n    if(value?.length && this.util.validateLookupItem(this.form!.controls.atribuicoes.value, key)) {\r\n      const icon = this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      const color = this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      result = {\r\n        key: key,\r\n        value: value,\r\n        icon: icon,\r\n        color: color\r\n      };\r\n      this.form!.controls.atribuicao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  /**\r\n   * Método chamado na edição de um integrante da Unidade.\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadIntegrante(form: FormGroup, row: any) {\r\n    form.controls.usuario_id.setValue(row.id);\r\n    form.controls.atribuicoes.setValue(row.atribuicoes.map((x: string) => Object.assign({}, {\r\n      key: x,\r\n      value: this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, x),\r\n      icon: this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, x),\r\n      color: this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, x)\r\n    })));\r\n    form.controls.atribuicao.setValue(\"\");\r\n  }\r\n\r\n  public async removeIntegrante(row: any) {\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir?\");\r\n    if(confirm) {\r\n      this.loading = true;\r\n      try {\r\n        await this.integranteDao.saveIntegrante([{'unidade_id': this.unidade!.id, 'usuario_id': row.id, 'atribuicoes': []}]);\r\n        await this.loadData({}, this.form);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public async saveIntegrante(form: FormGroup, row: any) {\r\n    if(form!.controls.atribuicoes.value.length) {\r\n      this.loading = true;\r\n      try {\r\n        await this.integranteDao.saveIntegrante([{'unidade_id': this.unidade!.id, 'usuario_id': form!.controls.usuario_id.value, 'atribuicoes': form!.controls.atribuicoes.value.map((x: LookupItem) => x.key)}]);\r\n        await this.loadData({}, this.form);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n}\r\n","<grid [items]=\"items\" [minHeight]=\"500\" [form]=\"form!\" [hasDelete]=\"true\"\r\n    [add]=\"addIntegrante.bind(this)\" [load]=\"loadIntegrante.bind(this)\" [remove]=\"removeIntegrante.bind(this)\" [save]=\"saveIntegrante.bind(this)\" \r\n    editable [hasAdd]=\"auth.hasPermissionTo('MOD_PRGT_PART_INCL')\"\r\n    [hasEdit]=\"auth.hasPermissionTo('MOD_PRGT_PART_EDT')\"\r\n    [hasDelete]=\"auth.hasPermissionTo('MOD_PRGT_PART_EXCL')\">\r\n    <span><strong>{{ entity?.nome }}</strong></span>\r\n    <columns>\r\n        <column [title]=\"lex.translate('Usuário')\" [template]=\"columnUsuario\" [editTemplate]=\"editUsuario\">\r\n            <ng-template let-row=\"row\" #columnUsuario>\r\n                <div class=\"row\">\r\n                    <div class=\"col-2\">\r\n                        <profile-picture [url]=\"row.usuario_url_foto || ''\" [size]=\"40\" [hint]=\"row.usuario_nome || ''\"></profile-picture>\r\n                    </div>\r\n                    <div class=\"col-10\">\r\n                        <strong>{{row.usuario_nome || \"\"}}</strong><br>\r\n                        <small>{{row.usuario_apelido || \"\"}}</small>\r\n                    </div>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editUsuario>\r\n                <input-search #usuario [size]=\"12\" label icon controlName=\"usuario_id\" [dao]=\"usuarioDao\"></input-search>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Atribuições\" titleHint=\"Atribuições do usuário nesta unidade\" [template]=\"columnUnidadeDestino\" [editTemplate]=\"editUnidadeDestino\">\r\n            <ng-template let-row=\"row\" #columnUnidadeDestino>\r\n                <div class=\"text-wrap width-min-content\">\r\n                    <badge *ngFor=\"let atribuicao of row.atribuicoes\" [color]=\"lookup.getColor(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [icon]=\"lookup.getIcon(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\" [label]=\"lookup.getValue(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')\"></badge>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editUnidadeDestino>\r\n                <input-multiselect controlName=\"atribuicoes\" [size]=\"8\" [addItemHandle]=\"addItemHandle.bind(this)\">\r\n                    <input-select [size]=\"12\" label=\"\" icon=\"fas fa-sign-out-alt\" controlName=\"atribuicao\" [items]=\"lookup.UNIDADE_INTEGRANTE_TIPO\"></input-select>\r\n                </input-multiselect>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\"></column>\r\n    </columns>\r\n</grid>\r\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-unidade-list-grid',\n  templateUrl: './unidade-list-grid.component.html',\n  styleUrls: ['./unidade-list-grid.component.scss']\n})\nexport class UnidadeListGridComponent {\n\n}\n","<p>unidade-list-grid works!</p>\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-unidade-list-map',\n  templateUrl: './unidade-list-map.component.html',\n  styleUrls: ['./unidade-list-map.component.scss']\n})\nexport class UnidadeListMapComponent {\n\n}\n","<p>unidade-list-map works!</p>\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { CidadeDaoService } from 'src/app/dao/cidade-dao.service';\r\nimport { EntidadeDaoService } from 'src/app/dao/entidade-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\n\r\n@Component({\r\n  selector: 'app-unidade-list',\r\n  templateUrl: './unidade-list.component.html',\r\n  styleUrls: ['./unidade-list.component.scss']\r\n})\r\nexport class UnidadeListComponent extends PageListBase<Unidade, UnidadeDaoService> {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n\r\n  public cidadeDao: CidadeDaoService;\r\n  public entidadeDao: EntidadeDaoService;\r\n  public buttons: ToolbarButton[] = [];\r\n  public unidadesJaVinculadas: string[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Unidade, UnidadeDaoService);\r\n    this.join = [\"cidade\", \"unidade_pai:id,sigla\", \"entidade:id,sigla\", \"gestor.usuario:id\", \"gestor_substituto.usuario:id\"];\r\n    this.cidadeDao = injector.get<CidadeDaoService>(CidadeDaoService);\r\n    this.entidadeDao = injector.get<EntidadeDaoService>(EntidadeDaoService);\r\n\r\n    /* Inicializações */\r\n    this.title = this.lex.translate(\"Unidades\");\r\n    this.code = \"MOD_CFG_UND\";\r\n    this.filter = this.fh.FormBuilder({\r\n      entidade_id: { default: this.auth.unidade?.entidade_id },\r\n      inativos: { default: false },\r\n      instituidora: { default: false },\r\n      nome: { default: \"\" }\r\n    });\r\n    this.groupBy = [{ field: \"entidade.sigla\", label: \"Entidade\" }];\r\n    // Testa se o usuário possui permissão unificar unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_UNIR\")) {\r\n      this.buttons.push({\r\n        icon: \"bi bi-arrows-collapse\",\r\n        color: \"btn-outline-danger\",\r\n        label: \"Unificar\",\r\n        onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', 'merge'] }, this.modalRefresh())\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    this.unidadesJaVinculadas = this.metadata?.unidadesJaVinculadas || this.unidadesJaVinculadas;\r\n  }\r\n\r\n  public dynamicOptions(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    let unidade: Unidade = row as Unidade;\r\n    // Testa se o usuário possui permissão para exibir dados da unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_CONS\")) result.push({ icon: \"bi bi-info-circle\", label: \"Informações\", onClick: this.consult.bind(this) });\r\n    // Testa se o usuário possui permissão de inativar a unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_INATV\")) result.push({icon: unidade.data_inativacao ? \"bi bi-check-circle\" : \"bi bi-x-circle\", label: unidade.data_inativacao ? 'Reativar' : 'Inativar', onClick: async (unidade: Unidade) => await this.inativo(unidade, !unidade.data_inativacao)});\r\n    // Testa se o usuário possui permissão para gerenciar integrantes da unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_INTG\")) result.push({icon: \"bi bi-people\", label: \"Integrantes\", onClick: (unidade: Unidade) => this.go.navigate({ route: ['configuracoes', 'unidade', 'NOPERSIST', unidade.id, 'integrante'] })});\r\n    // Testa se o usuário possui permissão para excluir unidade\r\n    if (this.auth.hasPermissionTo(\"MOD_UND_EXCL\")) result.push({ icon: \"bi bi-trash\", label: \"Excluir\", onClick: this.delete.bind(this) });\r\n    return result;\r\n  }\r\n\r\n  public async inativo(unidade: Unidade, inativo: boolean) {\r\n    if (await this.dialog.confirm(inativo ? \"Inativar\" : \"Reativar\", inativo ? \"Deseja realmente inativar a unidade?\" : \"Deseja reativar a unidade?\")) {\r\n      try {\r\n        this.submitting = true;\r\n        await this.dao!.inativo(unidade.id, inativo);\r\n        await this.modalRefreshId(unidade).modalClose!(undefined);\r\n      } finally {\r\n        this.submitting = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public filterClear(filter: FormGroup) {\r\n    super.filterClear(filter);\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let form: any = filter.value;\r\n    let result: any[] = [];\r\n    /* Se for selectable trás somente os inativos ou os não inativos, se não for então trás juntamente os inativos se form.inativos */\r\n    result.push(this.selectable ? [\"data_inativacao\", form.inativos ? \"!=\" : \"==\", null] : [\"inativos\", \"==\", form.inativos]);\r\n    if (form.entidade_id?.length) result.push([\"entidade_id\", \"==\", form.entidade_id]);\r\n    if (form.nome?.length) result.push([\"or\", [\"nome\", \"like\", \"%\" + form.nome.replace(\" \", \"%\") + \"%\"], [\"sigla\", \"like\", \"%\" + form.nome.replace(\" \", \"%\") + \"%\"]]);\r\n    if (form.instituidora) result.push([\"instituidora\", \"==\", 1]);\r\n    if (this.unidadesJaVinculadas.length) result.push([\"id\",\"not in\",this.unidadesJaVinculadas]);\r\n    return result;\r\n  }\r\n}","<h3 *ngIf=\"!isModal\" class=\"my-2\">{{title}}</h3>\r\n<grid [dao]=\"dao\" [add]=\"add\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\" [selectable]=\"selectable\"\r\n    (select)=\"onSelect($event)\" [hasAdd]=\"auth.hasPermissionTo('MOD_UND_INCL')\"\r\n    [hasEdit]=\"auth.hasPermissionTo('MOD_UND_EDT')\">\r\n    <toolbar *ngIf=\"!selectable\" [buttons]=\"buttons\"></toolbar>\r\n    <filter [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [clear]=\"filterClear.bind(this)\"\r\n        [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && filterCollapsed\">\r\n        <div class=\"row\">\r\n            <input-search #entidade [size]=\"4\" controlName=\"entidade_id\" [dao]=\"entidadeDao\"></input-search>\r\n            <input-switch [size]=\"2\" label=\"Instituidora\" labelClass=\"text-nowrap\" controlName=\"instituidora\" [control]=\"filter!.controls.instituidora\" [labelInfo]=\"'Se lista SOMENTE as ' + lex.noun('unidades') + ' instituidoras de ' + lex.noun('programa', true)\"></input-switch>\r\n            <input-text [size]=\"4\" label=\"Nome\" controlName=\"nome\" [control]=\"filter!.controls.nome\" placeholder=\"Nome ou sigla...\"></input-text>\r\n            <input-switch [size]=\"2\" label=\"Inativos\" controlName=\"inativos\" [control]=\"filter!.controls.inativos\" labelInfo=\"Se lista também as unidade inativas\"></input-switch>\r\n        </div>\r\n    </filter>\r\n    <columns>\r\n        <column title=\"Sigla\" field=\"sigla\"></column>\r\n        <column title=\"Nome\" [template]=\"columnNome\" orderBy=\"nome\">\r\n            <ng-template let-row=\"row\" #columnNome>\r\n                <span class=\"d-block\">{{row.nome}}</span>\r\n                <span *ngIf=\"row.unidade\" class=\"badge bg-light text-dark\">\r\n                    <i class=\"bi bi-arrow-return-right\"></i>\r\n                    {{row.unidade.sigla}}\r\n                </span>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Código\" field=\"codigo\"></column>\r\n        <column [title]=\"lex.translate('Cidade')\" [template]=\"columnCidade\">\r\n            <ng-template let-row=\"row\" #columnCidade>\r\n                <span>{{(row.cidade?.nome || \"\") + \"/\" + (row.cidade?.uf || \"\")}}</span>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"Situação\" [template]=\"columnSituacao\">\r\n            <ng-template let-row=\"row\" #columnSituacao>\r\n                <div class=\"one-per-line\">\r\n                    <badge *ngIf=\"row.instituidora\" color=\"primary\" icon=\"bi bi-star\" label=\"Instituidora\"></badge>\r\n                    <badge [color]=\"!row.data_inativacao ? 'success' : 'danger'\"\r\n                        [icon]=\"!row.data_inativacao ? 'bi bi-check-circle' : 'bi bi-x-circle'\"\r\n                        [label]=\"!row.data_inativacao ? 'Ativo' : 'Inativo'\"></badge>\r\n                </div>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\" [onEdit]=\"edit\" [dynamicOptions]=\"dynamicOptions.bind(this)\"></column>\r\n    </columns>\r\n    <pagination [rows]=\"rowsLimit\"></pagination>\r\n</grid>","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\n\r\nexport type UnidadeMerge = {\r\n  id: string,\r\n  unidade_origem_id: string,\r\n  unidade_destino_id: string,\r\n  unidade_origem?: Unidade,\r\n  unidade_destino?: Unidade\r\n}\r\n\r\n@Component({\r\n  selector: 'app-unidade-merge',\r\n  templateUrl: './unidade-merge.component.html',\r\n  styleUrls: ['./unidade-merge.component.scss']\r\n})\r\nexport class UnidadeMergeComponent extends PageFrameBase {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild('unidadeOrigem', { static: false }) public unidadeOrigem?: InputSearchComponent;\r\n  @ViewChild('unidadeDestino', { static: false }) public unidadeDestino?: InputSearchComponent;\r\n\r\n  public items: UnidadeMerge[] = [];\r\n  public toolbarButtons: ToolbarButton[] = [\r\n    {\r\n      icon: \"bi bi-yin-yang\",\r\n      label: \"Mesma sigla\",\r\n      hint: \"Unificar todos que tenham a mesma sigla. Sendo a inativa considerada como origem.\",\r\n      onClick: this.onMesmaSiglaClick.bind(this)\r\n    }\r\n  ];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.dao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      exclui_origem: {default: false},\r\n      origem_inativo: {default: true},\r\n      unidade_origem_id: {default: \"\"},\r\n      unidade_destino_id: {default: \"\"}\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    return result;\r\n  }\r\n\r\n  public onMesmaSiglaClick() {\r\n    this.loading = true;\r\n    (this.dao as UnidadeDaoService).mesmaSigla().then(unidades => {\r\n      let destinos: Unidade[] = [];\r\n      destinos = unidades.reduce((acumulador, valor) => {\r\n        if(!valor.data_inativacao && !acumulador.find(x => x.sigla == valor.sigla)) acumulador.push(valor);\r\n        return acumulador; \r\n      }, destinos);\r\n      let destinosIds = destinos.map(x => x.id);\r\n      let origens = unidades.filter(x => !destinosIds.includes(x.id) && !!x.data_inativacao);\r\n      let origensIds = origens.map(x => x.id);\r\n      this.items = [];\r\n      for(let origem of origens) {\r\n        let destino = destinos.find(x => x.sigla == origem.sigla);\r\n        if(destino) {\r\n          this.items.push({\r\n            id: this.dao!.generateUuid(),\r\n            unidade_origem_id: origem.id,\r\n            unidade_destino_id: destino.id,\r\n            unidade_origem: origem,\r\n            unidade_destino: destino\r\n          });\r\n        }\r\n      }\r\n      /* Pegas as unidade que tem a Sigla repetida mas que não estão inativas */\r\n      let error: string[] = [];\r\n      for(let unidade of unidades) {\r\n        if(!destinosIds.includes(unidade.id) && !origensIds.includes(unidade.id)) error.push(unidade.codigo + \" - \" + unidade.sigla + \" - \" + unidade.nome);\r\n      }\r\n      if(error.length) this.editableForm!.error = (error.length == 1 ? \"A unidade abaixo possui duplicidade de SIGLA, mas não está inativa:\" : \"As unidades abaixo possuem duplicidade de SIGLA, mas não estão inativas:\") + \"\\n\" + error.join(\"\\n\");\r\n    }).finally(() => {\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  public async addMerge() {\r\n    return {\r\n      id: this.dao!.generateUuid(),\r\n      unidade_origem_id: \"\",\r\n      unidade_destino_id: \"\",\r\n      unidade_origem: undefined,\r\n      unidade_destino: undefined\r\n    } as IIndexable;\r\n  }\r\n\r\n  public async loadMerge(form: FormGroup, row: any) {\r\n    form.controls.unidade_origem_id.setValue(row.unidade_origem_id);\r\n    form.controls.unidade_destino_id.setValue(row.unidade_destino_id);\r\n  }\r\n\r\n  public async removeMerge(row: any) {\r\n    return true;\r\n  }\r\n\r\n  public async saveMerge(form: FormGroup, row: any) {\r\n    let result = undefined;\r\n    if(this.form!.controls.unidade_origem_id.value?.length || this.form!.controls.unidade_destino_id.value?.length) {\r\n      row.unidade_origem_id = form.controls.unidade_origem_id.value;\r\n      row.unidade_origem = this.unidadeOrigem?.selectedEntity || await this.dao?.getById(row.unidade_origem_id);\r\n      row.unidade_destino_id = form.controls.unidade_destino_id.value;\r\n      row.unidade_destino = this.unidadeDestino?.selectedEntity || await this.dao?.getById(row.unidade_destino_id);\r\n      result = row;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  public onMerge() {\r\n    let error: string | undefined = undefined;\r\n    for(let row of this.items) error = error || (!row.unidade_origem_id?.length || !row.unidade_destino_id?.length ? \"A origem e o destino precisam estar preenchidos em todos\" : undefined);\r\n    this.editableForm!.error = error;\r\n    if(!error?.length) {\r\n      this.loading = true;\r\n      (this.dao as UnidadeDaoService).unificar(this.items.map(x => Object.assign({}, {unidade_origem_id: x.unidade_origem_id, unidade_destino_id: x.unidade_destino_id})), this.form!.controls.exclui_origem.value).then(result => {\r\n        if(result) this.close();\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<editable-form [form]=\"form!\" [title]=\"isModal ? '' : title\" confirmLabel=\"Unificar\" (submit)=\"onMerge()\" (cancel)=\"onCancel()\">\r\n    <top-alert type=\"warning\" message=\"Por motivos de segurança será permitido somente unificar unidades inativas para unidade ativas. E caso [Exclui origem] não esteja habilitado, a unidade de origem continuará na lista (como inativa).\"></top-alert>\r\n    <toolbar [buttons]=\"toolbarButtons\">\r\n        <input-switch [size]=\"4\" labelPosition=\"left\" label=\"Exclui origem\" controlName=\"exclui_origem\"></input-switch>\r\n    </toolbar>\r\n    <grid [items]=\"items\" [form]=\"form!\" [add]=\"addMerge.bind(this)\" [load]=\"loadMerge.bind(this)\" [remove]=\"removeMerge.bind(this)\" [save]=\"saveMerge.bind(this)\" editable>\r\n        <columns>\r\n            <column [title]=\"lex.translate('Unidade') + ' origem'\" titleHint=\"Unidade que será substituída pela outra\" [template]=\"columnUnidadeOrigem\" [editTemplate]=\"editUnidadeOrigem\">\r\n                <ng-template let-row=\"row\" #columnUnidadeOrigem>\r\n                    <span>{{row.unidade_origem?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_origem?.codigo || \"\"}} - {{row.unidade_origem?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeOrigem>\r\n                    <input-search #unidade_origem [size]=\"12\" label icon controlName=\"unidade_origem_id\" [dao]=\"dao\" [where]=\"[['inativo', '!=', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: true}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column [title]=\"lex.translate('Unidade') + ' destino'\" titleHint=\"Unidade que sobrará após a unificação\" [template]=\"columnUnidadeDestino\" [editTemplate]=\"editUnidadeDestino\">\r\n                <ng-template let-row=\"row\" #columnUnidadeDestino>\r\n                    <span>{{row.unidade_destino?.nome || \"\"}}</span><br>\r\n                    <small>{{row.unidade_destino?.codigo || \"\"}} - {{row.unidade_destino?.sigla || \"\"}}</small>\r\n                </ng-template>\r\n                <ng-template let-row=\"row\" #editUnidadeDestino>\r\n                    <input-search #unidade_destino [size]=\"12\" label icon controlName=\"unidade_destino_id\" [dao]=\"dao\" [where]=\"[['inativo', '==', null]]\" [selectRoute]=\"{route: ['configuracoes', 'unidade'], params: {filter: {inativos: false}}}\"></input-search>\r\n                </ng-template>\r\n            </column>\r\n            <column type=\"options\"></column>\r\n        </columns>\r\n    </grid>\r\n</editable-form>","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades\" } },\r\n  { path: ':id/subordinadas', component: UnidadeListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unidades subordinadas\" } },\r\n  { path: 'new', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão de Unidade\", modal: true } },\r\n  { path: ':id/edit', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição de Unidade\", modal: true } },\r\n  { path: ':id/consult', component: UnidadeFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Unidade\", modal: true } },\r\n  { path: ':id/:idUnidade/integrante', component: UnidadeIntegranteComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Integrantes da Unidade\", modal: true } },\r\n  { path: 'merge', component: UnidadeMergeComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Unificação\", modal: true } }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UnidadeRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { UnidadeRoutingModule } from './unidade-routing.module';\r\nimport { UnidadeFormComponent } from './unidade-form/unidade-form.component';\r\nimport { UnidadeListComponent } from './unidade-list/unidade-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UnidadeMergeComponent } from './unidade-merge/unidade-merge.component';\r\nimport { UteisModule } from '../../uteis/uteis.module';\r\nimport { UnidadeIntegranteComponent } from './unidade-integrante/unidade-integrante.component';\nimport { UnidadeListGridComponent } from './unidade-list-grid/unidade-list-grid.component';\nimport { UnidadeListMapComponent } from './unidade-list-map/unidade-list-map.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UnidadeFormComponent,\r\n    UnidadeListComponent,\r\n    UnidadeMergeComponent,\r\n    UnidadeIntegranteComponent,\r\n    UnidadeListGridComponent,\r\n    UnidadeListMapComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    UteisModule,\r\n    ReactiveFormsModule,\r\n    UnidadeRoutingModule\r\n  ]\r\n})\r\nexport class UnidadeModule { }\r\n"],"names":["DaoBaseService","UnidadeIntegranteAtribuicaoDaoService","constructor","injector","searchFields","i0","ɵɵinject","Injector","factory","ɵfac","providedIn","EditableFormComponent","CidadeDaoService","EntidadeDaoService","PlanoTrabalhoDaoService","UnidadeDaoService","UnidadeIntegranteDaoService","UsuarioDaoService","Expediente","Unidade","PageFormBase","NotificacaoService","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r8","entity","id","length","formDisabled","UnidadeFormComponent","validate","control","controlName","result","indexOf","value","titleEdit","lex","translate","sigla","entidadeDao","get","cidadeDao","unidadeDao","usuarioDao","planoTrabalhoDao","integranteDao","integranteAtribuicaoDao","notificacao","modalWidth","planoDataset","dataset","form","fh","FormBuilder","codigo","default","nome","path","cidade_id","uf","instituidora","atividades_arquivamento_automatico","distribuicao_forma_contagem_prazos","entrega_forma_contagem_prazos","notificacoes","etiquetas","unidade_pai_id","entidade_id","auth","unidade","etiqueta_texto","etiqueta_icone","etiqueta_cor","expediente24","expediente","usar_expediente_entidade","texto_complementar_plano","cdRef","formGestor","gestor_id","gestor_substituto_id","join","is24hrs","controls","undefined","onUsarExpedienteEntidadeChange","setValue","addItemHandle","key","util","textHash","validateLookupItem","color","icon","loadData","_this","_asyncToGenerator","formValue","Object","assign","Promise","all","unidadePai","loadSearch","unidade_pai","cidade","gestor","usuario","gestorSubstituto","gestor_substituto","entidade","patchValue","fillForm","initializeData","saveData","_this2","resolve","reject","fill","salvarGestor","salvarGestorSubstituto","apagarGestor","apagarGestorSubstituto","dao","save","then","_ref","saveIntegrante","delete","_x","apply","arguments","onChangeInstituidora","ɵɵdirectiveInject","selectors","viewQuery","UnidadeFormComponent_Query","rf","ctx","ɵɵlistener","UnidadeFormComponent_Template_editable_form_submit_0_listener","onSaveData","UnidadeFormComponent_Template_editable_form_cancel_0_listener","onCancel","UnidadeFormComponent_Template_input_switch_change_4_listener","UnidadeFormComponent_Template_input_switch_change_37_listener","ɵɵtemplate","UnidadeFormComponent_tab_41_Template","isModal","title","_r0","noun","ɵɵpureFunction1","_c8","_c7","lookup","DIA_HORA_CORRIDOS_OU_UTEIS","HORAS_CORRIDAS_OU_UTEIS","SIMNAO","bind","ICONES","GridComponent","PageFrameBase","ɵɵtext","row_r8","usuario_url_foto","usuario_nome","ɵɵtextInterpolate","usuario_apelido","ctx_r3","ctx_r12","getColor","UNIDADE_INTEGRANTE_TIPO","atribuicao_r13","getIcon","getValue","UnidadeIntegranteComponent_ng_template_11_badge_1_Template","row_r11","atribuicoes","ctx_r7","UnidadeIntegranteComponent","unidadeId","items","includes","usuario_id","atribuicao","ngOnInit","urlParams","has","metadata","idUnidade","ngAfterViewInit","grid","loading","loadIntegrantes","integrantes","filter","x","detectChanges","addIntegrante","_this3","generateUuid","loadIntegrante","row","_this4","map","removeIntegrante","_this5","confirm","dialog","_this6","UnidadeIntegranteComponent_Query","UnidadeIntegranteComponent_ng_template_6_Template","ɵɵtemplateRefExtractor","UnidadeIntegranteComponent_ng_template_8_Template","UnidadeIntegranteComponent_ng_template_11_Template","UnidadeIntegranteComponent_ng_template_13_Template","hasPermissionTo","_r2","_r4","_r6","UnidadeListGridComponent","decls","vars","template","UnidadeListGridComponent_Template","UnidadeListMapComponent","UnidadeListMapComponent_Template","PageListBase","ctx_r0","ctx_r1","buttons","ɵɵtextInterpolate1","row_r9","UnidadeListComponent_ng_template_13_span_2_Template","row_r12","UnidadeListComponent_ng_template_20_badge_1_Template","row_r13","data_inativacao","UnidadeListComponent","unidadesJaVinculadas","filterWhere","push","selectable","inativos","replace","code","groupBy","field","label","onClick","go","navigate","route","modalRefresh","dynamicOptions","consult","inativo","submitting","modalRefreshId","modalClose","filterClear","UnidadeListComponent_Query","UnidadeListComponent_h3_0_Template","UnidadeListComponent_Template_grid_select_1_listener","$event","onSelect","UnidadeListComponent_toolbar_2_Template","UnidadeListComponent_ng_template_13_Template","UnidadeListComponent_ng_template_17_Template","UnidadeListComponent_ng_template_20_Template","add","orderBy","filterSubmit","filterCollapseChange","filterCollapsed","_r3","_r5","_r7","edit","rowsLimit","unidade_origem","ɵɵtextInterpolate2","_c3","ɵɵpureFunction0","_c2","ɵɵpureFunction2","_c4","_c6","_c5","unidade_destino","_c9","UnidadeMergeComponent","toolbarButtons","hint","onMesmaSiglaClick","exclui_origem","origem_inativo","unidade_origem_id","unidade_destino_id","mesmaSigla","unidades","destinos","reduce","acumulador","valor","find","destinosIds","origens","origensIds","origem","destino","error","editableForm","finally","addMerge","loadMerge","removeMerge","saveMerge","unidadeOrigem","selectedEntity","getById","unidadeDestino","onMerge","unificar","close","UnidadeMergeComponent_Query","UnidadeMergeComponent_Template_editable_form_submit_0_listener","UnidadeMergeComponent_Template_editable_form_cancel_0_listener","UnidadeMergeComponent_ng_template_7_Template","UnidadeMergeComponent_ng_template_9_Template","UnidadeMergeComponent_ng_template_12_Template","UnidadeMergeComponent_ng_template_14_Template","RouterModule","AuthGuard","ConfigResolver","routes","component","canActivate","config","runGuardsAndResolvers","data","modal","UnidadeRoutingModule","forChild","imports","i1","exports","CommonModule","ComponentsModule","ReactiveFormsModule","UteisModule","UnidadeModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}