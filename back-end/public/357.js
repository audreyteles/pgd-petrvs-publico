"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[357],{3357:(At,h,l)=>{l.r(h),l.d(h,{TipoAvaliacaoModule:()=>vt});var r=l(6733),T=l(5579),p=l(1391),u=l(2314),m=l(8239),A=l(4040),b=l(207),f=l(4368);class d extends f.X{constructor(n){super(),this.notas=[],this.tipo="QUANTITATIVO",this.nome="",this.initialization(n)}}var j=l(1184),I=l(9055),x=l(5296);class Q extends f.X{constructor(n){super(),this.sequencia=0,this.nota=0,this.descricao="",this.aprova=!1,this.justifica=!1,this.pergunta="",this.icone="",this.cor="",this.codigo="",this.justificativas=[],this.tipo_avaliacao_id="",this.initialization(n)}}class F extends f.X{constructor(n){super(),this.tipo_avaliacao_nota_id="",this.tipo_justificativa_id="",this.initialization(n)}}var t=l(755),v=l(3150),Z=l(7224),N=l(3351),E=l(8820),O=l(2392),U=l(4603),y=l(6848),M=l(7819),z=l(5560),C=l(5489),D=l(9224);function L(a,n){if(1&a&&(t.TgZ(0,"strong"),t._uU(1),t.qZA()),2&a){const o=n.row;t.xp6(1),t.Oqu(o.nota)}}function w(a,n){if(1&a&&t._UZ(0,"input-number",23),2&a){const o=t.oxw(2);t.Q6J("control",o.formNota.controls.nota)}}function Y(a,n){if(1&a&&t._UZ(0,"input-text",23),2&a){const o=t.oxw(2);t.Q6J("control",o.formNota.controls.nota),t.uIk("maxlength",250)}}function P(a,n){if(1&a&&(t.YNc(0,w,1,1,"input-number",21),t.YNc(1,Y,1,2,"input-text",21),t._UZ(2,"input-text",22)),2&a){const o=t.oxw();t.Q6J("ngIf","QUANTITATIVO"==o.form.controls.tipo.value),t.xp6(1),t.Q6J("ngIf","QUALITATIVO"==o.form.controls.tipo.value),t.xp6(1),t.Q6J("control",o.formNota.controls.codigo),t.uIk("maxlength",250)}}function V(a,n){if(1&a&&t._UZ(0,"badge",24),2&a){const o=n.row;t.Q6J("label",o.descricao)("icon",o.icone)("color",o.cor)}}function q(a,n){if(1&a&&t._UZ(0,"input-text",25)(1,"input-select",26)(2,"input-color",27),2&a){const o=t.oxw();t.Q6J("control",o.formNota.controls.descricao),t.uIk("maxlength",250),t.xp6(1),t.Q6J("size",6)("control",o.formNota.controls.icone)("items",o.lookup.ICONES),t.xp6(1),t.Q6J("size",6)("control",o.formNota.controls.cor)}}function B(a,n){1&a&&t._UZ(0,"badge",31)}function S(a,n){1&a&&t._UZ(0,"badge",32)}function R(a,n){if(1&a&&(t.TgZ(0,"strong"),t._uU(1),t.qZA(),t.TgZ(2,"div",28),t.YNc(3,B,1,0,"badge",29),t.YNc(4,S,1,0,"badge",30),t.qZA()),2&a){const o=n.row;t.xp6(1),t.Oqu(o.pergunta),t.xp6(2),t.Q6J("ngIf",o.aprova),t.xp6(1),t.Q6J("ngIf",o.justifica)}}function W(a,n){if(1&a&&(t._UZ(0,"input-text",23),t.TgZ(1,"div",1),t._UZ(2,"input-switch",33)(3,"input-switch",34),t.qZA()),2&a){const o=t.oxw();t.Q6J("control",o.formNota.controls.pergunta),t.uIk("maxlength",250),t.xp6(2),t.Q6J("size",12)("control",o.formNota.controls.aprova),t.xp6(1),t.Q6J("size",12)("control",o.formNota.controls.justifica)}}function G(a,n){1&a&&t._UZ(0,"badge",36),2&a&&t.Q6J("label",n.$implicit.tipo_justificativa.nome)}function X(a,n){if(1&a&&(t.TgZ(0,"div",28),t.YNc(1,G,1,1,"badge",35),t.qZA()),2&a){const o=n.row;t.xp6(1),t.Q6J("ngForOf",o.justificativas)}}const H=function(){return["cadastros","tipo-justificativa","new"]},K=function(a){return{route:a}};function $(a,n){if(1&a&&(t.TgZ(0,"input-multiselect",37),t._UZ(1,"input-select",38,39),t.qZA()),2&a){const o=t.MAs(2),e=t.oxw();t.Q6J("size",12)("canEdit",!0)("addItemControl",o)("control",e.formNota.controls.justificativas),t.xp6(1),t.Q6J("size",12)("control",e.formNota.controls.tipo_justificativa_id)("dao",e.tipoJustificativaDao)("addRoute",t.VKq(9,K,t.DdM(8,H)))}}let g=(()=>{class a extends j.F{constructor(o){super(o,d,b.r),this.injector=o,this.justificativasLista=[],this.tipoJustificativa=new x.H,this.validate=(e,i)=>{let s=null;return["nome"].indexOf(i)>=0&&!e.value?.length&&(s="Obrigat\xf3rio"),s},this.validateNota=(e,i)=>{let s=null;return["pergunta","descricao","icone"].indexOf(i)>=0&&!e.value?.length&&(s="Obrigat\xf3rio"),s},this.titleEdit=e=>"Editando "+this.lex.translate("Tipo de Avalia\xe7\xe3o")+": "+(e?.nome||""),this.tipoJustificativaDao=o.get(I.i),this.join=["notas.justificativas.tipo_justificativa"],this.form=this.fh.FormBuilder({nome:{default:""},tipo:{default:"QUANTITATIVO"},notas:{default:[]}},this.cdRef,this.validate),this.formNota=this.fh.FormBuilder({descricao:{default:""},nota:{default:0},codigo:{default:""},aprova:{default:!1},pergunta:{default:""},justifica:{default:!1},icone:{default:""},cor:{default:""},justificativas:{default:[]},tipo_justificativa_id:{default:null}},this.cdRef,this.validateNota)}loadData(o,e){let i=Object.assign({},e.value);e.patchValue(this.util.fillForm(i,o))}initializeData(o){this.entity=new d,this.loadData(this.entity,o)}saveData(o){return new Promise((e,i)=>{let s=this.util.fill(new d,this.entity);s=this.util.fillForm(s,this.form.value),e(s)})}addNota(){var o=this;return(0,m.Z)(function*(){return new Q({tipo_avaliacao_id:o.entity.id,sequencia:o.form.controls.notas.value.length+1})})()}loadNota(o,e){return(0,m.Z)(function*(){o.patchValue(e),o.controls.tipo_justificativa_id.setValue(null),o.controls.justificativas.setValue(e.justificativas?.map(i=>Object.assign({},{key:i.tipo_justificativa_id,value:i.tipo_justificativa.nome,data:i.tipo_justificativa}))||[])})()}removeNota(o){var e=this;return(0,m.Z)(function*(){return yield e.dialog.confirm("Exclui ?","Deseja realmente excluir?")})()}saveNota(o,e){var i=this;return(0,m.Z)(function*(){let s=o.controls.justificativas.value||[];return i.util.fillForm(e,o.value),e.justificativas=s.map(c=>(e.justificativas||[]).find(_=>_.tipo_justificativa_id==c.key)||new F({tipo_avaliacao_nota_id:i.entity.id,tipo_justificativa_id:c.key,tipo_justificativa:c.data})),e})()}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(t.zs3))};static#o=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-tipo-avaliacao-form"]],viewQuery:function(e,i){if(1&e&&t.Gf(A.Q,5),2&e){let s;t.iGM(s=t.CRH())&&(i.editableForm=s.first)}},features:[t.qOj],decls:30,vars:25,consts:[["initialFocus","nome",3,"form","disabled","title","submit","cancel"],[1,"row"],["label","T\xedtulo","controlName","nome","required","",3,"size"],["label","Tipo da nota","controlName","tipo",3,"size","items"],["tipo",""],["title","Notas"],["editable","",3,"control","form","hasDelete","add","load","remove","save"],["grid",""],["title","Nota",3,"template","editTemplate"],["columnNota",""],["editNota",""],["title","Descri\xe7\xe3o/Icone/Cor",3,"template","editTemplate"],["columnDescricao",""],["editDescricao",""],[3,"title","template","editTemplate"],["columnPerguntaConfiguracoes",""],["editPerguntaConfiguracoes",""],[3,"title","width","template","editTemplate"],["columnJustificativas",""],["editJustificativas",""],["type","options"],[3,"control",4,"ngIf"],["placeholder","C\xf3digo integra\xe7\xe3o",3,"control"],[3,"control"],[3,"label","icon","color"],["placeholder","Descri\xe7\xe3o",3,"control"],["icon","fas fa-sign-out-alt",3,"size","control","items"],[3,"size","control"],[1,"one-per-line"],["color","success","icon","bi bi-check","label","Aprova","hint","Se para esta nota ser\xe1 considerado como aprovado, quando aplic\xe1vel",4,"ngIf"],["color","warning","icon","bi bi-patch-question","label","Justifica","hint","Se para esta nota ser\xe1 obrigat\xf3rio uma justificativa",4,"ngIf"],["color","success","icon","bi bi-check","label","Aprova","hint","Se para esta nota ser\xe1 considerado como aprovado, quando aplic\xe1vel"],["color","warning","icon","bi bi-patch-question","label","Justifica","hint","Se para esta nota ser\xe1 obrigat\xf3rio uma justificativa"],["scale","small","labelPosition","right","label","Aprova?","labelInfo","Se para esta nota ser\xe1 considerado como aprovado, quando aplic\xe1vel",3,"size","control"],["scale","small","labelPosition","right","label","Justifica?","labelInfo","Se para esta nota ser\xe1 obrigat\xf3rio uma justificativa",3,"size","control"],["color","light",3,"label",4,"ngFor","ngForOf"],["color","light",3,"label"],["noBox","",3,"size","canEdit","addItemControl","control"],["fullEntity","",3,"size","control","dao","addRoute"],["justificativa",""]],template:function(e,i){if(1&e&&(t.TgZ(0,"editable-form",0),t.NdJ("submit",function(){return i.onSaveData()})("cancel",function(){return i.onCancel()}),t.TgZ(1,"div",1),t._UZ(2,"input-text",2)(3,"input-select",3,4),t.qZA(),t.TgZ(5,"separator",5)(6,"grid",6,7)(8,"columns")(9,"column",8),t.YNc(10,L,2,1,"ng-template",null,9,t.W1O),t.YNc(12,P,3,4,"ng-template",null,10,t.W1O),t.qZA(),t.TgZ(14,"column",11),t.YNc(15,V,1,3,"ng-template",null,12,t.W1O),t.YNc(17,q,3,7,"ng-template",null,13,t.W1O),t.qZA(),t.TgZ(19,"column",14),t.YNc(20,R,5,3,"ng-template",null,15,t.W1O),t.YNc(22,W,4,6,"ng-template",null,16,t.W1O),t.qZA(),t.TgZ(24,"column",17),t.YNc(25,X,2,1,"ng-template",null,18,t.W1O),t.YNc(27,$,3,11,"ng-template",null,19,t.W1O),t.qZA(),t._UZ(29,"column",20),t.qZA()()()()),2&e){const s=t.MAs(11),c=t.MAs(13),J=t.MAs(16),_=t.MAs(18),gt=t.MAs(21),_t=t.MAs(23),ht=t.MAs(26),Tt=t.MAs(28);t.Q6J("form",i.form)("disabled",i.formDisabled)("title",i.isModal?"":i.title),t.xp6(2),t.Q6J("size",8),t.uIk("maxlength",250),t.xp6(1),t.Q6J("size",4)("items",i.lookup.TIPO_AVALIACAO_TIPO),t.xp6(3),t.Q6J("control",i.form.controls.notas)("form",i.formNota)("hasDelete",!0)("add",i.addNota.bind(i))("load",i.loadNota.bind(i))("remove",i.removeNota.bind(i))("save",i.saveNota.bind(i)),t.xp6(3),t.Q6J("template",s)("editTemplate",c),t.xp6(5),t.Q6J("template",J)("editTemplate",_),t.xp6(5),t.Q6J("title","Pergunta motivacional\nConfigura\xe7\xf5es")("template",gt)("editTemplate",_t),t.xp6(5),t.Q6J("title",i.lex.translate("Tipos de justificativa"))("width",300)("template",ht)("editTemplate",Tt)}},dependencies:[r.sg,r.O5,v.M,Z.a,N.b,A.Q,E.a,O.m,U.p,y.z,M.p,z.N,C.F,D.l]})}return a})();var k=l(8509),tt=l(7765),ot=l(5512),at=l(2704);function it(a,n){1&a&&t._UZ(0,"toolbar")}function et(a,n){1&a&&t._uU(0),2&a&&t.hij(" ",n.row.nome," ")}function nt(a,n){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const o=t.oxw().row,e=t.oxw();t.xp6(1),t.hij(" ",e.getNotasText(o.notas)," ")}}function lt(a,n){1&a&&t._UZ(0,"badge",19)}function st(a,n){1&a&&t._UZ(0,"badge",20)}function ct(a,n){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"badge",16),t.qZA(),t.TgZ(3,"td"),t._uU(4),t._UZ(5,"br"),t.TgZ(6,"small"),t._uU(7),t.qZA(),t._UZ(8,"br"),t.qZA(),t.TgZ(9,"td"),t.YNc(10,lt,1,0,"badge",17),t.YNc(11,st,1,0,"badge",18),t.qZA()()),2&a){const o=n.$implicit;t.xp6(2),t.Q6J("label",o.nota)("icon",o.icon)("color",o.cor),t.xp6(2),t.hij(" ",o.descricao,""),t.xp6(3),t.Oqu(o.pergunta),t.xp6(3),t.Q6J("ngIf",o.aprova),t.xp6(1),t.Q6J("ngIf",o.justifica)}}function rt(a,n){if(1&a&&(t.TgZ(0,"table",13)(1,"thead")(2,"tr")(3,"th",14),t._uU(4,"Nota"),t.qZA(),t.TgZ(5,"th",14),t._uU(6,"Descri\xe7\xe3o"),t._UZ(7,"br"),t.TgZ(8,"small"),t._uU(9,"Pergunta motivacional"),t.qZA()(),t.TgZ(10,"th",14),t._uU(11,"Op\xe7\xf5es"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,ct,12,7,"tr",15),t.qZA()()),2&a){const o=t.oxw().row,e=t.oxw();t.xp6(13),t.Q6J("ngForOf",e.notasOrdenadas(o).notas)}}function pt(a,n){if(1&a&&(t.YNc(0,nt,2,1,"div",11),t.YNc(1,rt,14,1,"ng-template",null,12,t.W1O)),2&a){const o=t.MAs(2),e=t.oxw();t.Q6J("ngIf",e.selectable)("ngIfElse",o)}}const ut=[{path:"",component:(()=>{class a extends k.E{constructor(o){super(o,d,b.r),this.injector=o,this.filterWhere=e=>{let i=[],s=e.value;return s.nome?.length&&i.push(["nome","like","%"+s.nome.trim().replace(" ","%")+"%"]),i},this.title=this.lex.translate("Tipos de Avalia\xe7\xe3o"),this.code="MOD_TIPO_AVAL",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.addOption(this.OPTION_INFORMACOES),this.addOption(this.OPTION_EXCLUIR,"MOD_TIPO_AVAL_EXCL"),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}getNotasText(o){return o.map(e=>e.nota).join(", ")}notasOrdenadas(o){let e=o.notas;return e.sort((i,s)=>i.sequencia-s.sequencia),o.notas=e,o}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(t.zs3))};static#o=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-tipo-avaliacao-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(v.M,5),2&e){let s;t.iGM(s=t.CRH())&&(i.grid=s.first)}},features:[t.qOj],decls:14,vars:25,consts:[[3,"dao","add","title","orderBy","groupBy","join","selectable","hasAdd","hasEdit","select"],[4,"ngIf"],[3,"deleted","form","where","submit","collapseChange","collapsed"],[1,"row"],["controlName","nome","placeholder","Nome...",3,"size","label","control"],["title","Nome",3,"template"],["columnNome",""],["title","Notas",3,"template"],["columnNotas",""],["type","options",3,"onEdit","options"],[3,"rows"],[4,"ngIf","ngIfElse"],["tabelaNotas",""],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[3,"label","icon","color"],["icon","bi bi-hand-thumbs-up","color","success","label","Aprova",4,"ngIf"],["icon","bi bi-patch-question","color","primary","label","Justifica",4,"ngIf"],["icon","bi bi-hand-thumbs-up","color","success","label","Aprova"],["icon","bi bi-patch-question","color","primary","label","Justifica"]],template:function(e,i){if(1&e&&(t.TgZ(0,"grid",0),t.NdJ("select",function(c){return i.onSelect(c)}),t.YNc(1,it,1,0,"toolbar",1),t.TgZ(2,"filter",2)(3,"div",3),t._UZ(4,"input-text",4),t.qZA()(),t.TgZ(5,"columns")(6,"column",5),t.YNc(7,et,1,1,"ng-template",null,6,t.W1O),t.qZA(),t.TgZ(9,"column",7),t.YNc(10,pt,3,2,"ng-template",null,8,t.W1O),t.qZA(),t._UZ(12,"column",9),t.qZA(),t._UZ(13,"pagination",10),t.qZA()),2&e){const s=t.MAs(8),c=t.MAs(11);t.Q6J("dao",i.dao)("add",i.add)("title",i.isModal?"":i.title)("orderBy",i.orderBy)("groupBy",i.groupBy)("join",i.join)("selectable",i.selectable)("hasAdd",i.auth.hasPermissionTo("MOD_TIPO_AVAL_INCL"))("hasEdit",i.auth.hasPermissionTo("MOD_TIPO_AVAL_EDT")),t.xp6(1),t.Q6J("ngIf",!i.selectable),t.xp6(1),t.Q6J("deleted",i.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",i.filter)("where",i.filterWhere)("submit",i.filterSubmit.bind(i))("collapseChange",i.filterCollapseChange.bind(i))("collapsed",i.filterCollapsed),t.xp6(2),t.Q6J("size",12)("label","Nome "+i.lex.translate("tipo de avalia\xe7\xe3o"))("control",i.filter.controls.nome),t.uIk("maxlength",250),t.xp6(2),t.Q6J("template",s),t.xp6(3),t.Q6J("template",c),t.xp6(3),t.Q6J("onEdit",i.edit)("options",i.options),t.xp6(1),t.Q6J("rows",i.rowsLimit)}},dependencies:[r.sg,r.O5,v.M,Z.a,N.b,tt.z,ot.n,at.Q,O.m,C.F]})}return a})(),canActivate:[p.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Tipos de Avalia\xe7\xe3o"}},{path:"new",component:g,canActivate:[p.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Tipo de Avalia\xe7\xe3o",modal:!0}},{path:":id/edit",component:g,canActivate:[p.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Tipo de Avalia\xe7\xe3o",modal:!0}},{path:":id/consult",component:g,canActivate:[p.a],resolve:{config:u.o},runGuardsAndResolvers:"always",data:{title:"Consulta a Tipo de Avalia\xe7\xe3o",modal:!0}}];let mt=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#o=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[T.Bz.forChild(ut),T.Bz]})}return a})();var dt=l(2662),ft=l(2133);let vt=(()=>{class a{static#t=this.\u0275fac=function(e){return new(e||a)};static#o=this.\u0275mod=t.oAB({type:a});static#a=this.\u0275inj=t.cJS({imports:[r.ez,dt.K,ft.UX,mt]})}return a})()}}]);