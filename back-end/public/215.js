"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[215],{2215:(lt,E,d)=>{d.r(E),d.d(E,{UnidadeModule:()=>dt});var _=d(6733),N=d(5579),p=d(1391),g=d(2314),f=d(8239),U=d(4040),O=d(497),M=d(5316),B=d(7744),b=d(1214),x=d(5255),W=d(2559),h=d(3937),j=d(1184),k=d(2067),e=d(755),I=d(8820),A=d(8967),Q=d(2392),G=d(4603),X=d(6848),J=d(7819),T=d(6384),z=d(4978),K=d(5560),$=d(5795),ee=d(5007),te=d(2739);const ie=["unidade_pai"],ae=["cidade"],ne=["gestor"],oe=["gestorSubstituto"],de=["gestorDelegado"],se=["entidade"],le=["notificacoes"];function re(n,r){if(1&n&&(e.TgZ(0,"tab",28),e._UZ(1,"notificacoes-config",29,30),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("unidadeId",i.entity.id.length?i.entity.id:"ADD")("entity",i.entity)("disabled",i.formDisabled)}}const ue=function(n){return["entidade_id","==",n]},ce=function(n){return[n]};let y=(()=>{class n extends j.F{get informalIsDisabled(){return"true"}get instituidoraIsDisabled(){return this.informal?"true":void 0}get codigoIsDisabled(){return this.informal||"new"!=this.action?"true":void 0}get unidadePaiIsDisabled(){return this.unidadeRaiz||!this.informal&&"edit"==this.action?"true":void 0}get isDisabled(){return this.informal||"edit"!=this.action?void 0:"true"}constructor(i){super(i,h.b,b.J),this.injector=i,this.unidadeRaiz=!1,this.informal=!0,this.validate=(a,t)=>{let o=null;return"unidade_pai_id"==t&&!a.value?.length&&!this.unidadeRaiz&&(o="Obrigat\xf3rio"),"codigo"==t&&!this.form?.controls.informal.value&&!parseInt(a.value)&&(o="Obrigat\xf3rio"),o},this.titleEdit=a=>"Editando "+this.lex.translate("Unidade")+": "+(a?.sigla||""),this.entidadeDao=i.get(M.i),this.cidadeDao=i.get(O.l),this.usuarioDao=i.get(x.q),this.planoTrabalhoDao=i.get(B.t),this.notificacao=i.get(k.r),this.modalWidth=1200,this.planoDataset=this.planoTrabalhoDao.dataset(),this.form=this.fh.FormBuilder({codigo:{default:""},sigla:{default:""},nome:{default:""},path:{default:""},cidade_id:{default:""},uf:{default:""},instituidora:{default:!1},informal:{default:!0},atividades_arquivamento_automatico:{default:0},distribuicao_forma_contagem_prazos:{default:"DIAS_UTEIS"},entrega_forma_contagem_prazos:{default:"HORAS_UTEIS"},notificacoes:{default:{}},etiquetas:{default:[]},unidade_pai_id:{default:""},entidade_id:{default:this.auth.unidade?.entidade_id},etiqueta_texto:{default:""},etiqueta_icone:{default:null},etiqueta_cor:{default:null},expediente24:{default:!0},expediente:{default:null},usar_expediente_unidade:{default:!1},texto_complementar_plano:{default:""}},this.cdRef,this.validate),this.join=["cidade","entidade","unidade_pai","gestor.usuario:id,nome","gestores_substitutos.usuario:id,nome","gestores_delegados.usuario:id,nome","notificacoes_templates","gestor.gestor:id","gestores_substitutos.gestor_substituto:id","gestores_delegados.gestor_delegado:id"]}loadData(i,a){var t=this;return(0,f.Z)(function*(){t.informal=!!i.informal,t.cdRef.detectChanges();let o=Object.assign({},a.value);i.etiquetas=i.etiquetas||[],t.form.patchValue(t.util.fillForm(o,i)),yield Promise.all([t.unidadePai.loadSearch(i.unidade_pai||i.unidade_pai_id),t.cidade.loadSearch(i.cidade||i.cidade_id),t.entidade.loadSearch(i.entidade||i.entidade_id)]),t.form.controls.informal.setValue(i.informal),t.unidadeRaiz="edit"==t.action&&!i.unidade_pai_id,t.form.controls.usar_expediente_unidade.setValue(!!i.expediente),t.fh.revalidate(t.form)})()}initializeData(i){this.entity=new h.b({entidade_id:this.auth.unidade?.entidade_id,entidade:this.auth.unidade?.entidade,informal:1}),this.loadData(this.entity,i)}addItemHandle(){let i;const a=this.form.controls.etiqueta_texto.value,t=this.util.textHash(a);return a?.length&&this.util.validateLookupItem(this.form.controls.etiquetas.value,t)&&(i={key:t,value:this.form.controls.etiqueta_texto.value,color:this.form.controls.etiqueta_cor.value,icon:this.form.controls.etiqueta_icone.value},this.form.controls.etiqueta_texto.setValue(""),this.form.controls.etiqueta_icone.setValue(null),this.form.controls.etiqueta_cor.setValue(null)),i}saveData(i){var a=this;return new Promise(function(){var t=(0,f.Z)(function*(o,s){a.notificacoes.saveData();let l=a.util.fill(new h.b,a.entity);l=a.util.fillForm(l,a.form.value),l.notificacoes=a.entity.notificacoes,l.notificacoes_templates=a.entity.notificacoes_templates,a.form.controls.usar_expediente_unidade||(l.expediente=null),o(l)});return function(o,s){return t.apply(this,arguments)}}())}onInformalChange(i){this.informal=this.form.controls.informal.value,this.form.controls.codigo.setValue(""),this.form.controls.instituidora.setValue(!1),this.form.controls.codigo.updateValueAndValidity()}onUsarExpedienteEntidadeChange(){this.form.controls.expediente.setValue(this.form.controls.usar_expediente_unidade.value?this.form.controls.expediente.value||new W.z:null)}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-unidade-form"]],viewQuery:function(a,t){if(1&a&&(e.Gf(U.Q,5),e.Gf(ie,5),e.Gf(ae,5),e.Gf(ne,5),e.Gf(oe,5),e.Gf(de,5),e.Gf(se,5),e.Gf(le,5)),2&a){let o;e.iGM(o=e.CRH())&&(t.editableForm=o.first),e.iGM(o=e.CRH())&&(t.unidadePai=o.first),e.iGM(o=e.CRH())&&(t.cidade=o.first),e.iGM(o=e.CRH())&&(t.gestor=o.first),e.iGM(o=e.CRH())&&(t.gestorSubstituto=o.first),e.iGM(o=e.CRH())&&(t.gestorDelegado=o.first),e.iGM(o=e.CRH())&&(t.entidade=o.first),e.iGM(o=e.CRH())&&(t.notificacoes=o.first)}},features:[e.qOj],decls:33,vars:46,consts:[["initialFocus","sigla",3,"title","form","disabled","submit","cancel"],["display","","right",""],["key","PRINCIPAL","label","Principal"],[1,"row"],["label","Informal","labelClass","text-nowrap","controlName","informal",3,"disabled","size","labelInfo","change"],["label","Instit.","labelClass","text-nowrap","controlName","instituidora",3,"disabled","size","labelInfo"],["label","C\xf3digo","controlName","codigo",3,"disabled","size"],["label","Sigla","controlName","sigla","required","",3,"disabled","size"],["label","Nome","controlName","nome","required","",3,"disabled","size"],["controlName","cidade_id","required","",3,"disabled","size","dao"],["cidade",""],["controlName","unidade_pai_id",3,"disabled","size","label","where","dao"],["unidade_pai",""],["disabled","","controlName","entidade_id","required","",3,"size","dao"],["entidade",""],["key","CONFIGURACOES","label","Configura\xe7\xf5es"],["clss","row"],["label","Etiquetas","multiselectStyle","inline","controlName","etiquetas",3,"maxItemWidth","size","addItemHandle"],["label","Texto","controlName","etiqueta_texto",3,"size"],["label","\xcdcone","controlName","etiqueta_icone",3,"size","items"],["label","Cor","controlName","etiqueta_cor",3,"size"],["controlName","texto_complementar_plano",3,"label","dataset"],["key","EXPEDIENTE","label","Expediente"],["label","Usar calend\xe1rio pr\xf3prio","labelPosition","right","icon","bi bi-check2","controlName","usar_expediente_unidade",3,"size","labelInfo","change"],["usarExpedienteEntidade",""],[3,"disabled","expedienteDisabled","control"],["expediente",""],["key","NOTIFICACOES","label","Notifica\xe7\xf5es",4,"ngIf"],["key","NOTIFICACOES","label","Notifica\xe7\xf5es"],[3,"unidadeId","entity","disabled"],["notificacoes",""]],template:function(a,t){1&a&&(e.TgZ(0,"editable-form",0),e.NdJ("submit",function(){return t.onSaveData()})("cancel",function(){return t.onCancel()}),e.TgZ(1,"tabs",1)(2,"tab",2)(3,"div",3)(4,"input-switch",4),e.NdJ("change",function(s){return t.onInformalChange(s)}),e.qZA(),e._UZ(5,"input-switch",5)(6,"input-text",6)(7,"input-text",7)(8,"input-text",8),e.qZA(),e.TgZ(9,"div",3),e._UZ(10,"input-search",9,10)(12,"input-search",11,12)(14,"input-search",13,14),e.qZA()(),e.TgZ(16,"tab",15),e._UZ(17,"separator"),e.TgZ(18,"div",16)(19,"input-multiselect",17),e._UZ(20,"input-text",18)(21,"input-select",19)(22,"input-color",20),e.qZA()(),e._UZ(23,"separator"),e.TgZ(24,"div",3),e._UZ(25,"input-editor",21),e.qZA()(),e.TgZ(26,"tab",22)(27,"div",3)(28,"input-switch",23,24),e.NdJ("change",function(){return t.onUsarExpedienteEntidadeChange()}),e.qZA()(),e._UZ(30,"calendar-expediente",25,26),e.qZA(),e.YNc(32,re,3,3,"tab",27),e.qZA()()),2&a&&(e.Q6J("title",t.isModal?"":t.title)("form",t.form)("disabled",t.formDisabled),e.xp6(4),e.Q6J("disabled",t.informalIsDisabled)("size",1)("labelInfo","Definir se "+t.lex.translate("a unidade")+" \xe9 informal ou n\xe3o."+t.lex.translate(" Unidades")+" informais s\xe3o, por exemplo: times volantes, comiss\xf5es, grupos de trabalho, etc."+t.lex.translate(" Unidades")+" informais n\xe3o podem mudar para formais, ou vice-versa."),e.xp6(1),e.Q6J("disabled",t.instituidoraIsDisabled)("size",1)("labelInfo","Se a "+t.lex.translate("unidade")+" \xe9 instituidora de Programas. Unidade administrativa prevista no art. 4\xba do Decreto n\xba 11.072, de 2022."),e.xp6(1),e.Q6J("disabled",t.codigoIsDisabled)("size",2),e.xp6(1),e.Q6J("disabled",t.isDisabled)("size",2),e.xp6(1),e.Q6J("disabled",t.isDisabled)("size",6),e.xp6(2),e.Q6J("disabled",t.isDisabled)("size",4)("dao",t.cidadeDao),e.xp6(2),e.Q6J("disabled",t.unidadePaiIsDisabled)("size",4)("label",t.lex.translate("Unidade")+" pai")("where",e.VKq(44,ce,e.VKq(42,ue,t.form.controls.entidade_id.value)))("dao",t.dao),e.xp6(2),e.Q6J("size",4)("dao",t.entidadeDao),e.xp6(5),e.Q6J("maxItemWidth",250)("size",12)("addItemHandle",t.addItemHandle.bind(t)),e.xp6(1),e.Q6J("size",6),e.uIk("maxlength",250),e.xp6(1),e.Q6J("size",3)("items",t.lookup.ICONES),e.xp6(1),e.Q6J("size",3),e.xp6(3),e.Q6J("label","Texto complementar "+t.lex.translate("Plano de Trabalho"))("dataset",t.planoDataset),e.xp6(3),e.hYB("labelInfo","Se o expediente da ",t.lex.translate("unidade")," n\xe3o for definido usaremos o da ",t.lex.translate("entidade"),""),e.Q6J("size",12),e.xp6(2),e.Q6J("disabled",t.form.controls.usar_expediente_unidade.value?void 0:"true")("expedienteDisabled",null==t.entity||null==t.entity.entidade?null:t.entity.entidade.expediente)("control",t.form.controls.expediente),e.xp6(2),e.Q6J("ngIf",t.entity))},dependencies:[_.O5,U.Q,I.a,A.V,Q.m,G.p,X.z,J.p,T.n,z.i,K.N,$.G,ee.Z,te.y]})}return n})();var v=d(3150),C=d(8509),Z=d(7224),D=d(3351),me=d(7765),R=d(5512),fe=d(2704),S=d(5489);const pe=["instituidora"];function ge(n,r){if(1&n&&(e.TgZ(0,"h3",19),e._uU(1),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Oqu(i.title)}}function he(n,r){if(1&n&&e._UZ(0,"toolbar",20),2&n){const i=e.oxw();e.Q6J("buttons",i.buttons)}}function _e(n,r){if(1&n&&(e.TgZ(0,"span",23),e._UZ(1,"i",24),e._uU(2),e.qZA()),2&n){const i=e.oxw().row;e.xp6(2),e.hij(" ",i.unidade.sigla," ")}}function be(n,r){if(1&n&&(e.TgZ(0,"span",21),e._uU(1),e.qZA(),e.YNc(2,_e,3,1,"span",22)),2&n){const i=r.row;e.xp6(1),e.Oqu(i.nome),e.xp6(1),e.Q6J("ngIf",i.unidade)}}function ve(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const i=r.row;e.xp6(1),e.Oqu(((null==i.cidade?null:i.cidade.nome)||"")+"/"+((null==i.cidade?null:i.cidade.uf)||""))}}function Ue(n,r){1&n&&e._UZ(0,"badge",28)}function Ie(n,r){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,Ue,1,0,"badge",26),e._UZ(2,"badge",27),e.qZA()),2&n){const i=r.row;e.xp6(1),e.Q6J("ngIf",i.instituidora),e.xp6(1),e.Q6J("color",i.data_inativacao?"danger":"success")("icon",i.data_inativacao?"bi bi-x-circle":"bi bi-check-circle")("label",i.data_inativacao?"Inativo":"Ativo")}}let Ae=(()=>{class n extends C.E{constructor(i){super(i,h.b,b.J),this.injector=i,this.selectable=!1,this.buttons=[],this.filterWhere=a=>{let t=a.value,o=[];return o.push(this.selectable?["data_inativacao",t.inativos?"!=":"==",null]:["inativos","==",t.inativos]),t.entidade_id?.length&&o.push(["entidade_id","==",t.entidade_id]),t.nome?.length&&o.push(["or",["nome","like","%"+t.nome.trim().replace(" ","%")+"%"],["sigla","like","%"+t.nome.trim().replace(" ","%")+"%"]]),t.instituidora&&o.push(["instituidora","==",1]),o},this.join=["cidade","unidade_pai:id,sigla","entidade:id,sigla","gestor.usuario:id","gestores_substitutos.usuario:id"],this.cidadeDao=i.get(O.l),this.entidadeDao=i.get(M.i),this.code="MOD_CFG_UND",this.filter=this.fh.FormBuilder({entidade_id:{default:this.auth.unidade?.entidade_id},inativos:{default:!1},instituidora:{default:!1},nome:{default:""}}),this.groupBy=[{field:"entidade.sigla",label:"Entidade"}],this.auth.hasPermissionTo("MOD_UND_UNIR")&&this.buttons.push({icon:"bi bi-arrows-collapse",color:"btn-outline-danger",label:"Unificar",onClick:a=>this.go.navigate({route:["configuracoes","unidade","merge"]},this.modalRefresh())}),this.addOption(this.OPTION_INFORMACOES,"MOD_UND"),this.addOption(this.OPTION_EXCLUIR,"MOD_UND_EXCL")}dynamicOptions(i){var a=this;let t=[],o=i;return this.auth.hasPermissionTo("MOD_UND_INATV")&&t.push({icon:o.data_inativacao?"bi bi-check-circle":"bi bi-x-circle",label:o.data_inativacao?"Reativar":"Inativar",onClick:(s=(0,f.Z)(function*(l){return yield a.inativo(l,!l.data_inativacao)}),function(u){return s.apply(this,arguments)})}),this.auth.hasPermissionTo("MOD_UND_INTG")&&t.push({label:"Integrantes",icon:"bi bi-people",onClick:s=>this.go.navigate({route:["configuracoes","unidade","",s.id,"integrante"]},{metadata:{unidade:i}})}),t;var s}inativo(i,a){var t=this;return(0,f.Z)(function*(){if(yield t.dialog.confirm(a?"Inativar":"Reativar",a?"Deseja realmente inativar essa unidade ("+i.nome+")?":"Deseja reativar essa unidade ("+i.nome+")?"))try{t.submitting=!0,yield t.dao.inativar(i.id,a),yield t.modalRefreshId(i).modalClose(void 0)}finally{t.submitting=!1}})()}filterClear(i){super.filterClear(i)}get labelInfoInativas(){return this.selectable?"Se lista s\xf3 as unidades inativas":"Se lista tamb\xe9m as unidades inativas"}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["unidade-list-grid"]],viewQuery:function(a,t){if(1&a&&(e.Gf(v.M,5),e.Gf(pe,5)),2&a){let o;e.iGM(o=e.CRH())&&(t.grid=o.first),e.iGM(o=e.CRH())&&(t.instituidora=o.first)}},inputs:{selectable:"selectable",snapshot:"snapshot"},features:[e.qOj],decls:23,vars:34,consts:[["class","my-2",4,"ngIf"],[3,"dao","add","orderBy","groupBy","join","selectable","hasAdd","hasEdit","select"],[3,"buttons",4,"ngIf"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["label","Nome","controlName","nome","placeholder","Nome ou sigla...",3,"size","control"],["label","Instit.","labelClass","text-nowrap","controlName","instituidora",3,"size","control","labelInfo"],["instituidora",""],["label","Inativos","controlName","inativos",3,"size","control","labelInfo"],["title","Sigla","field","sigla"],["title","Nome","orderBy","nome",3,"template"],["columnNome",""],["title","C\xf3digo","field","codigo"],[3,"title","template"],["columnCidade",""],["title","Situa\xe7\xe3o",3,"template"],["columnSituacao",""],["type","options",3,"onEdit","options","dynamicOptions"],[3,"rows"],[1,"my-2"],[3,"buttons"],[1,"d-block"],["class","badge bg-light text-dark",4,"ngIf"],[1,"badge","bg-light","text-dark"],[1,"bi","bi-arrow-return-right"],[1,"one-per-line"],["color","primary","icon","bi bi-star","label","Instituidora",4,"ngIf"],[3,"color","icon","label"],["color","primary","icon","bi bi-star","label","Instituidora"]],template:function(a,t){if(1&a&&(e.YNc(0,ge,2,1,"h3",0),e.TgZ(1,"grid",1),e.NdJ("select",function(s){return t.onSelect(s)}),e.YNc(2,he,1,1,"toolbar",2),e.TgZ(3,"filter",3)(4,"div",4),e._UZ(5,"input-text",5)(6,"input-switch",6,7)(8,"input-switch",8),e.qZA()(),e.TgZ(9,"columns"),e._UZ(10,"column",9),e.TgZ(11,"column",10),e.YNc(12,be,3,2,"ng-template",null,11,e.W1O),e.qZA(),e._UZ(14,"column",12),e.TgZ(15,"column",13),e.YNc(16,ve,2,1,"ng-template",null,14,e.W1O),e.qZA(),e.TgZ(18,"column",15),e.YNc(19,Ie,3,4,"ng-template",null,16,e.W1O),e.qZA(),e._UZ(21,"column",17),e.qZA(),e._UZ(22,"pagination",18),e.qZA()),2&a){const o=e.MAs(13),s=e.MAs(17),l=e.MAs(20);e.Q6J("ngIf",t.isModal),e.xp6(1),e.Q6J("dao",t.dao)("add",t.add)("orderBy",t.orderBy)("groupBy",t.groupBy)("join",t.join)("selectable",t.selectable)("hasAdd",t.auth.hasPermissionTo("MOD_UND_INCL"))("hasEdit",t.auth.hasPermissionTo("MOD_UND_EDT")),e.xp6(1),e.Q6J("ngIf",!t.selectable),e.xp6(1),e.Q6J("deleted",t.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",t.filter)("where",t.filterWhere)("submit",t.filterSubmit.bind(t))("clear",t.filterClear.bind(t))("collapseChange",t.filterCollapseChange.bind(t))("collapsed",!t.selectable&&t.filterCollapsed),e.xp6(2),e.Q6J("size",10)("control",t.filter.controls.nome),e.uIk("maxlength",250),e.xp6(1),e.Q6J("size",1)("control",t.filter.controls.instituidora)("labelInfo","Se lista SOMENTE as "+t.lex.translate("unidades")+" instituidoras de "+t.lex.translate("programas")),e.xp6(2),e.Q6J("size",1)("control",t.filter.controls.inativos)("labelInfo",t.labelInfoInativas),e.xp6(3),e.Q6J("template",o),e.xp6(4),e.Q6J("title",t.lex.translate("Cidade"))("template",s),e.xp6(3),e.Q6J("template",l),e.xp6(3),e.Q6J("onEdit",t.edit)("options",t.options)("dynamicOptions",t.dynamicOptions.bind(t)),e.xp6(1),e.Q6J("rows",t.rowsLimit)}},dependencies:[_.O5,v.M,Z.a,D.b,me.z,R.n,fe.Q,I.a,Q.m,S.F]})}return n})();var F=d(5471),Te=d(9838),P=d(6925);function ye(n,r){if(1&n&&(e.TgZ(0,"div",4),e._uU(1),e.qZA()),2&n){const i=r.$implicit;e.xp6(1),e.Oqu(i.label)}}let Ce=(()=>{class n extends C.E{constructor(i){super(i,h.b,b.J),this.injector=i,this.data=[],this.dao=i.get(b.J)}ngAfterViewInit(){super.ngAfterViewInit(),this.carregaUnidades()}carregaUnidades(){var i=this;return(0,f.Z)(function*(){let a=i.auth.usuario?.lotacao?.unidade_id,t=yield i.dao.hierarquiaUnidades(a),o=[],s=a;for(;s;){let c=t.find(m=>m.id===s);if(!c)break;o.unshift(s),s=c.unidade_pai_id||void 0}let l=c=>t.filter(m=>m.unidade_pai_id===c).map(m=>({type:"unidade",label:m.sigla,expanded:a!==m.id&&o.includes(m.id),styleClass:a==m.id?"text-bg-primary":"",data:{hint:m.nome,unidade:m},children:u(m.id)?l(m.id):[{type:"fake",expanded:!1,label:"Carregando..."}]})),u=c=>t.some(m=>m.unidade_pai_id===c);i.data=l(null)})()}expandeUnidade(i){this.carregaFilhas(i.node.data.unidade.id,i.node)}carregaFilhas(i,a){var t=this;return(0,f.Z)(function*(){let o=yield t.dao.unidadesFilhas(i);a.children=o.map(s=>({type:"unidade",label:s.sigla,expanded:!1,data:{unidade:s,hint:s.nome},children:[{type:"fake",expanded:!1,label:"Carregando..."}]}))})()}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["unidade-mapa"]],features:[e.qOj],decls:4,vars:1,consts:[["autoHeightDisabled","false","track","all"],[1,"my-3"],[3,"value","onNodeExpand"],["pTemplate","unidade"],[1,"font-bold"]],template:function(a,t){1&a&&(e.TgZ(0,"ng-scrollbar",0)(1,"div",1)(2,"p-organizationChart",2),e.NdJ("onNodeExpand",function(s){return t.expandeUnidade(s)}),e.YNc(3,ye,2,1,"ng-template",3),e.qZA()()()),2&a&&(e.xp6(2),e.Q6J("value",t.data))},dependencies:[F.OE,Te.jx,P.KC]})}return n})();function Ze(n,r){if(1&n&&e._UZ(0,"unidade-list-grid",4),2&n){const i=e.oxw();e.Q6J("selectable",i.selectable)("snapshot",i.snapshot||i.modalRoute||i.route.snapshot)}}function De(n,r){1&n&&e._UZ(0,"unidade-mapa")}function Ee(n,r){if(1&n&&(e.TgZ(0,"tab",5),e.YNc(1,De,1,0,"ng-template",null,6,e.W1O),e.qZA()),2&n){const i=e.MAs(2);e.Q6J("template",i)}}let q=(()=>{class n extends C.E{constructor(i){super(i,h.b,b.J),this.injector=i,this.filterWhere=a=>[],this.title=this.lex.translate("Unidades"),this.code="MOD_CFG_UND",this.filter=this.fh.FormBuilder({})}ngAfterViewInit(){super.ngAfterViewInit(),this.tabs.active=["TABELA","MAPA"].includes(this.usuarioConfig.active_tab)?this.usuarioConfig.active_tab:"TABELA"}onSelectTab(i){var a=this;return(0,f.Z)(function*(){a.viewInit&&a.saveUsuarioConfig({active_tab:i.key})})()}filterClear(i){i.controls.nome.setValue(""),super.filterClear(i)}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-unidade-list"]],viewQuery:function(a,t){if(1&a&&(e.Gf(v.M,5),e.Gf(T.n,5)),2&a){let o;e.iGM(o=e.CRH())&&(t.grid=o.first),e.iGM(o=e.CRH())&&(t.tabs=o.first)}},features:[e.qOj],decls:5,vars:4,consts:[["right","",3,"title","select"],["key","TABELA","icon","bi bi-table","label","Lista",3,"template"],["grid",""],["key","MAPA","icon","bi bi-card-heading","label","Mapa",3,"template",4,"ngIf"],[3,"selectable","snapshot"],["key","MAPA","icon","bi bi-card-heading","label","Mapa",3,"template"],["mapa",""]],template:function(a,t){if(1&a&&(e.TgZ(0,"tabs",0)(1,"tab",1),e.YNc(2,Ze,1,2,"ng-template",null,2,e.W1O),e.qZA(),e.YNc(4,Ee,3,1,"tab",3),e.qZA()),2&a){const o=e.MAs(3);e.Q6J("title",t.isModal?"":t.title)("select",t.onSelectTab.bind(t)),e.xp6(1),e.Q6J("template",o),e.xp6(3),e.Q6J("ngIf",!t.selectable)}},dependencies:[_.O5,T.n,z.i,Ae,Ce]})}return n})();var L=d(6298),Ne=d(933);const Oe=["unidadeOrigem"],Me=["unidadeDestino"];function xe(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e._UZ(2,"br"),e.TgZ(3,"small"),e._uU(4),e.qZA()),2&n){const i=r.row;e.xp6(1),e.Oqu((null==i.unidade_origem?null:i.unidade_origem.nome)||""),e.xp6(3),e.AsE("",(null==i.unidade_origem?null:i.unidade_origem.codigo)||""," - ",(null==i.unidade_origem?null:i.unidade_origem.sigla)||"","")}}const Qe=function(){return["inativo","!=",null]},V=function(n){return[n]},H=function(){return["configuracoes","unidade"]},Ge=function(){return{inativos:!0}},w=function(n){return{filter:n}},Y=function(n,r){return{route:n,params:r}};function Je(n,r){if(1&n&&e._UZ(0,"input-search",12,13),2&n){const i=e.oxw();e.Q6J("size",12)("dao",i.dao)("where",e.VKq(5,V,e.DdM(4,Qe)))("selectRoute",e.WLB(11,Y,e.DdM(7,H),e.VKq(9,w,e.DdM(8,Ge))))}}function ze(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA(),e._UZ(2,"br"),e.TgZ(3,"small"),e._uU(4),e.qZA()),2&n){const i=r.row;e.xp6(1),e.Oqu((null==i.unidade_destino?null:i.unidade_destino.nome)||""),e.xp6(3),e.AsE("",(null==i.unidade_destino?null:i.unidade_destino.codigo)||""," - ",(null==i.unidade_destino?null:i.unidade_destino.sigla)||"","")}}const Re=function(){return["inativo","==",null]},Se=function(){return{inativos:!1}};function Fe(n,r){if(1&n&&e._UZ(0,"input-search",14,15),2&n){const i=e.oxw();e.Q6J("size",12)("dao",i.dao)("where",e.VKq(5,V,e.DdM(4,Re)))("selectRoute",e.WLB(11,Y,e.DdM(7,H),e.VKq(9,w,e.DdM(8,Se))))}}let Pe=(()=>{class n extends L.D{constructor(i){super(i),this.injector=i,this.items=[],this.toolbarButtons=[{icon:"bi bi-yin-yang",label:"Mesma sigla",hint:"Unificar todos que tenham a mesma sigla. Sendo a inativa considerada como origem.",onClick:this.onMesmaSiglaClick.bind(this)}],this.validate=(a,t)=>null,this.dao=i.get(b.J),this.form=this.fh.FormBuilder({exclui_origem:{default:!1},origem_inativo:{default:!0},unidade_origem_id:{default:""},unidade_destino_id:{default:""}},this.cdRef,this.validate)}onMesmaSiglaClick(){this.loading=!0,this.dao.mesmaSigla().then(i=>{let a=[];a=i.reduce((u,c)=>(!c.data_inativacao&&!u.find(m=>m.sigla==c.sigla)&&u.push(c),u),a);let t=a.map(u=>u.id),o=i.filter(u=>!t.includes(u.id)&&!!u.data_inativacao),s=o.map(u=>u.id);this.items=[];for(let u of o){let c=a.find(m=>m.sigla==u.sigla);c&&this.items.push({id:this.dao.generateUuid(),unidade_origem_id:u.id,unidade_destino_id:c.id,unidade_origem:u,unidade_destino:c})}let l=[];for(let u of i)!t.includes(u.id)&&!s.includes(u.id)&&l.push(u.codigo+" - "+u.sigla+" - "+u.nome);l.length&&(this.editableForm.error=(1==l.length?"A unidade abaixo possui duplicidade de SIGLA, mas n\xe3o est\xe1 inativa:":"As unidades abaixo possuem duplicidade de SIGLA, mas n\xe3o est\xe3o inativas:")+"\n"+l.join("\n"))}).finally(()=>{this.loading=!1})}addMerge(){var i=this;return(0,f.Z)(function*(){return{id:i.dao.generateUuid(),unidade_origem_id:"",unidade_destino_id:"",unidade_origem:void 0,unidade_destino:void 0}})()}loadMerge(i,a){return(0,f.Z)(function*(){i.controls.unidade_origem_id.setValue(a.unidade_origem_id),i.controls.unidade_destino_id.setValue(a.unidade_destino_id)})()}removeMerge(i){return(0,f.Z)(function*(){return!0})()}saveMerge(i,a){var t=this;return(0,f.Z)(function*(){let o;return(t.form.controls.unidade_origem_id.value?.length||t.form.controls.unidade_destino_id.value?.length)&&(a.unidade_origem_id=i.controls.unidade_origem_id.value,a.unidade_origem=t.unidadeOrigem?.selectedEntity||(yield t.dao?.getById(a.unidade_origem_id)),a.unidade_destino_id=i.controls.unidade_destino_id.value,a.unidade_destino=t.unidadeDestino?.selectedEntity||(yield t.dao?.getById(a.unidade_destino_id)),o=a),o})()}onMerge(){let i;for(let a of this.items)i=i||(a.unidade_origem_id?.length&&a.unidade_destino_id?.length?void 0:"A origem e o destino precisam estar preenchidos em todos");this.editableForm.error=i,i?.length||(this.loading=!0,this.dao.unificar(this.items.map(a=>Object.assign({},{unidade_origem_id:a.unidade_origem_id,unidade_destino_id:a.unidade_destino_id})),this.form.controls.exclui_origem.value).then(a=>{a&&this.close()}).finally(()=>{this.loading=!1}))}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-unidade-merge"]],viewQuery:function(a,t){if(1&a&&(e.Gf(U.Q,5),e.Gf(Oe,5),e.Gf(Me,5)),2&a){let o;e.iGM(o=e.CRH())&&(t.editableForm=o.first),e.iGM(o=e.CRH())&&(t.unidadeOrigem=o.first),e.iGM(o=e.CRH())&&(t.unidadeDestino=o.first)}},features:[e.qOj],decls:17,vars:16,consts:[["confirmLabel","Unificar",3,"form","title","submit","cancel"],["type","warning","message","Por motivos de seguran\xe7a ser\xe1 permitido somente unificar unidades inativas para unidade ativas. E caso [Exclui origem] n\xe3o esteja habilitado, a unidade de origem continuar\xe1 na lista (como inativa)."],[3,"buttons"],["labelPosition","left","label","Exclui origem","controlName","exclui_origem",3,"size"],["editable","",3,"items","form","add","load","remove","save"],["titleHint","Unidade que ser\xe1 substitu\xedda pela outra",3,"title","template","editTemplate"],["columnUnidadeOrigem",""],["editUnidadeOrigem",""],["titleHint","Unidade que sobrar\xe1 ap\xf3s a unifica\xe7\xe3o",3,"title","template","editTemplate"],["columnUnidadeDestino",""],["editUnidadeDestino",""],["type","options"],["label","","icon","","controlName","unidade_origem_id",3,"size","dao","where","selectRoute"],["unidade_origem",""],["label","","icon","","controlName","unidade_destino_id",3,"size","dao","where","selectRoute"],["unidade_destino",""]],template:function(a,t){if(1&a&&(e.TgZ(0,"editable-form",0),e.NdJ("submit",function(){return t.onMerge()})("cancel",function(){return t.onCancel()}),e._UZ(1,"top-alert",1),e.TgZ(2,"toolbar",2),e._UZ(3,"input-switch",3),e.qZA(),e.TgZ(4,"grid",4)(5,"columns")(6,"column",5),e.YNc(7,xe,5,3,"ng-template",null,6,e.W1O),e.YNc(9,Je,2,14,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(11,"column",8),e.YNc(12,ze,5,3,"ng-template",null,9,e.W1O),e.YNc(14,Fe,2,14,"ng-template",null,10,e.W1O),e.qZA(),e._UZ(16,"column",11),e.qZA()()()),2&a){const o=e.MAs(8),s=e.MAs(10),l=e.MAs(13),u=e.MAs(15);e.Q6J("form",t.form)("title",t.isModal?"":t.title),e.xp6(2),e.Q6J("buttons",t.toolbarButtons),e.xp6(1),e.Q6J("size",4),e.xp6(1),e.Q6J("items",t.items)("form",t.form)("add",t.addMerge.bind(t))("load",t.loadMerge.bind(t))("remove",t.removeMerge.bind(t))("save",t.saveMerge.bind(t)),e.xp6(2),e.Q6J("title",t.lex.translate("Unidade")+" origem")("template",o)("editTemplate",s),e.xp6(5),e.Q6J("title",t.lex.translate("Unidade")+" destino")("template",l)("editTemplate",u)}},dependencies:[v.M,Z.a,D.b,R.n,U.Q,I.a,A.V,Ne.o]})}return n})();var qe=d(8631),Le=d(7918),Ve=d(5298),He=d(2729);const we=["usuario"];function Ye(n,r){if(1&n&&(e.TgZ(0,"span")(1,"strong"),e._uU(2),e.qZA()()),2&n){const i=e.oxw();e.xp6(2),e.Oqu("Unidade: "+((null==i.entity?null:i.entity.nome)||""))}}function Be(n,r){if(1&n&&(e.TgZ(0,"div",11)(1,"div",12),e._UZ(2,"profile-picture",13),e.qZA(),e.TgZ(3,"div",14)(4,"strong"),e._uU(5),e.qZA(),e._UZ(6,"br"),e.TgZ(7,"small"),e._uU(8),e.qZA()()()),2&n){const i=r.row;e.xp6(2),e.Q6J("url",i.usuario_url_foto||"")("size",40)("hint",i.usuario_nome||""),e.xp6(3),e.Oqu(i.usuario_nome||""),e.xp6(3),e.Oqu(i.usuario_apelido||"")}}function We(n,r){if(1&n&&e._UZ(0,"input-search",15,16),2&n){const i=e.oxw(),a=e.MAs(1);e.Q6J("disabled",null!=a&&a.adding?void 0:"true")("size",12)("dao",i.usuarioDao)}}function je(n,r){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"badge",18)(2,"br"),e.qZA()),2&n){const i=r.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("color",a.lookup.getColor(a.lookup.UNIDADE_INTEGRANTE_TIPO,i||""))("icon",a.lookup.getIcon(a.lookup.UNIDADE_INTEGRANTE_TIPO,i||""))("label",a.lookup.getValue(a.lookup.UNIDADE_INTEGRANTE_TIPO,i||""))}}function ke(n,r){1&n&&e.YNc(0,je,3,3,"div",17),2&n&&e.Q6J("ngForOf",r.row.atribuicoes)}function Xe(n,r){if(1&n&&(e.TgZ(0,"input-multiselect",19),e._UZ(1,"input-select",20),e.qZA()),2&n){const i=e.oxw();e.Q6J("size",8)("addItemHandle",i.addItemHandle.bind(i))("deleteItemHandle",i.deleteItemHandle.bind(i)),e.xp6(1),e.Q6J("size",12)("items",i.tiposAtribuicao)}}function Ke(n,r){if(1&n&&e._UZ(0,"badge",21)(1,"br"),2&n){const i=r.row,a=e.oxw();e.Q6J("label",a.getPerfil(i.id)||"")}}function $e(n,r){if(1&n&&e._UZ(0,"input-select",22),2&n){const i=e.oxw();e.Q6J("size",12)("label",i.lex.translate("Perfil"))("dao",i.perfilDao)}}const tt=[{path:"",component:q,canActivate:[p.a],resolve:{config:g.o},runGuardsAndResolvers:"always",data:{title:"Unidades"}},{path:"new",component:y,canActivate:[p.a],resolve:{config:g.o},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Unidade",modal:!0}},{path:":id/edit",component:y,canActivate:[p.a],resolve:{config:g.o},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Unidade",modal:!0}},{path:":id/consult",component:y,canActivate:[p.a],resolve:{config:g.o},runGuardsAndResolvers:"always",data:{title:"Consulta a Unidade",modal:!0}},{path:":id/:idUnidade/integrante",component:(()=>{class n extends L.D{set control(i){super.control=i}get control(){return super.control}set entity(i){super.entity=i}get entity(){return super.entity}set noPersist(i){super.noPersist=i}get noPersist(){return super.noPersist}constructor(i){super(i),this.injector=i,this.items=[],this.perfis=[],this.tiposAtribuicao=[],this.validate=(a,t)=>{let o=null;return["usuario_id","atribuicoes"].includes(t)&&!a.value?.length&&(o="Obrigat\xf3rio"),"usuario_id"==t&&this.grid?.adding&&this.items.map(s=>s.id).includes(a.value)&&(o="O usu\xe1rio j\xe1 \xe9 integrante desta unidade. Edite-o, ao inv\xe9s de inclu\xed-lo novamente!"),o},this.formValidation=a=>{if(this.util.array_diff(["GESTOR","GESTOR_SUBSTITUTO","GESTOR_DELEGADO"],a.controls.atribuicoes.value.map(o=>o.key)||[]).length<2)return"A um mesmo servidor s\xf3 pode ser atribu\xedda uma fun\xe7\xe3o de gestor (titular, substituto ou delegado), para uma mesma Unidade!"},this.integranteService=i.get(Le.X),this.integranteDao=i.get(qe.o),this.usuarioDao=i.get(x.q),this.perfilDao=i.get(Ve.r),this.form=this.fh.FormBuilder({usuario_id:{default:""},atribuicoes:{default:void 0},atribuicao:{default:""},perfil_id:{default:null}},this.cdRef,this.validate)}ngOnInit(){super.ngOnInit(),this.entity=this.metadata?.unidade,this.tiposAtribuicao=this.lookup.UNIDADE_INTEGRANTE_TIPO}ngAfterViewInit(){var i=this;(0,f.Z)(function*(){yield i.loadData(i.entity,i.form)})()}loadData(i,a){var t=this;return(0,f.Z)(function*(){if(i.id){let o=[],s=[];t.loading=!0;try{yield t.integranteDao.carregarIntegrantes(i.id,"").then(l=>o=l.integrantes.filter(u=>u.atribuicoes?.length>0)),o.forEach(l=>s.push(l.id)),t.perfis=yield t.usuarioDao.query({where:[["id","in",s]]}).asPromise()}finally{t.loading=!1,t.items=[],o.forEach(l=>t.items?.push(t.integranteService.completarIntegrante(l,i.id,l.id,l.atribuicoes))),t.items=t.integranteService.ordenarIntegrantes(t.items),t.cdRef.detectChanges(),t.grid.loading=!1}}})()}getPerfil(i){return this.perfis.find(t=>t.id==i)?.perfil?.nome}addItemHandle(){let i;const a=this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO,this.form.controls.atribuicao.value),t=this.form.controls.atribuicao.value;return a?.length&&this.util.validateLookupItem(this.form.controls.atribuicoes.value,t)&&(i={key:t,value:a,icon:this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO,this.form.controls.atribuicao.value),color:this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO,this.form.controls.atribuicao.value)},this.form.controls.atribuicao.setValue("")),i}deleteItemHandle(i){return this.integranteService.ehPermitidoApagar(i.key)}carregarIntegrante(i,a){var t=this;return(0,f.Z)(function*(){let o=t.perfis.find(s=>s.id==a.id);i.controls.usuario_id.setValue(t.grid?.adding?a.usuario_id:a.id),i.controls.perfil_id.setValue(o?.perfil_id),i.controls.atribuicoes.setValue(t.integranteService.converterAtribuicoes(a.atribuicoes)),i.controls.atribuicao.setValue("")})()}adicionarIntegrante(){var i=this;return(0,f.Z)(function*(){return i.grid&&(i.grid.error=""),{id:i.integranteDao.generateUuid(),usuario_id:"",atribuicoes:[]}})()}removerIntegrante(i){var a=this;return(0,f.Z)(function*(){if(i.atribuicoes[0].includes("LOTADO"))yield a.dialog.alert("IMPOSS\xcdVEL EXCLUIR !","O v\xednculo que inclui "+a.lex.translate("a lota\xe7\xe3o")+" "+a.lex.translate("do servidor")+" n\xe3o pode ser exclu\xeddo. Se desejar excluir as demais atribui\xe7\xf5es, edite o v\xednculo. Se deseja alterar "+a.lex.translate("a lota\xe7\xe3o")+", lote-o em outra "+a.lex.translate("Unidade")+".");else if(yield a.dialog.confirm("Exclui ?","Deseja realmente excluir todas as atribui\xe7\xf5es "+a.lex.translate("do servidor")+i.usuario_nome?.toUpperCase()+" "+a.lex.translate("na unidade")+" "+a.entity.sigla.toUpperCase()+" ?")){let o;try{if(a.isNoPersist)return Object.assign(i,{_status:"DELETE",atribuicoes:[]}),!1;a.loading=!0,yield a.integranteDao.salvarIntegrantes([a.integranteService.completarIntegrante(i,a.entity.id,i.id,[])]).then(s=>{(o=s.find(l=>l._metadata.msg?.length)?._metadata.msg)&&a.grid&&(a.grid.error=o)}),yield a.loadData({id:a.entity.id},a.form)}finally{a.loading=!1}}return!1})()}salvarIntegrante(i,a){var t=this;return(0,f.Z)(function*(){let o=t.lookup.uniqueLookupItem(i.controls.atribuicoes.value);i.controls.atribuicoes.setValue(o),t.grid&&(t.grid.error=""),t.cdRef.detectChanges();let s=t.formValidation(i);if(s)yield t.dialog.alert("Imposs\xedvel incluir/alterar o servidor!",s);else{let l=!0,u=t.integranteService.haAlteracaoGerencia(o.map(c=>c.key),Object.assign(a,{usuario_nome:t.usuario?.selectedItem?.entity.nome}),t.grid?.items||[],t.entity?.sigla||"");if("nenhuma"!=u[0]){if(l=yield t.dialog.confirm("CONFIRMA A ALTERA\xc7\xc3O DA CHEFIA ?",u[2]),!l)return;"troca"===u[0]&&(t.grid.items[u[1]].atribuicoes=t.grid.items[u[1]].atribuicoes.filter(c=>!["GESTOR"].includes(c))),o=t.integranteService.inserirAtribuicao(o,"LOTADO"),i.controls.atribuicoes.setValue(o),t.loading=!0}try{t.isNoPersist?(a.id=t.usuario?.selectedEntity.id,t.grid.items=t.integranteService.substituirItem({id:a.id,itens:t.grid?.items||[],apelidoOuSigla:t.usuario?.selectedItem?.entity.apelido,nome:t.usuario?.selectedItem?.entity.nome,codigo:""},o.map(c=>c.key),new h.b(t.entity))):(yield t.integranteDao.salvarIntegrantes([Object.assign({_metadata:{perfil_id:i.controls.perfil_id.value}},t.integranteService.completarIntegrante(a,t.entity.id,i.controls.usuario_id.value,o.map(c=>c.key)))]).then(c=>{let m;(m=c?.find(st=>st._metadata.msg?.length)?._metadata.msg)&&t.dialog.alert("ATEN\xc7\xc3O: ERRO!",m)}),yield t.loadData({id:t.entity.id},t.form),t.grid&&(t.grid.error="")),t.cdRef.detectChanges()}catch(c){t.grid&&(t.grid.error=c),yield t.loadData({id:t.entity.id},t.form)}finally{t.loading=!1}}})()}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["unidade-integrante"]],viewQuery:function(a,t){if(1&a&&(e.Gf(v.M,5),e.Gf(we,5)),2&a){let o;e.iGM(o=e.CRH())&&(t.grid=o.first),e.iGM(o=e.CRH())&&(t.usuario=o.first)}},inputs:{control:"control",entity:"entity",noPersist:"noPersist"},features:[e.qOj],decls:20,vars:21,consts:[["editable","",3,"items","minHeight","form","hasDelete","add","load","remove","save"],["grid",""],[4,"ngIf"],[3,"title","template","editTemplate","maxWidth"],["columnUsuario",""],["editUsuario",""],["columnAtribuicoes",""],["editAtribuicoes",""],["columnPerfil",""],["editPerfil",""],["type","options"],[1,"d-flex"],[1,"ms-3"],[3,"url","size","hint"],[1,"flex-fill","ms-3"],["label","","icon","","controlName","usuario_id",3,"disabled","size","dao"],["usuario",""],[4,"ngFor","ngForOf"],[3,"color","icon","label"],["controlName","atribuicoes",3,"size","addItemHandle","deleteItemHandle"],["label","","icon","fas fa-sign-out-alt","controlName","atribuicao",3,"size","items"],["color","gray",3,"label"],["controlName","perfil_id","required","",3,"size","label","dao"]],template:function(a,t){if(1&a&&(e.TgZ(0,"grid",0,1),e.YNc(2,Ye,3,1,"span",2),e.TgZ(3,"columns")(4,"column",3),e.YNc(5,Be,9,5,"ng-template",null,4,e.W1O),e.YNc(7,We,2,3,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(9,"column",3),e.YNc(10,ke,1,1,"ng-template",null,6,e.W1O),e.YNc(12,Xe,2,5,"ng-template",null,7,e.W1O),e.qZA(),e.TgZ(14,"column",3),e.YNc(15,Ke,2,1,"ng-template",null,8,e.W1O),e.YNc(17,$e,1,3,"ng-template",null,9,e.W1O),e.qZA(),e._UZ(19,"column",10),e.qZA()()),2&a){const o=e.MAs(6),s=e.MAs(8),l=e.MAs(11),u=e.MAs(13),c=e.MAs(16),m=e.MAs(18);e.Q6J("items",t.items)("minHeight",500)("form",t.form)("hasDelete",!0)("add",t.adicionarIntegrante.bind(t))("load",t.carregarIntegrante.bind(t))("remove",t.removerIntegrante.bind(t))("save",t.salvarIntegrante.bind(t)),e.xp6(2),e.Q6J("ngIf",!t.isNoPersist),e.xp6(2),e.Q6J("title",t.lex.translate("Usu\xe1rios"))("template",o)("editTemplate",s)("maxWidth",150),e.xp6(5),e.Q6J("title",t.lex.translate("Atribui\xe7\xf5es"))("template",l)("editTemplate",u)("maxWidth",200),e.xp6(5),e.Q6J("title",t.lex.translate("Perfil"))("template",c)("editTemplate",t.auth.hasPermissionTo("MOD_CFG_USER_PERFIL")?m:c)("maxWidth",300)}},dependencies:[_.sg,_.O5,v.M,Z.a,D.b,A.V,G.p,J.p,S.F,He.q]})}return n})(),canActivate:[p.a],resolve:{config:g.o},runGuardsAndResolvers:"always",data:{title:"Integrantes da Unidade",modal:!0}},{path:":id/subordinadas",component:q,canActivate:[p.a],resolve:{config:g.o},runGuardsAndResolvers:"always",data:{title:"Unidades subordinadas"}},{path:"merge",component:Pe,canActivate:[p.a],resolve:{config:g.o},runGuardsAndResolvers:"always",data:{title:"Unifica\xe7\xe3o",modal:!0}}];let it=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[N.Bz.forChild(tt),N.Bz]})}return n})();var at=d(2662),nt=d(2133),ot=d(2864);let dt=(()=>{class n{static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[_.ez,at.K,ot.UteisModule,nt.UX,it,F.lC,P.kb]})}return n})()}}]);