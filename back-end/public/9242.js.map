{"version":3,"file":"9242.js","mappings":"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","sources":["./src/app/modules/configuracoes/usuario/usuario-form/usuario-form.component.ts","./src/app/modules/configuracoes/usuario/usuario-form/usuario-form.component.html","./src/app/modules/configuracoes/usuario/usuario-integrante/usuario-integrante.component.ts","./src/app/modules/configuracoes/usuario/usuario-integrante/usuario-integrante.component.html","./src/app/modules/configuracoes/usuario/usuario-list/usuario-list.component.ts","./src/app/modules/configuracoes/usuario/usuario-list/usuario-list.component.html","./src/app/modules/configuracoes/usuario/usuario-routing.module.ts","./src/app/modules/configuracoes/usuario/usuario.module.ts"],"sourcesContent":["import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { EditableFormComponent } from 'src/app/components/editable-form/editable-form.component';\r\nimport { PerfilDaoService } from 'src/app/dao/perfil-dao.service';\r\nimport { PlanoTrabalhoDaoService } from 'src/app/dao/plano-trabalho-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { IIndexable } from 'src/app/models/base.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageFormBase } from 'src/app/modules/base/page-form-base';\r\nimport { UsuarioIntegranteComponent } from '../usuario-integrante/usuario-integrante.component';\r\nimport { TemplateDataset } from 'src/app/modules/uteis/templates/template.service';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnidadeIntegranteDaoService, Vinculo } from 'src/app/dao/unidade-integrante-dao.service';\r\n\r\n@Component({\r\n  selector: 'app-usuario-form',\r\n  templateUrl: './usuario-form.component.html',\r\n  styleUrls: ['./usuario-form.component.scss']\r\n})\r\nexport class UsuarioFormComponent extends PageFormBase<Usuario, UsuarioDaoService> {\r\n  @ViewChild(EditableFormComponent, { static: false }) public editableForm?: EditableFormComponent;\r\n  @ViewChild(UsuarioIntegranteComponent, { static: false }) public atribuicoes?: UsuarioIntegranteComponent;\r\n  @ViewChild('lotacao', { static: false }) public lotacao?: InputSearchComponent;\r\n\r\n  public formLotacao: FormGroup;\r\n  public perfilDao: PerfilDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public planoTrabalhoDao: PlanoTrabalhoDaoService;\r\n  public planoDataset: TemplateDataset[]; \r\n \r\n  constructor(public injector: Injector) {\r\n    super(injector, Usuario, UsuarioDaoService);\r\n    this.perfilDao = injector.get<PerfilDaoService>(PerfilDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.planoTrabalhoDao = injector.get<PlanoTrabalhoDaoService>(PlanoTrabalhoDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      email: {default: \"\"},\r\n      nome: {default: \"\"},\r\n      cpf: {default: \"\"},\r\n      matricula: {default: \"\"},\r\n      apelido: {default: \"\"},\r\n      telefone: {default: \"\"},\r\n      uf: {default: \"\"},\r\n      sexo: {default: null},\r\n      url_foto: {default: \"\"},\r\n      texto_complementar_plano: {default: \"\"},\r\n      perfil_id: {default: null},\r\n      //atribuicoes: { default: []}\r\n    }, this.cdRef, this.validate);\r\n    this.formLotacao = this.fh.FormBuilder({\r\n      unidade_lotacao_id: {default: \"\"},\r\n    }, this.cdRef, this.validate);\r\n    this.planoDataset = this.planoTrabalhoDao.dataset();\r\n    this.join = [\"lotacao.unidade:id\"];\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {   \r\n    let result = null;\r\n    if(['cpf', 'matricula', 'email', 'nome', 'apelido', 'perfil_id', 'unidade_lotacao_id'].indexOf(controlName) >= 0 && !control.value?.length) {\r\n      result = \"Obrigatório\";\r\n    }\r\n    else if(controlName == \"cpf\" && !this.util.validarCPF(control.value)) {\r\n      result = \"Inválido\";\r\n    }\r\n    return result;\r\n  }\r\n  \r\n  public formValidation = (form?: FormGroup) => {\r\n    if(!this.formLotacao?.controls.unidade_lotacao_id.value?.length) {\r\n      return \"É obrigatória a definição da unidade de lotação do servidor!\";\r\n    };\r\n    const erros_atribuicoes = [];\r\n    this.atribuicoes?.grid?.items.forEach((atribuicao) => {\r\n      if(atribuicao.unidade_id == '') erros_atribuicoes.push({ atribuicao: atribuicao, erro: 'Falta unidade_id'})\r\n    });\r\n    if(erros_atribuicoes.length) return \"Na aba 'Atribuições' há unidade não salva. Salve-a antes de salvar o usuário!\"\r\n    return undefined;\r\n  } \r\n\r\n  public loadData(entity: Usuario, form: FormGroup): void {\r\n    let formValue = Object.assign({}, form.value);\r\n    form.patchValue(this.util.fillForm(formValue, entity));\r\n    this.formLotacao.controls.unidade_lotacao_id.setValue(entity.lotacao?.unidade?.id);\r\n    this.atribuicoes?.loadData(entity);\r\n  }\r\n\r\n  public initializeData(form: FormGroup): void {\r\n    this.entity = new Usuario();\r\n    this.loadData(this.entity, form); \r\n  }\r\n  \r\n  public saveData(form: IIndexable): Promise<boolean> {      \r\n    return new Promise<boolean>(async (resolve, reject) => {\r\n      this.atribuicoes!.grid!.confirm();\r\n      let usuario = this.util.fill(new Usuario(), this.entity!);\r\n      usuario = this.util.fillForm(usuario, this.form!.value);\r\n      usuario.lotacao_id = this.formLotacao?.controls.unidade_lotacao_id.value;\r\n      let vinculos = this.atribuicoes?._items || [];\r\n      try {\r\n        await this.dao?.save(usuario).then(async resposta => {\r\n          if(vinculos.length) {\r\n            vinculos.forEach(v => v.usuario_id = resposta.id);\r\n            await this.integranteDao.saveIntegrante(vinculos as Vinculo[]);\r\n          }\r\n        });\r\n        resolve(true); \r\n      } catch (error: any) {\r\n        if (this.editableForm) this.editableForm.error = error;\r\n      }\r\n    });\r\n  }\r\n\r\n  public titleEdit = (entity: Usuario): string => {\r\n    return \"Editando \" + this.lex.translate(\"Usuário\") + ': ' + (entity?.nome || \"\");\r\n  }\r\n\r\n  public onLotacaoChange(){\r\n    //this.unidadesIntegrantes?.items.splice(this.unidadesIntegrantes?.items.indexOf(),1);\r\n  }\r\n\r\n}\r\n","<editable-form [form]=\"form!\" [disabled]=\"formDisabled\" [title]=\"isModal ? '' : title\" initialFocus=\"cpf\" (submit)=\"onSaveData()\" (cancel)=\"onCancel()\">\r\n    <tabs display right>\r\n        <tab key=\"PRINCIPAL\" label=\"Principal\">\r\n            <div class=\"row\">\r\n                <div class=\"form-group col-md-3 text-center\">\r\n                    <profile-picture [url]=\"form!.controls.url_foto.value\" class=\"mt-5\" [size]=\"150\"></profile-picture>\r\n                </div>\r\n                <div class=\"form-group col-md-9\">\r\n                    <div class=\"row\">\r\n                        <input-text [disabled]=\"!auth.hasPermissionTo('MOD_CFG_USER_CPF') ? 'true' : undefined\" [size]=\"4\" label=\"CPF\" controlName=\"cpf\" [maskFormat]=\"'000.000.000-00'\" [attr.maxlength]=15 required></input-text>\r\n                        <input-text [disabled]=\"!auth.hasPermissionTo('MOD_CFG_USER_MAT') ? 'true' : undefined\" [size]=\"3\" label=\"Matrícula\" controlName=\"matricula\" [attr.maxlength]=250 required></input-text>\r\n                        <input-text [disabled]=\"!auth.hasPermissionTo('MOD_CFG_USER_MAIL') ? 'true' : undefined\" [size]=\"5\" label=\"E-mail\" controlName=\"email\" textCase=\"lower\" [attr.maxlength]=250 required></input-text>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <input-text [size]=\"8\" label=\"Nome\" controlName=\"nome\" [attr.maxlength]=250 required></input-text>\r\n                        <input-text [size]=\"4\" label=\"Apelido\" controlName=\"apelido\" [attr.maxlength]=250 required></input-text>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <input-select [disabled]=\"!auth.hasPermissionTo('MOD_CFG_USER_PERFIL') ? 'true' : undefined\" [size]=\"4\" label=\"Perfil\" controlName=\"perfil_id\" [dao]=\"perfilDao\" required></input-select>\r\n                        <input-search #lotacao label=\"Lotação\" [size]=\"8\" [emptyValue]=\"null\" [control]=\"formLotacao!.controls.unidade_lotacao_id\" controlName=\"unidade_lotacao_id\" [dao]=\"unidadeDao\" labelInfo=\"Unidade de lotação do Usuário\" (change)=\"onLotacaoChange()\" required></input-search>\r\n                    </div>\r\n                    <div class=\"row\">\r\n                        <input-select [size]=\"4\" label=\"UF\" icon=\"bi bi-flag\" controlName=\"uf\" [items]=\"lookup.UF\"></input-select>\r\n                        <input-radio [size]=\"4\" label=\"Sexo\" controlName=\"sexo\" [items]=\"lookup.SEXO\"></input-radio>\r\n                        <input-text [size]=\"4\" label=\"Telefone\" controlName=\"telefone\" [maskFormat]=\"'(00) 0000-0000||(00) 0 0000-0000'\" [attr.maxlength]=250></input-text>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"CONFIGURACOES\" label=\"Configurações\">\r\n            <div class=\"row\">\r\n                <input-editor [label]=\"'Texto complementar ' + lex.translate('Plano de Trabalho')\" controlName=\"texto_complementar_plano\" [dataset]=\"planoDataset\"></input-editor>\r\n            </div>\r\n        </tab>\r\n        <tab key=\"ATRIBUICOES\" [label]=\"lex.translate('Atribuições')\">\r\n            <!-- <usuario-integrante #unidadesIntegrantes noPersist [entity]=\"entity\" [entity_id]=\"entity?.id\"></usuario-integrante> -->\r\n            <usuario-integrante #unidadesIntegrantes noPersist [entity]=\"entity\"></usuario-integrante>\r\n        </tab>\r\n    </tabs>\r\n</editable-form>","import { Component, Injector, Input, ViewChild } from '@angular/core';\r\nimport { AbstractControl, FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { InputSearchComponent } from 'src/app/components/input/input-search/input-search.component';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UnidadeIntegranteDaoService } from 'src/app/dao/unidade-integrante-dao.service';\r\nimport { IIndexable, IntegranteAtribuicao } from 'src/app/models/base.model';\r\nimport { IntegranteConsolidado } from 'src/app/models/unidade-integrante.model';\r\nimport { Unidade } from 'src/app/models/unidade.model';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageFrameBase } from 'src/app/modules/base/page-frame-base';\r\nimport { LookupItem } from 'src/app/services/lookup.service';\r\nimport { UnidadeIntegranteService } from 'src/app/services/unidade-integrante.service';\r\n\r\n@Component({\r\n  selector: 'usuario-integrante',\r\n  templateUrl: './usuario-integrante.component.html',\r\n  styleUrls: ['./usuario-integrante.component.scss']\r\n})\r\nexport class UsuarioIntegranteComponent extends PageFrameBase {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n  @ViewChild('unidade', { static: false }) public unidade?: InputSearchComponent;\r\n  @Input() set control(value: AbstractControl | undefined) { super.control = value; } get control(): AbstractControl | undefined { return super.control; }\r\n  @Input() set entity(value: Usuario | undefined) { super.entity = value; } get entity(): Usuario | undefined { return super.entity; }\r\n  @Input() set noPersist(value: string | undefined) { super.noPersist = value; } get noPersist(): string | undefined { return super.noPersist; }\r\n\r\n  public items: IntegranteConsolidado[] = [];\r\n  public _items?: any[];\r\n  public unidadeIntegranteService: UnidadeIntegranteService;\r\n  public integranteDao: UnidadeIntegranteDaoService;\r\n  public unidadeDao: UnidadeDaoService;\r\n  //public usuario?: Usuario;\r\n  public tiposAtribuicao: LookupItem[] = [];\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector);\r\n    this.unidadeIntegranteService = injector.get<UnidadeIntegranteService>(UnidadeIntegranteService);\r\n    this.integranteDao = injector.get<UnidadeIntegranteDaoService>(UnidadeIntegranteDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.form = this.fh.FormBuilder({\r\n      unidade_id: { default: \"\" },\r\n      atribuicoes: { default: undefined },\r\n      atribuicao: { default: \"\" },\r\n    }, this.cdRef, this.validate);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n    this.entity_id = this.metadata?.entity_id || this.entity?.id;\r\n    this.tiposAtribuicao = this.isNoPersist ? this.lookup.UNIDADE_INTEGRANTE_TIPO.filter((atribuicao) => atribuicao.key != \"LOTADO\") : this.lookup.UNIDADE_INTEGRANTE_TIPO;\r\n  }\r\n\r\n    ngAfterViewInit() {\r\n      (async () => {\r\n        await this.loadData({ id: this.entity_id }, this.form);\r\n      })();\r\n    }\r\n\r\n  /**\r\n   * Método chamado na inicialização do componente para carregar todas as unidades-integrantes do usuário.\r\n   * @param entity \r\n   * @param form \r\n   */\r\n  public async loadData(entity: IIndexable, form?: FormGroup | undefined) {\r\n    if (entity.id) {\r\n      try {\r\n          this.grid!.loading = true;\r\n          this.items = this._items == undefined ? await this.integranteDao!.loadIntegrantes(\"\", entity.id).then( resposta => {\r\n            this.entity = resposta.usuario;\r\n            if(this.isNoPersist) {\r\n              this._items = [];\r\n              resposta.integrantes.forEach(i => this._items?.push(this.unidadeIntegranteService.converterEmVinculo(i, i.id, this.entity!.id, i.atribuicoes)));\r\n            }\r\n            return this.unidadeIntegranteService.ordenar(resposta.integrantes.filter(x => x.atribuicoes?.length > 0));\r\n          }) : this.unidadeIntegranteService.ordenar(this._items.filter(x => x.atribuicoes?.length > 0));\r\n      } finally {\r\n        this.cdRef.detectChanges();\r\n        this.grid!.loading = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  public validate = (control: AbstractControl, controlName: string) => {\r\n    let result = null;\r\n    if ([\"unidade_id\", \"atribuicoes\"].includes(controlName) && !control.value?.length) { result = \"Obrigatório\"; }\r\n    if ((controlName == \"unidade_id\") && this.grid?.adding && this.items.map(i => i.id).includes(control.value)) result = \"O usuário já é integrante desta unidade. Edite-a, ao invés de incluí-la novamente!\";\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Método chamado para inserir uma atribuição no grid, seja este componente persistente ou não.\r\n   * @returns \r\n   */\r\n  public async addAtribuicao() {\r\n    let novo = {\r\n      id: this.integranteDao!.generateUuid(),\r\n      unidade_id: \"\",\r\n      atribuicoes: []\r\n    } as IIndexable;\r\n    this._items?.push(novo);\r\n    return novo;\r\n  }\r\n\r\n  public addItemHandle(): LookupItem | undefined {\r\n    let result = undefined;\r\n    const value = this.lookup.getValue(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n    const key = this.form!.controls.atribuicao.value;\r\n    if (value?.length && this.util.validateLookupItem(this.form!.controls.atribuicao.value, key)) {\r\n      const icon = this.lookup.getIcon(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      const color = this.lookup.getColor(this.lookup.UNIDADE_INTEGRANTE_TIPO, this.form!.controls.atribuicao.value);\r\n      result = {\r\n        key: key,\r\n        value: value,\r\n        icon: icon,\r\n        color: color\r\n      };\r\n      this.form!.controls.atribuicao.setValue(\"\");\r\n    }\r\n    return result;\r\n  };\r\n\r\n  /**\r\n   * Método chamado na edição de uma atribuição do usuário\r\n   * @param form \r\n   * @param row \r\n   */\r\n  public async loadAtribuicao(form: FormGroup, row: any) {\r\n    form.controls.unidade_id.setValue(this.grid?.adding ? row.unidade_id : row.id);\r\n    form.controls.atribuicoes.setValue(this.unidadeIntegranteService.converterAtribuicoes(row.atribuicoes));\r\n    form.controls.atribuicao.setValue(\"\");\r\n  }\r\n\r\n  /**\r\n   * Método chamado para a exclusão de uma atribuição do grid, seja este componente persistente ou não. \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async removeAtribuicao(row: IntegranteConsolidado) {\r\n    let nomeServidor = this.entity!.nome;\r\n    let nomeUnidade = row.unidade_nome;\r\n    let confirm = await this.dialog.confirm(\"Exclui ?\", \"Deseja realmente excluir todas as atribuições do servidor '\" + nomeServidor + \"' na unidade '\" + nomeUnidade + \"' ?\");\r\n    if (confirm) {\r\n      let msg: string | undefined;\r\n      try {\r\n        if (!this.isNoPersist) {    // se persistente\r\n          this.loading = true;\r\n          await this.integranteDao.saveIntegrante([this.unidadeIntegranteService.converterEmVinculo(row, row.id, this.entity!.id, [])]).then(resposta => {\r\n            if (msg = resposta.find(v => v.msg?.length)?.msg) { if (this.grid) this.grid.error = msg; };\r\n          });\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n        } else {                    // se não persistente\r\n          let index = this._items!.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n          this._items![index] = this.unidadeIntegranteService.converterEmVinculo(row, row.id, this.entity!.id, []);\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n      return msg ? false : true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Garante que não será possível excluir a lotação de um servidor por este caminho\r\n   * @param row Atribuição do servidor na unidade\r\n   * @returns \r\n   */\r\n  public deleteItemHandle(row: LookupItem): boolean | undefined | void {\r\n    return row.key != \"LOTADO\";\r\n  };\r\n\r\n  /**\r\n   * Método chamado no salvamento de uma atribuição do usuário, seja este componente persistente ou não.\r\n   * @param form \r\n   * @param row \r\n   * @returns \r\n   */\r\n  public async saveAtribuicao(form: FormGroup, row: IntegranteConsolidado) {\r\n    let confirm = true;\r\n    let n = this.unidadeIntegranteService.alterandoGestor(form, this.items || []);\r\n    if (n.length) confirm = await this.dialog.confirm(\"Confirma a Alteração de Gestor ?\", n.length == 1 ? \"O \" + n[0] + \" será alterado.\" : \"Serão alterados: \" + n.join(', ') + \".\");\r\n    if (form!.controls.atribuicoes.value.length && confirm) {\r\n      this.loading = true;\r\n      try {\r\n        let novasAtribuicoes: IntegranteAtribuicao[] = form!.controls.atribuicoes.value.map((x: LookupItem) => x.key);\r\n        if (!this.isNoPersist) { // se persistente\r\n          await this.integranteDao.saveIntegrante([this.unidadeIntegranteService.converterEmVinculo(row, form!.controls.unidade_id.value, this.entity!.id, novasAtribuicoes)]).then(resposta => {\r\n            let msg: string | undefined;\r\n            if (msg = resposta?.find(v => v.msg?.length)?.msg) { if (this.grid) this.grid.error = msg; };\r\n          });\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n          if (this.grid) this.grid!.error = \"\";\r\n        } else {                // se não persistente\r\n          let index = this._items!.findIndex(x => x[\"id\"] == row[\"id\"]);\r\n          let novoIntegranteConsolidado = { id: row.id, unidade_sigla: this.unidade?.selectedItem?.entity.sigla, unidade_nome: this.unidade?.selectedItem?.entity.nome, unidade_codigo: this.unidade?.selectedItem?.entity.codigo };\r\n          this._items![index!] = this.unidadeIntegranteService.converterEmVinculo(novoIntegranteConsolidado, form!.controls.unidade_id.value, this.entity!.id, novasAtribuicoes);\r\n          await this.loadData({ id: this.entity!.id }, this.form);\r\n        }\r\n      } catch (error: any) {\r\n        if (this.grid) this.grid.error = error;\r\n        await this.loadData({ id: this.entity!.id }, this.form);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\n","<grid #grid [items]=\"items\" [minHeight]=\"500\" [form]=\"form!\" [hasDelete]=\"true\"\r\n    [add]=\"addAtribuicao.bind(this)\" [load]=\"loadAtribuicao.bind(this)\" [remove]=\"removeAtribuicao.bind(this)\" [save]=\"saveAtribuicao.bind(this)\" \r\n    editable>\r\n    <span *ngIf=\"!isNoPersist\"><strong>{{ entity?.nome + ' - Matrícula ' + entity?.matricula }}</strong></span>\r\n    <columns>\r\n        <column [title]=\"lex.translate('Unidades')\" [template]=\"columnUnidade\" [editTemplate]=\"editUnidade\">\r\n            <ng-template let-row=\"row\" #columnUnidade>\r\n                <strong>{{ row.unidade_sigla || '' }}</strong><span> (IdServo: {{ row.unidade_codigo || '' }})</span><br>\r\n                <span>{{ row.unidade_nome || '' }} </span>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editUnidade>\r\n<!--            <input-search #unidade [disabled]=\"grid?.editing && !grid?.adding ? 'true' : undefined\" [size]=\"12\" label icon controlName=\"unidade_id\" [control]=\"form!.controls.unidade_id\" [dao]=\"unidadeDao\" [where]=\"['id', 'not in',unidadesJaVinculadas]\" [selectRoute]=\"{route: ['configuracoes', 'unidade']}\" [metadata]=\"{'unidadesJaVinculadas': unidadesJaVinculadas}\"></input-search> -->\r\n                <input-search #unidade [size]=\"12\" label icon controlName=\"unidade_id\" [dao]=\"unidadeDao\"></input-search>\r\n            </ng-template>\r\n        </column>\r\n        <column [title]=\"lex.translate('Atribuições')\" [template]=\"columnAtribuicoes\" [editTemplate]=\"editAtribuicoes\">\r\n            <ng-template let-row=\"row\" #columnAtribuicoes>\r\n                <div *ngFor=\"let a of row.atribuicoes\"><badge [color]=\"lookup.getColor(lookup.UNIDADE_INTEGRANTE_TIPO, a || '')\" [icon]=\"lookup.getIcon(lookup.UNIDADE_INTEGRANTE_TIPO, a || '')\" [label]=\"lookup.getValue(lookup.UNIDADE_INTEGRANTE_TIPO, a || '')\"></badge><br></div>\r\n            </ng-template>\r\n            <ng-template let-row=\"row\" #editAtribuicoes>\r\n                <input-multiselect controlName=\"atribuicoes\" [size]=\"8\" [addItemHandle]=\"addItemHandle.bind(this)\" [deleteItemHandle]=\"deleteItemHandle.bind(this)\">\r\n                    <input-select [size]=\"12\" label=\"\" icon=\"fas fa-sign-out-alt\" controlName=\"atribuicao\" [items]=\"tiposAtribuicao\"></input-select>\r\n                </input-multiselect>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\"></column>\r\n    </columns>\r\n</grid>\r\n","import { Component, Injector, ViewChild } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { GridComponent } from 'src/app/components/grid/grid.component';\r\nimport { ToolbarButton } from 'src/app/components/toolbar/toolbar.component';\r\nimport { PerfilDaoService } from 'src/app/dao/perfil-dao.service';\r\nimport { UnidadeDaoService } from 'src/app/dao/unidade-dao.service';\r\nimport { UsuarioDaoService } from 'src/app/dao/usuario-dao.service';\r\nimport { Usuario } from 'src/app/models/usuario.model';\r\nimport { PageListBase } from 'src/app/modules/base/page-list-base';\r\n\r\n@Component({\r\n  selector: 'app-usuario-list',\r\n  templateUrl: './usuario-list.component.html',\r\n  styleUrls: ['./usuario-list.component.scss']\r\n})\r\nexport class UsuarioListComponent extends PageListBase<Usuario, UsuarioDaoService> {\r\n  @ViewChild(GridComponent, { static: false }) public grid?: GridComponent;\r\n\r\n  public unidadeDao: UnidadeDaoService;\r\n  public perfilDao: PerfilDaoService;\r\n\r\n  constructor(public injector: Injector) {\r\n    super(injector, Usuario, UsuarioDaoService);\r\n    this.unidadeDao = injector.get<UnidadeDaoService>(UnidadeDaoService);\r\n    this.perfilDao = injector.get<PerfilDaoService>(PerfilDaoService);\r\n    /* Inicializações */\r\n    this.title = this.lex.translate(\"Usuários\");\r\n    this.code = \"MOD_CFG_USER\";\r\n    this.join = [\"perfil:id,nome\"];\r\n    this.filter = this.fh.FormBuilder({\r\n      usuario: { default: \"\" },\r\n      unidade_id: { default: \"\" },\r\n      perfil_id: { default: null }\r\n    });\r\n    this.addOption(this.OPTION_INFORMACOES, \"MOD_USER\");\r\n    //this.addOption(this.OPTION_EXCLUIR, \"MOD_USER_EXCL\");\r\n  }\r\n\r\n  public dynamicOptions(row: any): ToolbarButton[] {\r\n    let result: ToolbarButton[] = [];\r\n    // Testa se o usuário logado possui permissão para gerenciar as atribuições do usuário do grid\r\n    if (this.auth.hasPermissionTo(\"MOD_USER_ATRIB\")) result.push({ label: \"Atribuições\", icon: \"bi bi-list-task\",  onClick: (usuario: Usuario) => { this.go.navigate({ route: ['configuracoes', 'usuario', '', usuario.id, 'integrante'] }, { metadata: { entity_id: row.id } }); }});\r\n    return result;\r\n  }\r\n\r\n  public filterWhere = (filter: FormGroup) => {\r\n    let result: any[] = [];\r\n    if (filter?.controls.usuario?.value?.length) {\r\n      result.push([\"nome\", \"like\", \"%\" + filter?.controls.usuario?.value.trim().replace(\" \", \"%\") + \"%\"]);\r\n    }\r\n    if (filter?.controls.unidade_id?.value?.length) {\r\n      result.push([\"lotacao\", \"==\", filter?.controls.unidade_id.value]);\r\n    }\r\n    if (filter?.controls.perfil_id?.value?.length) {\r\n      result.push([\"perfil_id\", \"==\", filter?.controls.perfil_id?.value]);\r\n    }\r\n    return result;\r\n  }\r\n}\r\n","<h3 *ngIf=\"!isModal\" class=\"my-2\">{{title}}</h3>\r\n<grid [dao]=\"dao\" [add]=\"add\" [orderBy]=\"orderBy\" [groupBy]=\"groupBy\" [join]=\"join\"\r\n    [selectable]=\"selectable\" (select)=\"onSelect($event)\"\r\n    [hasAdd]=\"auth.hasPermissionTo('MOD_USER_INCL')\"\r\n    [hasEdit]=\"auth.hasPermissionTo('MOD_USER_EDT')\">\r\n    <toolbar *ngIf=\"!selectable\"></toolbar>\r\n    <filter [form]=\"filter\" [where]=\"filterWhere\" [submit]=\"filterSubmit.bind(this)\" [collapseChange]=\"filterCollapseChange.bind(this)\" [collapsed]=\"!selectable && filterCollapsed\">\r\n        <div class=\"row\">\r\n            <input-text [size]=\"4\" [label]=\"lex.translate('Usuário')\" controlName=\"usuario\" [control]=\"filter!.controls.usuario\" placeholder=\"Nome\" [attr.maxlength]=250></input-text>\r\n            <input-search [size]=\"4\" [label]=\"lex.translate('Lotação')\" [control]=\"filter!.controls.unidade_id\" controlName=\"unidade_id\" [dao]=\"unidadeDao\"></input-search>\r\n            <input-select [size]=\"4\" [label]=\"lex.translate('Perfil')\" controlName=\"perfil_id\" nullable [control]=\"filter!.controls.perfil_id\" [dao]=\"perfilDao\"></input-select>\r\n        </div>\r\n    </filter>\r\n    <columns>\r\n        <column icon=\"bi-person\" [align]=\"'center'\" [template]=\"columnFoto\">\r\n            <ng-template let-row=\"row\" #columnFoto>\r\n                <profile-picture [url]=\"row.url_foto\" [size]=\"40\" [hint]=\"row.nome\"></profile-picture>\r\n            </ng-template>\r\n        </column>\r\n        <column title=\"CPF\" field=\"cpf\"></column>\r\n        <column title=\"Matrícula\" field=\"matricula\"></column>\r\n        <column title=\"Nome\" field=\"nome\" orderBy=\"nome\"></column>\r\n        <column [title]=\"lex.translate('Perfil')\" [template]=\"columnPerfil\">\r\n            <ng-template let-row=\"row\" #columnPerfil>\r\n                <strong>{{row.perfil?.nome || \"\"}}</strong>\r\n            </ng-template>\r\n        </column>\r\n        <column type=\"options\" [onEdit]=\"edit\" [dynamicOptions]=\"dynamicOptions.bind(this)\" [options]=\"options\"></column>\r\n    </columns>\r\n    <pagination [rows]=\"rowsLimit\"></pagination>\r\n</grid>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/guards/auth.guard';\r\nimport { ConfigResolver } from 'src/app/resolvies/config.resolver';\r\nimport { UsuarioFormComponent } from './usuario-form/usuario-form.component';\r\nimport { UsuarioListComponent } from './usuario-list/usuario-list.component';\r\nimport { UsuarioIntegranteComponent } from './usuario-integrante/usuario-integrante.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: UsuarioListComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Usuários\" } },\r\n  { path: 'new', component: UsuarioFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Inclusão de Usuário\", modal: true } },\r\n  { path: ':id/edit', component: UsuarioFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Edição de Usuário\", modal: true } },\r\n  { path: ':id/consult', component: UsuarioFormComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Consulta a Usuário\", modal: true } },\r\n  { path: ':id/:idUsuario/integrante', component: UsuarioIntegranteComponent, canActivate: [AuthGuard], resolve: { config: ConfigResolver }, runGuardsAndResolvers: 'always', data: { title: \"Atribuições do Usuário\", modal: true } },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class UsuarioRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { UsuarioRoutingModule } from './usuario-routing.module';\r\nimport { UsuarioListComponent } from './usuario-list/usuario-list.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { UsuarioFormComponent } from './usuario-form/usuario-form.component';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { UsuarioIntegranteComponent } from './usuario-integrante/usuario-integrante.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UsuarioListComponent,\r\n    UsuarioFormComponent,\r\n    UsuarioIntegranteComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ComponentsModule,\r\n    ReactiveFormsModule,\r\n    UsuarioRoutingModule\r\n  ]\r\n})\r\nexport class UsuarioModule { }\r\n"],"names":["EditableFormComponent","PerfilDaoService","PlanoTrabalhoDaoService","UnidadeDaoService","UsuarioDaoService","Usuario","PageFormBase","UsuarioIntegranteComponent","UnidadeIntegranteDaoService","UsuarioFormComponent","constructor","injector","validate","control","controlName","result","indexOf","value","length","util","validarCPF","formValidation","form","formLotacao","controls","unidade_lotacao_id","erros_atribuicoes","atribuicoes","grid","items","forEach","atribuicao","unidade_id","push","erro","undefined","titleEdit","entity","lex","translate","nome","perfilDao","get","unidadeDao","integranteDao","planoTrabalhoDao","fh","FormBuilder","email","default","cpf","matricula","apelido","telefone","uf","sexo","url_foto","texto_complementar_plano","perfil_id","cdRef","planoDataset","dataset","join","loadData","formValue","Object","assign","patchValue","fillForm","setValue","lotacao","unidade","id","initializeData","saveData","_this","Promise","_ref","_asyncToGenerator","resolve","reject","confirm","usuario","fill","lotacao_id","vinculos","_items","dao","save","then","_ref2","resposta","v","usuario_id","saveIntegrante","_x3","apply","arguments","error","editableForm","_x","_x2","onLotacaoChange","i0","ɵɵdirectiveInject","Injector","selectors","viewQuery","UsuarioFormComponent_Query","rf","ctx","ɵɵelementStart","ɵɵlistener","UsuarioFormComponent_Template_editable_form_submit_0_listener","onSaveData","UsuarioFormComponent_Template_editable_form_cancel_0_listener","onCancel","ɵɵelement","ɵɵelementEnd","UsuarioFormComponent_Template_input_search_change_16_listener","ɵɵproperty","formDisabled","isModal","title","ɵɵadvance","auth","hasPermissionTo","ɵɵattribute","lookup","UF","SEXO","GridComponent","PageFrameBase","UnidadeIntegranteService","ɵɵtext","ɵɵtextInterpolate","ctx_r1","row_r10","unidade_sigla","ɵɵtextInterpolate1","unidade_codigo","unidade_nome","ctx_r5","ctx_r14","getColor","UNIDADE_INTEGRANTE_TIPO","a_r15","getIcon","getValue","ɵɵtemplate","UsuarioIntegranteComponent_ng_template_10_div_0_Template","row_r13","ctx_r9","addItemHandle","bind","deleteItemHandle","tiposAtribuicao","noPersist","includes","adding","map","i","unidadeIntegranteService","ngOnInit","entity_id","metadata","isNoPersist","filter","key","ngAfterViewInit","_this2","loading","loadIntegrantes","integrantes","converterEmVinculo","ordenar","x","detectChanges","addAtribuicao","_this3","novo","generateUuid","validateLookupItem","icon","color","loadAtribuicao","row","_this4","converterAtribuicoes","removeAtribuicao","_this5","nomeServidor","nomeUnidade","dialog","msg","find","index","findIndex","saveAtribuicao","_this6","n","alterandoGestor","novasAtribuicoes","novoIntegranteConsolidado","selectedItem","sigla","codigo","UsuarioIntegranteComponent_Query","UsuarioIntegranteComponent_span_2_Template","UsuarioIntegranteComponent_ng_template_5_Template","ɵɵtemplateRefExtractor","UsuarioIntegranteComponent_ng_template_7_Template","UsuarioIntegranteComponent_ng_template_10_Template","UsuarioIntegranteComponent_ng_template_12_Template","_r2","_r4","_r6","_r8","PageListBase","ctx_r0","row_r6","row_r7","perfil","UsuarioListComponent","filterWhere","trim","replace","code","addOption","OPTION_INFORMACOES","dynamicOptions","label","onClick","go","navigate","route","UsuarioListComponent_Query","UsuarioListComponent_h3_0_Template","UsuarioListComponent_Template_grid_select_1_listener","$event","onSelect","UsuarioListComponent_toolbar_2_Template","UsuarioListComponent_ng_template_10_Template","UsuarioListComponent_ng_template_16_Template","add","orderBy","groupBy","selectable","filterSubmit","filterCollapseChange","filterCollapsed","edit","options","rowsLimit","RouterModule","AuthGuard","ConfigResolver","routes","path","component","canActivate","config","runGuardsAndResolvers","data","modal","UsuarioRoutingModule","forChild","imports","i1","exports","CommonModule","ComponentsModule","ReactiveFormsModule","UsuarioModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}