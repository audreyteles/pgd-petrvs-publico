"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[9842],{29842:(H,v,n)=>{n.r(v),n.d(v,{FeriadoModule:()=>h});var g=n(76733),b=n(55579),r=n(1391),c=n(2314),E=n(8239),F=n(74040),p=n(94972),z=n(15316),m=n(3362),D=n(1184),N=n(20497),e=n(20755),y=n(51823),Z=n(32802),A=n(92392),I=n(48877),Q=n(64603);const T=["cidade"],M=["entidade"];function J(l,o){if(1&l&&e._UZ(0,"input-search",13,14),2&l){const t=e.oxw();e.Q6J("size",6)("dao",t.cidadeDao)}}function O(l,o){if(1&l&&e._UZ(0,"input-select",15),2&l){const t=e.oxw();e.Q6J("size",6)("items",t.lookup.UF)}}function U(l,o){1&l&&e._UZ(0,"input-display",16),2&l&&e.Q6J("size",6)}class s extends D.F{constructor(o){super(o,m.Z,p.F),this.injector=o,this.validate=(t,i)=>{let a=null;return["nome"].indexOf(i)>=0&&!t.value?.length?a="Obrigat\xf3rio":"ano"==i&&0==this.form?.controls.recorrente.value&&!this.util.between(parseInt(t.value||0),{start:2e3,end:2100})&&(a="Inv\xe1lido"),a},this.titleEdit=t=>"Editando "+this.lex.translate("Feriado")+": "+(t?.nome||""),this.entidadeDao=o.get(z.i),this.cidadeDao=o.get(N.l),this.form=this.fh.FormBuilder({nome:{default:""},dia:{default:""},mes:{default:""},ano:{default:null},recorrente:{default:1},abrangencia:{default:"NACIONAL"},codigo_ibge:{default:null},cidade_id:{default:null},uf:{default:null},entidade_id:{default:null},data_inicio:{default:new Date},data_fim:{default:new Date}},this.cdRef,this.validate),this.join=["cidade","entidade"]}checkAnoDisabled(){const o=!this.form?.controls.recorrente.value;return!o&&null!=this.form?.controls.ano.value&&(this.form?.controls.ano.setValue(null),this.cdRef.markForCheck()),o?void 0:"true"}loadData(o,t){var i=this;return(0,E.Z)(function*(){let a=Object.assign({},t.value),d=i.util.fillForm(a,o);yield Promise.all([i.cidade?.loadSearch(o.cidade||o.cidade_id),i.entidade.loadSearch(o.entidade||o.entidade_id)]),t.patchValue(d)})()}initializeData(o){this.loadData(new m.Z,o)}saveData(o){return new Promise((t,i)=>{let a=this.util.fill(new m.Z,this.entity);a=this.util.fillForm(a,this.form.value),"MUNICIPAL"==a.abrangencia&&this.cidade?.selectedEntity?a.codigo_ibge=(this.cidade?.selectedEntity).codigo_ibge:"ESTADUAL"==a.abrangencia?a.codigo_ibge=this.lookup.UF.find(d=>d.key==a.uf)?.code:a.codigo_ibge=null,t(a)})}static#e=this.\u0275fac=function(t){return new(t||s)(e.Y36(e.zs3))};static#i=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-feriado-form"]],viewQuery:function(t,i){if(1&t&&(e.Gf(F.Q,5),e.Gf(T,5),e.Gf(M,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.editableForm=a.first),e.iGM(a=e.CRH())&&(i.cidade=a.first),e.iGM(a=e.CRH())&&(i.entidade=a.first)}},features:[e.qOj],decls:15,vars:21,consts:[["initialFocus","nome",3,"form","disabled","title","submit","cancel"],[1,"row"],["label","Descri\xe7\xe3o","icon","far fa-edit","controlName","nome","required","",3,"size"],["label","Abrang\xeancia","controlName","abrangencia","icon","bi bi-globe-americas",3,"size","items"],["label","Recorrente","icon","fas fa-redo","controlName","recorrente","labelInfo","Se o feriado \xe9 recorrente todos os anos... se n\xe3o, informar o ano.",3,"size","items"],["label","Dia","icon","bi bi-calendar-date","controlName","dia",3,"size","items"],["label","M\xeas","icon","bi bi-calendar-date","controlName","mes",3,"size","items"],["numbers","","label","Ano","icon","bi bi-calendar-date","controlName","ano",3,"size","disabled"],["controlName","cidade_id",3,"size","dao",4,"ngIf"],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items",4,"ngIf"],["label","\xc2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size",4,"ngIf"],["controlName","entidade_id",3,"size","dao"],["entidade",""],["controlName","cidade_id",3,"size","dao"],["cidade",""],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items"],["label","\xc2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size"]],template:function(t,i){1&t&&(e.TgZ(0,"editable-form",0),e.NdJ("submit",function(){return i.onSaveData()})("cancel",function(){return i.onCancel()}),e.TgZ(1,"div",1),e._UZ(2,"input-text",2)(3,"input-select",3),e.qZA(),e.TgZ(4,"div",1),e._UZ(5,"input-radio",4)(6,"input-select",5)(7,"input-select",6)(8,"input-text",7),e.qZA(),e.TgZ(9,"div",1),e.YNc(10,J,2,2,"input-search",8),e.YNc(11,O,1,2,"input-select",9),e.YNc(12,U,1,1,"input-display",10),e._UZ(13,"input-search",11,12),e.qZA()()),2&t&&(e.Q6J("form",i.form)("disabled",i.formDisabled)("title",i.isModal?"":i.title),e.xp6(2),e.Q6J("size",8),e.uIk("maxlength",250),e.xp6(1),e.Q6J("size",4)("items",i.lookup.ABRANGENCIA),e.xp6(2),e.Q6J("size",3)("items",i.lookup.SIMNAO),e.xp6(1),e.Q6J("size",3)("items",i.lookup.DIA_MES),e.xp6(1),e.Q6J("size",3)("items",i.lookup.MESES),e.xp6(1),e.Q6J("size",3)("disabled",i.checkAnoDisabled()),e.uIk("maxlength",250),e.xp6(2),e.Q6J("ngIf","MUNICIPAL"==i.form.controls.abrangencia.value),e.xp6(1),e.Q6J("ngIf","ESTADUAL"==i.form.controls.abrangencia.value),e.xp6(1),e.Q6J("ngIf","NACIONAL"==i.form.controls.abrangencia.value),e.xp6(1),e.Q6J("size",6)("dao",i.entidadeDao))},dependencies:[g.O5,F.Q,y.B,Z.V,A.m,I.f,Q.p]})}var C=n(73150),R=n(78509),G=n(57224),B=n(83351),L=n(57765),S=n(45512),P=n(42704);class u extends R.E{constructor(o,t){super(o,m.Z,p.F),this.injector=o,this.filterWhere=i=>{let a=[],d=i.value;return d.nome?.length&&a.push(["nome","like","%"+d.nome.trim().replace(" ","%")+"%"]),a},this.dao=t,this.title=this.lex.translate("Feriados"),this.code="MOD_FER",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.auth.hasPermissionTo("MOD_FER")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_FER_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(o){o.controls.nome.setValue(""),super.filterClear(o)}static#e=this.\u0275fac=function(t){return new(t||u)(e.Y36(e.zs3),e.Y36(p.F))};static#i=this.\u0275cmp=e.Xpm({type:u,selectors:[["app-feriado-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(C.M,5),2&t){let a;e.iGM(a=e.CRH())&&(i.grid=a.first)}},features:[e.qOj],decls:12,vars:23,consts:[[3,"dao","add","title","orderBy","groupBy","join","hasAdd","hasEdit"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","nome",3,"size","label","control","placeholder"],["title","Descri\xe7\xe3o","field","nome"],["title","Dia","field","dia"],["title","M\xeas","field","mes"],["title","Ano","field","ano"],["type","options",3,"onEdit","options"],[3,"rows"]],template:function(t,i){1&t&&(e.TgZ(0,"grid",0),e._UZ(1,"toolbar"),e.TgZ(2,"filter",1)(3,"div",2),e._UZ(4,"input-text",3),e.qZA()(),e.TgZ(5,"columns"),e._UZ(6,"column",4)(7,"column",5)(8,"column",6)(9,"column",7)(10,"column",8),e.qZA(),e._UZ(11,"pagination",9),e.qZA()),2&t&&(e.Q6J("dao",i.dao)("add",i.add)("title",i.isModal?"":i.title)("orderBy",i.orderBy)("groupBy",i.groupBy)("join",i.join)("hasAdd",i.auth.hasPermissionTo("MOD_FER_INCL"))("hasEdit",i.auth.hasPermissionTo("MOD_FER_EDT")),e.xp6(2),e.Q6J("deleted",i.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",i.filter)("where",i.filterWhere)("submit",i.filterSubmit.bind(i))("clear",i.filterClear.bind(i))("collapseChange",i.filterCollapseChange.bind(i))("collapsed",i.filterCollapsed),e.xp6(2),e.Q6J("size",12)("label","Nome "+i.lex.translate("Feriado"))("control",i.filter.controls.nome)("placeholder","Nome "+i.lex.translate("feriado")),e.uIk("maxlength",250),e.xp6(6),e.Q6J("onEdit",i.edit)("options",i.options),e.xp6(1),e.Q6J("rows",i.rowsLimit))},dependencies:[C.M,G.a,B.b,L.z,S.n,P.Q,A.m]})}const j=[{path:"",component:u,canActivate:[r.a],resolve:{config:c.o},runGuardsAndResolvers:"always",data:{title:"Feriados"}},{path:"new",component:s,canActivate:[r.a],resolve:{config:c.o},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Feriado",modal:!0}},{path:":id/edit",component:s,canActivate:[r.a],resolve:{config:c.o},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Feriado",modal:!0}},{path:":id/consult",component:s,canActivate:[r.a],resolve:{config:c.o},runGuardsAndResolvers:"always",data:{title:"Consulta a Feriado",modal:!0}}];class f{static#e=this.\u0275fac=function(t){return new(t||f)};static#i=this.\u0275mod=e.oAB({type:f});static#t=this.\u0275inj=e.cJS({imports:[b.Bz.forChild(j),b.Bz]})}var Y=n(58568),V=n(72133);class h{static#e=this.\u0275fac=function(t){return new(t||h)};static#i=this.\u0275mod=e.oAB({type:h});static#t=this.\u0275inj=e.cJS({imports:[g.ez,Y.K,V.UX,f]})}}}]);