"use strict";(self.webpackChunkpetrvs=self.webpackChunkpetrvs||[]).push([[9842],{29842:(K,g,a)=>{a.r(g),a.d(g,{FeriadoModule:()=>N});var c,b=a(76733),F=a(55579),u=a(1391),f=a(2314),y=a(8239),A=a(74040),v=a(94972),Z=a(15316),p=a(3362),I=a(1184),M=a(20497),e=a(20755),Q=a(51823),T=a(32802),C=a(92392),J=a(48877),O=a(64603);const U=["cidade"],R=["entidade"];function G(n,i){if(1&n&&e._UZ(0,"input-search",13,14),2&n){const o=e.oxw();e.Q6J("size",6)("dao",o.cidadeDao)}}function L(n,i){if(1&n&&e._UZ(0,"input-select",15),2&n){const o=e.oxw();e.Q6J("size",6)("items",o.lookup.UF)}}function B(n,i){1&n&&e._UZ(0,"input-display",16),2&n&&e.Q6J("size",6)}class h extends I.F{constructor(i){super(i,p.Z,v.F),this.injector=i,this.validate=(o,t)=>{let l=null;return["nome"].indexOf(t)>=0&&!o.value?.length?l="Obrigat\xf3rio":"ano"==t&&0==this.form?.controls.recorrente.value&&!this.util.between(parseInt(o.value||0),{start:2e3,end:2100})&&(l="Inv\xe1lido"),l},this.titleEdit=o=>"Editando "+this.lex.translate("Feriado")+": "+(o?.nome||""),this.entidadeDao=i.get(Z.i),this.cidadeDao=i.get(M.l),this.form=this.fh.FormBuilder({nome:{default:""},dia:{default:""},mes:{default:""},ano:{default:null},recorrente:{default:1},abrangencia:{default:"NACIONAL"},codigo_ibge:{default:null},cidade_id:{default:null},uf:{default:null},entidade_id:{default:null},data_inicio:{default:new Date},data_fim:{default:new Date}},this.cdRef,this.validate),this.join=["cidade","entidade"]}checkAnoDisabled(){const i=!this.form?.controls.recorrente.value;return!i&&null!=this.form?.controls.ano.value&&(this.form?.controls.ano.setValue(null),this.cdRef.markForCheck()),i?void 0:"true"}loadData(i,o){var t=this;return(0,y.Z)(function*(){let l=Object.assign({},o.value),r=t.util.fillForm(l,i);yield Promise.all([t.cidade?.loadSearch(i.cidade||i.cidade_id),t.entidade.loadSearch(i.entidade||i.entidade_id)]),o.patchValue(r)})()}initializeData(i){this.loadData(new p.Z,i)}saveData(i){return new Promise((o,t)=>{let l=this.util.fill(new p.Z,this.entity);l=this.util.fillForm(l,this.form.value),"MUNICIPAL"==l.abrangencia&&this.cidade?.selectedEntity?l.codigo_ibge=(this.cidade?.selectedEntity).codigo_ibge:"ESTADUAL"==l.abrangencia?l.codigo_ibge=this.lookup.UF.find(r=>r.key==l.uf)?.code:l.codigo_ibge=null,o(l)})}}(c=h).\u0275fac=function(i){return new(i||c)(e.Y36(e.zs3))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-feriado-form"]],viewQuery:function(i,o){if(1&i&&(e.Gf(A.Q,5),e.Gf(U,5),e.Gf(R,5)),2&i){let t;e.iGM(t=e.CRH())&&(o.editableForm=t.first),e.iGM(t=e.CRH())&&(o.cidade=t.first),e.iGM(t=e.CRH())&&(o.entidade=t.first)}},features:[e.qOj],decls:15,vars:21,consts:[["initialFocus","nome",3,"form","disabled","title","submit","cancel"],[1,"row"],["label","Descri\xe7\xe3o","icon","far fa-edit","controlName","nome","required","",3,"size"],["label","Abrang\xeancia","controlName","abrangencia","icon","bi bi-globe-americas",3,"size","items"],["label","Recorrente","icon","fas fa-redo","controlName","recorrente","labelInfo","Se o feriado \xe9 recorrente todos os anos... se n\xe3o, informar o ano.",3,"size","items"],["label","Dia","icon","bi bi-calendar-date","controlName","dia",3,"size","items"],["label","M\xeas","icon","bi bi-calendar-date","controlName","mes",3,"size","items"],["numbers","","label","Ano","icon","bi bi-calendar-date","controlName","ano",3,"size","disabled"],["controlName","cidade_id",3,"size","dao",4,"ngIf"],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items",4,"ngIf"],["label","\xc2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size",4,"ngIf"],["controlName","entidade_id",3,"size","dao"],["entidade",""],["controlName","cidade_id",3,"size","dao"],["cidade",""],["label","UF","controlName","uf","icon","bi bi-flag",3,"size","items"],["label","\xc2mbito","icon","bi bi-shield-fill-check","value","Nacional",3,"size"]],template:function(i,o){1&i&&(e.TgZ(0,"editable-form",0),e.NdJ("submit",function(){return o.onSaveData()})("cancel",function(){return o.onCancel()}),e.TgZ(1,"div",1),e._UZ(2,"input-text",2)(3,"input-select",3),e.qZA(),e.TgZ(4,"div",1),e._UZ(5,"input-radio",4)(6,"input-select",5)(7,"input-select",6)(8,"input-text",7),e.qZA(),e.TgZ(9,"div",1),e.YNc(10,G,2,2,"input-search",8),e.YNc(11,L,1,2,"input-select",9),e.YNc(12,B,1,1,"input-display",10),e._UZ(13,"input-search",11,12),e.qZA()()),2&i&&(e.Q6J("form",o.form)("disabled",o.formDisabled)("title",o.isModal?"":o.title),e.xp6(2),e.Q6J("size",8),e.uIk("maxlength",250),e.xp6(1),e.Q6J("size",4)("items",o.lookup.ABRANGENCIA),e.xp6(2),e.Q6J("size",3)("items",o.lookup.SIMNAO),e.xp6(1),e.Q6J("size",3)("items",o.lookup.DIA_MES),e.xp6(1),e.Q6J("size",3)("items",o.lookup.MESES),e.xp6(1),e.Q6J("size",3)("disabled",o.checkAnoDisabled()),e.uIk("maxlength",250),e.xp6(2),e.Q6J("ngIf","MUNICIPAL"==o.form.controls.abrangencia.value),e.xp6(1),e.Q6J("ngIf","ESTADUAL"==o.form.controls.abrangencia.value),e.xp6(1),e.Q6J("ngIf","NACIONAL"==o.form.controls.abrangencia.value),e.xp6(1),e.Q6J("size",6)("dao",o.entidadeDao))},dependencies:[b.O5,A.Q,Q.B,T.V,C.m,J.f,O.p]});var m,s,E=a(73150),S=a(78509),P=a(57224),j=a(83351),Y=a(57765),V=a(45512),H=a(42704);class z extends S.E{constructor(i,o){super(i,p.Z,v.F),this.injector=i,this.filterWhere=t=>{let l=[],r=t.value;return r.nome?.length&&l.push(["nome","like","%"+r.nome.trim().replace(" ","%")+"%"]),l},this.dao=o,this.title=this.lex.translate("Feriados"),this.code="MOD_FER",this.filter=this.fh.FormBuilder({nome:{default:""}}),this.auth.hasPermissionTo("MOD_FER")&&this.options.push({icon:"bi bi-info-circle",label:"Informa\xe7\xf5es",onClick:this.consult.bind(this)}),this.auth.hasPermissionTo("MOD_FER_EXCL")&&this.options.push({icon:"bi bi-trash",label:"Excluir",onClick:this.delete.bind(this)}),this.addOption(this.OPTION_LOGS,"MOD_AUDIT_LOG")}filterClear(i){i.controls.nome.setValue(""),super.filterClear(i)}}(m=z).\u0275fac=function(i){return new(i||m)(e.Y36(e.zs3),e.Y36(v.F))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-feriado-list"]],viewQuery:function(i,o){if(1&i&&e.Gf(E.M,5),2&i){let t;e.iGM(t=e.CRH())&&(o.grid=t.first)}},features:[e.qOj],decls:12,vars:23,consts:[[3,"dao","add","title","orderBy","groupBy","join","hasAdd","hasEdit"],[3,"deleted","form","where","submit","clear","collapseChange","collapsed"],[1,"row"],["controlName","nome",3,"size","label","control","placeholder"],["title","Descri\xe7\xe3o","field","nome"],["title","Dia","field","dia"],["title","M\xeas","field","mes"],["title","Ano","field","ano"],["type","options",3,"onEdit","options"],[3,"rows"]],template:function(i,o){1&i&&(e.TgZ(0,"grid",0),e._UZ(1,"toolbar"),e.TgZ(2,"filter",1)(3,"div",2),e._UZ(4,"input-text",3),e.qZA()(),e.TgZ(5,"columns"),e._UZ(6,"column",4)(7,"column",5)(8,"column",6)(9,"column",7)(10,"column",8),e.qZA(),e._UZ(11,"pagination",9),e.qZA()),2&i&&(e.Q6J("dao",o.dao)("add",o.add)("title",o.isModal?"":o.title)("orderBy",o.orderBy)("groupBy",o.groupBy)("join",o.join)("hasAdd",o.auth.hasPermissionTo("MOD_FER_INCL"))("hasEdit",o.auth.hasPermissionTo("MOD_FER_EDT")),e.xp6(2),e.Q6J("deleted",o.auth.hasPermissionTo("MOD_AUDIT_DEL"))("form",o.filter)("where",o.filterWhere)("submit",o.filterSubmit.bind(o))("clear",o.filterClear.bind(o))("collapseChange",o.filterCollapseChange.bind(o))("collapsed",o.filterCollapsed),e.xp6(2),e.Q6J("size",12)("label","Nome "+o.lex.translate("Feriado"))("control",o.filter.controls.nome)("placeholder","Nome "+o.lex.translate("feriado")),e.uIk("maxlength",250),e.xp6(6),e.Q6J("onEdit",o.edit)("options",o.options),e.xp6(1),e.Q6J("rows",o.rowsLimit))},dependencies:[E.M,P.a,j.b,Y.z,V.n,H.Q,C.m]});const X=[{path:"",component:z,canActivate:[u.a],resolve:{config:f.o},runGuardsAndResolvers:"always",data:{title:"Feriados"}},{path:"new",component:h,canActivate:[u.a],resolve:{config:f.o},runGuardsAndResolvers:"always",data:{title:"Inclus\xe3o de Feriado",modal:!0}},{path:":id/edit",component:h,canActivate:[u.a],resolve:{config:f.o},runGuardsAndResolvers:"always",data:{title:"Edi\xe7\xe3o de Feriado",modal:!0}},{path:":id/consult",component:h,canActivate:[u.a],resolve:{config:f.o},runGuardsAndResolvers:"always",data:{title:"Consulta a Feriado",modal:!0}}];class D{}(s=D).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[F.Bz.forChild(X),F.Bz]});var d,W=a(58568),w=a(72133);class N{}(d=N).\u0275fac=function(i){return new(i||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[b.ez,W.K,w.UX,D]})}}]);