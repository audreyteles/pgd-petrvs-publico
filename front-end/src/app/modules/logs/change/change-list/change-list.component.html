<grid [dao]="dao" [title]="isModal ? '' : title" [orderBy]="orderBy" [groupBy]="groupBy" [join]="join"
    [selectable]="selectable" (select)="onSelect($event)">
    <toolbar *ngIf="!selectable"></toolbar>
    <filter [form]="filter" [where]="filterWhere" [submit]="filterSubmit.bind(this)" [clear]="filterClear.bind(this)" [collapseChange]="filterCollapseChange.bind(this)" [collapsed]="!selectable && filterCollapsed">
        <div class="row">
            <input-search #responsavel [size]="6" label="Responsável pelo registro" controlName="responsavel_id" [control]="filter!.controls.responsavel_id" [dao]="usuarioDao" [selectRoute]="{route: ['configuracoes', 'usuario']}"></input-search>
            <input-datetime [size]="3" datetime label="Início" controlName="data_inicio" [control]="filter!.controls.data_inicio" labelInfo="Início dos registros"></input-datetime>
            <input-datetime [size]="3" datetime label="Fim" controlName="data_fim" [control]="filter!.controls.data_fim" labelInfo="Fim dos registros"></input-datetime>
        </div>
        <div class="row">
            <input-select #selectTabelas label="Tabela" [size]="5" controlName="tabela" [control]="filter!.controls.tabela" [items]="tabelas" (change)="onTabelaChange($event)"></input-select>
            <input-search *ngIf="entity" [size]="5" [label]="entity.label" controlName="row_id" [control]="filter!.controls.row_id" [dao]="entity.dao" [selectRoute]="entity.selectRoute"></input-search>
            <input-text *ngIf="!entity" [size]="5" label="ID" controlName="row_id" [control]="filter!.controls.row_id"></input-text>
            <input-select [size]="2" label="Tipo" icon="bi bi-arrow-up-right-circle" controlName="tipo" [control]="filter!.controls.tipo" [items]="lookup.TIPO_LOG_CHANGE"></input-select>
        </div>
        <div class="row">            
        </div>
    </filter>
    <columns>
        <column title="Responsável" [template]="columnResponsavel">
            <ng-template let-row="row" #columnResponsavel>
                <span> {{row.usuario.apelido}}</span>
            </ng-template>
        </column>
        <column title="Criado em" field="date_time" [template]="columnDataCriacao">
            <ng-template let-row="row" #columnDataCriacao>
                <span>{{ util.getDateTimeFormatted(row.date_time) }}</span>
            </ng-template>
        </column>
        <column title="Tabela" field="table_name"></column>
        <column title="ID" field="row_id"></column>
        <column title="Tipo de Operação" field="type"></column>
        <column *ngIf="!selectable" type="options" [onEdit]="edit" [options]="options"></column>
    </columns>
    <pagination [rows]="rowsLimit"></pagination>
</grid>
