<editable-form [form]="form!" [disabled]="formDisabled" [title]="isModal ? '' : title" initialFocus="entregas" (submit)="onSaveData()" (cancel)="onCancel()">
    <div>
        <div class="row">
            <input-search #unidade [size]="4" [disabled]="entity?.id ? 'disabled' : undefined" controlName="unidade_id" [dao]="unidadeDao" (change)="onUnidadeChange()" required></input-search>
            <input-search #programa [size]="4" [disabled]="entity?.id ? 'disabled' : undefined" controlName="programa_id" [dao]="programaDao" (change)="onProgramaChange()" required></input-search>
            <input-datetime date [size]="2" label="Início" controlName="data_inicio" [labelInfo]="'Início ' + lex.translate('Planejamento Institucional')" (change)="onDataChange()" required></input-datetime>
            <input-datetime date [size]="2" #data_fim label="Fim" controlName="data_fim" [labelInfo]="'Fim ' + lex.translate('Planejamento Institucional')" (change)="onDataChange()" required></input-datetime>
        </div>
        <div class="row">
            <input-text #nome [size]="4" label="Nome" controlName="nome" [attr.maxlength]=250 required></input-text>
            <input-search #planejamento [size]="4" [emptyValue]="null" controlName="planejamento_id" label="Planejamento Institucional" [dao]="planejamentoInstitucionalDao"></input-search>
            <input-search #cadeiaValor [size]="4" [emptyValue]="null" controlName="cadeia_valor_id" label="Cadeia de Valor" [dao]="cadeiaValorDao"></input-search>
        </div>
        <separator title="Entregas"></separator>
        <plano-entrega-list-entrega #entregas noPersist [control]="form!.controls.entregas" [planejamentoId]="form!.controls.planejamento_id.value" [cadeiaValorId]="form!.controls.cadeia_valor_id.value" [unidadeId]="form!.controls.unidade_id.value" ></plano-entrega-list-entrega>
    </div>
</editable-form>