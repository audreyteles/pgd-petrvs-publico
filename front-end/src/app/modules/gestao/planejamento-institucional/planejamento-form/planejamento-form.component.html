<editable-form [form]="form!" [disabled]="formDisabled" [title]="isModal ? '' : title" (submit)="onSaveData()" (cancel)="onCancel()">
    <tabs display right>
        <tab key="DADOS" label="Dados">
            <div class="row">
                <div class="row">
                    <input-text [size]="12" label="Nome do Planejamento Institucional" icon="bi bi-textarea-t" controlName="nome" [control]="form!.controls.nome"></input-text>
                </div>
                <div class="row">
                    <input-search [size]="6" label="Unidade Executora" icon="fab fa-unity" [disabled]="(auth.hasPermissionTo('MOD_PLAN_INST_INCL_UNEX_PROPRIA') || auth.hasPermissionTo('MOD_PLAN_INST_INCL_UNEX_SUBORD') || auth.hasPermissionTo('MOD_PLAN_INST_INCL_UNEX_QUALQUER')) ? undefined : 'true'" controlName="unidade_id" [control]="form!.controls.unidade_id" [dao]="unidadeDao" 
                                  [selectRoute]="{route: ['configuracoes', 'unidade'], params: {filter: {unidades_planejamento: true, subordinadas: (auth.hasPermissionTo('MOD_PLAN_INST_INCL_UNEX_SUBORD') || auth.hasPermissionTo('MOD_PLAN_INST_INCL_UNEX_QUALQUER')) ? true : false}}}" [where]="[['unidades_planejamento','==',true],['subordinadas','==',auth.hasPermissionTo('MOD_PLAN_INST_INCL_UNEX_SUBORD') || auth.hasPermissionTo('MOD_PLAN_INST_INCL_UNEX_QUALQUER') ? true : false]]" (change)="onUnidadeChange($event)"></input-search>
                    <input-datetime date [size]="3" label="Início" icon="bi bi-calendar-date" controlName="inicio" [control]="form!.controls.inicio" labelInfo="Início do Planejamento Institucional"></input-datetime>
                    <input-datetime date [size]="3" label="Fim" icon="bi bi-calendar-date" controlName="fim" [control]="form!.controls.fim" labelInfo="Fim do Planejamento Institucional"></input-datetime>
                </div>
                <div *ngIf="form!.controls.unidade_id.value" class="row">
                    <input-select icon="far fa-edit" label="Selecione o Planejamento da Unidade Instituidora vinculado" [items]="planejamentosUnidadeInstituidora" controlName="planejamento_superior_id" [control]="form!.controls.planejamento_superior_id" (select)="onPlanejamentoSelect($event)"></input-select>
                </div>                
                <div class="row">
                    <input-textarea [size]="6" label="Missão" [rows]="3" controlName="missao" [control]="form!.controls.missao"></input-textarea>
                    <input-textarea [size]="6" label="Visão" [rows]="3" controlName="visao" [control]="form!.controls.visao"></input-textarea>
                </div>
                <div class="row">
                    <input-multiselect [size]="12" label="Valores" controlName="valores" [addItemHandle]="addValorHandle.bind(this)">
                        <input-text label="Valor Institucional" icon="far fa-edit" controlName="valor_texto" [control]="form!.controls.valor_texto"></input-text>
                    </input-multiselect>        
                </div>
            </div>
        </tab>
        <tab key="OBJETIVOS" label="Objetivos">
            <planejamento-form-objetivo #objetivos [entity]="entity" noPersist></planejamento-form-objetivo>
        </tab>
    </tabs>
</editable-form>

