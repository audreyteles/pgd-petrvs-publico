<grid #grid [items]="items" [minHeight]="500" [form]="form!" [hasDelete]="true" editable [add]="adicionarIntegrante.bind(this)" [load]="carregarIntegrante.bind(this)" [remove]="removerIntegrante.bind(this)" [save]="salvarIntegrante.bind(this)">
    <span *ngIf="!isNoPersist"><strong>{{ 'Unidade: ' + (entity?.nome || "")}}</strong></span>
    <columns>
        <column [title]="lex.translate('Usuários')" [template]="columnUsuario" [editTemplate]="editUsuario">
            <ng-template let-row="row" #columnUsuario>
                <div class="d-flex">
                    <div class="ms-3">
                        <profile-picture [url]="row.usuario_url_foto || ''" [size]="40" [hint]="row.usuario_nome || ''"></profile-picture>
                    </div>
                    <div class="flex-fill ms-3">
                        <strong>{{row.usuario_nome || ""}}</strong><br>
                        <small>{{row.usuario_apelido || ""}}</small>
                    </div>
                </div>
            </ng-template>
            <ng-template let-row="row" #editUsuario>
                <input-search #usuario [disabled]="grid?.adding ? undefined : 'true'" [size]="12" label icon controlName="usuario_id" [dao]="usuarioDao"></input-search>
            </ng-template>
        </column>
        <column [title]="lex.translate('Atribuições')" [template]="columnAtribuicoes" [editTemplate]="editAtribuicoes">
            <ng-template let-row="row" #columnAtribuicoes>
                <div *ngFor="let atribuicao of row.atribuicoes">
                    <badge [color]="lookup.getColor(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')" [icon]="lookup.getIcon(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')" [label]="lookup.getValue(lookup.UNIDADE_INTEGRANTE_TIPO, atribuicao || '')"></badge><br>
                </div>
            </ng-template>
            <ng-template let-row="row" #editAtribuicoes>
                <input-multiselect controlName="atribuicoes" [size]="8" [addItemHandle]="addItemHandle.bind(this)" [deleteItemHandle]="deleteItemHandle.bind(this)">
                    <input-select [size]="12" label="" icon="fas fa-sign-out-alt" controlName="atribuicao" [items]="tiposAtribuicao"></input-select>
                </input-multiselect>
            </ng-template>
        </column>
        <column type="options"></column>
    </columns>
</grid>